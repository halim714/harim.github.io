./eslint-after-fix.json:[{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__mocks__\\@testing-library\\react.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__mocks__\\fileMock.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\hooks\\useAutoSave.test.js","messages":[{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":26,"column":10,"nodeType":"ArrowFunctionExpression","messageId":"noDisplayName","endLine":30,"endColumn":4},{"ruleId":"no-unused-vars","severity":1,"message":"'mockOnSaveStart' is assigned a value but never used.","line":34,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'mockOnSaveSuccess' is assigned a value but never used.","line":35,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'mockOnSaveError' is assigned a value but never used.","line":36,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { renderHook, act } from '@testing-library/react';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport useAutoSave from '../../hooks/useAutoSave';\r\n\r\n// useSaveDocument í›… ëª¨í‚¹\r\nconst mockMutateAsync = jest.fn();\r\n\r\njest.mock('../../hooks/useDocuments', () => ({\r\n  useSaveDocument: () => ({\r\n    mutateAsync: mockMutateAsync\r\n  })\r\n}));\r\n\r\n// íƒ€ì´ë¨¸ ëª¨í‚¹\r\njest.useFakeTimers();\r\n\r\n// QueryClient ë˜í¼ ìƒì„±\r\nconst createWrapper = () => {\r\n  const queryClient = new QueryClient({\r\n    defaultOptions: {\r\n      queries: { retry: false },\r\n      mutations: { retry: false }\r\n    }\r\n  });\r\n  \r\n  return ({ children }) => (\r\n    <QueryClientProvider client={queryClient}>\r\n      {children}\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n\r\ndescribe('useAutoSave', () => {\r\n  let mockOnSaveStart;\r\n  let mockOnSaveSuccess;\r\n  let mockOnSaveError;\r\n\r\n  beforeEach(() => {\r\n    // ëª¨í‚¹ëœ í•¨ìˆ˜ë“¤ ì´ˆê¸°í™”\r\n    mockMutateAsync.mockClear();\r\n    \r\n    mockOnSaveStart = jest.fn();\r\n    mockOnSaveSuccess = jest.fn();\r\n    mockOnSaveError = jest.fn();\r\n    \r\n    jest.clearAllTimers();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('ì´ˆê¸° ìƒíƒœ', () => {\r\n    test('ì´ˆê¸° ìƒíƒœê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ì•¼ í•¨', () => {\r\n      const { result } = renderHook(\r\n        () => useAutoSave({\r\n          document: null,\r\n          content: '',\r\n          title: '',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      expect(result.current.saveStatus).toBe('saved');\r\n      expect(result.current.hasUnsavedChanges).toBe(false);\r\n      expect(result.current.lastSaved).toBeNull();\r\n      expect(result.current.isAutoSaving).toBe(false);\r\n      expect(result.current.isManualSaving).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('ë³€ê²½ì‚¬í•­ ê°ì§€', () => {\r\n    test('ë‚´ìš© ë³€ê²½ ì‹œ unsaved ìƒíƒœê°€ ë˜ì–´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ì´ˆê¸° ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ content }) => useAutoSave({\r\n          document: testDocument,\r\n          content,\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: true\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { content: 'ì´ˆê¸° ë‚´ìš©' }\r\n        }\r\n      );\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(false);\r\n\r\n      // ë‚´ìš© ë³€ê²½\r\n      rerender({ content: 'ë³€ê²½ëœ ë‚´ìš©' });\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n      expect(result.current.saveStatus).toBe('pending');\r\n    });\r\n\r\n    test('ì œëª© ë³€ê²½ ì‹œ unsaved ìƒíƒœê°€ ë˜ì–´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'ì´ˆê¸° ì œëª©',\r\n        content: 'ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ title }) => useAutoSave({\r\n          document: testDocument,\r\n          content: 'ë‚´ìš©',\r\n          title,\r\n          enabled: true\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { title: 'ì´ˆê¸° ì œëª©' }\r\n        }\r\n      );\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(false);\r\n\r\n      // ì œëª© ë³€ê²½\r\n      rerender({ title: 'ë³€ê²½ëœ ì œëª©' });\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n      expect(result.current.saveStatus).toBe('pending');\r\n    });\r\n  });\r\n\r\n  describe('ìë™ ì €ì¥', () => {\r\n    test('ë³€ê²½ì‚¬í•­ ê°ì§€ê°€ ì •ìƒ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ì´ˆê¸° ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ content }) => useAutoSave({\r\n          document: testDocument,\r\n          content,\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: true,\r\n          interval: 3000\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { content: 'ì´ˆê¸° ë‚´ìš©' }\r\n        }\r\n      );\r\n\r\n      // ë‚´ìš© ë³€ê²½\r\n      rerender({ content: 'ë³€ê²½ëœ ë‚´ìš©' });\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n      expect(result.current.saveStatus).toBe('pending');\r\n    });\r\n\r\n    test('ìë™ ì €ì¥ì´ ë¹„í™œì„±í™”ë˜ë©´ ì €ì¥ë˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ì´ˆê¸° ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ content }) => useAutoSave({\r\n          document: testDocument,\r\n          content,\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: false, // ë¹„í™œì„±í™”\r\n          interval: 3000\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { content: 'ì´ˆê¸° ë‚´ìš©' }\r\n        }\r\n      );\r\n\r\n      // ë‚´ìš© ë³€ê²½\r\n      rerender({ content: 'ë³€ê²½ëœ ë‚´ìš©' });\r\n      // enabledê°€ falseì´ë¯€ë¡œ hasUnsavedChangesëŠ” ì—¬ì „íˆ trueê°€ ë˜ì§€ë§Œ ìë™ì €ì¥ì€ ì•ˆë¨\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n\r\n      // 3ì´ˆ ê²½ê³¼\r\n      act(() => {\r\n        jest.advanceTimersByTime(3000);\r\n      });\r\n\r\n      expect(mockMutateAsync).not.toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('ìˆ˜ë™ ì €ì¥', () => {\r\n    test('ìˆ˜ë™ ì €ì¥ í•¨ìˆ˜ê°€ ì¡´ì¬í•´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ë‚´ìš©'\r\n      };\r\n\r\n      const { result } = renderHook(\r\n        () => useAutoSave({\r\n          document: testDocument,\r\n          content: 'ë³€ê²½ëœ ë‚´ìš©',\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      expect(typeof result.current.manualSave).toBe('function');\r\n    });\r\n  });\r\n\r\n  describe('ì €ì¥ ìƒíƒœ ë©”ì‹œì§€', () => {\r\n    test('ì €ì¥ ìƒíƒœ ë©”ì‹œì§€ í•¨ìˆ˜ê°€ ì¡´ì¬í•´ì•¼ í•¨', () => {\r\n      const { result } = renderHook(\r\n        () => useAutoSave({\r\n          document: { id: 'test' },\r\n          content: 'ë‚´ìš©',\r\n          title: 'ì œëª©',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      expect(typeof result.current.getSaveStatusMessage).toBe('function');\r\n      expect(result.current.getSaveStatusMessage()).toBe('ì €ì¥ë¨');\r\n    });\r\n  });\r\n\r\n  describe('í˜ì´ì§€ ì´íƒˆ ê²½ê³ ', () => {\r\n    test('beforeunload ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ê´€ë ¨ ê¸°ëŠ¥ì´ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const { unmount } = renderHook(\r\n        () => useAutoSave({\r\n          document: { id: 'test' },\r\n          content: 'ë‚´ìš©',\r\n          title: 'ì œëª©',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      // ì»´í¬ë„ŒíŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë§ˆìš´íŠ¸ë˜ê³  ì–¸ë§ˆìš´íŠ¸ë˜ëŠ”ì§€ í™•ì¸\r\n      expect(() => unmount()).not.toThrow();\r\n    });\r\n  });\r\n}); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\hooks\\useKeyboardShortcuts.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\stores\\documentStore.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\utils\\errorHandler.test.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":11,"column":30,"nodeType":"MemberExpression","messageId":"unexpected","endLine":11,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":13,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":13,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":127,"column":14,"nodeType":"MemberExpression","messageId":"unexpected","endLine":127,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":150,"column":14,"nodeType":"MemberExpression","messageId":"unexpected","endLine":150,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":211,"column":14,"nodeType":"MemberExpression","messageId":"unexpected","endLine":211,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  ErrorTypes,\r\n  classifyError,\r\n  getErrorMessage,\r\n  logError,\r\n  isRetryableError,\r\n  isOfflineError\r\n} from '../../utils/errorHandler';\r\n\r\n// ì½˜ì†” ì—ëŸ¬ ëª¨í‚¹\r\nconst originalConsoleError = console.error;\r\nbeforeEach(() => {\r\n  console.error = jest.fn();\r\n});\r\n\r\nafterEach(() => {\r\n  console.error = originalConsoleError;\r\n});\r\n\r\ndescribe('ErrorHandler', () => {\r\n  describe('ErrorTypes', () => {\r\n    test('ëª¨ë“  ì—ëŸ¬ íƒ€ì…ì´ ì •ì˜ë˜ì–´ ìˆì–´ì•¼ í•¨', () => {\r\n      expect(ErrorTypes.NETWORK_ERROR).toBe('NETWORK_ERROR');\r\n      expect(ErrorTypes.SERVER_ERROR).toBe('SERVER_ERROR');\r\n      expect(ErrorTypes.NOT_FOUND).toBe('NOT_FOUND');\r\n      expect(ErrorTypes.VALIDATION_ERROR).toBe('VALIDATION_ERROR');\r\n      expect(ErrorTypes.UNKNOWN_ERROR).toBe('UNKNOWN_ERROR');\r\n    });\r\n  });\r\n\r\n  describe('classifyError', () => {\r\n    test('null/undefined ì—ëŸ¬ëŠ” UNKNOWN_ERRORë¡œ ë¶„ë¥˜ë˜ì–´ì•¼ í•¨', () => {\r\n      expect(classifyError(null)).toBe(ErrorTypes.UNKNOWN_ERROR);\r\n      expect(classifyError(undefined)).toBe(ErrorTypes.UNKNOWN_ERROR);\r\n    });\r\n\r\n    test('ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      expect(classifyError(networkError)).toBe(ErrorTypes.NETWORK_ERROR);\r\n    });\r\n\r\n    test('HTTP 404 ì—ëŸ¬ë¥¼ NOT_FOUNDë¡œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      expect(classifyError(notFoundError)).toBe(ErrorTypes.NOT_FOUND);\r\n    });\r\n\r\n    test('HTTP 4xx ì—ëŸ¬ë¥¼ VALIDATION_ERRORë¡œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const validationError = new Error('HTTP 400: Bad Request');\r\n      expect(classifyError(validationError)).toBe(ErrorTypes.VALIDATION_ERROR);\r\n      \r\n      const unauthorizedError = new Error('HTTP 401: Unauthorized');\r\n      expect(classifyError(unauthorizedError)).toBe(ErrorTypes.VALIDATION_ERROR);\r\n    });\r\n\r\n    test('HTTP 5xx ì—ëŸ¬ë¥¼ SERVER_ERRORë¡œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      expect(classifyError(serverError)).toBe(ErrorTypes.SERVER_ERROR);\r\n      \r\n      const badGatewayError = new Error('HTTP 502: Bad Gateway');\r\n      expect(classifyError(badGatewayError)).toBe(ErrorTypes.SERVER_ERROR);\r\n    });\r\n\r\n    test('íŠ¹ì • ë©”ì‹œì§€ íŒ¨í„´ì„ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');\r\n      expect(classifyError(notFoundError)).toBe(ErrorTypes.NOT_FOUND);\r\n    });\r\n\r\n    test('ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ëŠ” UNKNOWN_ERRORë¡œ ë¶„ë¥˜ë˜ì–´ì•¼ í•¨', () => {\r\n      const unknownError = new Error('Something went wrong');\r\n      expect(classifyError(unknownError)).toBe(ErrorTypes.UNKNOWN_ERROR);\r\n    });\r\n  });\r\n\r\n  describe('getErrorMessage', () => {\r\n    test('ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      const errorMessage = getErrorMessage(networkError);\r\n\r\n      expect(errorMessage.title).toBe('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜');\r\n      expect(errorMessage.message).toBe('ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');\r\n      expect(errorMessage.action).toBe('ë‹¤ì‹œ ì‹œë„');\r\n      expect(errorMessage.canRetry).toBe(true);\r\n      expect(errorMessage.originalError).toBe(networkError);\r\n      expect(errorMessage.timestamp).toBeDefined();\r\n    });\r\n\r\n    test('ì„œë²„ ì—ëŸ¬ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•¨', () => {\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      const errorMessage = getErrorMessage(serverError);\r\n\r\n      expect(errorMessage.title).toBe('ì„œë²„ ì˜¤ë¥˜');\r\n      expect(errorMessage.message).toBe('ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');\r\n      expect(errorMessage.canRetry).toBe(true);\r\n    });\r\n\r\n    test('NOT_FOUND ì—ëŸ¬ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      const errorMessage = getErrorMessage(notFoundError);\r\n\r\n      expect(errorMessage.title).toBe('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');\r\n      expect(errorMessage.message).toBe('ìš”ì²­í•œ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');\r\n      expect(errorMessage.canRetry).toBe(false);\r\n    });\r\n\r\n    test('ì»¨í…ìŠ¤íŠ¸ë³„ ë©”ì‹œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const error = new Error('HTTP 500: Internal Server Error');\r\n      \r\n      const saveErrorMessage = getErrorMessage(error, 'save');\r\n      expect(saveErrorMessage.message).toContain('ë¬¸ì„œ ì €ì¥ ì¤‘');\r\n      \r\n      const loadErrorMessage = getErrorMessage(error, 'load');\r\n      expect(loadErrorMessage.message).toContain('ë¬¸ì„œ ë¶ˆëŸ¬ì˜¤ê¸° ì¤‘');\r\n      \r\n      const deleteErrorMessage = getErrorMessage(error, 'delete');\r\n      expect(deleteErrorMessage.message).toContain('ë¬¸ì„œ ì‚­ì œ ì¤‘');\r\n    });\r\n  });\r\n\r\n  describe('logError', () => {\r\n    test('ê°œë°œ í™˜ê²½ì—ì„œ ì½˜ì†”ì— ì—ëŸ¬ë¥¼ ë¡œê¹…í•´ì•¼ í•¨', () => {\r\n      const originalEnv = process.env.NODE_ENV;\r\n      process.env.NODE_ENV = 'development';\r\n\r\n      const testError = new Error('í…ŒìŠ¤íŠ¸ ì—ëŸ¬');\r\n      const logData = logError(testError, 'test', { extra: 'info' });\r\n\r\n      expect(console.error).toHaveBeenCalledWith('ğŸš¨ Error logged:', expect.objectContaining({\r\n        title: expect.any(String),\r\n        message: expect.any(String),\r\n        context: 'test',\r\n        additionalInfo: { extra: 'info' },\r\n        userAgent: expect.any(String),\r\n        url: expect.any(String),\r\n        timestamp: expect.any(String)\r\n      }));\r\n\r\n      expect(logData.context).toBe('test');\r\n      expect(logData.additionalInfo).toEqual({ extra: 'info' });\r\n\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n\r\n    test('í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì½˜ì†” ë¡œê¹…ì„ í•˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const originalEnv = process.env.NODE_ENV;\r\n      process.env.NODE_ENV = 'production';\r\n\r\n      const testError = new Error('í…ŒìŠ¤íŠ¸ ì—ëŸ¬');\r\n      logError(testError);\r\n\r\n      expect(console.error).not.toHaveBeenCalled();\r\n\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n  });\r\n\r\n  describe('isRetryableError', () => {\r\n    test('ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      expect(isRetryableError(networkError)).toBe(true);\r\n\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      expect(isRetryableError(serverError)).toBe(true);\r\n\r\n      const unknownError = new Error('Something went wrong');\r\n      expect(isRetryableError(unknownError)).toBe(true);\r\n    });\r\n\r\n    test('ì¬ì‹œë„ ë¶ˆê°€ëŠ¥í•œ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      expect(isRetryableError(notFoundError)).toBe(false);\r\n\r\n      const validationError = new Error('HTTP 400: Bad Request');\r\n      expect(isRetryableError(validationError)).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('isOfflineError', () => {\r\n    test('ì˜¤í”„ë¼ì¸ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      expect(isOfflineError(networkError)).toBe(true);\r\n\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      expect(isOfflineError(serverError)).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('í†µí•© ì‹œë‚˜ë¦¬ì˜¤', () => {\r\n    test('ì „ì²´ ì—ëŸ¬ ì²˜ë¦¬ í”Œë¡œìš°ê°€ ì •ìƒ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const originalEnv = process.env.NODE_ENV;\r\n      process.env.NODE_ENV = 'development';\r\n\r\n      // 1. ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ë°œìƒ\r\n      const networkError = new TypeError('Failed to fetch');\r\n      \r\n      // 2. ì—ëŸ¬ ë¶„ë¥˜\r\n      const errorType = classifyError(networkError);\r\n      expect(errorType).toBe(ErrorTypes.NETWORK_ERROR);\r\n      \r\n      // 3. ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ ìƒì„±\r\n      const errorMessage = getErrorMessage(networkError, 'save');\r\n      expect(errorMessage.title).toBe('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜');\r\n      expect(errorMessage.message).toContain('ë¬¸ì„œ ì €ì¥ ì¤‘');\r\n      expect(errorMessage.canRetry).toBe(true);\r\n      \r\n      // 4. ì¬ì‹œë„ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸\r\n      expect(isRetryableError(networkError)).toBe(true);\r\n      expect(isOfflineError(networkError)).toBe(true);\r\n      \r\n      // 5. ì—ëŸ¬ ë¡œê¹…\r\n      const logData = logError(networkError, 'save', { documentId: 'test-123' });\r\n      expect(console.error).toHaveBeenCalled();\r\n      expect(logData.context).toBe('save');\r\n      expect(logData.additionalInfo.documentId).toBe('test-123');\r\n\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n  });\r\n}); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\aiUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\api\\aiService.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\config\\featureFlags.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\config\\queryClient.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useAutoSave.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'performAutoSave'. Either include it or remove the dependency array.","line":51,"column":6,"nodeType":"ArrayExpression","endLine":51,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [content, title, enabled, interval, performAutoSave]","fix":{"range":[1527,1562],"text":"[content, title, enabled, interval, performAutoSave]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createLogger } from '../utils/logger';\nconst logger = createLogger('useAutoSave');\nimport { useEffect, useRef, useCallback, useState } from 'react';\r\nimport { useSaveDocument } from './useDocuments';\r\n\r\nconst useAutoSave = ({\r\n  document,\r\n  content,\r\n  title,\r\n  enabled = true,\r\n  interval = 3000, // 3ì´ˆ\r\n  onSaveStart,\r\n  onSaveSuccess,\r\n  onSaveError\r\n}) => {\r\n  const [lastSaved, setLastSaved] = useState(null);\r\n  const [saveStatus, setSaveStatus] = useState('saved'); // 'saved', 'saving', 'pending', 'error'\r\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n  \r\n  const saveTimeoutRef = useRef(null);\r\n  const lastContentRef = useRef(content);\r\n  const lastTitleRef = useRef(title);\r\n  const isManualSaveRef = useRef(false);\r\n  \r\n  const saveMutation = useSaveDocument();\r\n\r\n  // ë³€ê²½ì‚¬í•­ ê°ì§€\r\n  useEffect(() => {\r\n    const contentChanged = content !== lastContentRef.current;\r\n    const titleChanged = title !== lastTitleRef.current;\r\n    \r\n    if (contentChanged || titleChanged) {\r\n      setHasUnsavedChanges(true);\r\n      setSaveStatus('pending');\r\n      \r\n      // ì´ì „ íƒ€ì´ë¨¸ ì·¨ì†Œ\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current);\r\n      }\r\n      \r\n      // ìë™ ì €ì¥ì´ í™œì„±í™”ë˜ì–´ ìˆê³  ìˆ˜ë™ ì €ì¥ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ íƒ€ì´ë¨¸ ì„¤ì •\r\n      if (enabled && !isManualSaveRef.current) {\r\n        saveTimeoutRef.current = setTimeout(() => {\r\n          performAutoSave();\r\n        }, interval);\r\n      }\r\n      \r\n      lastContentRef.current = content;\r\n      lastTitleRef.current = title;\r\n    }\r\n  }, [content, title, enabled, interval]);\r\n\r\n  // ìë™ ì €ì¥ ì‹¤í–‰\r\n  const performAutoSave = useCallback(async () => {\r\n    if (!document || !hasUnsavedChanges) return;\r\n    \r\n    try {\r\n      setSaveStatus('saving');\r\n      onSaveStart?.();\r\n      \r\n      const documentToSave = {\r\n        ...document,\r\n        content,\r\n        title,\r\n        updatedAt: new Date().toISOString()\r\n      };\r\n      \r\n      await saveMutation.mutateAsync(documentToSave);\r\n      \r\n      setHasUnsavedChanges(false);\r\n      setSaveStatus('saved');\r\n      setLastSaved(new Date());\r\n      onSaveSuccess?.();\r\n      \r\n    } catch (error) {\r\n      logger.error('ìë™ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      setSaveStatus('error');\r\n      onSaveError?.(error);\r\n    }\r\n  }, [document, content, title, hasUnsavedChanges, saveMutation, onSaveStart, onSaveSuccess, onSaveError]);\r\n\r\n  // ìˆ˜ë™ ì €ì¥\r\n  const manualSave = useCallback(async () => {\r\n    if (!document) return;\r\n    \r\n    // ìˆ˜ë™ ì €ì¥ í”Œë˜ê·¸ ì„¤ì •\r\n    isManualSaveRef.current = true;\r\n    \r\n    // ìë™ ì €ì¥ íƒ€ì´ë¨¸ ì·¨ì†Œ\r\n    if (saveTimeoutRef.current) {\r\n      clearTimeout(saveTimeoutRef.current);\r\n      saveTimeoutRef.current = null;\r\n    }\r\n    \r\n    try {\r\n      setSaveStatus('saving');\r\n      onSaveStart?.();\r\n      \r\n      const documentToSave = {\r\n        ...document,\r\n        content,\r\n        title,\r\n        updatedAt: new Date().toISOString()\r\n      };\r\n      \r\n      await saveMutation.mutateAsync(documentToSave);\r\n      \r\n      setHasUnsavedChanges(false);\r\n      setSaveStatus('saved');\r\n      setLastSaved(new Date());\r\n      onSaveSuccess?.();\r\n      \r\n    } catch (error) {\r\n      logger.error('ìˆ˜ë™ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      setSaveStatus('error');\r\n      onSaveError?.(error);\r\n    } finally {\r\n      // ìˆ˜ë™ ì €ì¥ í”Œë˜ê·¸ í•´ì œ\r\n      isManualSaveRef.current = false;\r\n    }\r\n  }, [document, content, title, saveMutation, onSaveStart, onSaveSuccess, onSaveError]);\r\n\r\n  // ì €ì¥ ìƒíƒœ ë©”ì‹œì§€ ìƒì„±\r\n  const getSaveStatusMessage = useCallback(() => {\r\n    switch (saveStatus) {\r\n      case 'saving':\r\n        return 'ì €ì¥ ì¤‘...';\r\n      case 'pending':\r\n        return 'ë³€ê²½ë¨';\r\n      case 'error':\r\n        return 'ì €ì¥ ì‹¤íŒ¨';\r\n      case 'saved':\r\n        if (lastSaved) {\r\n          const now = new Date();\r\n          const diffMs = now - lastSaved;\r\n          const diffMinutes = Math.floor(diffMs / 60000);\r\n          \r\n          if (diffMinutes < 1) {\r\n            return 'ë°©ê¸ˆ ì €ì¥ë¨';\r\n          } else if (diffMinutes < 60) {\r\n            return `${diffMinutes}ë¶„ ì „ ì €ì¥ë¨`;\r\n          } else {\r\n            return lastSaved.toLocaleTimeString('ko-KR', {\r\n              hour: '2-digit',\r\n              minute: '2-digit'\r\n            }) + ' ì €ì¥ë¨';\r\n          }\r\n        }\r\n        return 'ì €ì¥ë¨';\r\n      default:\r\n        return 'ì €ì¥ë¨';\r\n    }\r\n  }, [saveStatus, lastSaved]);\r\n\r\n  // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬\r\n  useEffect(() => {\r\n    return () => {\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // í˜ì´ì§€ ì´íƒˆ ì‹œ ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ ê²½ê³ \r\n  useEffect(() => {\r\n    const handleBeforeUnload = (event) => {\r\n      if (hasUnsavedChanges) {\r\n        event.preventDefault();\r\n        event.returnValue = 'ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?';\r\n        return event.returnValue;\r\n      }\r\n    };\r\n\r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    \r\n    return () => {\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n    };\r\n  }, [hasUnsavedChanges]);\r\n\r\n  return {\r\n    saveStatus,\r\n    hasUnsavedChanges,\r\n    lastSaved,\r\n    manualSave,\r\n    getSaveStatusMessage,\r\n    isAutoSaving: saveStatus === 'saving' && !isManualSaveRef.current,\r\n    isManualSaving: saveStatus === 'saving' && isManualSaveRef.current,\r\n  };\r\n};\r\n\r\nexport default useAutoSave; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useDocuments.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'queryClient' is assigned a value but never used.","line":127,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":127,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'variables' is defined but never used. Allowed unused args must match /^_/u.","line":284,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":284,"endColumn":32},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":284,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":284,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createLogger } from '../utils/logger';\nconst logger = createLogger('useDocuments');\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { queryKeys, handleQueryError, isOnline } from '../config/queryClient';\r\nimport { useDocumentStore } from '../stores';\r\nimport { MikiDatabase } from '../utils/database';\r\n\r\n// API í•¨ìˆ˜ë“¤\r\nconst documentAPI = {\r\n  // ì„œë²„ì—ì„œ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n  async fetchDocuments() {\r\n    try {\r\n      const response = await fetch('/api/posts');\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      return await response.json();\r\n    } catch (error) {\r\n      logger.error('ì„œë²„ì—ì„œ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ì„œë²„ì—ì„œ íŠ¹ì • ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°\r\n  async fetchDocument(id) {\r\n    try {\r\n      const response = await fetch(`/api/posts/${id}`);\r\n      if (!response.ok) {\r\n        if (response.status === 404) {\r\n          throw new Error('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\r\n        }\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      return await response.json();\r\n    } catch (error) {\r\n      logger.error(`ì„œë²„ì—ì„œ ë¬¸ì„œ ${id} ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ì„œë²„ì— ë¬¸ì„œ ì €ì¥\r\n  async saveDocument(document) {\r\n    try {\r\n      const method = document.id ? 'PUT' : 'POST';\r\n      const url = document.id ? `/api/posts/${document.id}` : '/api/posts';\r\n      \r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(document),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      logger.error('ì„œë²„ì— ë¬¸ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ì„œë²„ì—ì„œ ë¬¸ì„œ ì‚­ì œ\r\n  async deleteDocument(id) {\r\n    try {\r\n      const response = await fetch(`/api/posts/${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n      return { success: true, id };\r\n    } catch (error) {\r\n      logger.error(`ì„œë²„ì—ì„œ ë¬¸ì„œ ${id} ì‚­ì œ ì‹¤íŒ¨:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\n// IndexedDB í•¨ìˆ˜ë“¤\r\nconst localAPI = {\r\n  async getDocuments() {\r\n    const db = await MikiDatabase.getInstance();\r\n    return await db.documents.orderBy('updatedAt').reverse().toArray();\r\n  },\r\n\r\n  async getDocument(id) {\r\n    const db = await MikiDatabase.getInstance();\r\n    return await db.documents.get(id);\r\n  },\r\n\r\n  async saveDocument(document) {\r\n    const db = await MikiDatabase.getInstance();\r\n    const now = new Date().toISOString();\r\n    \r\n    const docToSave = {\r\n      ...document,\r\n      updatedAt: now,\r\n      syncStatus: 'pending', // ì„œë²„ ë™ê¸°í™” ëŒ€ê¸° ìƒíƒœ\r\n    };\r\n\r\n    if (document.id) {\r\n      await db.documents.put(docToSave);\r\n    } else {\r\n      const id = `doc-${Date.now()}`;\r\n      docToSave.id = id;\r\n      await db.documents.add(docToSave);\r\n    }\r\n\r\n    return docToSave;\r\n  },\r\n\r\n  async deleteDocument(id) {\r\n    const db = await MikiDatabase.getInstance();\r\n    await db.documents.delete(id);\r\n    return { success: true, id };\r\n  },\r\n};\r\n\r\n// 1. ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ í›…\r\nexport const useDocuments = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.documents.lists(),\r\n    queryFn: async () => {\r\n      // ì˜¨ë¼ì¸ ìƒíƒœì—ì„œëŠ” ì„œë²„ ë°ì´í„° ìš°ì„ \r\n      if (isOnline()) {\r\n        try {\r\n          const serverDocs = await documentAPI.fetchDocuments();\r\n          \r\n          // ì„œë²„ ë°ì´í„°ë¥¼ IndexedDBì— ìºì‹œ\r\n          const db = await MikiDatabase.getInstance();\r\n          for (const doc of serverDocs) {\r\n            await db.documents.put({\r\n              ...doc,\r\n              syncStatus: 'synced',\r\n            });\r\n          }\r\n          \r\n          return serverDocs;\r\n        } catch (error) {\r\n          logger.warn('ì„œë²„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨, ë¡œì»¬ ë°ì´í„° ì‚¬ìš©:', error);\r\n        }\r\n      }\r\n      \r\n      // ì˜¤í”„ë¼ì¸ì´ê±°ë‚˜ ì„œë²„ ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ë°ì´í„° ì‚¬ìš©\r\n      return await localAPI.getDocuments();\r\n    },\r\n    staleTime: 2 * 60 * 1000, // 2ë¶„\r\n    cacheTime: 10 * 60 * 1000, // 10ë¶„\r\n  });\r\n};\r\n\r\n// 2. íŠ¹ì • ë¬¸ì„œ ì¡°íšŒ í›…\r\nexport const useDocument = (id) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.documents.detail(id),\r\n    queryFn: async () => {\r\n      if (!id) return null;\r\n\r\n      // ì˜¨ë¼ì¸ ìƒíƒœì—ì„œëŠ” ì„œë²„ ë°ì´í„° ìš°ì„ \r\n      if (isOnline()) {\r\n        try {\r\n          const serverDoc = await documentAPI.fetchDocument(id);\r\n          \r\n          // ì„œë²„ ë°ì´í„°ë¥¼ IndexedDBì— ìºì‹œ\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.documents.put({\r\n            ...serverDoc,\r\n            syncStatus: 'synced',\r\n          });\r\n          \r\n          return serverDoc;\r\n        } catch (error) {\r\n          logger.warn(`ì„œë²„ì—ì„œ ë¬¸ì„œ ${id} ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨, ë¡œì»¬ ë°ì´í„° ì‚¬ìš©:`, error);\r\n        }\r\n      }\r\n      \r\n      // ì˜¤í”„ë¼ì¸ì´ê±°ë‚˜ ì„œë²„ ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ë°ì´í„° ì‚¬ìš©\r\n      return await localAPI.getDocument(id);\r\n    },\r\n    enabled: !!id,\r\n    staleTime: 5 * 60 * 1000, // 5ë¶„\r\n  });\r\n};\r\n\r\n// 3. ë¬¸ì„œ ì €ì¥ ë®¤í…Œì´ì…˜ (Optimistic UI)\r\nexport const useSaveDocument = () => {\r\n  const queryClient = useQueryClient();\r\n  const { updateDocument, addDocument } = useDocumentStore();\r\n\r\n  return useMutation({\r\n    mutationFn: async (document) => {\r\n      // 1. ë¡œì»¬ì— ì¦‰ì‹œ ì €ì¥ (Optimistic)\r\n      const localDoc = await localAPI.saveDocument(document);\r\n      \r\n      // 2. ì˜¨ë¼ì¸ ìƒíƒœì—ì„œë§Œ ì„œë²„ ë™ê¸°í™” ì‹œë„\r\n      if (isOnline()) {\r\n        try {\r\n          const serverDoc = await documentAPI.saveDocument(localDoc);\r\n          \r\n          // ì„œë²„ ì €ì¥ ì„±ê³µ ì‹œ ë™ê¸°í™” ìƒíƒœ ì—…ë°ì´íŠ¸\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.documents.put({\r\n            ...serverDoc,\r\n            syncStatus: 'synced',\r\n          });\r\n          \r\n          return serverDoc;\r\n        } catch (error) {\r\n          logger.warn('ì„œë²„ ì €ì¥ ì‹¤íŒ¨, ë¡œì»¬ì—ë§Œ ì €ì¥ë¨:', error);\r\n          \r\n          // ë™ê¸°í™” íì— ì¶”ê°€\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.syncQueue.add({\r\n            id: `sync-${Date.now()}`,\r\n            type: 'save',\r\n            documentId: localDoc.id,\r\n            data: localDoc,\r\n            status: 'pending',\r\n            createdAt: new Date().toISOString(),\r\n            retryCount: 0,\r\n          });\r\n          \r\n          throw error;\r\n        }\r\n      }\r\n      \r\n      return localDoc;\r\n    },\r\n\r\n    // Optimistic Update\r\n    onMutate: async (newDocument) => {\r\n      // ì§„í–‰ ì¤‘ì¸ ì¿¼ë¦¬ ì·¨ì†Œ\r\n      await queryClient.cancelQueries({ queryKey: queryKeys.documents.all });\r\n\r\n      // ì´ì „ ë°ì´í„° ë°±ì—…\r\n      const previousDocuments = queryClient.getQueryData(queryKeys.documents.lists());\r\n      const previousDocument = newDocument.id \r\n        ? queryClient.getQueryData(queryKeys.documents.detail(newDocument.id))\r\n        : null;\r\n\r\n      // Optimistic ì—…ë°ì´íŠ¸\r\n      if (newDocument.id) {\r\n        // ê¸°ì¡´ ë¬¸ì„œ ì—…ë°ì´íŠ¸\r\n        queryClient.setQueryData(\r\n          queryKeys.documents.detail(newDocument.id),\r\n          (old) => ({ ...old, ...newDocument })\r\n        );\r\n        \r\n        queryClient.setQueryData(\r\n          queryKeys.documents.lists(),\r\n          (old) => old?.map(doc => \r\n            doc.id === newDocument.id ? { ...doc, ...newDocument } : doc\r\n          ) || []\r\n        );\r\n        \r\n        // Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸\r\n        updateDocument(newDocument.id, newDocument);\r\n      } else {\r\n        // ìƒˆ ë¬¸ì„œ ì¶”ê°€\r\n        const tempId = `temp-${Date.now()}`;\r\n        const tempDoc = { ...newDocument, id: tempId };\r\n        \r\n        queryClient.setQueryData(\r\n          queryKeys.documents.lists(),\r\n          (old) => [tempDoc, ...(old || [])]\r\n        );\r\n        \r\n        // Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸\r\n        addDocument(tempDoc);\r\n      }\r\n\r\n      return { previousDocuments, previousDocument };\r\n    },\r\n\r\n    // ì„±ê³µ ì‹œ\r\n    onSuccess: (data, variables, context) => {\r\n      // ì¿¼ë¦¬ ë¬´íš¨í™”í•˜ì—¬ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n      \r\n      logger.info('âœ… ë¬¸ì„œ ì €ì¥ ì„±ê³µ:', data.id);\r\n    },\r\n\r\n    // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±\r\n    onError: (error, variables, context) => {\r\n      const errorInfo = handleQueryError(error, 'ë¬¸ì„œ ì €ì¥');\r\n      \r\n      // ì´ì „ ìƒíƒœë¡œ ë¡¤ë°±\r\n      if (context?.previousDocuments) {\r\n        queryClient.setQueryData(queryKeys.documents.lists(), context.previousDocuments);\r\n      }\r\n      \r\n      if (context?.previousDocument && variables.id) {\r\n        queryClient.setQueryData(\r\n          queryKeys.documents.detail(variables.id),\r\n          context.previousDocument\r\n        );\r\n      }\r\n\r\n      logger.error('âŒ ë¬¸ì„œ ì €ì¥ ì‹¤íŒ¨:', errorInfo.message);\r\n      \r\n      // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ (í† ìŠ¤íŠ¸ ë“±)\r\n      // ì´ ë¶€ë¶„ì€ ì‹¤ì œ ì•Œë¦¼ ì‹œìŠ¤í…œê³¼ ì—°ê²°\r\n    },\r\n\r\n    // ì™„ë£Œ ì‹œ (ì„±ê³µ/ì‹¤íŒ¨ ë¬´ê´€)\r\n    onSettled: () => {\r\n      // ê´€ë ¨ ì¿¼ë¦¬ ë¦¬íŒ¨ì¹˜\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n    },\r\n  });\r\n};\r\n\r\n// 4. ë¬¸ì„œ ì‚­ì œ ë®¤í…Œì´ì…˜ (Optimistic UI)\r\nexport const useDeleteDocument = () => {\r\n  const queryClient = useQueryClient();\r\n  const { deleteDocument } = useDocumentStore();\r\n\r\n  return useMutation({\r\n    mutationFn: async (id) => {\r\n      // 1. ë¡œì»¬ì—ì„œ ì¦‰ì‹œ ì‚­ì œ (Optimistic)\r\n      const localResult = await localAPI.deleteDocument(id);\r\n      \r\n      // 2. ì˜¨ë¼ì¸ ìƒíƒœì—ì„œë§Œ ì„œë²„ ë™ê¸°í™” ì‹œë„\r\n      if (isOnline()) {\r\n        try {\r\n          return await documentAPI.deleteDocument(id);\r\n        } catch (error) {\r\n          logger.warn('ì„œë²„ ì‚­ì œ ì‹¤íŒ¨, ë¡œì»¬ì—ë§Œ ì‚­ì œë¨:', error);\r\n          \r\n          // ë™ê¸°í™” íì— ì¶”ê°€\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.syncQueue.add({\r\n            id: `sync-${Date.now()}`,\r\n            type: 'delete',\r\n            documentId: id,\r\n            status: 'pending',\r\n            createdAt: new Date().toISOString(),\r\n            retryCount: 0,\r\n          });\r\n          \r\n          throw error;\r\n        }\r\n      }\r\n      \r\n      return localResult;\r\n    },\r\n\r\n    // Optimistic Update\r\n    onMutate: async (id) => {\r\n      await queryClient.cancelQueries({ queryKey: queryKeys.documents.all });\r\n\r\n      // ì´ì „ ë°ì´í„° ë°±ì—…\r\n      const previousDocuments = queryClient.getQueryData(queryKeys.documents.lists());\r\n      const previousDocument = queryClient.getQueryData(queryKeys.documents.detail(id));\r\n\r\n      // Optimistic ì‚­ì œ\r\n      queryClient.setQueryData(\r\n        queryKeys.documents.lists(),\r\n        (old) => old?.filter(doc => doc.id !== id) || []\r\n      );\r\n      \r\n      queryClient.removeQueries({ queryKey: queryKeys.documents.detail(id) });\r\n      \r\n      // Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸\r\n      deleteDocument(id);\r\n\r\n      return { previousDocuments, previousDocument };\r\n    },\r\n\r\n    onSuccess: (data, id) => {\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n      logger.info('âœ… ë¬¸ì„œ ì‚­ì œ ì„±ê³µ:', id);\r\n    },\r\n\r\n    onError: (error, id, context) => {\r\n      const errorInfo = handleQueryError(error, 'ë¬¸ì„œ ì‚­ì œ');\r\n      \r\n      // ë¡¤ë°±\r\n      if (context?.previousDocuments) {\r\n        queryClient.setQueryData(queryKeys.documents.lists(), context.previousDocuments);\r\n      }\r\n      \r\n      if (context?.previousDocument) {\r\n        queryClient.setQueryData(queryKeys.documents.detail(id), context.previousDocument);\r\n      }\r\n\r\n      logger.error('âŒ ë¬¸ì„œ ì‚­ì œ ì‹¤íŒ¨:', errorInfo.message);\r\n    },\r\n\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n    },\r\n  });\r\n};\r\n\r\n// 5. ë¬¸ì„œ ê²€ìƒ‰ í›…\r\nexport const useSearchDocuments = (query) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.documents.search(query),\r\n    queryFn: async () => {\r\n      if (!query || query.trim().length < 2) {\r\n        return [];\r\n      }\r\n\r\n      // ë¡œì»¬ ê²€ìƒ‰ (IndexedDB)\r\n      const db = await MikiDatabase.getInstance();\r\n      const allDocs = await db.documents.toArray();\r\n      \r\n      const searchTerm = query.toLowerCase();\r\n      return allDocs.filter(doc => \r\n        doc.title?.toLowerCase().includes(searchTerm) ||\r\n        doc.content?.toLowerCase().includes(searchTerm)\r\n      );\r\n    },\r\n    enabled: !!query && query.trim().length >= 2,\r\n    staleTime: 30 * 1000, // 30ì´ˆ\r\n  });\r\n};\r\n\r\n// 6. ë™ê¸°í™” ìƒíƒœ í›…\r\nexport const useSyncStatus = () => {\r\n  return useQuery({\r\n    queryKey: queryKeys.sync.status(),\r\n    queryFn: async () => {\r\n      const db = await MikiDatabase.getInstance();\r\n      const pendingItems = await db.syncQueue\r\n        .where('status')\r\n        .equals('pending')\r\n        .toArray();\r\n      \r\n      return {\r\n        hasPendingSync: pendingItems.length > 0,\r\n        pendingCount: pendingItems.length,\r\n        isOnline: isOnline(),\r\n      };\r\n    },\r\n    refetchInterval: 5000, // 5ì´ˆë§ˆë‹¤ ì²´í¬\r\n  });\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useKeyboardShortcuts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useResponsiveLayout.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkScreenSize'. Either include it or remove the dependency array.","line":34,"column":6,"nodeType":"ArrayExpression","endLine":34,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [checkScreenSize, isMobile]","fix":{"range":[981,991],"text":"[checkScreenSize, isMobile]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\n\r\nconst useResponsiveLayout = () => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [isTablet, setIsTablet] = useState(false);\r\n  const [activeMobilePanel, setActiveMobilePanel] = useState('list');\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  // í™”ë©´ í¬ê¸° ê°ì§€ í•¨ìˆ˜\r\n  const checkScreenSize = () => {\r\n    const width = window.innerWidth;\r\n    const newIsMobile = width <= 768;\r\n    const newIsTablet = width > 768 && width <= 1024;\r\n    \r\n    setIsMobile(newIsMobile);\r\n    setIsTablet(newIsTablet);\r\n    \r\n    // ëª¨ë°”ì¼ì—ì„œ ë°ìŠ¤í¬í†±ìœ¼ë¡œ ì „í™˜ ì‹œ í™œì„± íŒ¨ë„ì„ ì—ë””í„°ë¡œ ì„¤ì •\r\n    if (!newIsMobile && isMobile) {\r\n      setActiveMobilePanel('editor');\r\n    }\r\n  };\r\n\r\n  // í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€\r\n  useEffect(() => {\r\n    checkScreenSize();\r\n    \r\n    const handleResize = () => {\r\n      checkScreenSize();\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [isMobile]);\r\n\r\n  // ì „ì²´í™”ë©´ í† ê¸€\r\n  const toggleFullscreen = () => {\r\n    setIsFullscreen(prev => !prev);\r\n  };\r\n\r\n  // ëª¨ë°”ì¼ íŒ¨ë„ ì „í™˜\r\n  const switchMobilePanel = (panel) => {\r\n    if (isMobile) {\r\n      setActiveMobilePanel(panel);\r\n    }\r\n  };\r\n\r\n  // ì—ë””í„° íŒ¨ë„ í´ë˜ìŠ¤ ê³„ì‚°\r\n  const getEditorPanelClass = () => {\r\n    if (isFullscreen) {\r\n      return \"bg-white rounded shadow flex flex-col h-full\";\r\n    }\r\n    return `bg-white rounded shadow flex flex-col ${\r\n      isMobile ? (activeMobilePanel === 'editor' ? 'block' : 'hidden') + ' flex-grow' : 'flex-1 mx-2'\r\n    }`;\r\n  };\r\n\r\n  // ë ˆì´ì•„ì›ƒ ì •ë³´ ë°˜í™˜\r\n  return {\r\n    isMobile,\r\n    isTablet,\r\n    isFullscreen,\r\n    activeMobilePanel,\r\n    setActiveMobilePanel: switchMobilePanel,\r\n    toggleFullscreen,\r\n    editorPanelClass: getEditorPanelClass()\r\n  };\r\n};\r\n\r\nexport default useResponsiveLayout; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\setupTests.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\stores\\index.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'get' is defined but never used. Allowed unused args must match /^_/u.","line":121,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":121,"endColumn":32},{"ruleId":"no-unused-vars","severity":1,"message":"'get' is defined but never used. Allowed unused args must match /^_/u.","line":167,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":167,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createLogger } from '../utils/logger';\nconst logger = createLogger('index');\nimport { create } from 'zustand';\r\nimport { immer } from 'zustand/middleware/immer';\r\nimport { subscribeWithSelector } from 'zustand/middleware';\r\nimport { db } from '../utils/database';\r\n\r\n// Document slice\r\nconst createDocumentSlice = (set, get) => ({\r\n  // State\r\n  documents: {},\r\n  currentDocumentId: null,\r\n  isLoading: false,\r\n  saveStatus: 'ì €ì¥ë¨',\r\n  serverSaveStatus: 'ì €ì¥ë¨',\r\n  isSaving: false,\r\n  \r\n  // Document CRUD actions\r\n  setCurrentDocument: (id) => set((state) => {\r\n    state.currentDocumentId = id;\r\n  }),\r\n  \r\n  addDocument: (doc) => set((state) => {\r\n    state.documents[doc.id] = doc;\r\n  }),\r\n  \r\n  updateDocument: (id, updates) => set((state) => {\r\n    if (state.documents[id]) {\r\n      Object.assign(state.documents[id], updates, {\r\n        updatedAt: new Date().toISOString()\r\n      });\r\n    }\r\n  }),\r\n  \r\n  deleteDocument: (id) => set((state) => {\r\n    delete state.documents[id];\r\n    if (state.currentDocumentId === id) {\r\n      state.currentDocumentId = null;\r\n    }\r\n  }),\r\n  \r\n  // Title management with flags\r\n  setTitle: (id, title, isUserEdit = false) => set((state) => {\r\n    if (state.documents[id]) {\r\n      state.documents[id].title = title;\r\n      state.documents[id].isUserEditedTitle = isUserEdit;\r\n      state.documents[id].isAutoSyncedTitle = !isUserEdit;\r\n      state.documents[id].updatedAt = new Date().toISOString();\r\n    }\r\n  }),\r\n  \r\n  setContent: (id, content) => set((state) => {\r\n    if (state.documents[id]) {\r\n      state.documents[id].content = content;\r\n      state.documents[id].updatedAt = new Date().toISOString();\r\n      \r\n      // Auto-extract title if not user-edited\r\n      if (!state.documents[id].isUserEditedTitle) {\r\n        const extractedTitle = extractTitleFromContent(content);\r\n        if (extractedTitle && extractedTitle !== state.documents[id].title) {\r\n          state.documents[id].title = extractedTitle;\r\n          state.documents[id].isAutoSyncedTitle = true;\r\n        }\r\n      }\r\n    }\r\n  }),\r\n  \r\n  // Save status management\r\n  setSaveStatus: (status) => set((state) => {\r\n    state.saveStatus = status;\r\n  }),\r\n  \r\n  setServerSaveStatus: (status) => set((state) => {\r\n    state.serverSaveStatus = status;\r\n  }),\r\n  \r\n  setIsSaving: (saving) => set((state) => {\r\n    state.isSaving = saving;\r\n  }),\r\n  \r\n  // Async actions\r\n  loadDocuments: async () => {\r\n    set((state) => { state.isLoading = true; });\r\n    try {\r\n      const docs = await db.documents.toArray();\r\n      set((state) => {\r\n        state.documents = {};\r\n        docs.forEach(doc => {\r\n          state.documents[doc.id] = doc;\r\n        });\r\n        state.isLoading = false;\r\n      });\r\n    } catch (error) {\r\n      logger.error('ë¬¸ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\r\n      set((state) => { state.isLoading = false; });\r\n    }\r\n  },\r\n  \r\n  saveDocument: async (id) => {\r\n    const doc = get().documents[id];\r\n    if (!doc) return;\r\n    \r\n    set((state) => { state.isSaving = true; });\r\n    try {\r\n      await db.documents.put(doc);\r\n      set((state) => { \r\n        state.saveStatus = 'ì €ì¥ë¨';\r\n        state.isSaving = false;\r\n      });\r\n    } catch (error) {\r\n      logger.error('ë¬¸ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      set((state) => { \r\n        state.saveStatus = 'ì €ì¥ ì‹¤íŒ¨';\r\n        state.isSaving = false;\r\n      });\r\n    }\r\n  }\r\n});\r\n\r\n// UI slice\r\nconst createUISlice = (set, get) => ({\r\n  // State\r\n  isFullscreen: false,\r\n  searchQuery: '',\r\n  windowWidth: typeof window !== 'undefined' ? window.innerWidth : 0,\r\n  isMobile: false,\r\n  isTablet: false,\r\n  activeMobilePanel: 'editor',\r\n  message: { type: '', text: '' },\r\n  messageVisible: false,\r\n  \r\n  // Actions\r\n  setFullscreen: (fullscreen) => set((state) => {\r\n    state.isFullscreen = fullscreen;\r\n  }),\r\n  \r\n  setSearchQuery: (query) => set((state) => {\r\n    state.searchQuery = query;\r\n  }),\r\n  \r\n  setWindowDimensions: (width) => set((state) => {\r\n    state.windowWidth = width;\r\n    state.isMobile = width < 768;\r\n    state.isTablet = width >= 768 && width < 1024;\r\n  }),\r\n  \r\n  setActiveMobilePanel: (panel) => set((state) => {\r\n    state.activeMobilePanel = panel;\r\n    try {\r\n      localStorage.setItem('miki_active_mobile_panel', panel);\r\n    } catch (e) {\r\n      logger.warn('íŒ¨ë„ ìƒíƒœ ì €ì¥ ì‹¤íŒ¨:', e);\r\n    }\r\n  }),\r\n  \r\n  showMessage: (type, text) => set((state) => {\r\n    state.message = { type, text };\r\n    state.messageVisible = true;\r\n  }),\r\n  \r\n  hideMessage: () => set((state) => {\r\n    state.messageVisible = false;\r\n  })\r\n});\r\n\r\n// Editor context slice\r\nconst createEditorSlice = (set, get) => ({\r\n  // State\r\n  editorContext: {\r\n    fullContent: '',\r\n    selection: null\r\n  },\r\n  \r\n  // Actions\r\n  setEditorContext: (context) => set((state) => {\r\n    state.editorContext = context;\r\n  })\r\n});\r\n\r\n// Helper function for title extraction\r\nconst extractTitleFromContent = (content) => {\r\n  if (!content || typeof content !== 'string') return '';\r\n  \r\n  const lines = content.split('\\n');\r\n  for (const line of lines) {\r\n    const trimmed = line.trim();\r\n    if (trimmed && !trimmed.startsWith('#')) {\r\n      // Remove markdown formatting\r\n      return trimmed\r\n        .replace(/\\*\\*(.*?)\\*\\*/g, '$1')\r\n        .replace(/\\*(.*?)\\*/g, '$1')\r\n        .replace(/`(.*?)`/g, '$1')\r\n        .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, '$1')\r\n        .replace(/!\\[([^\\]]*)\\]\\([^)]+\\)/g, '$1')\r\n        .substring(0, 50);\r\n    }\r\n  }\r\n  return '';\r\n};\r\n\r\n// Create the main store\r\nexport const useStore = create(\r\n  subscribeWithSelector(\r\n    immer((...a) => ({\r\n      ...createDocumentSlice(...a),\r\n      ...createUISlice(...a),\r\n      ...createEditorSlice(...a),\r\n      \r\n      // Reset method for testing\r\n      reset: () => a[0]((state) => {\r\n        // Reset document slice\r\n        state.documents = {};\r\n        state.currentDocumentId = null;\r\n        state.isLoading = false;\r\n        state.saveStatus = 'ì €ì¥ë¨';\r\n        state.serverSaveStatus = 'ì €ì¥ë¨';\r\n        state.isSaving = false;\r\n        \r\n        // Reset UI slice\r\n        state.isFullscreen = false;\r\n        state.searchQuery = '';\r\n        state.windowWidth = typeof window !== 'undefined' ? window.innerWidth : 0;\r\n        state.isMobile = false;\r\n        state.isTablet = false;\r\n        state.activeMobilePanel = 'editor';\r\n        state.message = { type: '', text: '' };\r\n        state.messageVisible = false;\r\n        \r\n        // Reset editor slice\r\n        state.editorContext = {\r\n          fullContent: '',\r\n          selection: null\r\n        };\r\n      })\r\n    }))\r\n  )\r\n);\r\n\r\n// Selectors for better performance\r\nexport const useCurrentDocument = () => useStore((state) => {\r\n  const currentId = state.currentDocumentId;\r\n  return currentId ? state.documents[currentId] : null;\r\n});\r\n\r\nexport const useDocumentList = () => useStore((state) => \r\n  Object.values(state.documents).sort((a, b) => \r\n    new Date(b.updatedAt) - new Date(a.updatedAt)\r\n  )\r\n);\r\n\r\nexport const useUIState = () => useStore((state) => ({\r\n  isFullscreen: state.isFullscreen,\r\n  searchQuery: state.searchQuery,\r\n  windowWidth: state.windowWidth,\r\n  isMobile: state.isMobile,\r\n  isTablet: state.isTablet,\r\n  activeMobilePanel: state.activeMobilePanel,\r\n  message: state.message,\r\n  messageVisible: state.messageVisible\r\n}));\r\n\r\n// Individual store hooks for App.jsx compatibility\r\nexport const useDocumentStore = () => useStore((state) => ({\r\n  documents: Object.values(state.documents),\r\n  currentDocument: state.currentDocumentId ? state.documents[state.currentDocumentId] : null,\r\n  setCurrentDocument: (doc) => state.setCurrentDocument(doc?.id || doc),\r\n  updateDocument: state.updateDocument,\r\n  addDocument: state.addDocument,\r\n  deleteDocument: state.deleteDocument,\r\n  loadDocuments: state.loadDocuments,\r\n}));\r\n\r\nexport const useUIStore = () => useStore((state) => ({\r\n  sidebarOpen: false, // ê¸°ë³¸ê°’\r\n  theme: 'light', // ê¸°ë³¸ê°’\r\n  isFullscreen: state.isFullscreen,\r\n  toggleSidebar: () => {}, // ê¸°ë³¸ êµ¬í˜„\r\n  setTheme: () => {}, // ê¸°ë³¸ êµ¬í˜„\r\n  toggleFullscreen: () => state.setFullscreen(!state.isFullscreen),\r\n}));\r\n\r\nexport const useEditorStore = () => useStore((state) => ({\r\n  content: state.currentDocumentId ? state.documents[state.currentDocumentId]?.content || '' : '',\r\n  title: state.currentDocumentId ? state.documents[state.currentDocumentId]?.title || '' : '',\r\n  isEditing: false, // ê¸°ë³¸ê°’\r\n  saveStatus: state.saveStatus,\r\n  setContent: (content) => {\r\n    if (state.currentDocumentId) {\r\n      state.setContent(state.currentDocumentId, content);\r\n    }\r\n  },\r\n  setTitle: (title) => {\r\n    if (state.currentDocumentId) {\r\n      state.setTitle(state.currentDocumentId, title, true);\r\n    }\r\n  },\r\n  setEditing: () => {}, // ê¸°ë³¸ êµ¬í˜„\r\n  setSaveStatus: state.setSaveStatus,\r\n})); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\conflict.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'operation' is defined but never used. Allowed unused args must match /^_/u.","line":60,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":60,"endColumn":42},{"ruleId":"no-unused-vars","severity":1,"message":"'operation' is defined but never used. Allowed unused args must match /^_/u.","line":336,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":336,"endColumn":49},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":339,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":339,"endColumn":58},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":340,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":340,"endColumn":60}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createLogger } from '../utils/logger';\nconst logger = createLogger('conflict');\n/**\r\n * ConflictResolver - ë¬¸ì„œ ì¶©ëŒ í•´ê²° ëª¨ë“ˆ\r\n */\r\nexport class ConflictResolver {\r\n  constructor(options = {}) {\r\n    this.strategy = options.strategy || 'last-write-wins';\r\n    this.autoResolve = options.autoResolve !== false;\r\n    this.userPromptTimeout = options.userPromptTimeout || 30000; // 30ì´ˆ\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ í•´ê²° ë©”ì¸ ë©”ì„œë“œ\r\n   */\r\n  async resolve(conflict) {\r\n    const { documentId, local, server, operation } = conflict;\r\n    \r\n    logger.info(`ğŸ”„ ì¶©ëŒ í•´ê²° ì‹œì‘: ${documentId} (${operation})`);\r\n    \r\n    try {\r\n      // 1. ìë™ í•´ê²° ê°€ëŠ¥í•œì§€ í™•ì¸\r\n      const autoResolution = this.tryAutoResolve(local, server, operation);\r\n      \r\n      if (autoResolution && this.autoResolve) {\r\n        logger.info(`âœ… ìë™ ì¶©ëŒ í•´ê²°: ${autoResolution.action}`);\r\n        return autoResolution;\r\n      }\r\n      \r\n      // 2. ì‚¬ìš©ì ê°œì… í•„ìš”\r\n      const userResolution = await this.promptUserResolution(conflict);\r\n      \r\n      if (userResolution) {\r\n        logger.info(`âœ… ì‚¬ìš©ì ì¶©ëŒ í•´ê²°: ${userResolution.action}`);\r\n        return userResolution;\r\n      }\r\n      \r\n      // 3. ê¸°ë³¸ ì „ëµ ì ìš©\r\n      const fallbackResolution = this.applyFallbackStrategy(local, server, operation);\r\n      logger.info(`âš ï¸ ê¸°ë³¸ ì „ëµ ì ìš©: ${fallbackResolution.action}`);\r\n      \r\n      return fallbackResolution;\r\n      \r\n    } catch (error) {\r\n      logger.error('âŒ ì¶©ëŒ í•´ê²° ì‹¤íŒ¨:', error);\r\n      \r\n      // ìµœí›„ì˜ ìˆ˜ë‹¨: ë¡œì»¬ ë°ì´í„° ìœ ì§€\r\n      return {\r\n        action: 'use_local',\r\n        data: local,\r\n        reason: 'ì¶©ëŒ í•´ê²° ì‹¤íŒ¨ë¡œ ì¸í•œ ë¡œì»¬ ë°ì´í„° ë³´ì¡´',\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ìë™ í•´ê²° ì‹œë„\r\n   */\r\n  tryAutoResolve(local, server, operation) {\r\n    // 1. ë‚´ìš©ì´ ë™ì¼í•œ ê²½ìš°\r\n    if (this.isContentEqual(local, server)) {\r\n      return {\r\n        action: 'no_conflict',\r\n        data: local,\r\n        reason: 'ë‚´ìš©ì´ ë™ì¼í•¨'\r\n      };\r\n    }\r\n    \r\n    // 2. í•œìª½ì´ ë¹„ì–´ìˆëŠ” ê²½ìš°\r\n    if (this.isEmpty(local) && !this.isEmpty(server)) {\r\n      return {\r\n        action: 'use_server',\r\n        data: server,\r\n        reason: 'ë¡œì»¬ ë°ì´í„°ê°€ ë¹„ì–´ìˆìŒ'\r\n      };\r\n    }\r\n    \r\n    if (!this.isEmpty(local) && this.isEmpty(server)) {\r\n      return {\r\n        action: 'use_local',\r\n        data: local,\r\n        reason: 'ì„œë²„ ë°ì´í„°ê°€ ë¹„ì–´ìˆìŒ'\r\n      };\r\n    }\r\n    \r\n    // 3. ë‹¨ìˆœ ì¶”ê°€ë§Œ ìˆëŠ” ê²½ìš° (í…ìŠ¤íŠ¸ ëì— ë‚´ìš© ì¶”ê°€)\r\n    const mergeResult = this.trySimpleMerge(local, server);\r\n    if (mergeResult) {\r\n      return {\r\n        action: 'merge',\r\n        data: mergeResult,\r\n        reason: 'ë‹¨ìˆœ ë³‘í•© ê°€ëŠ¥'\r\n      };\r\n    }\r\n    \r\n    // 4. íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ íŒë‹¨\r\n    if (local.updatedAt && server.updatedAt) {\r\n      const localTime = new Date(local.updatedAt);\r\n      const serverTime = new Date(server.updatedAt);\r\n      const timeDiff = Math.abs(localTime - serverTime);\r\n      \r\n      // ì‹œê°„ ì°¨ì´ê°€ 1ì´ˆ ë¯¸ë§Œì´ë©´ ë‚´ìš© ê¸¸ì´ë¡œ íŒë‹¨\r\n      if (timeDiff < 1000) {\r\n        const localLength = (local.content || '').length;\r\n        const serverLength = (server.content || '').length;\r\n        \r\n        if (localLength > serverLength) {\r\n          return {\r\n            action: 'use_local',\r\n            data: local,\r\n            reason: 'ë™ì‹œ í¸ì§‘ ì‹œ ë” ê¸´ ë‚´ìš© ì„ íƒ'\r\n          };\r\n        } else {\r\n          return {\r\n            action: 'use_server',\r\n            data: server,\r\n            reason: 'ë™ì‹œ í¸ì§‘ ì‹œ ë” ê¸´ ë‚´ìš© ì„ íƒ'\r\n          };\r\n        }\r\n      }\r\n    }\r\n    \r\n    return null; // ìë™ í•´ê²° ë¶ˆê°€\r\n  }\r\n  \r\n  /**\r\n   * ë‹¨ìˆœ ë³‘í•© ì‹œë„\r\n   */\r\n  trySimpleMerge(local, server) {\r\n    const localContent = local.content || '';\r\n    const serverContent = server.content || '';\r\n    \r\n    // í•œìª½ì´ ë‹¤ë¥¸ ìª½ì˜ ë¶€ë¶„ì§‘í•©ì¸ì§€ í™•ì¸\r\n    if (localContent.includes(serverContent)) {\r\n      return {\r\n        ...local,\r\n        content: localContent,\r\n        title: local.title || server.title\r\n      };\r\n    }\r\n    \r\n    if (serverContent.includes(localContent)) {\r\n      return {\r\n        ...server,\r\n        content: serverContent,\r\n        title: server.title || local.title\r\n      };\r\n    }\r\n    \r\n    // ê³µí†µ ì ‘ë‘ì‚¬/ì ‘ë¯¸ì‚¬ ì°¾ê¸°\r\n    const commonPrefix = this.findCommonPrefix(localContent, serverContent);\r\n    const commonSuffix = this.findCommonSuffix(localContent, serverContent);\r\n    \r\n    if (commonPrefix.length > 10 || commonSuffix.length > 10) {\r\n      // ê°„ë‹¨í•œ 3-way merge ì‹œë„\r\n      const localMiddle = localContent.slice(\r\n        commonPrefix.length, \r\n        localContent.length - commonSuffix.length\r\n      );\r\n      const serverMiddle = serverContent.slice(\r\n        commonPrefix.length, \r\n        serverContent.length - commonSuffix.length\r\n      );\r\n      \r\n      // ì¤‘ê°„ ë¶€ë¶„ì„ í•©ì¹˜ê¸°\r\n      const mergedContent = commonPrefix + localMiddle + '\\n' + serverMiddle + commonSuffix;\r\n      \r\n      return {\r\n        ...local,\r\n        content: mergedContent,\r\n        title: local.title || server.title,\r\n        mergedAt: new Date().toISOString()\r\n      };\r\n    }\r\n    \r\n    return null;\r\n  }\r\n  \r\n  /**\r\n   * ì‚¬ìš©ì í•´ê²° í”„ë¡¬í”„íŠ¸\r\n   */\r\n  async promptUserResolution(conflict) {\r\n    return new Promise((resolve) => {\r\n      const { documentId, local, server } = conflict;\r\n      \r\n      // ì¶©ëŒ í•´ê²° UI í‘œì‹œ\r\n      const modal = this.createConflictModal(documentId, local, server);\r\n      document.body.appendChild(modal);\r\n      \r\n      // íƒ€ì„ì•„ì›ƒ ì„¤ì •\r\n      const timeout = setTimeout(() => {\r\n        document.body.removeChild(modal);\r\n        resolve(null); // íƒ€ì„ì•„ì›ƒ ì‹œ null ë°˜í™˜\r\n      }, this.userPromptTimeout);\r\n      \r\n      // ì‚¬ìš©ì ì„ íƒ ì²˜ë¦¬\r\n      const handleChoice = (choice, data) => {\r\n        clearTimeout(timeout);\r\n        document.body.removeChild(modal);\r\n        resolve({\r\n          action: choice,\r\n          data: data,\r\n          reason: 'ì‚¬ìš©ì ì„ íƒ'\r\n        });\r\n      };\r\n      \r\n      // ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ\r\n      modal.querySelector('.use-local').onclick = () => \r\n        handleChoice('use_local', local);\r\n      \r\n      modal.querySelector('.use-server').onclick = () => \r\n        handleChoice('use_server', server);\r\n      \r\n      modal.querySelector('.merge-manual').onclick = () => {\r\n        const mergedData = this.showMergeEditor(local, server);\r\n        handleChoice('merge', mergedData);\r\n      };\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ í•´ê²° ëª¨ë‹¬ ìƒì„±\r\n   */\r\n  createConflictModal(documentId, local, server) {\r\n    const modal = document.createElement('div');\r\n    modal.className = 'conflict-resolution-modal';\r\n    modal.innerHTML = `\r\n      <div class=\"modal-overlay\">\r\n        <div class=\"modal-content\">\r\n          <h3>ğŸ“„ ë¬¸ì„œ ì¶©ëŒ ê°ì§€</h3>\r\n          <p>ë¬¸ì„œ \"${local.title || documentId}\"ì—ì„œ ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>\r\n          \r\n          <div class=\"conflict-comparison\">\r\n            <div class=\"local-version\">\r\n              <h4>ğŸ–¥ï¸ ë¡œì»¬ ë²„ì „</h4>\r\n              <div class=\"content-preview\">${this.truncateContent(local.content)}</div>\r\n              <small>ìˆ˜ì •: ${new Date(local.updatedAt).toLocaleString()}</small>\r\n            </div>\r\n            \r\n            <div class=\"server-version\">\r\n              <h4>â˜ï¸ ì„œë²„ ë²„ì „</h4>\r\n              <div class=\"content-preview\">${this.truncateContent(server.content)}</div>\r\n              <small>ìˆ˜ì •: ${new Date(server.updatedAt).toLocaleString()}</small>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"resolution-buttons\">\r\n            <button class=\"use-local\">ë¡œì»¬ ë²„ì „ ì‚¬ìš©</button>\r\n            <button class=\"use-server\">ì„œë²„ ë²„ì „ ì‚¬ìš©</button>\r\n            <button class=\"merge-manual\">ìˆ˜ë™ ë³‘í•©</button>\r\n          </div>\r\n          \r\n          <p class=\"timeout-warning\">30ì´ˆ í›„ ìë™ìœ¼ë¡œ ë¡œì»¬ ë²„ì „ì´ ì„ íƒë©ë‹ˆë‹¤.</p>\r\n        </div>\r\n      </div>\r\n    `;\r\n    \r\n    // ìŠ¤íƒ€ì¼ ì¶”ê°€\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .conflict-resolution-modal {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        z-index: 10000;\r\n      }\r\n      .modal-overlay {\r\n        background: rgba(0,0,0,0.7);\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n      }\r\n      .modal-content {\r\n        background: white;\r\n        padding: 20px;\r\n        border-radius: 8px;\r\n        max-width: 600px;\r\n        max-height: 80vh;\r\n        overflow-y: auto;\r\n      }\r\n      .conflict-comparison {\r\n        display: flex;\r\n        gap: 20px;\r\n        margin: 20px 0;\r\n      }\r\n      .local-version, .server-version {\r\n        flex: 1;\r\n        border: 1px solid #ddd;\r\n        padding: 10px;\r\n        border-radius: 4px;\r\n      }\r\n      .content-preview {\r\n        background: #f5f5f5;\r\n        padding: 10px;\r\n        border-radius: 4px;\r\n        font-family: monospace;\r\n        font-size: 12px;\r\n        max-height: 150px;\r\n        overflow-y: auto;\r\n        white-space: pre-wrap;\r\n      }\r\n      .resolution-buttons {\r\n        display: flex;\r\n        gap: 10px;\r\n        justify-content: center;\r\n        margin: 20px 0;\r\n      }\r\n      .resolution-buttons button {\r\n        padding: 10px 20px;\r\n        border: none;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n      }\r\n      .use-local { background: #4CAF50; color: white; }\r\n      .use-server { background: #2196F3; color: white; }\r\n      .merge-manual { background: #FF9800; color: white; }\r\n      .timeout-warning {\r\n        text-align: center;\r\n        color: #666;\r\n        font-size: 12px;\r\n      }\r\n    `;\r\n    modal.appendChild(style);\r\n    \r\n    return modal;\r\n  }\r\n  \r\n  /**\r\n   * ê¸°ë³¸ ì „ëµ ì ìš©\r\n   */\r\n  applyFallbackStrategy(local, server, operation) {\r\n    switch (this.strategy) {\r\n      case 'last-write-wins':\r\n        const localTime = new Date(local.updatedAt || 0);\r\n        const serverTime = new Date(server.updatedAt || 0);\r\n        \r\n        return localTime >= serverTime ? {\r\n          action: 'use_local',\r\n          data: local,\r\n          reason: 'Last-Write-Wins: ë¡œì»¬ì´ ë” ìµœì‹ '\r\n        } : {\r\n          action: 'use_server',\r\n          data: server,\r\n          reason: 'Last-Write-Wins: ì„œë²„ê°€ ë” ìµœì‹ '\r\n        };\r\n        \r\n      case 'prefer-local':\r\n        return {\r\n          action: 'use_local',\r\n          data: local,\r\n          reason: 'Prefer-Local ì „ëµ'\r\n        };\r\n        \r\n      case 'prefer-server':\r\n        return {\r\n          action: 'use_server',\r\n          data: server,\r\n          reason: 'Prefer-Server ì „ëµ'\r\n        };\r\n        \r\n      default:\r\n        return {\r\n          action: 'use_local',\r\n          data: local,\r\n          reason: 'ì•Œ ìˆ˜ ì—†ëŠ” ì „ëµìœ¼ë¡œ ì¸í•œ ë¡œì»¬ ì„ íƒ'\r\n        };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œë“¤\r\n   */\r\n  isContentEqual(local, server) {\r\n    return (local.content || '').trim() === (server.content || '').trim() &&\r\n           (local.title || '').trim() === (server.title || '').trim();\r\n  }\r\n  \r\n  isEmpty(data) {\r\n    return !data || \r\n           (!data.content || data.content.trim() === '') &&\r\n           (!data.title || data.title.trim() === '');\r\n  }\r\n  \r\n  findCommonPrefix(str1, str2) {\r\n    let i = 0;\r\n    while (i < str1.length && i < str2.length && str1[i] === str2[i]) {\r\n      i++;\r\n    }\r\n    return str1.slice(0, i);\r\n  }\r\n  \r\n  findCommonSuffix(str1, str2) {\r\n    let i = 0;\r\n    while (i < str1.length && i < str2.length && \r\n           str1[str1.length - 1 - i] === str2[str2.length - 1 - i]) {\r\n      i++;\r\n    }\r\n    return str1.slice(str1.length - i);\r\n  }\r\n  \r\n  truncateContent(content, maxLength = 200) {\r\n    if (!content) return '(ë‚´ìš© ì—†ìŒ)';\r\n    return content.length > maxLength ? \r\n           content.slice(0, maxLength) + '...' : \r\n           content;\r\n  }\r\n}\r\n\r\n/**\r\n * ì¶©ëŒ í•´ê²°ê¸° íŒ©í† ë¦¬\r\n */\r\nexport const createConflictResolver = (options = {}) => {\r\n  return new ConflictResolver(options);\r\n};\r\n\r\n/**\r\n * ê¸°ë³¸ ì¶©ëŒ í•´ê²°ê¸° ì¸ìŠ¤í„´ìŠ¤\r\n */\r\nexport const defaultConflictResolver = new ConflictResolver(); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\httpAdapter.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'options' is assigned a value but never used.","line":106,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":106,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createLogger } from '../utils/logger';\nconst logger = createLogger('httpAdapter');\n/**\r\n * HttpAdapter - REST API í†µì‹  ì–´ëŒ‘í„°\r\n */\r\nexport class HttpAdapter {\r\n  constructor(options = {}) {\r\n    this.baseURL = options.baseURL || 'http://localhost:3003/api';\r\n    this.timeout = options.timeout || 10000;\r\n    this.headers = {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * HTTP ìš”ì²­ ê³µí†µ ì²˜ë¦¬\r\n   */\r\n  async request(method, endpoint, data = null, options = {}) {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n    const config = {\r\n      method,\r\n      headers: { ...this.headers, ...options.headers },\r\n      signal: AbortSignal.timeout(this.timeout),\r\n      ...options\r\n    };\r\n    \r\n    if (data && (method === 'POST' || method === 'PUT' || method === 'PATCH')) {\r\n      config.body = JSON.stringify(data);\r\n    }\r\n    \r\n    try {\r\n      logger.info(`ğŸŒ ${method} ${url}`, data ? { data } : '');\r\n      \r\n      const response = await fetch(url, config);\r\n      \r\n      // ETag í—¤ë” ì²˜ë¦¬ (ìºì‹œ ë¬´ê²°ì„±)\r\n      const etag = response.headers.get('ETag');\r\n      const lastModified = response.headers.get('Last-Modified');\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        const error = new Error(errorData.message || `HTTP ${response.status}`);\r\n        error.status = response.status;\r\n        error.data = errorData;\r\n        throw error;\r\n      }\r\n      \r\n      const result = await response.json();\r\n      \r\n      // ë©”íƒ€ë°ì´í„° ì¶”ê°€\r\n      if (etag || lastModified) {\r\n        result._meta = {\r\n          etag,\r\n          lastModified,\r\n          status: response.status\r\n        };\r\n      }\r\n      \r\n      logger.info(`âœ… ${method} ${url} ì„±ê³µ`, { status: response.status });\r\n      return result;\r\n      \r\n    } catch (error) {\r\n      logger.error(`âŒ ${method} ${url} ì‹¤íŒ¨:`, error.message);\r\n      \r\n      // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ í‘œì¤€í™”\r\n      if (error.name === 'AbortError') {\r\n        const timeoutError = new Error('ìš”ì²­ ì‹œê°„ ì´ˆê³¼');\r\n        timeoutError.name = 'TimeoutError';\r\n        timeoutError.code = 'TIMEOUT';\r\n        throw timeoutError;\r\n      }\r\n      \r\n      if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n        const networkError = new Error('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨');\r\n        networkError.name = 'NetworkError';\r\n        networkError.code = 'NETWORK_ERROR';\r\n        throw networkError;\r\n      }\r\n      \r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ìƒì„±\r\n   */\r\n  async createDocument(data) {\r\n    return await this.request('POST', '/posts', {\r\n      title: data.title || 'ì œëª© ì—†ìŒ',\r\n      content: data.content || '',\r\n      ...data\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ì¡°íšŒ\r\n   */\r\n  async getDocument(id) {\r\n    return await this.request('GET', `/posts/${id}`);\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ì—…ë°ì´íŠ¸ (ETag ê¸°ë°˜ ì¶©ëŒ ê°ì§€)\r\n   */\r\n  async updateDocument(id, data, options = {}) {\r\n    const headers = {};\r\n    \r\n    // ETag ê¸°ë°˜ ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸\r\n    if (data._meta?.etag) {\r\n      headers['If-Match'] = data._meta.etag;\r\n    }\r\n    \r\n    // Last-Modified ê¸°ë°˜ ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸\r\n    if (data._meta?.lastModified) {\r\n      headers['If-Unmodified-Since'] = data._meta.lastModified;\r\n    }\r\n    \r\n    return await this.request('PUT', `/posts/${id}`, {\r\n      title: data.title,\r\n      content: data.content,\r\n      updatedAt: data.updatedAt || new Date().toISOString(),\r\n      ...data\r\n    }, { headers });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ì‚­ì œ\r\n   */\r\n  async deleteDocument(id) {\r\n    return await this.request('DELETE', `/posts/${id}`);\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ\r\n   */\r\n  async getDocuments(options = {}) {\r\n    const params = new URLSearchParams();\r\n    \r\n    if (options.limit) params.append('limit', options.limit);\r\n    if (options.offset) params.append('offset', options.offset);\r\n    if (options.search) params.append('search', options.search);\r\n    if (options.since) params.append('since', options.since);\r\n    \r\n    const query = params.toString();\r\n    const endpoint = query ? `/posts?${query}` : '/posts';\r\n    \r\n    return await this.request('GET', endpoint);\r\n  }\r\n  \r\n  /**\r\n   * ì„œë²„ ìƒíƒœ í™•ì¸\r\n   */\r\n  async healthCheck() {\r\n    try {\r\n      const result = await this.request('GET', '/health', null, { \r\n        timeout: 5000 \r\n      });\r\n      return { status: 'ok', ...result };\r\n    } catch (error) {\r\n      return { \r\n        status: 'error', \r\n        error: error.message,\r\n        code: error.code \r\n      };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ\r\n   */\r\n  async getSyncStatus(documentIds = []) {\r\n    if (documentIds.length === 0) {\r\n      return await this.request('GET', '/sync/status');\r\n    }\r\n    \r\n    return await this.request('POST', '/sync/status', {\r\n      documentIds\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ë°°ì¹˜ ì—…ë°ì´íŠ¸ (ì—¬ëŸ¬ ë¬¸ì„œ í•œë²ˆì—)\r\n   */\r\n  async batchUpdate(documents) {\r\n    return await this.request('POST', '/posts/batch', {\r\n      documents: documents.map(doc => ({\r\n        id: doc.id,\r\n        title: doc.title,\r\n        content: doc.content,\r\n        updatedAt: doc.updatedAt\r\n      }))\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ í•´ê²°ì„ ìœ„í•œ ì„œë²„ ë°ì´í„° ì¡°íšŒ\r\n   */\r\n  async getDocumentRevision(id, revision) {\r\n    return await this.request('GET', `/posts/${id}/revisions/${revision}`);\r\n  }\r\n  \r\n  /**\r\n   * ê²€ìƒ‰\r\n   */\r\n  async searchDocuments(query, options = {}) {\r\n    const params = new URLSearchParams({\r\n      q: query,\r\n      limit: options.limit || 20,\r\n      offset: options.offset || 0\r\n    });\r\n    \r\n    if (options.fields) {\r\n      params.append('fields', options.fields.join(','));\r\n    }\r\n    \r\n    return await this.request('GET', `/search?${params.toString()}`);\r\n  }\r\n}\r\n\r\n/**\r\n * HTTP ì–´ëŒ‘í„° íŒ©í† ë¦¬\r\n */\r\nexport const createHttpAdapter = (options = {}) => {\r\n  return new HttpAdapter(options);\r\n};\r\n\r\n/**\r\n * ê¸°ë³¸ HTTP ì–´ëŒ‘í„° ì¸ìŠ¤í„´ìŠ¤\r\n */\r\nexport const defaultHttpAdapter = new HttpAdapter(); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\wsAdapter.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\DataSyncManager.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'titleKey' is assigned a value but never used.","line":229,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":229,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is assigned a value but never used.","line":403,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":403,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'titleKey' is assigned a value but never used.","line":495,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":495,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createLogger } from '../utils/logger';\nconst logger = createLogger('DataSyncManager');\n/**\r\n * ì„œë²„ì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê°„ì˜ ë°ì´í„° ë™ê¸°í™”ë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤\r\n * ìˆ˜ì •: ì„œë²„ API êµ¬ì¡°ì— ë§ê²Œ ë™ê¸°í™” ë¡œì§ ê°œì„ \r\n */\r\nclass DataSyncManager {\r\n  constructor() {\r\n    this.serverUrl = 'http://localhost:3003/api/posts';\r\n    this.syncInProgress = false;\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì™„ì „ ë™ê¸°í™”\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\r\n   * @returns {Object} - ë™ê¸°í™” ê²°ê³¼\r\n   */\r\n  async fullSync(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    if (this.syncInProgress) {\r\n      logger.info('ë™ê¸°í™”ê°€ ì´ë¯¸ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.');\r\n      return { success: false, message: 'ë™ê¸°í™” ì§„í–‰ ì¤‘' };\r\n    }\r\n\r\n    this.syncInProgress = true;\r\n    logger.info('=== ì „ì²´ ë°ì´í„° ë™ê¸°í™” ì‹œì‘ ===');\r\n\r\n    try {\r\n      // 1ë‹¨ê³„: ì„œë²„ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const serverDocs = await this.getServerDocuments();\r\n      logger.info(`ì„œë²„ ë¬¸ì„œ: ${serverDocs.length}ê°œ`);\r\n\r\n      // 2ë‹¨ê³„: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const localDocs = this.getLocalDocuments();\r\n      logger.info(`ë¡œì»¬ ë¬¸ì„œ: ${localDocs.length}ê°œ`);\r\n\r\n      // 3ë‹¨ê³„: ë³´ì¡´í•  ë¬¸ì„œë§Œ í•„í„°ë§\r\n      const filteredServerDocs = serverDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      const filteredLocalDocs = localDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n\r\n      logger.info(`í•„í„°ë§ í›„ - ì„œë²„: ${filteredServerDocs.length}ê°œ, ë¡œì»¬: ${filteredLocalDocs.length}ê°œ`);\r\n\r\n      // 4ë‹¨ê³„: ë¶ˆí•„ìš”í•œ ì„œë²„ ë¬¸ì„œ ì‚­ì œ\r\n      const serverDeleteResults = await this.cleanupServerDocuments(serverDocs, keepTitles);\r\n      \r\n      // 5ë‹¨ê³„: ë¶ˆí•„ìš”í•œ ë¡œì»¬ ë¬¸ì„œ ì‚­ì œ\r\n      const localDeleteResults = this.cleanupLocalDocuments(localDocs, keepTitles);\r\n\r\n      // 6ë‹¨ê³„: ìµœì‹  ë²„ì „ìœ¼ë¡œ í†µí•©\r\n      const mergeResults = await this.mergeDocuments(filteredServerDocs, filteredLocalDocs);\r\n\r\n      const result = {\r\n        success: true,\r\n        serverDeleted: serverDeleteResults.deleted,\r\n        localDeleted: localDeleteResults.deleted,\r\n        merged: mergeResults.merged,\r\n        finalCount: mergeResults.finalDocuments.length,\r\n        message: `ë™ê¸°í™” ì™„ë£Œ: ${mergeResults.finalDocuments.length}ê°œ ë¬¸ì„œ ìœ ì§€`\r\n      };\r\n\r\n      logger.info('=== ì „ì²´ ë°ì´í„° ë™ê¸°í™” ì™„ë£Œ ===');\r\n      logger.info(result);\r\n      \r\n      return result;\r\n\r\n    } catch (error) {\r\n      logger.error('ë™ê¸°í™” ì˜¤ë¥˜:', error);\r\n      return { \r\n        success: false, \r\n        error: error.message,\r\n        message: 'ë™ê¸°í™” ì‹¤íŒ¨' \r\n      };\r\n    } finally {\r\n      this.syncInProgress = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì—ì„œ ëª¨ë“  ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸° (ìˆ˜ì •: title ì¶”ì¶œ ë¡œì§ ê°œì„ )\r\n   */\r\n  async getServerDocuments() {\r\n    try {\r\n      const response = await fetch(this.serverUrl);\r\n      if (!response.ok) {\r\n        throw new Error(`ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.status}`);\r\n      }\r\n      \r\n      const serverPosts = await response.json();\r\n      \r\n      // ê° ë¬¸ì„œì˜ ì „ì²´ ë‚´ìš©ì„ ê°œë³„ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°\r\n      const fullDocuments = [];\r\n      for (const post of serverPosts) {\r\n        try {\r\n          const fullContent = await this.getServerDocument(post.id);\r\n          fullDocuments.push({\r\n            id: post.id,\r\n            title: post.title || post.id,\r\n            content: fullContent.content || '',\r\n            updatedAt: fullContent.updatedAt || post.updatedAt || new Date().toISOString(),\r\n            source: 'server'\r\n          });\r\n        } catch (error) {\r\n          logger.warn(`ë¬¸ì„œ ${post.id} ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`, error);\r\n          // ì‹¤íŒ¨í•œ ê²½ìš° ê¸°ë³¸ ì •ë³´ë§Œ ì‚¬ìš©\r\n          fullDocuments.push({\r\n            id: post.id,\r\n            title: post.title || post.id,\r\n            content: post.preview || '',\r\n            updatedAt: post.updatedAt || new Date().toISOString(),\r\n            source: 'server'\r\n          });\r\n        }\r\n      }\r\n      \r\n      return fullDocuments;\r\n    } catch (error) {\r\n      logger.error('ì„œë²„ ë¬¸ì„œ ì¡°íšŒ ì˜¤ë¥˜:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì—ì„œ íŠ¹ì • ë¬¸ì„œì˜ ì „ì²´ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  async getServerDocument(id) {\r\n    const response = await fetch(`${this.serverUrl}/${id}`);\r\n    if (!response.ok) {\r\n      throw new Error(`ë¬¸ì„œ ì¡°íšŒ ì‹¤íŒ¨: ${response.status}`);\r\n    }\r\n    return await response.json();\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ëª¨ë“  ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  getLocalDocuments() {\r\n    const documents = [];\r\n    const documentKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n    \r\n    for (const key of documentKeys) {\r\n      try {\r\n        const docData = JSON.parse(localStorage.getItem(key));\r\n        if (docData && docData.title) {\r\n          documents.push({\r\n            id: docData.id || key.replace('miki_document_', ''),\r\n            title: docData.title,\r\n            content: docData.content || '',\r\n            updatedAt: docData.updatedAt || new Date().toISOString(),\r\n            source: 'local'\r\n          });\r\n        }\r\n      } catch (e) {\r\n        logger.warn(`ë¡œì»¬ ë¬¸ì„œ íŒŒì‹± ì˜¤ë¥˜ (${key}):`, e);\r\n      }\r\n    }\r\n    \r\n    return documents;\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì—ì„œ ë¶ˆí•„ìš”í•œ ë¬¸ì„œ ì‚­ì œ\r\n   */\r\n  async cleanupServerDocuments(serverDocs, keepTitles) {\r\n    const toDelete = serverDocs.filter(doc => \r\n      !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n    );\r\n\r\n    let deleted = 0;\r\n    for (const doc of toDelete) {\r\n      try {\r\n        const response = await fetch(`${this.serverUrl}/${doc.id}`, {\r\n          method: 'DELETE'\r\n        });\r\n        if (response.ok) {\r\n          deleted++;\r\n          logger.info(`ì„œë²„ì—ì„œ ì‚­ì œ: ${doc.title}`);\r\n        }\r\n      } catch (error) {\r\n        logger.error(`ì„œë²„ ì‚­ì œ ì‹¤íŒ¨ (${doc.title}):`, error);\r\n      }\r\n    }\r\n\r\n    return { deleted, total: toDelete.length };\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¶ˆí•„ìš”í•œ ë¬¸ì„œ ì‚­ì œ\r\n   */\r\n  cleanupLocalDocuments(localDocs, keepTitles) {\r\n    const toDelete = localDocs.filter(doc => \r\n      !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n    );\r\n\r\n    let deleted = 0;\r\n    for (const doc of toDelete) {\r\n      try {\r\n        localStorage.removeItem(`miki_document_${doc.id}`);\r\n        localStorage.removeItem(`miki_title_${doc.id}`);\r\n        deleted++;\r\n        logger.info(`ë¡œì»¬ì—ì„œ ì‚­ì œ: ${doc.title}`);\r\n      } catch (error) {\r\n        logger.error(`ë¡œì»¬ ì‚­ì œ ì‹¤íŒ¨ (${doc.title}):`, error);\r\n      }\r\n    }\r\n\r\n    return { deleted, total: toDelete.length };\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì™€ ë¡œì»¬ ë¬¸ì„œë¥¼ ìµœì‹  ë²„ì „ìœ¼ë¡œ í†µí•©\r\n   */\r\n  async mergeDocuments(serverDocs, localDocs) {\r\n    const finalDocuments = [];\r\n    const titleGroups = {};\r\n\r\n    // ì œëª©ë³„ë¡œ ê·¸ë£¹í™”\r\n    [...serverDocs, ...localDocs].forEach(doc => {\r\n      const titleKey = doc.title.toLowerCase();\r\n      if (!titleGroups[titleKey]) {\r\n        titleGroups[titleKey] = [];\r\n      }\r\n      titleGroups[titleKey].push(doc);\r\n    });\r\n\r\n    // ê° ì œëª©ë³„ë¡œ ìµœì‹  ë²„ì „ ì„ íƒ ë° ë™ê¸°í™”\r\n    for (const [titleKey, docs] of Object.entries(titleGroups)) {\r\n      // ìµœì‹  ë¬¸ì„œ ì„ íƒ (updatedAt ê¸°ì¤€)\r\n      const latestDoc = docs.sort((a, b) => \r\n        new Date(b.updatedAt) - new Date(a.updatedAt)\r\n      )[0];\r\n\r\n      // ì„œë²„ì™€ ë¡œì»¬ ëª¨ë‘ì— ìµœì‹  ë²„ì „ ì €ì¥\r\n      await this.saveToServer(latestDoc);\r\n      this.saveToLocal(latestDoc);\r\n\r\n      finalDocuments.push(latestDoc);\r\n      logger.info(`í†µí•© ì™„ë£Œ: ${latestDoc.title} (ìµœì‹ : ${latestDoc.updatedAt})`);\r\n    }\r\n\r\n    return { merged: finalDocuments.length, finalDocuments };\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì— ë¬¸ì„œ ì €ì¥ (ìˆ˜ì •: ì„œë²„ API êµ¬ì¡°ì— ë§ê²Œ ê°œì„ )\r\n   */\r\n  async saveToServer(doc) {\r\n    try {\r\n      // ë¨¼ì € í•´ë‹¹ IDì˜ ë¬¸ì„œê°€ ì„œë²„ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\r\n      const existingResponse = await fetch(`${this.serverUrl}/${doc.id}`);\r\n      \r\n      if (existingResponse.ok) {\r\n        // ë¬¸ì„œê°€ ì¡´ì¬í•˜ë©´ PUTìœ¼ë¡œ ì—…ë°ì´íŠ¸\r\n        const updateResponse = await fetch(`${this.serverUrl}/${doc.id}`, {\r\n          method: 'PUT',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            content: doc.content,\r\n            title: doc.title\r\n          })\r\n        });\r\n        \r\n        if (!updateResponse.ok) {\r\n          throw new Error(`ì„œë²„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${updateResponse.status}`);\r\n        }\r\n        \r\n        logger.info(`âœ… ì„œë²„ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${doc.title}`);\r\n      } else {\r\n        // ë¬¸ì„œê°€ ì—†ìœ¼ë©´ POSTë¡œ ìƒˆë¡œ ìƒì„±\r\n        const createResponse = await fetch(this.serverUrl, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            title: doc.title,\r\n            content: doc.content\r\n          })\r\n        });\r\n        \r\n        if (!createResponse.ok) {\r\n          throw new Error(`ì„œë²„ ìƒì„± ì‹¤íŒ¨: ${createResponse.status}`);\r\n        }\r\n        \r\n        const result = await createResponse.json();\r\n        logger.info(`âœ… ì„œë²„ ìƒì„± ì™„ë£Œ: ${doc.title} (ID: ${result.id})`);\r\n        \r\n        // ìƒˆë¡œ ìƒì„±ëœ IDê°€ ë‹¤ë¥´ë©´ ë¡œì»¬ì—ì„œë„ ì—…ë°ì´íŠ¸\r\n        if (result.id !== doc.id) {\r\n          logger.info(`ğŸ”„ ID ë³€ê²½: ${doc.id} â†’ ${result.id}`);\r\n          \r\n          // ê¸°ì¡´ ë¡œì»¬ ë°ì´í„° ì‚­ì œ\r\n          localStorage.removeItem(`miki_document_${doc.id}`);\r\n          localStorage.removeItem(`miki_title_${doc.id}`);\r\n          \r\n          // ìƒˆ IDë¡œ ì €ì¥\r\n          doc.id = result.id;\r\n          this.saveToLocal(doc);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      logger.error(`ì„œë²„ ì €ì¥ ì˜¤ë¥˜ (${doc.title}):`, error);\r\n      throw error; // ì—ëŸ¬ë¥¼ ìƒìœ„ë¡œ ì „íŒŒ\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë¬¸ì„œ ì €ì¥\r\n   */\r\n  saveToLocal(doc) {\r\n    try {\r\n      const docKey = `miki_document_${doc.id}`;\r\n      const titleKey = `miki_title_${doc.id}`;\r\n      \r\n      localStorage.setItem(docKey, JSON.stringify({\r\n        id: doc.id,\r\n        title: doc.title,\r\n        content: doc.content,\r\n        updatedAt: doc.updatedAt || new Date().toISOString()\r\n      }));\r\n      \r\n      localStorage.setItem(titleKey, doc.title);\r\n    } catch (error) {\r\n      logger.error(`ë¡œì»¬ ì €ì¥ ì˜¤ë¥˜ (${doc.title}):`, error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\r\n   */\r\n  updateRecentDocuments(documents) {\r\n    try {\r\n      const recentDocs = documents\r\n        .sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt))\r\n        .slice(0, 20)\r\n        .map(doc => ({\r\n          id: doc.id,\r\n          title: doc.title,\r\n          updatedAt: doc.updatedAt\r\n        }));\r\n\r\n      localStorage.setItem('miki_recent_docs', JSON.stringify(recentDocs));\r\n      logger.info(`ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì—…ë°ì´íŠ¸: ${recentDocs.length}ê°œ`);\r\n    } catch (error) {\r\n      logger.error('ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì¦‰ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ (UIì—ì„œ í˜¸ì¶œìš©)\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\r\n   * @returns {Object} - ì •ë¦¬ ê²°ê³¼\r\n   */\r\n  immediateLocalCleanup(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    logger.info('=== ì¦‰ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì‹œì‘ ===');\r\n    logger.info(`ë³´ì¡´í•  ë¬¸ì„œ: ${keepTitles.join(', ')}`);\r\n    \r\n    const stats = {\r\n      totalDocuments: 0,\r\n      preservedDocuments: 0,\r\n      deletedDocuments: 0,\r\n      spaceSaved: 0\r\n    };\r\n    \r\n    try {\r\n      // ëª¨ë“  ë¬¸ì„œ í‚¤ ìˆ˜ì§‘\r\n      const documentKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n      stats.totalDocuments = documentKeys.length;\r\n      \r\n      logger.info(`ğŸ“Š ì´ ${documentKeys.length}ê°œ ë¬¸ì„œ ë°œê²¬`);\r\n      \r\n      const toDelete = [];\r\n      const toKeep = [];\r\n      \r\n      // ì œëª©ë³„ ê·¸ë£¹í™” ë° ë¶„ë¥˜\r\n      const titleGroups = {};\r\n      \r\n      for (const key of documentKeys) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          if (!docData || !docData.title) continue;\r\n          \r\n          const title = docData.title.toLowerCase();\r\n          const shouldKeep = keepTitles.some(keepTitle => \r\n            title === keepTitle.toLowerCase()\r\n          );\r\n          \r\n          if (shouldKeep) {\r\n            if (!titleGroups[title]) {\r\n              titleGroups[title] = [];\r\n            }\r\n            titleGroups[title].push({ key, data: docData });\r\n          } else {\r\n            toDelete.push({ key, title: docData.title });\r\n          }\r\n        } catch (e) {\r\n          // íŒŒì‹± ì˜¤ë¥˜ê°€ ìˆëŠ” ë¬¸ì„œëŠ” ì‚­ì œ\r\n          toDelete.push({ key, title: 'íŒŒì‹± ì˜¤ë¥˜' });\r\n        }\r\n      }\r\n      \r\n      // ê° ì œëª©ë³„ë¡œ ìµœì‹  ë²„ì „ë§Œ ë³´ì¡´\r\n      for (const [title, docs] of Object.entries(titleGroups)) {\r\n        if (docs.length > 1) {\r\n          // ìµœì‹  ë¬¸ì„œ ì„ íƒ\r\n          const latest = docs.sort((a, b) => \r\n            new Date(b.data.updatedAt || 0) - new Date(a.data.updatedAt || 0)\r\n          )[0];\r\n          \r\n          // ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œ ëª©ë¡ì— ì¶”ê°€\r\n          docs.forEach(doc => {\r\n            if (doc.key !== latest.key) {\r\n              toDelete.push({ key: doc.key, title: doc.data.title });\r\n            } else {\r\n              toKeep.push({ key: doc.key, title: doc.data.title });\r\n            }\r\n          });\r\n        } else {\r\n          toKeep.push({ key: docs[0].key, title: docs[0].data.title });\r\n        }\r\n      }\r\n      \r\n      // ì‚­ì œ ì‹¤í–‰\r\n      for (const item of toDelete) {\r\n        try {\r\n          const docId = item.key.replace('miki_document_', '');\r\n          localStorage.removeItem(item.key);\r\n          localStorage.removeItem(`miki_title_${docId}`);\r\n          stats.deletedDocuments++;\r\n          logger.info(`âŒ ì‚­ì œ: ${item.key} - \"${item.title}\"`);\r\n        } catch (e) {\r\n          logger.error(`ì‚­ì œ ì‹¤íŒ¨: ${item.key}`, e);\r\n        }\r\n      }\r\n      \r\n      stats.preservedDocuments = toKeep.length;\r\n      \r\n      // ë³´ì¡´ëœ ë¬¸ì„œ ë¡œê·¸\r\n      toKeep.forEach(item => {\r\n        logger.info(`âœ… ë³´ì¡´: ${item.key} - \"${item.title}\"`);\r\n      });\r\n      \r\n      logger.info('=== ì¦‰ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì™„ë£Œ ===');\r\n      logger.info(`ë³´ì¡´: ${stats.preservedDocuments}ê°œ, ì‚­ì œ: ${stats.deletedDocuments}ê°œ`);\r\n      \r\n      return stats;\r\n    } catch (error) {\r\n      logger.error('ì¦‰ì‹œ ì •ë¦¬ ì˜¤ë¥˜:', error);\r\n      return { ...stats, error: error.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì•ˆì „í•œ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ (ì‹¤ì œ ë³€ê²½ ì—†ì´ ì‹œë®¬ë ˆì´ì…˜ë§Œ)\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\r\n   * @returns {Object} - í…ŒìŠ¤íŠ¸ ê²°ê³¼\r\n   */\r\n  async safeTestSync(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    logger.info('=== ì•ˆì „í•œ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì‹œì‘ (ì‹¤ì œ ë³€ê²½ ì—†ìŒ) ===');\r\n    \r\n    try {\r\n      // 1ë‹¨ê³„: í˜„ì¬ ìƒíƒœ ë¶„ì„\r\n      const serverDocs = await this.getServerDocuments();\r\n      const localDocs = this.getLocalDocuments();\r\n      \r\n      logger.info(`ğŸ“Š í˜„ì¬ ìƒíƒœ: ì„œë²„ ${serverDocs.length}ê°œ, ë¡œì»¬ ${localDocs.length}ê°œ`);\r\n      \r\n      // 2ë‹¨ê³„: í•„í„°ë§ ì‹œë®¬ë ˆì´ì…˜\r\n      const serverFiltered = serverDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      const localFiltered = localDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      \r\n      // 3ë‹¨ê³„: ì‚­ì œ ëŒ€ìƒ ë¶„ì„\r\n      const serverToDelete = serverDocs.filter(doc => \r\n        !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      const localToDelete = localDocs.filter(doc => \r\n        !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      \r\n      // 4ë‹¨ê³„: í†µí•© ì‹œë®¬ë ˆì´ì…˜\r\n      const titleGroups = {};\r\n      [...serverFiltered, ...localFiltered].forEach(doc => {\r\n        const titleKey = doc.title.toLowerCase();\r\n        if (!titleGroups[titleKey]) {\r\n          titleGroups[titleKey] = [];\r\n        }\r\n        titleGroups[titleKey].push(doc);\r\n      });\r\n      \r\n      const mergeResults = [];\r\n      for (const [titleKey, docs] of Object.entries(titleGroups)) {\r\n        const latest = docs.sort((a, b) => \r\n          new Date(b.updatedAt) - new Date(a.updatedAt)\r\n        )[0];\r\n        mergeResults.push({\r\n          title: latest.title,\r\n          selectedSource: latest.source,\r\n          versions: docs.length,\r\n          latestUpdate: latest.updatedAt\r\n        });\r\n      }\r\n      \r\n      const testResult = {\r\n        success: true,\r\n        currentState: {\r\n          server: serverDocs.length,\r\n          local: localDocs.length\r\n        },\r\n        afterFiltering: {\r\n          server: serverFiltered.length,\r\n          local: localFiltered.length\r\n        },\r\n        toDelete: {\r\n          server: serverToDelete.length,\r\n          local: localToDelete.length\r\n        },\r\n        finalMerged: mergeResults.length,\r\n        mergeDetails: mergeResults,\r\n        message: `í…ŒìŠ¤íŠ¸ ì™„ë£Œ: ${mergeResults.length}ê°œ ë¬¸ì„œê°€ ìµœì¢… ë³´ì¡´ë©ë‹ˆë‹¤`\r\n      };\r\n      \r\n      logger.info('=== ì•ˆì „í•œ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');\r\n      logger.info('ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼:', testResult);\r\n      \r\n      return testResult;\r\n      \r\n    } catch (error) {\r\n      logger.error('ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);\r\n      return {\r\n        success: false,\r\n        error: error.message,\r\n        message: 'í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * í˜„ì¬ ë™ê¸°í™” ìƒíƒœ ì§„ë‹¨\r\n   */\r\n  async diagnoseCurrentState() {\r\n    logger.info('=== ë™ê¸°í™” ìƒíƒœ ì§„ë‹¨ ì‹œì‘ ===');\r\n    \r\n    try {\r\n      const serverDocs = await this.getServerDocuments();\r\n      const localDocs = this.getLocalDocuments();\r\n      \r\n      // ì œëª©ë³„ ê·¸ë£¹í™”\r\n      const serverTitles = new Set(serverDocs.map(doc => doc.title.toLowerCase()));\r\n      const localTitles = new Set(localDocs.map(doc => doc.title.toLowerCase()));\r\n      \r\n      const onlyServer = serverDocs.filter(doc => \r\n        !localTitles.has(doc.title.toLowerCase())\r\n      );\r\n      const onlyLocal = localDocs.filter(doc => \r\n        !serverTitles.has(doc.title.toLowerCase())\r\n      );\r\n      const both = serverDocs.filter(doc => \r\n        localTitles.has(doc.title.toLowerCase())\r\n      );\r\n      \r\n      const diagnosis = {\r\n        server: {\r\n          total: serverDocs.length,\r\n          titles: Array.from(serverTitles)\r\n        },\r\n        local: {\r\n          total: localDocs.length,\r\n          titles: Array.from(localTitles)\r\n        },\r\n        discrepancies: {\r\n          onlyServer: onlyServer.length,\r\n          onlyLocal: onlyLocal.length,\r\n          both: both.length\r\n        },\r\n        details: {\r\n          onlyServerDocs: onlyServer.map(doc => ({ id: doc.id, title: doc.title })),\r\n          onlyLocalDocs: onlyLocal.map(doc => ({ id: doc.id, title: doc.title })),\r\n          sharedDocs: both.map(doc => ({ id: doc.id, title: doc.title }))\r\n        }\r\n      };\r\n      \r\n      logger.info('ğŸ“Š ì§„ë‹¨ ì™„ë£Œ:', diagnosis);\r\n      return diagnosis;\r\n      \r\n    } catch (error) {\r\n      logger.error('ì§„ë‹¨ ì˜¤ë¥˜:', error);\r\n      return { error: error.message };\r\n    }\r\n  }\r\n}\r\n\r\nexport default DataSyncManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\DocumentSearchManager.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'API_TYPE' is assigned a value but never used.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'API_KEY' is assigned a value but never used.","line":10,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'SERVER_URL' is assigned a value but never used.","line":11,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'CLAUDE_API_URL' is assigned a value but never used.","line":13,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":13,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// DocumentSearchManager.js\n// AI íŒ¨ë„ê³¼ ë§í¬ ìƒì„± ì‚¬ì´ì— ê³µìœ ë˜ëŠ” ë¬¸ì„œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤\n\nimport { createLogger } from '../utils/logger';\nconst logger = createLogger('DocumentSearchManager');\nimport DocumentSummaryManager from './DocumentSummaryManager.js';\n\n// í™˜ê²½ ë³€ìˆ˜ ì²˜ë¦¬ - Jest í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ ì‚¬ìš©\nconst API_TYPE = 'claude';\nconst API_KEY = '';\nconst SERVER_URL = 'http://localhost:3001';\n\nconst CLAUDE_API_URL = 'https://api.anthropic.com/v1/messages';\nconst CLAUDE_MODEL = 'claude-3-5-haiku-20241022';\n\n/**\n * ë¬¸ì„œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤\n * í‚¤ì›Œë“œ ê²€ìƒ‰ê³¼ ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ì„ ê²°í•©í•˜ì—¬ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì œê³µ\n */\nclass DocumentSearchManager {\n  constructor() {\n    this.summaryManager = new DocumentSummaryManager();\n    this.documentCache = new Map(); // ë¬¸ì„œ IDë¥¼ í‚¤ë¡œ, ë¬¸ì„œ ë‚´ìš© ë° ë©”íƒ€ë°ì´í„°ë¥¼ ê°’ìœ¼ë¡œ ì €ì¥\n    this.documentEmbeddings = new Map(); // ë¬¸ì„œ IDë¥¼ í‚¤ë¡œ, ë¬¸ì„œ ì„ë² ë”©ì„ ê°’ìœ¼ë¡œ ì €ì¥\n    this.maxResults = 10; // ê²€ìƒ‰ ê²°ê³¼ ìµœëŒ€ ê°œìˆ˜\n    this.useAiSearch = true; // AI ê²€ìƒ‰ ì‚¬ìš© ì—¬ë¶€\n    \n    // ì´ˆê¸°í™” ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì§„ë‹¨ ì‹¤í–‰\n    this.analyzeLocalStorage();\n  }\n\n  /**\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì „ì²´ ë¶„ì„ - ë””ë²„ê¹…ìš©\n   */\n  analyzeLocalStorage() {\n    try {\n      logger.info(\"===== ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„ ì‹œì‘ =====\");\n      const allKeys = Object.keys(localStorage);\n      \n      logger.info(`ì´ ${allKeys.length}ê°œ í•­ëª©ì´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`);\n      \n      // í‚¤ íŒ¨í„´ë³„ ë¶„ë¥˜\n      const patterns = {\n        document: allKeys.filter(key => key.includes('document')),\n        title: allKeys.filter(key => key.includes('title')),\n        content: allKeys.filter(key => key.includes('content')),\n        ai: allKeys.filter(key => key.includes('ai')),\n        temp: allKeys.filter(key => key.includes('temp')),\n        other: allKeys.filter(key => \n          !key.includes('document') && \n          !key.includes('title') && \n          !key.includes('content') && \n          !key.includes('ai') &&\n          !key.includes('temp')\n        )\n      };\n      \n      // íŒ¨í„´ë³„ ì¶œë ¥\n      Object.entries(patterns).forEach(([pattern, keys]) => {\n        logger.info(`\\n[${pattern}] íŒ¨í„´: ${keys.length}ê°œ`);\n        keys.slice(0, 5).forEach(key => {\n          const value = localStorage.getItem(key);\n          const valuePreview = value ? \n            (value.length > 50 ? value.substring(0, 50) + '...' : value) : \n            '(ì—†ìŒ)';\n          logger.info(`- ${key}: ${valuePreview}`);\n        });\n        if (keys.length > 5) {\n          logger.info(`... ì™¸ ${keys.length - 5}ê°œ`);\n        }\n      });\n      \n      // miki_document íŒ¨í„´ ìƒì„¸ ë¶„ì„\n      const documentKeys = allKeys.filter(key => key.startsWith('miki_document_'));\n      logger.info(`\\në¬¸ì„œ ë‚´ìš© í‚¤(miki_document_*): ${documentKeys.length}ê°œ`);\n      documentKeys.forEach(key => {\n        const docId = key.replace('miki_document_', '');\n        const content = localStorage.getItem(key);\n        const contentLength = content ? content.length : 0;\n        logger.info(`- ${docId}: ${contentLength}ì`);\n        \n        // ê´€ë ¨ íƒ€ì´í‹€ í™•ì¸\n        const titleKey = `miki_title_${docId}`;\n        const title = localStorage.getItem(titleKey);\n        logger.info(`  ì œëª©: ${title || '(ì—†ìŒ)'}`);\n      });\n      \n      logger.info(\"===== ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„ ì™„ë£Œ =====\");\n    } catch (error) {\n      logger.error(\"ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„ ì˜¤ë¥˜:\", error);\n    }\n  }\n\n  /**\n   * ëª¨ë“  ê°€ëŠ¥í•œ ë¬¸ì„œ í‚¤ íŒ¨í„´ ìŠ¤ìº” ë° ìˆ˜ì§‘\n   * @returns {Object} - í‚¤ íŒ¨í„´ë³„ ë¬¸ì„œ ì •ë³´\n   */\n  scanDocumentPatterns() {\n    try {\n      logger.info(\"ë¬¸ì„œ ì €ì¥ íŒ¨í„´ ìŠ¤ìº” ì¤‘...\");\n      const allStorageKeys = Object.keys(localStorage);\n      \n      // í‚¤ íŒ¨í„´ ì •ì˜\n      const patterns = {\n        // í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ì„ì‹œ ë¬¸ì„œ\n        temp: {\n          title: 'miki_editor_title_temp',\n          content: 'miki_editor_content_temp',\n          savedAt: 'miki_editor_saved_at'\n        },\n        // ì €ì¥ëœ ë¬¸ì„œ íŒ¨í„´ë“¤\n        document: {\n          prefix: 'miki_document_',\n          titlePrefix: 'miki_title_'\n        },\n        // ê¸°íƒ€ íŒ¨í„´\n        recentDocs: 'miki_recent_docs',\n        conversations: 'miki_ai_conversations_'\n      };\n      \n      // íŒ¨í„´ë³„ ë¬¸ì„œ ìˆ˜ì§‘\n      const collectedDocs = {};\n      \n      // 1. í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ì„ì‹œ ë¬¸ì„œ\n      const tempTitle = localStorage.getItem(patterns.temp.title);\n      const tempContent = localStorage.getItem(patterns.temp.content);\n      const tempSavedAt = localStorage.getItem(patterns.temp.savedAt);\n      \n      if (tempTitle && tempContent) {\n        const tempDoc = {\n          id: this.slugify(tempTitle),\n          title: tempTitle,\n          content: tempContent,\n          savedAt: tempSavedAt,\n          path: `/doc/${this.slugify(tempTitle)}`,\n          isTemp: true\n        };\n        collectedDocs[tempDoc.id] = tempDoc;\n        logger.info(`ì„ì‹œ ë¬¸ì„œ ë°œê²¬: \"${tempTitle}\" (${tempContent.length}ì)`);\n      }\n      \n      // 2. ì €ì¥ëœ ë¬¸ì„œ (miki_document_* íŒ¨í„´)\n      const documentKeys = allStorageKeys.filter(key => key.startsWith(patterns.document.prefix));\n      for (const key of documentKeys) {\n        try {\n          const docId = key.replace(patterns.document.prefix, '');\n          const titleKey = `${patterns.document.titlePrefix}${docId}`;\n          const rawDocContent = localStorage.getItem(key);\n          \n          // JSON í˜•ì‹ìœ¼ë¡œ ì €ì¥ëœ ë¬¸ì„œ íŒŒì‹± ì‹œë„\n          let docContent, docTitle;\n          \n          try {\n            // JSON íŒŒì‹± ì‹œë„\n            const docJson = JSON.parse(rawDocContent);\n            docTitle = docJson.title || localStorage.getItem(titleKey) || docId;\n            docContent = docJson.content || '';\n            \n            logger.info(`JSON íŒŒì‹± ì„±ê³µ: ë¬¸ì„œ \"${docTitle}\" ë‚´ìš© ê¸¸ì´: ${docContent.length}ì`);\n          } catch (e) {\n            // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©\n            logger.info(`JSON íŒŒì‹± ì‹¤íŒ¨, ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©: ${e.message}`);\n            docTitle = localStorage.getItem(titleKey) || docId.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n            docContent = rawDocContent;\n          }\n          \n          if (docId && docContent) {\n            const docObject = {\n              id: docId,\n              title: docTitle,\n              content: docContent,\n              path: `/doc/${docId}`,\n              isDocument: true\n            };\n            collectedDocs[docId] = docObject;\n            logger.info(`ì €ì¥ëœ ë¬¸ì„œ ë°œê²¬: \"${docTitle}\" (${docContent.length}ì)`);\n          }\n        } catch (docError) {\n          logger.error(`ë¬¸ì„œ í‚¤ ${key} ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:`, docError);\n        }\n      }\n      \n      // 3. ìµœê·¼ ë¬¸ì„œ ëª©ë¡\n      try {\n        const recentDocsJson = localStorage.getItem(patterns.recentDocs);\n        if (recentDocsJson) {\n          const recentDocs = JSON.parse(recentDocsJson);\n          if (Array.isArray(recentDocs)) {\n            logger.info(`ìµœê·¼ ë¬¸ì„œ ëª©ë¡: ${recentDocs.length}ê°œ`);\n            \n            for (const doc of recentDocs) {\n              if (!doc.id && !doc.title) continue;\n              \n              const docId = doc.id || this.slugify(doc.title);\n              \n              // ì´ë¯¸ ìˆ˜ì§‘ëœ ë¬¸ì„œì¸ì§€ í™•ì¸\n              if (collectedDocs[docId]) {\n                // ì´ë¯¸ ìˆëŠ” ë¬¸ì„œë¼ë©´ ìµœê·¼ ë¬¸ì„œ í”Œë˜ê·¸ ì¶”ê°€\n                collectedDocs[docId].isRecent = true;\n                continue;\n              }\n              \n              // ë¬¸ì„œ ë‚´ìš© ê²€ìƒ‰ì„ ìœ„í•œ ì—¬ëŸ¬ í‚¤ íŒ¨í„´ ì‹œë„\n              const contentPatterns = [\n                `${patterns.document.prefix}${docId}`,\n                `miki_content_${docId}`,\n                `miki_doc_content_${docId}`\n              ];\n              \n              let docContent = null;\n              for (const pattern of contentPatterns) {\n                docContent = localStorage.getItem(pattern);\n                if (docContent) {\n                  logger.info(`\"${doc.title}\" ë¬¸ì„œì˜ ë‚´ìš©ì„ ${pattern} í‚¤ì—ì„œ ì°¾ì•˜ìŠµë‹ˆë‹¤.`);\n                  break;\n                }\n              }\n              \n              // ìµœê·¼ ë¬¸ì„œ ì¶”ê°€\n              collectedDocs[docId] = {\n                id: docId,\n                title: doc.title,\n                content: docContent || '',\n                path: `/doc/${docId}`,\n                isRecent: true\n              };\n            }\n          }\n        }\n      } catch (e) {\n        logger.warn(\"ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì²˜ë¦¬ ì˜¤ë¥˜:\", e);\n      }\n      \n      // ë¬¸ì„œ ìˆ˜ ì¶œë ¥\n      logger.info(`ì´ ${Object.keys(collectedDocs).length}ê°œ ë¬¸ì„œ ë°œê²¬`);\n      \n      return Object.values(collectedDocs);\n    } catch (error) {\n      logger.error(\"ë¬¸ì„œ íŒ¨í„´ ìŠ¤ìº” ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ëª¨ë“  ë¬¸ì„œ ì •ë³´ ë¡œë“œ\n   * @returns {Array} - ë¬¸ì„œ ê°ì²´ ë°°ì—´\n   */\n  getAllDocuments() {\n    try {\n      logger.info(\"ëª¨ë“  ë¬¸ì„œ ì •ë³´ ë¡œë“œ ì¤‘...\");\n      \n      // ê°œì„ ëœ ë¬¸ì„œ íŒ¨í„´ ìŠ¤ìº” ì‚¬ìš©\n      const allDocuments = this.scanDocumentPatterns();\n      \n      // ë¬¸ì„œê°€ ì—†ìœ¼ë©´ ìƒ˜í”Œ ë¬¸ì„œ ì¶”ê°€\n      if (allDocuments.length === 0) {\n        logger.info(\"ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤. ìƒ˜í”Œ ë¬¸ì„œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\");\n        \n        // ìƒ˜í”Œ ë¬¸ì„œ ì¶”ê°€\n        const sampleDocs = [\n          {\n            id: 'welcome',\n            title: 'Miki ì‚¬ìš©ë²•',\n            content: '# Miki ì‚¬ìš©ë²•\\n\\nMikiëŠ” ë§ˆí¬ë‹¤ìš´ ê¸°ë°˜ ìœ„í‚¤ ì—ë””í„°ì…ë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\n\\n## ì£¼ìš” ê¸°ëŠ¥\\n\\n- ë§ˆí¬ë‹¤ìš´ í¸ì§‘\\n- AI ì—°ë™\\n- ë¬¸ì„œ ê²€ìƒ‰\\n- ë‚´ìš© ê¸°ë°˜ ë§í¬',\n            path: '/doc/welcome',\n            isCommon: true\n          },\n          {\n            id: 'markdown-guide',\n            title: 'ë§ˆí¬ë‹¤ìš´ ê°€ì´ë“œ',\n            content: '# ë§ˆí¬ë‹¤ìš´ ê°€ì´ë“œ\\n\\në§ˆí¬ë‹¤ìš´ì€ í…ìŠ¤íŠ¸ ê¸°ë°˜ì˜ ë§ˆí¬ì—… ì–¸ì–´ë¡œ, ì‰½ê²Œ ì½ê³  ì“¸ ìˆ˜ ìˆìœ¼ë©° HTMLë¡œ ë³€í™˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\\n\\n## ë¬¸ë²•\\n\\n### ì œëª©\\n# ì œëª© 1\\n## ì œëª© 2\\n\\n### ê°•ì¡°\\n**êµµê²Œ** ë˜ëŠ” *ê¸°ìš¸ì„*\\n\\n### ë§í¬\\n[ë§í¬ í…ìŠ¤íŠ¸](URL)',\n            path: '/doc/markdown-guide',\n            isCommon: true\n          }\n        ];\n        \n        sampleDocs.forEach(doc => {\n          allDocuments.push(doc);\n        });\n      }\n      \n      // ë¬¸ì„œ ìºì‹œ ì—…ë°ì´íŠ¸\n      allDocuments.forEach(doc => {\n        this.documentCache.set(doc.id, doc);\n      });\n      \n      logger.info(\"ê²€ìƒ‰ ê°€ëŠ¥í•œ ëª¨ë“  ë¬¸ì„œ:\", allDocuments.length, \"ê±´\");\n      return allDocuments;\n    } catch (error) {\n      logger.error(\"ë¬¸ì„œ ì •ë³´ ë¡œë“œ ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * í‚¤ì›Œë“œ ê¸°ë°˜ ë¡œì»¬ ë¬¸ì„œ ê²€ìƒ‰\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchByKeyword(query) {\n    if (!query || query.trim().length === 0) return [];\n    \n    logger.info(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ì‹œì‘:\", query);\n    const searchQuery = query.toLowerCase().trim();\n    \n    try {\n      // URL í˜•ì‹ì´ë©´ ê²€ìƒ‰í•˜ì§€ ì•Šê³  ë°”ë¡œ ë°˜í™˜\n      if (/^https?:\\/\\//i.test(searchQuery)) {\n        logger.info(\"URL í˜•ì‹ ê°ì§€:\", searchQuery);\n        return [{ id: 'url', title: `URL: ${searchQuery}`, path: searchQuery, isUrl: true }];\n      }\n      \n      // ë¬¸ì„œ ë¡œë“œ\n      const allDocuments = this.getAllDocuments();\n      logger.info(`ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œ: ${allDocuments.length}ê°œ`);\n      \n      // ê²€ìƒ‰ì–´ë¡œ í•„í„°ë§ (ê°œì„ ëœ ë¡œê·¸ ì¶”ê°€)\n      const searchResults = allDocuments.filter(doc => {\n        const docTitle = (doc.title || '').toLowerCase();\n        \n        // ë‚´ìš© í™•ì¸ - content ì†ì„±ì´ ìˆëŠ”ì§€ í™•ì¸\n        let docContent = '';\n        if (doc.content) {\n          if (typeof doc.content === 'string') {\n            docContent = doc.content.toLowerCase();\n          } else if (typeof doc.content === 'object') {\n            // contentê°€ ê°ì²´ì¸ ê²½ìš° (ë‚´ìš© ë””ë²„ê¹…)\n            logger.info(`ë¬¸ì„œ \"${doc.title}\"ì˜ contentê°€ ê°ì²´ì…ë‹ˆë‹¤:`, doc.content);\n            docContent = JSON.stringify(doc.content).toLowerCase();\n          }\n        }\n        \n        const titleMatch = docTitle.includes(searchQuery);\n        const contentMatch = docContent && docContent.includes(searchQuery);\n        \n        logger.info(`ë¬¸ì„œ \"${doc.title}\" ê²€ìƒ‰ ê²°ê³¼: ì œëª© ì¼ì¹˜=${titleMatch}, ë‚´ìš© ì¼ì¹˜=${contentMatch}`);\n        logger.info(`- ì œëª©: ${docTitle}`);\n        logger.info(`- ë‚´ìš© íƒ€ì…: ${typeof doc.content}`);\n        logger.info(`- ë‚´ìš© ì¼ë¶€: ${docContent ? docContent.substring(0, 50) + '...' : '(ë‚´ìš© ì—†ìŒ)'}`);\n        \n        return titleMatch || contentMatch;\n      });\n      \n      logger.info(`í‚¤ì›Œë“œ \"${searchQuery}\" ê²€ìƒ‰ ê²°ê³¼: ${searchResults.length}ê°œ ë¬¸ì„œ ì¼ì¹˜`);\n      \n      if (searchResults.length > 0) {\n        logger.info(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼:\", searchResults.length, \"ê±´\");\n        \n        // í˜„ì¬ ë¬¸ì„œ > ì œëª© ì¼ì¹˜ > ë‚´ìš© ì¼ì¹˜ ìˆœìœ¼ë¡œ ì •ë ¬\n        return searchResults.sort((a, b) => {\n          if (a.isCurrent && !b.isCurrent) return -1;\n          if (!a.isCurrent && b.isCurrent) return 1;\n          \n          const aTitleMatch = a.title.toLowerCase().includes(searchQuery);\n          const bTitleMatch = b.title.toLowerCase().includes(searchQuery);\n          \n          if (aTitleMatch && !bTitleMatch) return -1;\n          if (!aTitleMatch && bTitleMatch) return 1;\n          \n          return a.title.localeCompare(b.title);\n        }).slice(0, this.maxResults).map(doc => ({\n          id: doc.id,\n          title: doc.title + (doc.isCurrent ? ' (í˜„ì¬ ë¬¸ì„œ)' : doc.isRecent ? ' (ìµœê·¼ ë¬¸ì„œ)' : ''),\n          path: doc.path,\n          preview: doc.content ? doc.content.substring(0, 100) + '...' : null\n        }));\n      }\n      \n      // ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ìƒˆ ë¬¸ì„œ ë§Œë“¤ê¸° ì˜µì…˜ ì œê³µ\n      logger.info(\"ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ, ìƒˆ ë¬¸ì„œ ë§Œë“¤ê¸° ì˜µì…˜ ì œê³µ\");\n      return [\n        { \n          id: 'new_' + searchQuery, \n          title: `\"${searchQuery}\" ìƒˆ ë¬¸ì„œ ìƒì„±`, \n          path: `/doc/${this.slugify(searchQuery)}`,\n          preview: `\"${searchQuery}\" ë¬¸ì„œë¥¼ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.`, \n          isCreateNew: true \n        }\n      ];\n    } catch (error) {\n      logger.error(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [\n        { \n          id: 'error', \n          title: 'ì˜¤ë¥˜ ë°œìƒ - URL ì§ì ‘ ì…ë ¥', \n          path: '#',\n          preview: 'URLì„ ì§ì ‘ ì…ë ¥í•˜ì—¬ ì™¸ë¶€ ë§í¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', \n          isError: true \n        }\n      ];\n    }\n  }\n\n  /**\n   * ì˜ë¯¸ ê¸°ë°˜ ë¬¸ì„œ ê²€ìƒ‰ - í† í° ìµœì í™”ëœ ê²€ìƒ‰ êµ¬í˜„\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchBySemantic(query) {\n    if (!query || query.trim().length === 0) return [];\n    \n    logger.info(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ì‹œì‘:\", query);\n    \n    try {\n      // 1ë‹¨ê³„: ë¡œì»¬ ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°\n      const allDocuments = this.getAllDocuments();\n      logger.info(`ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œ: ${allDocuments.length}ê°œ`);\n      \n      if (allDocuments.length === 0) {\n        logger.info(\"ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤\");\n        return [];\n      }\n      \n      // 2ë‹¨ê³„: í† í° ìµœì í™”ë¥¼ ìœ„í•œ ë¡œì»¬ í•„í„°ë§\n      // ì¿¼ë¦¬ë¥¼ ì˜ë¯¸ ìˆëŠ” í‚¤ì›Œë“œë¡œ ë¶„ë¦¬\n      const queryText = query.toLowerCase().trim();\n      // ë‹¨ì–´ ìµœì†Œ ê¸¸ì´ë¥¼ 0ìœ¼ë¡œ ë‚®ì¶¤ (ëª¨ë“  ë‹¨ì–´ í—ˆìš©)\n      const queryWords = queryText.split(/\\s+/).filter(word => word.length > 0);\n      \n      logger.info(\"ê²€ìƒ‰ í‚¤ì›Œë“œ:\", queryWords);\n      \n      // ê° ë¬¸ì„œë³„ ê´€ë ¨ë„ ì ìˆ˜ ê³„ì‚° (ê°„ë‹¨í•œ TF-IDF ìœ ì‚¬)\n      const scoredDocuments = allDocuments.map(doc => {\n        try {\n          // ë¬¸ì„œ í…ìŠ¤íŠ¸ ì¤€ë¹„\n          const docTitle = (doc.title || '').toLowerCase();\n          \n          // ë‚´ìš© í™•ì¸ - content ì†ì„±ì´ ìˆëŠ”ì§€ í™•ì¸\n          let docContent = '';\n          if (doc.content) {\n            if (typeof doc.content === 'string') {\n              docContent = doc.content.toLowerCase();\n            } else if (typeof doc.content === 'object') {\n              // contentê°€ ê°ì²´ì¸ ê²½ìš° (ë‚´ìš© ë””ë²„ê¹…)\n              logger.info(`ë¬¸ì„œ \"${doc.title}\"ì˜ contentê°€ ê°ì²´ì…ë‹ˆë‹¤:`, doc.content);\n              docContent = JSON.stringify(doc.content).toLowerCase();\n            }\n          }\n          \n          // ë””ë²„ê¹…ìš© ë¡œê·¸\n          logger.info(`ë¬¸ì„œ \"${doc.title}\" ë‚´ìš© ê²€ìƒ‰ ì‹œì‘ (ë‚´ìš© ê¸¸ì´: ${docContent ? docContent.length : 0}ì)`);\n          logger.info(`- ë‚´ìš© íƒ€ì…: ${typeof doc.content}`);\n          \n          // ê¸°ë³¸ ì ìˆ˜ ê³„ì‚°\n          let score = 0;\n          \n          // ì œëª©ì— ì¿¼ë¦¬ ì „ì²´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ë†’ì€ ì ìˆ˜\n          if (docTitle.includes(queryText)) {\n            score += 15;  // ì ìˆ˜ ìƒí–¥ ì¡°ì •\n            logger.info(`- ì œëª© ì „ì²´ ì¼ì¹˜ (${queryText}): +15ì `);\n          }\n          \n          // ë‚´ìš©ì— ì¿¼ë¦¬ ì „ì²´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì ìˆ˜ ì¶”ê°€\n          if (docContent && docContent.includes(queryText)) {\n            score += 8;  // ì ìˆ˜ ìƒí–¥ ì¡°ì •\n            logger.info(`- ë‚´ìš© ì „ì²´ ì¼ì¹˜ (${queryText}): +8ì `);\n          }\n          \n          // ê° ì¿¼ë¦¬ ë‹¨ì–´ë³„ ì ìˆ˜ ê³„ì‚°\n          for (const word of queryWords) {\n            // ì œëª©ì— ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì ìˆ˜ ì¶”ê°€\n            if (docTitle.includes(word)) {\n              score += 3;\n              logger.info(`- ì œëª© ë‹¨ì–´ ì¼ì¹˜ (${word}): +3ì `);\n            }\n            \n            // ë‚´ìš©ì— ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì ìˆ˜ ì¶”ê°€ (ê°€ì¤‘ì¹˜ ì¦ê°€)\n            if (docContent && docContent.includes(word)) {\n              score += 2;\n              logger.info(`- ë‚´ìš© ë‹¨ì–´ ì¼ì¹˜ (${word}): +2ì `);\n            }\n            \n            // ë‹¨ì–´ ë°œìƒ ë¹ˆë„ì— ë”°ë¼ ì¶”ê°€ ì ìˆ˜\n            try {\n              const titleMatches = (docTitle.match(new RegExp(word, 'gi')) || []).length;\n              const contentMatches = docContent ? (docContent.match(new RegExp(word, 'gi')) || []).length : 0;\n              \n              score += titleMatches * 0.5;\n              score += contentMatches * 0.3;\n              \n              if (titleMatches > 0 || contentMatches > 0) {\n                logger.info(`- ë‹¨ì–´ ë¹ˆë„ (${word}): ì œëª©=${titleMatches}íšŒ, ë‚´ìš©=${contentMatches}íšŒ, +${titleMatches * 0.5 + contentMatches * 0.3}ì `);\n              }\n            } catch (regexError) {\n              logger.warn(`ì •ê·œì‹ ì˜¤ë¥˜ (${word}):`, regexError);\n            }\n          }\n          \n          // ë¬¸ì„œ ì¶”ê°€ ê°€ì¤‘ì¹˜\n          let finalScore = score;\n          \n          if (doc.content && doc.content.length > 0) {\n            finalScore *= 1.2;  // ë‚´ìš©ì´ ìˆëŠ” ë¬¸ì„œ ìš°ëŒ€\n            logger.info(`- ë‚´ìš© ì¡´ì¬ ê°€ì¤‘ì¹˜: x1.2 (${score} -> ${finalScore})`);\n          }\n          \n          if (doc.isTemp) {\n            finalScore *= 1.5;  // í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ë¬¸ì„œ ìš°ëŒ€\n            logger.info(`- í˜„ì¬ ë¬¸ì„œ ê°€ì¤‘ì¹˜: x1.5 (${score} -> ${finalScore})`);\n          } else if (doc.isRecent) {\n            finalScore *= 1.3;  // ìµœê·¼ ë¬¸ì„œ ìš°ëŒ€\n            logger.info(`- ìµœê·¼ ë¬¸ì„œ ê°€ì¤‘ì¹˜: x1.3 (${score} -> ${finalScore})`);\n          }\n          \n          logger.info(`ë¬¸ì„œ \"${doc.title}\" ìµœì¢… ì ìˆ˜: ${finalScore}`);\n          \n          return { ...doc, score: finalScore };\n        } catch (docError) {\n          logger.error(`ë¬¸ì„œ \"${doc.title}\" ì ìˆ˜ ê³„ì‚° ì˜¤ë¥˜:`, docError);\n          return { ...doc, score: 0 };\n        }\n      });\n      \n      // ë””ë²„ê¹…ìš©: ê° ë¬¸ì„œì˜ ì ìˆ˜ í™•ì¸ (ìƒìœ„ 5ê°œë§Œ)\n      const top5Docs = [...scoredDocuments]\n        .sort((a, b) => b.score - a.score)\n        .slice(0, 5);\n      \n      top5Docs.forEach(doc => {\n        logger.info(`ë¬¸ì„œ \"${doc.title}\" ì ìˆ˜: ${doc.score}`);\n      });\n      \n      // ì ìˆ˜ ê¸°ì¤€ ì •ë ¬ ë° í•„í„°ë§\n      const sortedDocuments = scoredDocuments\n        .filter(doc => doc.score > 0.5)  // ë‚®ì€ ì ìˆ˜ ë¬¸ì„œ ì œì™¸ (ì„ê³„ê°’ ë‚®ì¶¤)\n        .sort((a, b) => b.score - a.score);  // ì ìˆ˜ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬\n      \n      // 3ë‹¨ê³„: ìµœì¢… ê²°ê³¼ êµ¬ì„±\n      // ìƒìœ„ ê²°ê³¼ë§Œ ë°˜í™˜ (í† í° ìµœì í™”)\n      const topResults = sortedDocuments.slice(0, this.maxResults);\n      \n      if (topResults.length > 0) {\n        logger.info(`ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼: ${topResults.length}ê±´`);\n        return topResults.map(doc => ({\n          id: doc.id,\n          title: doc.title + (doc.isTemp ? ' (í˜„ì¬ ë¬¸ì„œ)' : doc.isRecent ? ' (ìµœê·¼ ë¬¸ì„œ)' : ''),\n          path: doc.path || `/doc/${doc.id}`,\n          preview: this.generatePreview(doc.content, queryText),\n          score: doc.score,\n          isSemanticMatch: true\n        }));\n      }\n      \n      // 4ë‹¨ê³„: ê²°ê³¼ê°€ ì—†ëŠ” ê²½ìš° ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ ì œê³µ\n      logger.info(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ, ìƒˆ ë¬¸ì„œ ì˜µì…˜ ì œê³µ\");\n      return [{ \n        id: 'new_' + queryText, \n        title: `\"${queryText}\" ìƒˆ ë¬¸ì„œ ìƒì„±`, \n        path: `/doc/${this.slugify(queryText)}`,\n        preview: `\"${queryText}\"ì— ê´€í•œ ìƒˆ ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.`, \n        isCreateNew: true,\n        isSemanticMatch: true\n      }];\n    } catch (error) {\n      logger.error(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }\n  \n  /**\n   * ê²€ìƒ‰ì–´ ì£¼ë³€ ë¬¸ë§¥ì„ ì¶”ì¶œí•˜ì—¬ ë¯¸ë¦¬ë³´ê¸° ìƒì„±\n   * @param {string|object} content - ë¬¸ì„œ ë‚´ìš© (ë¬¸ìì—´ ë˜ëŠ” ê°ì²´)\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {string} - ë¯¸ë¦¬ë³´ê¸° í…ìŠ¤íŠ¸\n   */\n  generatePreview(content, query) {\n    if (!content || !query) return '';\n    \n    // contentê°€ ê°ì²´ì¸ ê²½ìš° ë¬¸ìì—´ë¡œ ë³€í™˜\n    let contentStr = '';\n    if (typeof content === 'string') {\n      contentStr = content;\n    } else if (typeof content === 'object') {\n      // contentê°€ ê°ì²´ì´ê³  content.contentê°€ ìˆìœ¼ë©´ í•´ë‹¹ ê°’ ì‚¬ìš©\n      if (content.content && typeof content.content === 'string') {\n        contentStr = content.content;\n      } else {\n        // ê·¸ ì™¸ì˜ ê²½ìš° JSON ë¬¸ìì—´ë¡œ ë³€í™˜\n        contentStr = JSON.stringify(content);\n      }\n    }\n    \n    // ë§ˆí¬ë‹¤ìš´ íƒœê·¸ ì œê±°\n    const cleanContent = contentStr.replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1')\n                               .replace(/[*#_~`>]/g, '');\n    \n    // ê²€ìƒ‰ì–´ ìœ„ì¹˜ ì°¾ê¸°\n    const queryPosition = cleanContent.toLowerCase().indexOf(query.toLowerCase());\n    \n    if (queryPosition === -1) {\n      // ê²€ìƒ‰ì–´ê°€ ì •í™•íˆ ì—†ìœ¼ë©´ ë¬¸ì„œ ì•ë¶€ë¶„ ë°˜í™˜\n      return cleanContent.slice(0, 100) + '...';\n    }\n    \n    // ê²€ìƒ‰ì–´ ì£¼ë³€ ë¬¸ë§¥ ì¶”ì¶œ (ì•ë’¤ 50ì)\n    const start = Math.max(0, queryPosition - 50);\n    const end = Math.min(cleanContent.length, queryPosition + query.length + 50);\n    \n    let preview = cleanContent.slice(start, end);\n    \n    // ì‹œì‘/ë ë¶€ë¶„ ì²˜ë¦¬\n    if (start > 0) preview = '...' + preview;\n    if (end < cleanContent.length) preview = preview + '...';\n    \n    return preview;\n  }\n\n  /**\n   * AIë¥¼ í™œìš©í•œ ë¬¸ì„œ ê²€ìƒ‰ (Claude API ì‚¬ìš©)\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchByAi(query) {\n    if (!query || query.trim().length === 0) return [];\n    \n    logger.info(\"AI ê¸°ë°˜ ê²€ìƒ‰ ì‹œì‘:\", query);\n    const searchQuery = query.toLowerCase().trim();\n    \n    try {\n      // ë¬¸ì„œ ë¡œë“œ\n      const allDocuments = this.getAllDocuments();\n      logger.info(`AI ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œ: ${allDocuments.length}ê°œ`);\n      \n      if (allDocuments.length === 0) {\n        return [];\n      }\n      \n      // ëª¨ë“  ë¬¸ì„œ ë‚´ìš© í†µí•© (AIì— ì „ì†¡í•  ì»¨í…ìŠ¤íŠ¸)\n      let documentsContext = \"ê²€ìƒ‰ ê°€ëŠ¥í•œ ë¬¸ì„œ ëª©ë¡:\\n\\n\";\n      allDocuments.forEach((doc, index) => {\n        let docContent = '';\n        if (typeof doc.content === 'string') {\n          docContent = doc.content.substring(0, 200); // ë‚´ìš©ì€ ì¼ë¶€ë§Œ í¬í•¨\n        } else if (typeof doc.content === 'object') {\n          docContent = doc.content.content || JSON.stringify(doc.content).substring(0, 200);\n        }\n        \n        documentsContext += `${index + 1}. ì œëª©: ${doc.title}\\n`;\n        documentsContext += `   ë‚´ìš© ì¼ë¶€: ${docContent}...\\n\\n`;\n      });\n      \n      // Claude API ìš”ì²­ êµ¬ì„±\n      const prompt = `\në‹¹ì‹ ì€ ë¬¸ì„œ ê²€ìƒ‰ ë„ìš°ë¯¸ì…ë‹ˆë‹¤. ì•„ë˜ ë¬¸ì„œ ëª©ë¡ì—ì„œ ë‹¤ìŒ ê²€ìƒ‰ì–´ì™€ ê°€ì¥ ê´€ë ¨ì„±ì´ ë†’ì€ ë¬¸ì„œë¥¼ ì°¾ì•„ ë¬¸ì„œ ì œëª©, ê´€ë ¨ì„± ì ìˆ˜, ê°„ë‹¨í•œ ì´ìœ ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•´ì£¼ì„¸ìš”.\n\nê²€ìƒ‰ì–´: \"${searchQuery}\"\n\n${documentsContext}\n\nê²€ìƒ‰ ê²°ê³¼ëŠ” ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•´ì£¼ì„¸ìš”:\n\\`\\`\\`json\n{\n  \"results\": [\n    {\n      \"title\": \"ë¬¸ì„œ ì œëª©\",\n      \"score\": 0.95,\n      \"reason\": \"ì´ ë¬¸ì„œê°€ ê²€ìƒ‰ì–´ì™€ ê´€ë ¨ì´ ìˆëŠ” ì´ìœ ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…\"\n    },\n    ...\n  ]\n}\n\\`\\`\\`\n\nìµœëŒ€ ${this.maxResults}ê°œì˜ ê´€ë ¨ ë¬¸ì„œë§Œ í¬í•¨í•´ ì£¼ì„¸ìš”. ê´€ë ¨ì„±ì´ ë†’ì€ ìˆœì„œë¡œ ì •ë ¬í•´ ì£¼ì„¸ìš”.\n`;\n\n      // ë°±ì—”ë“œ í”„ë¡ì‹œ ì„œë²„ë¥¼ í†µí•´ API í˜¸ì¶œ\n      const response = await fetch('http://localhost:3003/api/claude', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: CLAUDE_MODEL,\n          messages: [\n            {\n              role: \"user\",\n              content: [\n                {\n                  type: \"text\",\n                  text: prompt\n                }\n              ]\n            }\n          ],\n          max_tokens: 2000,\n          temperature: 0.1,\n        }),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`AI ê²€ìƒ‰ API ì˜¤ë¥˜: ${response.status}`);\n      }\n      \n      const responseData = await response.json();\n      logger.info(\"AI ê²€ìƒ‰ ì‘ë‹µ:\", responseData);\n      \n      // ì‘ë‹µì—ì„œ JSON íŒŒì‹±\n      const textContent = responseData.content\n        .filter(item => item.type === 'text')\n        .map(item => item.text)\n        .join('\\n');\n      \n      const jsonMatch = textContent.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n      if (!jsonMatch || !jsonMatch[1]) {\n        throw new Error(\"AI ì‘ë‹µì—ì„œ JSON í˜•ì‹ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\");\n      }\n      \n      const aiResults = JSON.parse(jsonMatch[1]);\n      logger.info(\"íŒŒì‹±ëœ AI ê²€ìƒ‰ ê²°ê³¼:\", aiResults);\n      \n      // AI ê²°ê³¼ë¥¼ ì‹¤ì œ ë¬¸ì„œì™€ ë§¤í•‘\n      const mappedResults = aiResults.results.map(result => {\n        const matchedDoc = allDocuments.find(doc => \n          doc.title.toLowerCase() === result.title.toLowerCase() ||\n          doc.title.toLowerCase().includes(result.title.toLowerCase()) ||\n          result.title.toLowerCase().includes(doc.title.toLowerCase())\n        );\n        \n        if (matchedDoc) {\n          return {\n            id: matchedDoc.id,\n            title: matchedDoc.title,\n            path: matchedDoc.path,\n            preview: result.reason,\n            score: result.score,\n            isAiMatch: true\n          };\n        }\n        \n        // ë§¤ì¹­ë˜ëŠ” ë¬¸ì„œê°€ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ê²°ê³¼ ë°˜í™˜\n        return {\n          id: this.slugify(result.title),\n          title: result.title,\n          path: `/doc/${this.slugify(result.title)}`,\n          preview: result.reason,\n          score: result.score,\n          isAiMatch: true,\n          isCreateNew: true\n        };\n      });\n      \n      logger.info(\"ìµœì¢… AI ê²€ìƒ‰ ê²°ê³¼:\", mappedResults);\n      return mappedResults;\n    } catch (error) {\n      logger.error(\"AI ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ë³¸ í‚¤ì›Œë“œ ê²€ìƒ‰ìœ¼ë¡œ í´ë°±\n      logger.info(\"AI ê²€ìƒ‰ ì‹¤íŒ¨, í‚¤ì›Œë“œ ê²€ìƒ‰ìœ¼ë¡œ ëŒ€ì²´\");\n      return await this.searchByKeyword(query);\n    }\n  }\n\n  /**\n   * í†µí•© ê²€ìƒ‰ - AI ê²€ìƒ‰ ë˜ëŠ” í‚¤ì›Œë“œ ê²€ìƒ‰ì„ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchDocuments(query) {\n    logger.info(\"í†µí•© ë¬¸ì„œ ê²€ìƒ‰ ì‹œì‘:\", query);\n    if (!query || query.trim().length === 0) return [];\n    \n    try {\n      // URL í˜•ì‹ í™•ì¸\n      if (/^https?:\\/\\//i.test(query.trim())) {\n        logger.info(\"URL í˜•ì‹ ê°ì§€:\", query);\n        return [{ id: 'url', title: `URL: ${query.trim()}`, path: query.trim(), isUrl: true }];\n      }\n      \n      if (this.useAiSearch) {\n        // AI ê²€ìƒ‰ ì‚¬ìš© ì‹œ\n        logger.info(\"AI ê²€ìƒ‰ ëª¨ë“œë¡œ ì‹¤í–‰\");\n        const aiResults = await this.searchByAi(query);\n        \n        if (aiResults.length > 0) {\n          logger.info(\"AI ê²€ìƒ‰ ê²°ê³¼ ì°¾ìŒ:\", aiResults.length);\n          return aiResults;\n        }\n      }\n      \n      // AI ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ê±°ë‚˜ AI ê²€ìƒ‰ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ê¸°ì¡´ ë¡œì§ ì‹¤í–‰\n      // 1ë‹¨ê³„: í‚¤ì›Œë“œ ê²€ìƒ‰ ë¨¼ì € ì‹œë„\n      logger.info(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ì‹œì‘\");\n      const keywordResults = await this.searchByKeyword(query);\n      \n      // í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆê³ , ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë©´ ê²°ê³¼ ë°˜í™˜\n      if (keywordResults.length > 0 && !keywordResults.some(result => result.isCreateNew)) {\n        logger.info(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ ì°¾ìŒ:\", keywordResults.length);\n        return keywordResults;\n      }\n      \n      // 2ë‹¨ê³„: í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ê±°ë‚˜ ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆìœ¼ë©´ ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ì‹¤í–‰\n      logger.info(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ìœ¼ë¡œ ì „í™˜\");\n      const semanticResults = await this.searchBySemantic(query);\n      \n      // ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ì—ì„œ ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ì´ ì•„ë‹Œ ê²°ê³¼ê°€ ìˆëŠ” ê²½ìš°\n      if (semanticResults.length > 0 && semanticResults.some(result => !result.isCreateNew)) {\n        logger.info(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜:\", semanticResults.length);\n        return semanticResults;\n      }\n      \n      // 3ë‹¨ê³„: ë‘ ê²€ìƒ‰ ëª¨ë‘ ì‹¤ì œ ê²°ê³¼ê°€ ì—†ê³  ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆëŠ” ê²½ìš°\n      if (keywordResults.length > 0) {\n        logger.info(\"ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆìŒ, í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜\");\n        return keywordResults;\n      }\n      \n      logger.info(\"ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆìŒ, ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜\");\n      return semanticResults;\n    } catch (error) {\n      logger.error(\"í†µí•© ë¬¸ì„œ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [{ \n        id: 'error', \n        title: 'ì˜¤ë¥˜ ë°œìƒ - ê²€ìƒ‰ ì‹¤íŒ¨', \n        path: '#',\n        preview: 'ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ê±°ë‚˜ URLì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”.', \n        isError: true \n      }];\n    }\n  }\n\n  /**\n   * ë¬¸ìì—´ì„ ìŠ¬ëŸ¬ê·¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (URL ì¹œí™”ì ì¸ í˜•ì‹)\n   * @param {string} str - ë³€í™˜í•  ë¬¸ìì—´\n   * @returns {string} - ìŠ¬ëŸ¬ê·¸ í˜•ì‹ì˜ ë¬¸ìì—´\n   */\n  slugify(str) {\n    return str\n      .toLowerCase()\n      .trim()\n      .replace(/[\\s\\W-]+/g, '-') // ê³µë°±, íŠ¹ìˆ˜ë¬¸ìë¥¼ í•˜ì´í”ˆìœ¼ë¡œ ë³€í™˜\n      .replace(/^-+|-+$/g, '');  // ì‹œì‘/ë í•˜ì´í”ˆ ì œê±°\n  }\n\n  /**\n   * ì‚¬ìš©ì ì§€ì • ë¬¸ì„œë§Œ ë³´ì¡´í•˜ëŠ” ê°•ë ¥í•œ ì •ë¦¬ í•¨ìˆ˜\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\n   * @param {boolean} dryRun - trueë©´ ì‹¤ì œ ì‚­ì œí•˜ì§€ ì•Šê³  ë¡œê·¸ë§Œ ì¶œë ¥\n   * @returns {Object} - ì •ë¦¬ ê²°ê³¼ í†µê³„\n   */\n  cleanupKeepOnlySpecified(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ì•„íŒŒíŠ¸', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬'], dryRun = false) {\n    logger.info(`=== ì§€ì • ë¬¸ì„œë§Œ ë³´ì¡´ ì •ë¦¬ ${dryRun ? '(ì‹œë®¬ë ˆì´ì…˜)' : '(ì‹¤ì œ ì‹¤í–‰)'} ===`);\n    logger.info(`ë³´ì¡´í•  ë¬¸ì„œ: ${keepTitles.join(', ')}`);\n    \n    const stats = {\n      totalDocuments: 0,\n      preservedDocuments: 0,\n      deletedDocuments: 0,\n      spaceSaved: 0,\n      backupCreated: false,\n      errors: []\n    };\n    \n    try {\n      // 1ë‹¨ê³„: ëª¨ë“  ë¬¸ì„œ ìˆ˜ì§‘\n      const documentKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\n      stats.totalDocuments = documentKeys.length;\n      \n      logger.info(`ğŸ“Š ë¶„ì„ ì‹œì‘: ì´ ${documentKeys.length}ê°œ ë¬¸ì„œ ë°œê²¬`);\n      \n      // 2ë‹¨ê³„: ë°±ì—… ìƒì„± (ì‚­ì œí•  ë¬¸ì„œê°€ ìˆì„ ë•Œë§Œ)\n      if (!dryRun) {\n        // ë¨¼ì € ì‚­ì œí•  ë¬¸ì„œê°€ ìˆëŠ”ì§€ ë¯¸ë¦¬ í™•ì¸\n        let hasDocumentsToDelete = false;\n        for (const key of documentKeys) {\n          try {\n            const docData = JSON.parse(localStorage.getItem(key));\n            if (!docData || !docData.title) {\n              hasDocumentsToDelete = true;\n              break;\n            }\n            const title = docData.title.trim().toLowerCase();\n            const shouldKeep = keepTitles.some(keepTitle => \n              title === keepTitle.toLowerCase()\n            );\n            if (!shouldKeep) {\n              hasDocumentsToDelete = true;\n              break;\n            }\n          } catch (e) {\n            hasDocumentsToDelete = true;\n            break;\n          }\n        }\n        \n        // ì‚­ì œí•  ë¬¸ì„œê°€ ìˆì„ ë•Œë§Œ ë°±ì—… ìƒì„±\n        if (hasDocumentsToDelete) {\n          const backupData = {};\n          documentKeys.forEach(key => {\n            backupData[key] = localStorage.getItem(key);\n          });\n          \n          const backupKey = `miki_backup_manual_${Date.now()}`;\n          localStorage.setItem(backupKey, JSON.stringify({\n            timestamp: new Date().toISOString(),\n            documents: backupData,\n            type: 'manual_cleanup'\n          }));\n          stats.backupCreated = true;\n          logger.info(`âœ… ë°±ì—… ì™„ë£Œ: ${backupKey}`);\n        } else {\n          logger.info(`â­ï¸ ë°±ì—… ê±´ë„ˆëœ€: ì‚­ì œí•  ë¬¸ì„œê°€ ì—†ìŒ`);\n        }\n      }\n      \n      // 3ë‹¨ê³„: ë¬¸ì„œ ë¶„ë¥˜ ë° ì¤‘ë³µ ì œê±°\n      const preserveList = [];\n      const deleteList = [];\n      const titleGroups = {}; // ì œëª©ë³„ ê·¸ë£¹í™”\n      \n      // ë¨¼ì € ì œëª©ë³„ë¡œ ê·¸ë£¹í™”\n      for (const key of documentKeys) {\n        try {\n          const docData = JSON.parse(localStorage.getItem(key));\n          \n          if (!docData || !docData.title) {\n            deleteList.push({ key, reason: 'ì œëª© ì—†ìŒ', size: localStorage.getItem(key)?.length || 0 });\n            continue;\n          }\n          \n          const title = docData.title.trim().toLowerCase();\n          \n          if (!titleGroups[title]) {\n            titleGroups[title] = [];\n          }\n          \n          titleGroups[title].push({\n            key,\n            title: docData.title,\n            data: docData,\n            updatedAt: new Date(docData.updatedAt || 0)\n          });\n          \n        } catch (e) {\n          deleteList.push({ key, reason: 'íŒŒì‹± ì˜¤ë¥˜', size: localStorage.getItem(key)?.length || 0 });\n          logger.info(`âŒ ì‚­ì œ ì˜ˆì •: ${key} - íŒŒì‹± ì˜¤ë¥˜`);\n        }\n      }\n      \n      // ê° ì œëª© ê·¸ë£¹ì—ì„œ ì²˜ë¦¬\n      for (const [titleLower, docs] of Object.entries(titleGroups)) {\n        const shouldKeep = keepTitles.some(keepTitle => \n          titleLower === keepTitle.toLowerCase()\n        );\n        \n        if (shouldKeep) {\n          // ë³´ì¡´í•  ì œëª©ì¸ ê²½ìš°: ìµœì‹  ë¬¸ì„œë§Œ ë³´ì¡´, ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œ\n          docs.sort((a, b) => b.updatedAt - a.updatedAt); // ìµœì‹ ìˆœ ì •ë ¬\n          \n          const latestDoc = docs[0]; // ê°€ì¥ ìµœì‹  ë¬¸ì„œ\n          const duplicates = docs.slice(1); // ë‚˜ë¨¸ì§€ ì¤‘ë³µ ë¬¸ì„œë“¤\n          \n          preserveList.push(latestDoc);\n          logger.info(`âœ… ë³´ì¡´: ${latestDoc.key} - \"${latestDoc.title}\" (ìµœì‹  ë²„ì „)`);\n          \n          // ì¤‘ë³µ ë¬¸ì„œë“¤ì€ ì‚­ì œ ëª©ë¡ì— ì¶”ê°€\n          for (const duplicate of duplicates) {\n            deleteList.push({\n              key: duplicate.key,\n              title: duplicate.title,\n              reason: `ì¤‘ë³µ ë¬¸ì„œ (${latestDoc.key}ê°€ ìµœì‹ )`,\n              size: localStorage.getItem(duplicate.key)?.length || 0\n            });\n            logger.info(`âŒ ì‚­ì œ ì˜ˆì •: ${duplicate.key} - \"${duplicate.title}\" (ì¤‘ë³µ)`);\n          }\n        } else {\n          // ë³´ì¡´í•˜ì§€ ì•Šì„ ì œëª©ì¸ ê²½ìš°: ëª¨ë“  ë¬¸ì„œ ì‚­ì œ\n          for (const doc of docs) {\n            deleteList.push({\n              key: doc.key,\n              title: doc.title,\n              reason: 'ì§€ì • ëª©ë¡ì— ì—†ìŒ',\n              size: localStorage.getItem(doc.key)?.length || 0\n            });\n            logger.info(`âŒ ì‚­ì œ ì˜ˆì •: ${doc.key} - \"${doc.title}\" (ë³´ì¡´ ëª©ë¡ì— ì—†ìŒ)`);\n          }\n        }\n      }\n      \n      stats.preservedDocuments = preserveList.length;\n      stats.deletedDocuments = deleteList.length;\n      \n      // 4ë‹¨ê³„: ì‹¤ì œ ì‚­ì œ ì‹¤í–‰\n      logger.info(`\\nğŸ”¥ ì‚­ì œ ì‹¤í–‰: ${deleteList.length}ê°œ ë¬¸ì„œ`);\n      \n      if (!dryRun && deleteList.length > 0) {\n        let successCount = 0;\n        \n        for (const item of deleteList) {\n          try {\n            localStorage.removeItem(item.key);\n            \n            // ê´€ë ¨ ì œëª© í‚¤ë„ ì‚­ì œ\n            const titleKey = item.key.replace('miki_document_', 'miki_title_');\n            if (localStorage.getItem(titleKey)) {\n              localStorage.removeItem(titleKey);\n            }\n            \n            stats.spaceSaved += item.size;\n            successCount++;\n            logger.info(`  âœ… ì‚­ì œ ì™„ë£Œ: ${item.key}`);\n          } catch (error) {\n            logger.error(`  âŒ ì‚­ì œ ì‹¤íŒ¨: ${item.key}`, error);\n            stats.errors.push(`ì‚­ì œ ì‹¤íŒ¨: ${item.key} - ${error.message}`);\n          }\n        }\n        \n        logger.info(`âœ… ì‚­ì œ ì™„ë£Œ: ${successCount}/${deleteList.length}ê°œ`);\n      }\n      \n      // 5ë‹¨ê³„: ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\n      if (!dryRun && deleteList.length > 0) {\n        try {\n          const remainingDocs = preserveList.map(item => ({\n            id: item.data.id || item.key.replace('miki_document_', ''),\n            title: item.data.title,\n            updatedAt: item.data.updatedAt || new Date().toISOString()\n          }));\n          \n          remainingDocs.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\n          localStorage.setItem('miki_recent_docs', JSON.stringify(remainingDocs));\n          \n          logger.info(`ğŸ“ ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±: ${remainingDocs.length}ê°œ`);\n        } catch (error) {\n          logger.error('ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„± ì˜¤ë¥˜:', error);\n        }\n      }\n      \n      // 6ë‹¨ê³„: ê²°ê³¼ ë³´ê³ \n      logger.info(`\\nğŸ“Š === ì •ë¦¬ ì™„ë£Œ ë³´ê³ ì„œ ===`);\n      logger.info(`ì´ ë¬¸ì„œ: ${stats.totalDocuments}ê°œ`);\n      logger.info(`ë³´ì¡´ëœ ë¬¸ì„œ: ${stats.preservedDocuments}ê°œ`);\n      logger.info(`ì‚­ì œëœ ë¬¸ì„œ: ${stats.deletedDocuments}ê°œ`);\n      logger.info(`ì ˆì•½ëœ ê³µê°„: ${(stats.spaceSaved / 1024).toFixed(1)}KB`);\n      \n      if (stats.backupCreated) {\n        logger.info(`\\nğŸ›¡ï¸ ë°±ì—… ì •ë³´:`);\n        logger.info(`ë°±ì—… í‚¤: miki_backup_manual_*`);\n        logger.info(`ë³µêµ¬ ë°©ë²•: ê°œë°œì ë„êµ¬ì—ì„œ ë°±ì—… í‚¤ë¡œ ê²€ìƒ‰í•˜ì—¬ ë³µêµ¬ ê°€ëŠ¥`);\n      }\n      \n      if (stats.errors.length > 0) {\n        logger.info(`\\nâš ï¸ ì˜¤ë¥˜ ${stats.errors.length}ê°œ:`);\n        stats.errors.forEach(error => logger.info(`  - ${error}`));\n      }\n      \n    } catch (error) {\n      logger.error('ì§€ì • ë¬¸ì„œ ë³´ì¡´ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n      stats.errors.push(`ì •ë¦¬ ì˜¤ë¥˜: ${error.message}`);\n    }\n    \n    return stats;\n  }\n}\n\nexport default DocumentSearchManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\DocumentSummaryManager.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'API_TYPE' is assigned a value but never used.","line":10,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// DocumentSummaryManager.js\n// ë¬¸ì„œë¥¼ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜í•˜ê³  ì„¹ì…˜ë³„ë¡œ ìš”ì•½í•˜ëŠ” í´ë˜ìŠ¤\n\n/**\n * ë¬¸ì„œ ìš”ì•½ ê´€ë¦¬ í´ë˜ìŠ¤\n * Claude APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œ ìš”ì•½ ìƒì„± ë° ê´€ë¦¬\n */\n\n// API íƒ€ì… ì„¤ì • - ë¸Œë¼ìš°ì € í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ ì‚¬ìš©\nconst API_TYPE = (typeof process !== 'undefined' && process.env?.VITE_AI_API_TYPE) || 'claude';\n\n/**\n * ë¬¸ì„œ ìš”ì•½ ë° ë³€í™˜ì„ ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤\n * AI ì²˜ë¦¬ë¥¼ ìœ„í•œ í† í° ìµœì í™”ì™€ ë¬¸ë§¥ ê´€ë¦¬ë¥¼ ë‹´ë‹¹\n */\nclass DocumentSummaryManager {\n  constructor() {\n    this.summaries = new Map(); // ë¬¸ì„œ ID ë˜ëŠ” ê²½ë¡œë¥¼ í‚¤ë¡œ, ìš”ì•½ ì •ë³´ë¥¼ ê°’ìœ¼ë¡œ ì €ì¥\n    this.maxSectionLength = 1000; // ì„¹ì…˜ë‹¹ ìµœëŒ€ ë¬¸ì ìˆ˜ (ì•½ 250 í† í°)\n    this.maxSummaryLength = 150; // ìš”ì•½ë‹¹ ìµœëŒ€ ë¬¸ì ìˆ˜ (ì•½ 40 í† í°)\n  }\n\n  /**\n   * ë¬¸ì„œë¥¼ ì„¹ì…˜ìœ¼ë¡œ ë¶„í• í•˜ê³  ìš”ì•½ ìƒì„±\n   * @param {string} documentId - ë¬¸ì„œ ì‹ë³„ì\n   * @param {string} content - ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¬¸ì„œ ë‚´ìš©\n   * @returns {Object} - ì„¹ì…˜ ë° ìš”ì•½ ì •ë³´ë¥¼ í¬í•¨í•œ ê°ì²´\n   */\n  processDocument(documentId, content) {\n    if (!content) return null;\n\n    // ë¬¸ì„œë¥¼ í—¤ë”©ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¹ì…˜ìœ¼ë¡œ ë¶„í• \n    const sections = this._splitIntoSections(content);\n    \n    // ê° ì„¹ì…˜ì— ëŒ€í•œ ìš”ì•½ ìƒì„±\n    const processedSections = sections.map(section => {\n      const summary = this._generateSummary(section.content);\n      return {\n        ...section,\n        summary: summary\n      };\n    });\n\n    // ë¬¸ì„œ ì „ì²´ ìš”ì•½ ìƒì„±\n    const documentSummary = this._generateDocumentSummary(processedSections);\n    \n    // ê²°ê³¼ ê°ì²´ ìƒì„± ë° ìºì‹œ ì €ì¥\n    const result = {\n      id: documentId,\n      summary: documentSummary,\n      sections: processedSections,\n      lastUpdated: new Date().toISOString()\n    };\n    \n    this.summaries.set(documentId, result);\n    return result;\n  }\n\n  /**\n   * ë¬¸ì„œë¥¼ í—¤ë”©ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¹ì…˜ìœ¼ë¡œ ë¶„í• \n   * @param {string} content - ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¬¸ì„œ ë‚´ìš©\n   * @returns {Array} - ì„¹ì…˜ ê°ì²´ ë°°ì—´\n   */\n  _splitIntoSections(content) {\n    // í—¤ë”© íŒ¨í„´ (# ì œëª©, ## ì œëª© ë“±)\n    const lines = content.split('\\n');\n    const sections = [];\n    \n    let currentHeading = \"ë¬¸ì„œ\";\n    let currentLevel = 0;\n    let currentContent = \"\";\n    let sectionStart = 0;\n    \n    // í—¤ë”©ì´ ì—†ëŠ” ì‹œì‘ ë¶€ë¶„ì„ ì²« ë²ˆì§¸ ì„¹ì…˜ìœ¼ë¡œ ì²˜ë¦¬\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      const headingMatch = line.match(/^(#{1,6})\\s+(.+)$/);\n      \n      if (headingMatch) {\n        // ì²« ë²ˆì§¸ í—¤ë”©ì„ ë§Œë‚¬ì„ ë•Œ ì´ì „ ë‚´ìš©ì´ ìˆìœ¼ë©´ ì„¹ì…˜ìœ¼ë¡œ ì¶”ê°€\n        if (currentContent.trim()) {\n          sections.push({\n            title: \"ì†Œê°œ\",\n            level: 0,\n            content: currentContent.trim(),\n            startLine: sectionStart,\n            endLine: i - 1\n          });\n        }\n        \n        // í˜„ì¬ í—¤ë”© ì •ë³´ ì—…ë°ì´íŠ¸\n        currentHeading = headingMatch[2];\n        currentLevel = headingMatch[1].length;\n        currentContent = line;\n        sectionStart = i;\n      } else {\n        // í—¤ë”©ì´ ì•„ë‹Œ ì¼ë°˜ í…ìŠ¤íŠ¸ ì¤„ ì¶”ê°€\n        currentContent += \"\\n\" + line;\n      }\n      \n      // ë‹¤ìŒ í—¤ë”©ì„ ë§Œë‚˜ê±°ë‚˜ ë¬¸ì„œ ëì— ë„ë‹¬í•˜ë©´ ì„¹ì…˜ ì¶”ê°€\n      const nextLine = i + 1 < lines.length ? lines[i + 1] : null;\n      const isNextHeading = nextLine && nextLine.match(/^(#{1,6})\\s+(.+)$/);\n      \n      if (isNextHeading || i === lines.length - 1) {\n        if (currentContent.trim()) {\n          sections.push({\n            title: currentHeading,\n            level: currentLevel,\n            content: currentContent.trim(),\n            startLine: sectionStart,\n            endLine: i\n          });\n        }\n        \n        if (isNextHeading) {\n          const nextHeadingMatch = nextLine.match(/^(#{1,6})\\s+(.+)$/);\n          currentHeading = nextHeadingMatch[2];\n          currentLevel = nextHeadingMatch[1].length;\n          currentContent = \"\";\n          sectionStart = i + 1;\n        }\n      }\n    }\n    \n    // ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì „ì²´ ë¬¸ì„œë¥¼ í•˜ë‚˜ì˜ ì„¹ì…˜ìœ¼ë¡œ ì²˜ë¦¬\n    if (sections.length === 0 && content.trim()) {\n      sections.push({\n        title: \"ë¬¸ì„œ\",\n        level: 0,\n        content: content.trim(),\n        startLine: 0,\n        endLine: lines.length - 1\n      });\n    }\n    \n    return sections;\n  }\n  \n  /**\n   * ì„¹ì…˜ ë‚´ìš©ì— ëŒ€í•œ ê°„ë‹¨í•œ ìš”ì•½ ìƒì„± (ì‹¤ì œë¡œëŠ” AIë¥¼ í†µí•´ ìš”ì•½í•  ìˆ˜ ìˆìŒ)\n   * @param {string} sectionContent - ì„¹ì…˜ ë‚´ìš©\n   * @returns {string} - ì„¹ì…˜ ìš”ì•½\n   */\n  _generateSummary(sectionContent) {\n    // ê°„ë‹¨í•œ ìš”ì•½ ë°©ì‹: ì²« ë²ˆì§¸ ë¬¸ì¥ ë˜ëŠ” ì¼ì • ê¸¸ì´ ì¶”ì¶œ\n    if (!sectionContent) return \"\";\n    \n    // ë„ˆë¬´ ê¸´ ì„¹ì…˜ì€ ì¼ì • ê¸¸ì´ë§Œ ì‚¬ìš©\n    if (sectionContent.length > this.maxSectionLength) {\n      sectionContent = sectionContent.substring(0, this.maxSectionLength) + \"...\";\n    }\n    \n    // ì²« ë²ˆì§¸ ë¬¸ì¥ ë˜ëŠ” ì²« ë²ˆì§¸ ì¤„ì„ ìš”ì•½ìœ¼ë¡œ ì‚¬ìš©\n    let summary = \"\";\n    const firstSentenceMatch = sectionContent.match(/^.+?[.!?](?:\\s|$)/);\n    \n    if (firstSentenceMatch) {\n      summary = firstSentenceMatch[0].trim();\n    } else {\n      // ë¬¸ì¥ì´ ëª…í™•í•˜ì§€ ì•Šìœ¼ë©´ ì²« ë²ˆì§¸ ì¤„ ì‚¬ìš©\n      const firstLine = sectionContent.split('\\n')[0].trim();\n      summary = firstLine;\n    }\n    \n    // ìš”ì•½ì´ ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸°\n    if (summary.length > this.maxSummaryLength) {\n      summary = summary.substring(0, this.maxSummaryLength) + \"...\";\n    }\n    \n    return summary;\n  }\n  \n  /**\n   * ë¬¸ì„œ ì „ì²´ ìš”ì•½ ìƒì„±\n   * @param {Array} sections - ì„¹ì…˜ ê°ì²´ ë°°ì—´\n   * @returns {string} - ë¬¸ì„œ ì „ì²´ ìš”ì•½\n   */\n  _generateDocumentSummary(sections) {\n    // ê° ì„¹ì…˜ì˜ ì œëª©ì„ ëª¨ì•„ì„œ ë¬¸ì„œ êµ¬ì¡° ìš”ì•½ ìƒì„±\n    const titles = sections.map(section => {\n      const indent = \"  \".repeat(Math.max(0, section.level - 1));\n      return `${indent}- ${section.title}`;\n    });\n    \n    return \"ë¬¸ì„œ êµ¬ì¡°:\\n\" + titles.join('\\n');\n  }\n  \n  /**\n   * ì €ì¥ëœ ë¬¸ì„œ ìš”ì•½ ê°€ì ¸ì˜¤ê¸°\n   * @param {string} documentId - ë¬¸ì„œ ì‹ë³„ì\n   * @returns {Object|null} - ì €ì¥ëœ ìš”ì•½ ê°ì²´ ë˜ëŠ” null\n   */\n  getSummary(documentId) {\n    return this.summaries.get(documentId) || null;\n  }\n  \n  /**\n   * ë¬¸ì„œì˜ íŠ¹ì • ë¶€ë¶„ ì£¼ë³€ ì»¨í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°\n   * @param {string} documentId - ë¬¸ì„œ ì‹ë³„ì\n   * @param {number} lineNumber - ì¤„ ë²ˆí˜¸\n   * @param {number} contextLines - ì•ë’¤ë¡œ í¬í•¨í•  ì¤„ ìˆ˜\n   * @returns {Object|null} - ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ê°ì²´ ë˜ëŠ” null\n   */\n  getContextAroundLine(documentId, lineNumber, contextLines = 5) {\n    const summary = this.summaries.get(documentId);\n    if (!summary) return null;\n    \n    // í•´ë‹¹ ë¼ì¸ì´ í¬í•¨ëœ ì„¹ì…˜ ì°¾ê¸°\n    const section = summary.sections.find(\n      s => lineNumber >= s.startLine && lineNumber <= s.endLine\n    );\n    \n    if (!section) return null;\n    \n    // ì„¹ì…˜ ë‚´ìš©ì—ì„œ ì£¼ë³€ ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œ\n    const lines = section.content.split('\\n');\n    const lineIndex = lineNumber - section.startLine;\n    \n    const start = Math.max(0, lineIndex - contextLines);\n    const end = Math.min(lines.length - 1, lineIndex + contextLines);\n    \n    const contextLines_code = lines.slice(start, end + 1);\n    \n    return {\n      section: section.title,\n      context: contextLines_code.join('\\n'),\n      startLine: section.startLine + start,\n      endLine: section.startLine + end\n    };\n  }\n  \n  /**\n   * ìºì‹œëœ ëª¨ë“  ìš”ì•½ ì •ë³´ ì§€ìš°ê¸°\n   */\n  clearCache() {\n    this.summaries.clear();\n  }\n}\n\nexport default DocumentSummaryManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\ServerDiagnostic.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\SyncManager.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\database.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'trans' is defined but never used. Allowed unused args must match /^_/u.","line":17,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":17,"endColumn":66},{"ruleId":"no-unused-vars","severity":1,"message":"'primKey' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":69},{"ruleId":"no-unused-vars","severity":1,"message":"'obj' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":74},{"ruleId":"no-unused-vars","severity":1,"message":"'trans' is defined but never used. Allowed unused args must match /^_/u.","line":22,"column":76,"nodeType":"Identifier","messageId":"unusedVar","endLine":22,"endColumn":81}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createLogger } from '../utils/logger';\nconst logger = createLogger('database');\nimport Dexie from 'dexie';\r\n\r\n// Database schema\r\nexport class MikiDatabase extends Dexie {\r\n  constructor() {\r\n    super('MikiEditorDB');\r\n    \r\n    // Define schemas\r\n    this.version(1).stores({\r\n      documents: '++id, title, content, updatedAt, isUserEditedTitle, isAutoSyncedTitle',\r\n      syncQueue: '++queueId, documentId, operation, status, retryAt, retryCount, data'\r\n    });\r\n    \r\n    // Add hooks for automatic timestamps\r\n    this.documents.hook('creating', function (primKey, obj, trans) {\r\n      obj.createdAt = new Date().toISOString();\r\n      obj.updatedAt = new Date().toISOString();\r\n    });\r\n    \r\n    this.documents.hook('updating', function (modifications, primKey, obj, trans) {\r\n      modifications.updatedAt = new Date().toISOString();\r\n    });\r\n  }\r\n}\r\n\r\n// Create database instance\r\nexport const db = new MikiDatabase();\r\n\r\n// Migration utilities\r\nexport class DatabaseMigration {\r\n  static async migrateFromLocalStorage() {\r\n    logger.info('ğŸ”„ localStorage â†’ IndexedDB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘');\r\n    \r\n    try {\r\n      const localDocs = this.getLocalStorageDocuments();\r\n      logger.info(`ğŸ“„ ë°œê²¬ëœ ë¡œì»¬ ë¬¸ì„œ: ${localDocs.length}ê°œ`);\r\n      \r\n      if (localDocs.length === 0) {\r\n        logger.info('âœ… ë§ˆì´ê·¸ë ˆì´ì…˜í•  ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.');\r\n        return { success: true, migrated: 0 };\r\n      }\r\n      \r\n      // Batch insert for better performance\r\n      await db.transaction('rw', db.documents, async () => {\r\n        for (const doc of localDocs) {\r\n          await db.documents.put({\r\n            id: doc.id,\r\n            title: doc.title || 'ì œëª© ì—†ìŒ',\r\n            content: doc.content || '',\r\n            updatedAt: doc.updatedAt || new Date().toISOString(),\r\n            isUserEditedTitle: doc.isUserEditedTitle || false,\r\n            isAutoSyncedTitle: doc.isAutoSyncedTitle || false\r\n          });\r\n        }\r\n      });\r\n      \r\n      logger.info(`âœ… ${localDocs.length}ê°œ ë¬¸ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ`);\r\n      \r\n      // Mark migration as completed\r\n      localStorage.setItem('miki_migration_completed', 'true');\r\n      \r\n      return { success: true, migrated: localDocs.length };\r\n      \r\n    } catch (error) {\r\n      logger.error('âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  static getLocalStorageDocuments() {\r\n    const documents = [];\r\n    const keys = Object.keys(localStorage);\r\n    \r\n    for (const key of keys) {\r\n      if (key.startsWith('miki_document_')) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          const id = key.replace('miki_document_', '');\r\n          \r\n          documents.push({\r\n            id: id,\r\n            title: docData.title || localStorage.getItem(`miki_title_${id}`) || 'ì œëª© ì—†ìŒ',\r\n            content: docData.content || '',\r\n            updatedAt: docData.updatedAt || new Date().toISOString(),\r\n            isUserEditedTitle: docData.isUserEditedTitle || false,\r\n            isAutoSyncedTitle: docData.isAutoSyncedTitle || false\r\n          });\r\n        } catch (error) {\r\n          logger.warn(`âš ï¸ ë¬¸ì„œ íŒŒì‹± ì‹¤íŒ¨: ${key}`, error);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return documents;\r\n  }\r\n  \r\n  static async cleanupLocalStorage() {\r\n    logger.info('ğŸ§¹ localStorage ì •ë¦¬ ì‹œì‘');\r\n    \r\n    const keysToRemove = [];\r\n    const keys = Object.keys(localStorage);\r\n    \r\n    for (const key of keys) {\r\n      if (key.startsWith('miki_document_') || \r\n          key.startsWith('miki_title_') ||\r\n          key.startsWith('miki_search_cache_')) {\r\n        keysToRemove.push(key);\r\n      }\r\n    }\r\n    \r\n    keysToRemove.forEach(key => localStorage.removeItem(key));\r\n    logger.info(`ğŸ—‘ï¸ ${keysToRemove.length}ê°œ í•­ëª© ì •ë¦¬ ì™„ë£Œ`);\r\n  }\r\n}\r\n\r\n// Sync queue management\r\nexport class SyncQueue {\r\n  static async enqueue(documentId, operation, data = {}) {\r\n    try {\r\n      await db.syncQueue.add({\r\n        documentId,\r\n        operation, // 'create', 'update', 'delete'\r\n        status: 'pending',\r\n        retryAt: new Date().toISOString(),\r\n        retryCount: 0,\r\n        data: JSON.stringify(data),\r\n        createdAt: new Date().toISOString()\r\n      });\r\n      \r\n      logger.info(`ğŸ“¤ ë™ê¸°í™” íì— ì¶”ê°€: ${operation} - ${documentId}`);\r\n    } catch (error) {\r\n      logger.error('âŒ ë™ê¸°í™” í ì¶”ê°€ ì‹¤íŒ¨:', error);\r\n    }\r\n  }\r\n  \r\n  static async getPendingItems() {\r\n    return await db.syncQueue\r\n      .where('status')\r\n      .equals('pending')\r\n      .and(item => new Date(item.retryAt) <= new Date())\r\n      .toArray();\r\n  }\r\n  \r\n  static async markAsCompleted(queueId) {\r\n    await db.syncQueue.update(queueId, { \r\n      status: 'completed',\r\n      completedAt: new Date().toISOString()\r\n    });\r\n  }\r\n  \r\n  static async markAsFailed(queueId, error) {\r\n    const item = await db.syncQueue.get(queueId);\r\n    const retryCount = (item?.retryCount || 0) + 1;\r\n    const maxRetries = 5;\r\n    \r\n    if (retryCount >= maxRetries) {\r\n      await db.syncQueue.update(queueId, {\r\n        status: 'failed',\r\n        retryCount,\r\n        lastError: error,\r\n        failedAt: new Date().toISOString()\r\n      });\r\n    } else {\r\n      // Exponential backoff: 2^retryCount minutes\r\n      const retryDelay = Math.pow(2, retryCount) * 60 * 1000;\r\n      const retryAt = new Date(Date.now() + retryDelay).toISOString();\r\n      \r\n      await db.syncQueue.update(queueId, {\r\n        status: 'pending',\r\n        retryCount,\r\n        retryAt,\r\n        lastError: error\r\n      });\r\n    }\r\n  }\r\n  \r\n  static async cleanup() {\r\n    // Remove completed items older than 7 days\r\n    const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString();\r\n    \r\n    await db.syncQueue\r\n      .where('status')\r\n      .equals('completed')\r\n      .and(item => item.completedAt < weekAgo)\r\n      .delete();\r\n  }\r\n}\r\n\r\n// Database utilities\r\nexport class DatabaseUtils {\r\n  static async exportData() {\r\n    try {\r\n      const documents = await db.documents.toArray();\r\n      const syncQueue = await db.syncQueue.toArray();\r\n      \r\n      const exportData = {\r\n        version: 1,\r\n        exportedAt: new Date().toISOString(),\r\n        documents,\r\n        syncQueue\r\n      };\r\n      \r\n      return JSON.stringify(exportData, null, 2);\r\n    } catch (error) {\r\n      logger.error('âŒ ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  static async importData(jsonData) {\r\n    try {\r\n      const data = JSON.parse(jsonData);\r\n      \r\n      if (data.version !== 1) {\r\n        throw new Error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ë°ì´í„° ë²„ì „ì…ë‹ˆë‹¤.');\r\n      }\r\n      \r\n      await db.transaction('rw', [db.documents, db.syncQueue], async () => {\r\n        // Clear existing data\r\n        await db.documents.clear();\r\n        await db.syncQueue.clear();\r\n        \r\n        // Import documents\r\n        if (data.documents?.length > 0) {\r\n          await db.documents.bulkAdd(data.documents);\r\n        }\r\n        \r\n        // Import sync queue\r\n        if (data.syncQueue?.length > 0) {\r\n          await db.syncQueue.bulkAdd(data.syncQueue);\r\n        }\r\n      });\r\n      \r\n      logger.info('âœ… ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ');\r\n      return { success: true };\r\n      \r\n    } catch (error) {\r\n      logger.error('âŒ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  static async getStorageInfo() {\r\n    try {\r\n      const docCount = await db.documents.count();\r\n      const queueCount = await db.syncQueue.count();\r\n      \r\n      // Estimate storage usage (rough calculation)\r\n      const docs = await db.documents.toArray();\r\n      const totalSize = docs.reduce((size, doc) => {\r\n        return size + (doc.content?.length || 0) + (doc.title?.length || 0);\r\n      }, 0);\r\n      \r\n      return {\r\n        documentCount: docCount,\r\n        queueCount: queueCount,\r\n        estimatedSize: totalSize,\r\n        formattedSize: this.formatBytes(totalSize)\r\n      };\r\n    } catch (error) {\r\n      logger.error('âŒ ì €ì¥ì†Œ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨:', error);\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  static formatBytes(bytes) {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  }\r\n}\r\n\r\n// Initialize database and handle migrations\r\nexport const initializeDatabase = async () => {\r\n  try {\r\n    // Open database\r\n    await db.open();\r\n    logger.info('âœ… IndexedDB ì—°ê²° ì„±ê³µ');\r\n    \r\n    // Check if migration is needed\r\n    const migrationCompleted = localStorage.getItem('miki_migration_completed');\r\n    \r\n    if (!migrationCompleted) {\r\n      const result = await DatabaseMigration.migrateFromLocalStorage();\r\n      \r\n      if (result.success && result.migrated > 0) {\r\n        // Optional: Clean up localStorage after successful migration\r\n        // await DatabaseMigration.cleanupLocalStorage();\r\n        logger.info('ğŸ“¦ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ, localStorageëŠ” ë°±ì—…ìš©ìœ¼ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.');\r\n      }\r\n    }\r\n    \r\n    // Cleanup old sync queue items\r\n    await SyncQueue.cleanup();\r\n    \r\n    return { success: true };\r\n    \r\n  } catch (error) {\r\n    logger.error('âŒ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\errorHandler.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\keywordExtractor.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\logger.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"info"},"fix":{"range":[849,891],"text":""},"desc":"Remove the console.info()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":50,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":50,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"time"},"fix":{"range":[1144,1186],"text":""},"desc":"Remove the console.time()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":56,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":56,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"timeEnd"},"fix":{"range":[1287,1332],"text":""},"desc":"Remove the console.timeEnd()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// í™˜ê²½ë³„ ë¡œê¹… ì œì–´ ìœ í‹¸ë¦¬í‹°\r\nconst isDevelopment = (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') || false;\r\nconst isTest = (typeof process !== 'undefined' && process.env?.NODE_ENV === 'test') || false;\r\n\r\n// ë¡œê·¸ ë ˆë²¨ ì •ì˜\r\nconst LOG_LEVELS = {\r\n  ERROR: 0,\r\n  WARN: 1,\r\n  INFO: 2,\r\n  DEBUG: 3\r\n};\r\n\r\n// í˜„ì¬ ë¡œê·¸ ë ˆë²¨ ì„¤ì • (í™˜ê²½ë³€ìˆ˜ë¡œ ì œì–´ ê°€ëŠ¥)\r\nconst currentLogLevel = isDevelopment \r\n  ? LOG_LEVELS.DEBUG \r\n  : LOG_LEVELS.ERROR;\r\n\r\nclass Logger {\r\n  constructor(module = 'App') {\r\n    this.module = module;\r\n  }\r\n\r\n  error(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.ERROR) {\r\n      logger.error(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  warn(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.WARN) {\r\n      logger.warn(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  info(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.INFO) {\r\n      console.info(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  debug(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.DEBUG && !isTest) {\r\n      logger.info(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  // ì„±ëŠ¥ ì¸¡ì •ìš©\r\n  time(label) {\r\n    if (currentLogLevel >= LOG_LEVELS.DEBUG && !isTest) {\r\n      console.time(`[${this.module}] ${label}`);\r\n    }\r\n  }\r\n\r\n  timeEnd(label) {\r\n    if (currentLogLevel >= LOG_LEVELS.DEBUG && !isTest) {\r\n      console.timeEnd(`[${this.module}] ${label}`);\r\n    }\r\n  }\r\n}\r\n\r\n// ëª¨ë“ˆë³„ ë¡œê±° ìƒì„± í•¨ìˆ˜\r\nexport const createLogger = (module) => new Logger(module);\r\n\r\n// ê¸°ë³¸ ë¡œê±°\r\nexport const logger = new Logger('App');\r\n\r\n// ë ˆê±°ì‹œ console.log ëŒ€ì²´ìš© (ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜)\r\nexport const debugLog = (...args) => {\r\n  if (isDevelopment && !isTest) {\r\n    logger.info('[DEBUG]', ...args);\r\n  }\r\n};\r\n\r\nexport default logger; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\searchCache.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
./eslint-full-report.json:[{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__mocks__\\@testing-library\\react.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__mocks__\\fileMock.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\hooks\\useAutoSave.test.js","messages":[{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":26,"column":10,"nodeType":"ArrowFunctionExpression","messageId":"noDisplayName","endLine":30,"endColumn":4},{"ruleId":"no-unused-vars","severity":1,"message":"'mockOnSaveStart' is assigned a value but never used.","line":34,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'mockOnSaveSuccess' is assigned a value but never used.","line":35,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'mockOnSaveError' is assigned a value but never used.","line":36,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { renderHook, act } from '@testing-library/react';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport useAutoSave from '../../hooks/useAutoSave';\r\n\r\n// useSaveDocument í›… ëª¨í‚¹\r\nconst mockMutateAsync = jest.fn();\r\n\r\njest.mock('../../hooks/useDocuments', () => ({\r\n  useSaveDocument: () => ({\r\n    mutateAsync: mockMutateAsync\r\n  })\r\n}));\r\n\r\n// íƒ€ì´ë¨¸ ëª¨í‚¹\r\njest.useFakeTimers();\r\n\r\n// QueryClient ë˜í¼ ìƒì„±\r\nconst createWrapper = () => {\r\n  const queryClient = new QueryClient({\r\n    defaultOptions: {\r\n      queries: { retry: false },\r\n      mutations: { retry: false }\r\n    }\r\n  });\r\n  \r\n  return ({ children }) => (\r\n    <QueryClientProvider client={queryClient}>\r\n      {children}\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n\r\ndescribe('useAutoSave', () => {\r\n  let mockOnSaveStart;\r\n  let mockOnSaveSuccess;\r\n  let mockOnSaveError;\r\n\r\n  beforeEach(() => {\r\n    // ëª¨í‚¹ëœ í•¨ìˆ˜ë“¤ ì´ˆê¸°í™”\r\n    mockMutateAsync.mockClear();\r\n    \r\n    mockOnSaveStart = jest.fn();\r\n    mockOnSaveSuccess = jest.fn();\r\n    mockOnSaveError = jest.fn();\r\n    \r\n    jest.clearAllTimers();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('ì´ˆê¸° ìƒíƒœ', () => {\r\n    test('ì´ˆê¸° ìƒíƒœê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ì•¼ í•¨', () => {\r\n      const { result } = renderHook(\r\n        () => useAutoSave({\r\n          document: null,\r\n          content: '',\r\n          title: '',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      expect(result.current.saveStatus).toBe('saved');\r\n      expect(result.current.hasUnsavedChanges).toBe(false);\r\n      expect(result.current.lastSaved).toBeNull();\r\n      expect(result.current.isAutoSaving).toBe(false);\r\n      expect(result.current.isManualSaving).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('ë³€ê²½ì‚¬í•­ ê°ì§€', () => {\r\n    test('ë‚´ìš© ë³€ê²½ ì‹œ unsaved ìƒíƒœê°€ ë˜ì–´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ì´ˆê¸° ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ content }) => useAutoSave({\r\n          document: testDocument,\r\n          content,\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: true\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { content: 'ì´ˆê¸° ë‚´ìš©' }\r\n        }\r\n      );\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(false);\r\n\r\n      // ë‚´ìš© ë³€ê²½\r\n      rerender({ content: 'ë³€ê²½ëœ ë‚´ìš©' });\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n      expect(result.current.saveStatus).toBe('pending');\r\n    });\r\n\r\n    test('ì œëª© ë³€ê²½ ì‹œ unsaved ìƒíƒœê°€ ë˜ì–´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'ì´ˆê¸° ì œëª©',\r\n        content: 'ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ title }) => useAutoSave({\r\n          document: testDocument,\r\n          content: 'ë‚´ìš©',\r\n          title,\r\n          enabled: true\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { title: 'ì´ˆê¸° ì œëª©' }\r\n        }\r\n      );\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(false);\r\n\r\n      // ì œëª© ë³€ê²½\r\n      rerender({ title: 'ë³€ê²½ëœ ì œëª©' });\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n      expect(result.current.saveStatus).toBe('pending');\r\n    });\r\n  });\r\n\r\n  describe('ìë™ ì €ì¥', () => {\r\n    test('ë³€ê²½ì‚¬í•­ ê°ì§€ê°€ ì •ìƒ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ì´ˆê¸° ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ content }) => useAutoSave({\r\n          document: testDocument,\r\n          content,\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: true,\r\n          interval: 3000\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { content: 'ì´ˆê¸° ë‚´ìš©' }\r\n        }\r\n      );\r\n\r\n      // ë‚´ìš© ë³€ê²½\r\n      rerender({ content: 'ë³€ê²½ëœ ë‚´ìš©' });\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n      expect(result.current.saveStatus).toBe('pending');\r\n    });\r\n\r\n    test('ìë™ ì €ì¥ì´ ë¹„í™œì„±í™”ë˜ë©´ ì €ì¥ë˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ì´ˆê¸° ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ content }) => useAutoSave({\r\n          document: testDocument,\r\n          content,\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: false, // ë¹„í™œì„±í™”\r\n          interval: 3000\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { content: 'ì´ˆê¸° ë‚´ìš©' }\r\n        }\r\n      );\r\n\r\n      // ë‚´ìš© ë³€ê²½\r\n      rerender({ content: 'ë³€ê²½ëœ ë‚´ìš©' });\r\n      // enabledê°€ falseì´ë¯€ë¡œ hasUnsavedChangesëŠ” ì—¬ì „íˆ trueê°€ ë˜ì§€ë§Œ ìë™ì €ì¥ì€ ì•ˆë¨\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n\r\n      // 3ì´ˆ ê²½ê³¼\r\n      act(() => {\r\n        jest.advanceTimersByTime(3000);\r\n      });\r\n\r\n      expect(mockMutateAsync).not.toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('ìˆ˜ë™ ì €ì¥', () => {\r\n    test('ìˆ˜ë™ ì €ì¥ í•¨ìˆ˜ê°€ ì¡´ì¬í•´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ë‚´ìš©'\r\n      };\r\n\r\n      const { result } = renderHook(\r\n        () => useAutoSave({\r\n          document: testDocument,\r\n          content: 'ë³€ê²½ëœ ë‚´ìš©',\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      expect(typeof result.current.manualSave).toBe('function');\r\n    });\r\n  });\r\n\r\n  describe('ì €ì¥ ìƒíƒœ ë©”ì‹œì§€', () => {\r\n    test('ì €ì¥ ìƒíƒœ ë©”ì‹œì§€ í•¨ìˆ˜ê°€ ì¡´ì¬í•´ì•¼ í•¨', () => {\r\n      const { result } = renderHook(\r\n        () => useAutoSave({\r\n          document: { id: 'test' },\r\n          content: 'ë‚´ìš©',\r\n          title: 'ì œëª©',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      expect(typeof result.current.getSaveStatusMessage).toBe('function');\r\n      expect(result.current.getSaveStatusMessage()).toBe('ì €ì¥ë¨');\r\n    });\r\n  });\r\n\r\n  describe('í˜ì´ì§€ ì´íƒˆ ê²½ê³ ', () => {\r\n    test('beforeunload ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ê´€ë ¨ ê¸°ëŠ¥ì´ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const { unmount } = renderHook(\r\n        () => useAutoSave({\r\n          document: { id: 'test' },\r\n          content: 'ë‚´ìš©',\r\n          title: 'ì œëª©',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      // ì»´í¬ë„ŒíŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë§ˆìš´íŠ¸ë˜ê³  ì–¸ë§ˆìš´íŠ¸ë˜ëŠ”ì§€ í™•ì¸\r\n      expect(() => unmount()).not.toThrow();\r\n    });\r\n  });\r\n}); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\hooks\\useKeyboardShortcuts.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\stores\\documentStore.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\utils\\errorHandler.test.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":11,"column":30,"nodeType":"MemberExpression","messageId":"unexpected","endLine":11,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":13,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":13,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":127,"column":14,"nodeType":"MemberExpression","messageId":"unexpected","endLine":127,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":150,"column":14,"nodeType":"MemberExpression","messageId":"unexpected","endLine":150,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":211,"column":14,"nodeType":"MemberExpression","messageId":"unexpected","endLine":211,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  ErrorTypes,\r\n  classifyError,\r\n  getErrorMessage,\r\n  logError,\r\n  isRetryableError,\r\n  isOfflineError\r\n} from '../../utils/errorHandler';\r\n\r\n// ì½˜ì†” ì—ëŸ¬ ëª¨í‚¹\r\nconst originalConsoleError = console.error;\r\nbeforeEach(() => {\r\n  console.error = jest.fn();\r\n});\r\n\r\nafterEach(() => {\r\n  console.error = originalConsoleError;\r\n});\r\n\r\ndescribe('ErrorHandler', () => {\r\n  describe('ErrorTypes', () => {\r\n    test('ëª¨ë“  ì—ëŸ¬ íƒ€ì…ì´ ì •ì˜ë˜ì–´ ìˆì–´ì•¼ í•¨', () => {\r\n      expect(ErrorTypes.NETWORK_ERROR).toBe('NETWORK_ERROR');\r\n      expect(ErrorTypes.SERVER_ERROR).toBe('SERVER_ERROR');\r\n      expect(ErrorTypes.NOT_FOUND).toBe('NOT_FOUND');\r\n      expect(ErrorTypes.VALIDATION_ERROR).toBe('VALIDATION_ERROR');\r\n      expect(ErrorTypes.UNKNOWN_ERROR).toBe('UNKNOWN_ERROR');\r\n    });\r\n  });\r\n\r\n  describe('classifyError', () => {\r\n    test('null/undefined ì—ëŸ¬ëŠ” UNKNOWN_ERRORë¡œ ë¶„ë¥˜ë˜ì–´ì•¼ í•¨', () => {\r\n      expect(classifyError(null)).toBe(ErrorTypes.UNKNOWN_ERROR);\r\n      expect(classifyError(undefined)).toBe(ErrorTypes.UNKNOWN_ERROR);\r\n    });\r\n\r\n    test('ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      expect(classifyError(networkError)).toBe(ErrorTypes.NETWORK_ERROR);\r\n    });\r\n\r\n    test('HTTP 404 ì—ëŸ¬ë¥¼ NOT_FOUNDë¡œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      expect(classifyError(notFoundError)).toBe(ErrorTypes.NOT_FOUND);\r\n    });\r\n\r\n    test('HTTP 4xx ì—ëŸ¬ë¥¼ VALIDATION_ERRORë¡œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const validationError = new Error('HTTP 400: Bad Request');\r\n      expect(classifyError(validationError)).toBe(ErrorTypes.VALIDATION_ERROR);\r\n      \r\n      const unauthorizedError = new Error('HTTP 401: Unauthorized');\r\n      expect(classifyError(unauthorizedError)).toBe(ErrorTypes.VALIDATION_ERROR);\r\n    });\r\n\r\n    test('HTTP 5xx ì—ëŸ¬ë¥¼ SERVER_ERRORë¡œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      expect(classifyError(serverError)).toBe(ErrorTypes.SERVER_ERROR);\r\n      \r\n      const badGatewayError = new Error('HTTP 502: Bad Gateway');\r\n      expect(classifyError(badGatewayError)).toBe(ErrorTypes.SERVER_ERROR);\r\n    });\r\n\r\n    test('íŠ¹ì • ë©”ì‹œì§€ íŒ¨í„´ì„ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');\r\n      expect(classifyError(notFoundError)).toBe(ErrorTypes.NOT_FOUND);\r\n    });\r\n\r\n    test('ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ëŠ” UNKNOWN_ERRORë¡œ ë¶„ë¥˜ë˜ì–´ì•¼ í•¨', () => {\r\n      const unknownError = new Error('Something went wrong');\r\n      expect(classifyError(unknownError)).toBe(ErrorTypes.UNKNOWN_ERROR);\r\n    });\r\n  });\r\n\r\n  describe('getErrorMessage', () => {\r\n    test('ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      const errorMessage = getErrorMessage(networkError);\r\n\r\n      expect(errorMessage.title).toBe('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜');\r\n      expect(errorMessage.message).toBe('ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');\r\n      expect(errorMessage.action).toBe('ë‹¤ì‹œ ì‹œë„');\r\n      expect(errorMessage.canRetry).toBe(true);\r\n      expect(errorMessage.originalError).toBe(networkError);\r\n      expect(errorMessage.timestamp).toBeDefined();\r\n    });\r\n\r\n    test('ì„œë²„ ì—ëŸ¬ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•¨', () => {\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      const errorMessage = getErrorMessage(serverError);\r\n\r\n      expect(errorMessage.title).toBe('ì„œë²„ ì˜¤ë¥˜');\r\n      expect(errorMessage.message).toBe('ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');\r\n      expect(errorMessage.canRetry).toBe(true);\r\n    });\r\n\r\n    test('NOT_FOUND ì—ëŸ¬ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      const errorMessage = getErrorMessage(notFoundError);\r\n\r\n      expect(errorMessage.title).toBe('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');\r\n      expect(errorMessage.message).toBe('ìš”ì²­í•œ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');\r\n      expect(errorMessage.canRetry).toBe(false);\r\n    });\r\n\r\n    test('ì»¨í…ìŠ¤íŠ¸ë³„ ë©”ì‹œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const error = new Error('HTTP 500: Internal Server Error');\r\n      \r\n      const saveErrorMessage = getErrorMessage(error, 'save');\r\n      expect(saveErrorMessage.message).toContain('ë¬¸ì„œ ì €ì¥ ì¤‘');\r\n      \r\n      const loadErrorMessage = getErrorMessage(error, 'load');\r\n      expect(loadErrorMessage.message).toContain('ë¬¸ì„œ ë¶ˆëŸ¬ì˜¤ê¸° ì¤‘');\r\n      \r\n      const deleteErrorMessage = getErrorMessage(error, 'delete');\r\n      expect(deleteErrorMessage.message).toContain('ë¬¸ì„œ ì‚­ì œ ì¤‘');\r\n    });\r\n  });\r\n\r\n  describe('logError', () => {\r\n    test('ê°œë°œ í™˜ê²½ì—ì„œ ì½˜ì†”ì— ì—ëŸ¬ë¥¼ ë¡œê¹…í•´ì•¼ í•¨', () => {\r\n      const originalEnv = process.env.NODE_ENV;\r\n      process.env.NODE_ENV = 'development';\r\n\r\n      const testError = new Error('í…ŒìŠ¤íŠ¸ ì—ëŸ¬');\r\n      const logData = logError(testError, 'test', { extra: 'info' });\r\n\r\n      expect(console.error).toHaveBeenCalledWith('ğŸš¨ Error logged:', expect.objectContaining({\r\n        title: expect.any(String),\r\n        message: expect.any(String),\r\n        context: 'test',\r\n        additionalInfo: { extra: 'info' },\r\n        userAgent: expect.any(String),\r\n        url: expect.any(String),\r\n        timestamp: expect.any(String)\r\n      }));\r\n\r\n      expect(logData.context).toBe('test');\r\n      expect(logData.additionalInfo).toEqual({ extra: 'info' });\r\n\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n\r\n    test('í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì½˜ì†” ë¡œê¹…ì„ í•˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const originalEnv = process.env.NODE_ENV;\r\n      process.env.NODE_ENV = 'production';\r\n\r\n      const testError = new Error('í…ŒìŠ¤íŠ¸ ì—ëŸ¬');\r\n      logError(testError);\r\n\r\n      expect(console.error).not.toHaveBeenCalled();\r\n\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n  });\r\n\r\n  describe('isRetryableError', () => {\r\n    test('ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      expect(isRetryableError(networkError)).toBe(true);\r\n\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      expect(isRetryableError(serverError)).toBe(true);\r\n\r\n      const unknownError = new Error('Something went wrong');\r\n      expect(isRetryableError(unknownError)).toBe(true);\r\n    });\r\n\r\n    test('ì¬ì‹œë„ ë¶ˆê°€ëŠ¥í•œ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      expect(isRetryableError(notFoundError)).toBe(false);\r\n\r\n      const validationError = new Error('HTTP 400: Bad Request');\r\n      expect(isRetryableError(validationError)).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('isOfflineError', () => {\r\n    test('ì˜¤í”„ë¼ì¸ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      expect(isOfflineError(networkError)).toBe(true);\r\n\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      expect(isOfflineError(serverError)).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('í†µí•© ì‹œë‚˜ë¦¬ì˜¤', () => {\r\n    test('ì „ì²´ ì—ëŸ¬ ì²˜ë¦¬ í”Œë¡œìš°ê°€ ì •ìƒ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const originalEnv = process.env.NODE_ENV;\r\n      process.env.NODE_ENV = 'development';\r\n\r\n      // 1. ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ë°œìƒ\r\n      const networkError = new TypeError('Failed to fetch');\r\n      \r\n      // 2. ì—ëŸ¬ ë¶„ë¥˜\r\n      const errorType = classifyError(networkError);\r\n      expect(errorType).toBe(ErrorTypes.NETWORK_ERROR);\r\n      \r\n      // 3. ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ ìƒì„±\r\n      const errorMessage = getErrorMessage(networkError, 'save');\r\n      expect(errorMessage.title).toBe('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜');\r\n      expect(errorMessage.message).toContain('ë¬¸ì„œ ì €ì¥ ì¤‘');\r\n      expect(errorMessage.canRetry).toBe(true);\r\n      \r\n      // 4. ì¬ì‹œë„ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸\r\n      expect(isRetryableError(networkError)).toBe(true);\r\n      expect(isOfflineError(networkError)).toBe(true);\r\n      \r\n      // 5. ì—ëŸ¬ ë¡œê¹…\r\n      const logData = logError(networkError, 'save', { documentId: 'test-123' });\r\n      expect(console.error).toHaveBeenCalled();\r\n      expect(logData.context).toBe('save');\r\n      expect(logData.additionalInfo.documentId).toBe('test-123');\r\n\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n  });\r\n}); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\aiUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\api\\aiService.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":48,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":48,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1243,1290],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":96,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":96,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2617,2664],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":201,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":201,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5212,5248],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// aiService.js - Claude API ì—°ë™ ì„œë¹„ìŠ¤\n\n// API í‚¤ í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” ê¸°ë³¸ê°’ ì‚¬ìš© (ì‹¤ì œ ë°°í¬ ì‹œì—ëŠ” í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© ê¶Œì¥)\n// !!! ì‹¤ì œ API í‚¤ë¥¼ ì½”ë“œì— í•˜ë“œì½”ë”©í•˜ì§€ ë§ˆì„¸ìš”. ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ìš©ì…ë‹ˆë‹¤. !!!\nconst API_KEY = process.env.CLAUDE_API_KEY || '';\n\n// ë¯¸í‚¤ ì—ë””í„°ë¥¼ ìœ„í•œ Claude í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿\nconst SYSTEM_PROMPT = `ë‹¹ì‹ ì€ ë¯¸í‚¤ ì—ë””í„°(Miki Editor)ì˜ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.\nì‚¬ìš©ìì˜ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œ í¸ì§‘ì„ ë„ì™€ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.\nì‚¬ìš©ìì˜ ëª…ë ¹ì„ ì´í•´í•˜ê³  ë¬¸ì„œ í¸ì§‘ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ì œì•ˆí•´ì•¼ í•©ë‹ˆë‹¤.\n\nëª…ë ¹ì´ ë¬¸ì„œ í¸ì§‘ ê´€ë ¨ì´ë©´(ì˜ˆ: \"ì´ í…ìŠ¤íŠ¸ë¥¼ êµµê²Œ í•´ì¤˜\", \"í‘œ ë§Œë“¤ì–´ì¤˜\" ë“±), JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ì—¬ ì—ë””í„°ê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\në¬¸ì„œ ë‚´ìš©ì— ëŒ€í•œ ì§ˆë¬¸ì´ë©´ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ ì‘ë‹µí•©ë‹ˆë‹¤.\n\nì‘ë‹µ í˜•ì‹:\n1. í¸ì§‘ ëª…ë ¹ì¸ ê²½ìš°: \n\\`\\`\\`json\n{\n  \"isSuggestion\": true,\n  \"suggestionId\": \"ê³ ìœ ID\",\n  \"suggestionType\": \"user_command_transform\",\n  \"displayText\": \"ì‚¬ìš©ìì—ê²Œ í‘œì‹œí•  ì œì•ˆ ë©”ì‹œì§€\",\n  \"actions\": [\n    {\n      \"actionType\": \"ì‘ì—…ìœ í˜•(replace_content, apply_style ë“±)\",\n      \"commandType\": \"ëª…ë ¹ìœ í˜•(bold, list_ul ë“±)\",\n      \"range\": \"selection\",\n      \"content\": \"ë‚´ìš©\"\n    }\n  ]\n}\n\\`\\`\\`\n\n2. ì¼ë°˜ ì§ˆë¬¸ì¸ ê²½ìš°: ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ ì‘ë‹µ`;\n\n/**\n * Claude APIì— ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ì‘ë‹µì„ ë°›ëŠ” í•¨ìˆ˜\n * @param {string} userPrompt - ì‚¬ìš©ì ì…ë ¥ ë©”ì‹œì§€\n * @param {Object} context - ì—ë””í„° ì»¨í…ìŠ¤íŠ¸ (í˜„ì¬ ë¬¸ì„œ ë‚´ìš©, ì„ íƒ ì˜ì—­ ë“±)\n * @returns {Promise<string>} - AI ì‘ë‹µ\n */\nexport const sendMessageToClaude = async (userPrompt, context = {}) => {\n  const { fullContent = '', selection = null } = context;\n  \n  try {\n    // API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ ì‚¬ìš©\n    if (!API_KEY) {\n      console.log('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì‘ë‹µí•©ë‹ˆë‹¤.');\n      return simulateClaudeResponse(userPrompt, context);\n    }\n    \n    // ì»¨í…ìŠ¤íŠ¸ ì •ë³´ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ êµ¬ì„±\n    let contextInfo = `í˜„ì¬ ë¬¸ì„œ ë‚´ìš©:\\n\\`\\`\\`markdown\\n${fullContent}\\n\\`\\`\\`\\n\\n`;\n    \n    if (selection && selection.text) {\n      contextInfo += `ì„ íƒëœ í…ìŠ¤íŠ¸: \"${selection.text}\"\\n`;\n      if (selection.range) {\n        contextInfo += `ì„ íƒ ë²”ìœ„: ${JSON.stringify(selection.range)}\\n`;\n      }\n    }\n    \n    // Claude API ìš”ì²­ ì„¤ì •\n    const response = await fetch('https://api.anthropic.com/v1/messages', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-api-key': API_KEY,\n        'anthropic-version': '2023-06-01'\n      },\n      body: JSON.stringify({\n        model: 'claude-3-5-haiku-20241022',  // Claude 3.5 Haiku ëª¨ë¸ë¡œ ë³€ê²½\n        max_tokens: 4000,\n        messages: [\n          {\n            role: 'system',\n            content: SYSTEM_PROMPT\n          },\n          {\n            role: 'user',\n            content: `${contextInfo}\\n\\nì‚¬ìš©ì ëª…ë ¹/ì§ˆë¬¸: ${userPrompt}`\n          }\n        ]\n      })\n    });\n\n    // ì‘ë‹µ ì²˜ë¦¬\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(`API ì˜¤ë¥˜: ${response.status} - ${errorData.error?.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);\n    }\n\n    const data = await response.json();\n    return data.content[0].text;\n    \n  } catch (error) {\n    console.error('Claude API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n    return `ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`;\n  }\n};\n\n/**\n * API í‚¤ê°€ ì—†ì„ ë•Œ ì‚¬ìš©í•  ì‹œë®¬ë ˆì´ì…˜ ì‘ë‹µ ìƒì„±ê¸°\n * @param {string} userPrompt - ì‚¬ìš©ì ì…ë ¥ ë©”ì‹œì§€\n * @param {Object} context - ì—ë””í„° ì»¨í…ìŠ¤íŠ¸\n * @returns {string} - ì‹œë®¬ë ˆì´ì…˜ëœ AI ì‘ë‹µ\n */\nfunction simulateClaudeResponse(userPrompt, context) {\n  const { selection } = context;\n  const prompt = userPrompt.toLowerCase();\n  \n  // êµµê²Œ ë§Œë“¤ê¸° ëª…ë ¹ ì‹œë®¬ë ˆì´ì…˜\n  if (prompt.includes('êµµê²Œ') && selection && selection.text) {\n    return `\\`\\`\\`json\n{\n  \"isSuggestion\": true,\n  \"suggestionId\": \"sim-bold-${Date.now()}\",\n  \"suggestionType\": \"user_command_transform\",\n  \"displayText\": \"ì„ íƒí•œ í…ìŠ¤íŠ¸ë¥¼ êµµê²Œ ë§Œë“¤ê¹Œìš”?\",\n  \"actions\": [\n    {\n      \"actionType\": \"apply_style\",\n      \"commandType\": \"bold\",\n      \"range\": \"selection\",\n      \"targetText\": \"${selection.text}\"\n    }\n  ]\n}\n\\`\\`\\``;\n  }\n  \n  // ëª©ë¡ ë§Œë“¤ê¸° ëª…ë ¹ ì‹œë®¬ë ˆì´ì…˜\n  if (prompt.includes('ëª©ë¡') || prompt.includes('ë¦¬ìŠ¤íŠ¸')) {\n    return `\\`\\`\\`json\n{\n  \"isSuggestion\": true,\n  \"suggestionId\": \"sim-list-${Date.now()}\",\n  \"suggestionType\": \"user_command_transform\",\n  \"displayText\": \"ìˆœì„œ ì—†ëŠ” ëª©ë¡ì„ ìƒì„±í• ê¹Œìš”?\",\n  \"actions\": [\n    {\n      \"actionType\": \"create_element\",\n      \"commandType\": \"list_ul\",\n      \"range\": \"cursor\",\n      \"content\": {\n        \"items\": [\"ì²« ë²ˆì§¸ í•­ëª©\", \"ë‘ ë²ˆì§¸ í•­ëª©\", \"ì„¸ ë²ˆì§¸ í•­ëª©\"]\n      }\n    }\n  ]\n}\n\\`\\`\\``;\n  }\n  \n  // í‘œ ë§Œë“¤ê¸° ëª…ë ¹ ì‹œë®¬ë ˆì´ì…˜\n  if (prompt.includes('í‘œ')) {\n    return `\\`\\`\\`json\n{\n  \"isSuggestion\": true,\n  \"suggestionId\": \"sim-table-${Date.now()}\",\n  \"suggestionType\": \"clarification_needed\",\n  \"displayText\": \"í‘œë¥¼ ë§Œë“¤ë ¤ë©´ í¬ê¸°ë¥¼ ì§€ì •í•´ ì£¼ì„¸ìš”.\",\n  \"clarificationDetails\": {\n    \"query\": \"ëª‡ í–‰ ëª‡ ì—´ì˜ í‘œë¥¼ ë§Œë“¤ê¹Œìš”?\",\n    \"options\": [\n      { \"label\": \"2x2 í‘œ\", \"value\": \"2x2\" },\n      { \"label\": \"3x3 í‘œ\", \"value\": \"3x3\" },\n      { \"label\": \"2x3 í‘œ\", \"value\": \"2x3\" }\n    ]\n  }\n}\n\\`\\`\\``;\n  }\n  \n  // ì¼ë°˜ ì§ˆë¬¸ì— ëŒ€í•œ ì‘ë‹µ\n  return `ì•ˆë…•í•˜ì„¸ìš”! \"${userPrompt}\"ì— ëŒ€í•œ ì‘ë‹µì…ë‹ˆë‹¤. í˜„ì¬ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. API í‚¤ë¥¼ ì„¤ì •í•˜ë©´ ì‹¤ì œ Claude AIë¡œ ë” ì •í™•í•œ ì‘ë‹µì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;\n}\n\n/**\n * AI ì‘ë‹µì—ì„œ JSON ë¶€ë¶„ì„ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜\n * @param {string} aiResponse - AIì˜ ì‘ë‹µ í…ìŠ¤íŠ¸\n * @returns {Object|null} - íŒŒì‹±ëœ JSON ê°ì²´ ë˜ëŠ” null\n */\nexport const extractJsonFromResponse = (aiResponse) => {\n  try {\n    // JSON ì½”ë“œ ë¸”ë¡ ì°¾ê¸°\n    const jsonRegex = /```json\\s*([\\s\\S]*?)\\s*```/;\n    const match = aiResponse.match(jsonRegex);\n    \n    if (match && match[1]) {\n      // JSON ë¬¸ìì—´ì—ì„œ ì‹¤ì œ JSON ê°ì²´ íŒŒì‹±\n      return JSON.parse(match[1]);\n    }\n    \n    // ì „ì²´ í…ìŠ¤íŠ¸ê°€ JSONì¸ì§€ í™•ì¸\n    const trimmedResponse = aiResponse.trim();\n    if (trimmedResponse.startsWith('{') && trimmedResponse.endsWith('}')) {\n      return JSON.parse(trimmedResponse);\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('JSON íŒŒì‹± ì˜¤ë¥˜:', error);\n    return null;\n  }\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\config\\featureFlags.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":70,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":70,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2186,2241],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":96,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":96,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2916,2986],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ê¸°ëŠ¥ í”Œë˜ê·¸ ê´€ë¦¬\r\n * ì ì§„ì  ë°°í¬ì™€ A/B í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì¤‘ì•™í™”ëœ ì„¤ì •\r\n */\r\n\r\n// í™˜ê²½ ë³€ìˆ˜ì—ì„œ ê¸°ëŠ¥ í”Œë˜ê·¸ ì½ê¸°\r\nconst getFeatureFlag = (flagName, defaultValue = false) => {\r\n  // Jest í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ ì‚¬ìš©\r\n  return defaultValue;\r\n};\r\n\r\n// ì‚¬ìš©ìë³„ ê¸°ëŠ¥ í”Œë˜ê·¸ (localStorage ê¸°ë°˜)\r\nconst getUserFeatureFlag = (flagName, defaultValue = false) => {\r\n  try {\r\n    const userFlags = JSON.parse(localStorage.getItem('userFeatureFlags') || '{}');\r\n    return userFlags[flagName] !== undefined ? userFlags[flagName] : defaultValue;\r\n  } catch {\r\n    return defaultValue;\r\n  }\r\n};\r\n\r\n// ê¸°ëŠ¥ í”Œë˜ê·¸ ì„¤ì •\r\nexport const FEATURE_FLAGS = {\r\n  // AI ê¸°ëŠ¥ ê´€ë ¨\r\n  AI_PANEL: getFeatureFlag('AI_PANEL', true),\r\n  AI_SEARCH: getFeatureFlag('AI_SEARCH', true),\r\n  AI_SUMMARY: getFeatureFlag('AI_SUMMARY', true),\r\n  \r\n  // ì—ë””í„° ê¸°ëŠ¥ ê´€ë ¨\r\n  MARKDOWN_PREVIEW: getFeatureFlag('MARKDOWN_PREVIEW', true),\r\n  SYNTAX_HIGHLIGHTING: getFeatureFlag('SYNTAX_HIGHLIGHTING', true),\r\n  AUTO_SAVE: getFeatureFlag('AUTO_SAVE', true),\r\n  \r\n  // ë™ê¸°í™” ê¸°ëŠ¥ ê´€ë ¨\r\n  SERVER_SYNC: getFeatureFlag('SERVER_SYNC', true),\r\n  REAL_TIME_SYNC: getFeatureFlag('REAL_TIME_SYNC', false),\r\n  \r\n  // ì‹¤í—˜ì  ê¸°ëŠ¥ë“¤\r\n  EXPERIMENTAL_FEATURES: getFeatureFlag('EXPERIMENTAL_FEATURES', false),\r\n  BETA_UI: getFeatureFlag('BETA_UI', false),\r\n  \r\n  // ë””ë²„ê·¸ ë° ê°œë°œ ê´€ë ¨\r\n  DEBUG_MODE: getFeatureFlag('DEBUG_MODE', false),\r\n  PERFORMANCE_MONITORING: getFeatureFlag('PERFORMANCE_MONITORING', false),\r\n  \r\n  // í™˜ê²½ ì •ë³´\r\n  DEV_MODE: false, // Jest í™˜ê²½ì—ì„œëŠ” false\r\n  \r\n  // ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤\r\n  DOCUMENT_VERSIONING: getFeatureFlag('DOCUMENT_VERSIONING', false),\r\n  COLLABORATIVE_EDITING: getFeatureFlag('COLLABORATIVE_EDITING', false),\r\n  ADVANCED_SEARCH: getFeatureFlag('ADVANCED_SEARCH', true),\r\n  EXPORT_FEATURES: getFeatureFlag('EXPORT_FEATURES', true),\r\n};\r\n\r\n// ê¸°ëŠ¥ í”Œë˜ê·¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\r\nexport const updateUserFeatureFlag = (flagName, value) => {\r\n  try {\r\n    const userFlags = JSON.parse(localStorage.getItem('userFeatureFlags') || '{}');\r\n    userFlags[flagName] = value;\r\n    localStorage.setItem('userFeatureFlags', JSON.stringify(userFlags));\r\n    \r\n    // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ì¦‰ì‹œ ì ìš©í•˜ë ¤ë©´ ì´ë²¤íŠ¸ ë°œìƒ\r\n    window.dispatchEvent(new CustomEvent('featureFlagChanged', {\r\n      detail: { flagName, value }\r\n    }));\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('Failed to update feature flag:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// ê¸°ëŠ¥ í”Œë˜ê·¸ ìƒíƒœ í™•ì¸ í—¬í¼\r\nexport const isFeatureEnabled = (flagName) => {\r\n  return FEATURE_FLAGS[flagName] === true;\r\n};\r\n\r\n// ê°œë°œì ë„êµ¬ìš© ê¸°ëŠ¥ í”Œë˜ê·¸ ë””ë²„ê±°\r\nif (FEATURE_FLAGS.DEV_MODE) {\r\n  window.mikiFeatureFlags = {\r\n    flags: FEATURE_FLAGS,\r\n    enable: (flagName) => updateUserFeatureFlag(flagName, true),\r\n    disable: (flagName) => updateUserFeatureFlag(flagName, false),\r\n    toggle: (flagName) => {\r\n      const current = getUserFeatureFlag(flagName, false);\r\n      return updateUserFeatureFlag(flagName, !current);\r\n    },\r\n    reset: () => {\r\n      localStorage.removeItem('userFeatureFlags');\r\n      window.location.reload();\r\n    }\r\n  };\r\n  \r\n  console.log('ğŸš© Feature Flags Debug Tools:', window.mikiFeatureFlags);\r\n}\r\n\r\n// ê¸°ëŠ¥ í”Œë˜ê·¸ë³„ ì»´í¬ë„ŒíŠ¸ ë˜í¼\r\nexport const FeatureGate = ({ feature, children, fallback = null }) => {\r\n  return isFeatureEnabled(feature) ? children : fallback;\r\n};\r\n\r\n// ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìœ„í•œ ì»´í¬ë„ŒíŠ¸ ì„ íƒê¸°\r\nexport const ComponentSelector = ({ \r\n  feature, \r\n  newComponent: NewComponent, \r\n  legacyComponent: LegacyComponent,\r\n  ...props \r\n}) => {\r\n  const Component = isFeatureEnabled(feature) ? NewComponent : LegacyComponent;\r\n  return <Component {...props} />;\r\n};\r\n\r\nexport default FEATURE_FLAGS; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\config\\queryClient.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2566,2610],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2739,2778],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3123,3171],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { QueryClient } from '@tanstack/react-query';\r\n\r\n// QueryClient ì„¤ì • - Optimistic UIì™€ ì˜¤í”„ë¼ì¸ ì§€ì›\r\nexport const queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      // ìºì‹œ ì‹œê°„ ì„¤ì •\r\n      staleTime: 5 * 60 * 1000, // 5ë¶„ - ë°ì´í„°ê°€ ì‹ ì„ í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼ë˜ëŠ” ì‹œê°„\r\n      cacheTime: 10 * 60 * 1000, // 10ë¶„ - ìºì‹œì— ë³´ê´€ë˜ëŠ” ì‹œê°„\r\n      \r\n      // ë„¤íŠ¸ì›Œí¬ ì¬ì—°ê²° ì‹œ ìë™ ë¦¬íŒ¨ì¹˜\r\n      refetchOnWindowFocus: true,\r\n      refetchOnReconnect: true,\r\n      \r\n      // ì˜¤í”„ë¼ì¸ ì§€ì›\r\n      networkMode: 'offlineFirst',\r\n      \r\n      // ì¬ì‹œë„ ì„¤ì •\r\n      retry: (failureCount, error) => {\r\n        // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° 3ë²ˆê¹Œì§€ ì¬ì‹œë„\r\n        if (error?.name === 'NetworkError' || error?.code === 'NETWORK_ERROR') {\r\n          return failureCount < 3;\r\n        }\r\n        // ì„œë²„ ì˜¤ë¥˜(5xx)ì¸ ê²½ìš° 2ë²ˆê¹Œì§€ ì¬ì‹œë„\r\n        if (error?.status >= 500) {\r\n          return failureCount < 2;\r\n        }\r\n        // í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜(4xx)ëŠ” ì¬ì‹œë„í•˜ì§€ ì•ŠìŒ\r\n        return false;\r\n      },\r\n      \r\n      // ì¬ì‹œë„ ì§€ì—° (ì§€ìˆ˜ ë°±ì˜¤í”„)\r\n      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\r\n    },\r\n    \r\n    mutations: {\r\n      // ë®¤í…Œì´ì…˜ ë„¤íŠ¸ì›Œí¬ ëª¨ë“œ\r\n      networkMode: 'offlineFirst',\r\n      \r\n      // ë®¤í…Œì´ì…˜ ì¬ì‹œë„ ì„¤ì •\r\n      retry: (failureCount, error) => {\r\n        // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°ë§Œ ì¬ì‹œë„\r\n        if (error?.name === 'NetworkError' || error?.code === 'NETWORK_ERROR') {\r\n          return failureCount < 2;\r\n        }\r\n        return false;\r\n      },\r\n      \r\n      // ë®¤í…Œì´ì…˜ ì¬ì‹œë„ ì§€ì—°\r\n      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 10000),\r\n    },\r\n  },\r\n});\r\n\r\n// ì¿¼ë¦¬ í‚¤ íŒ©í† ë¦¬ - ì¼ê´€ëœ ì¿¼ë¦¬ í‚¤ ê´€ë¦¬\r\nexport const queryKeys = {\r\n  // ë¬¸ì„œ ê´€ë ¨ ì¿¼ë¦¬ í‚¤\r\n  documents: {\r\n    all: ['documents'],\r\n    lists: () => [...queryKeys.documents.all, 'list'],\r\n    list: (filters) => [...queryKeys.documents.lists(), { filters }],\r\n    details: () => [...queryKeys.documents.all, 'detail'],\r\n    detail: (id) => [...queryKeys.documents.details(), id],\r\n    search: (query) => [...queryKeys.documents.all, 'search', query],\r\n  },\r\n  \r\n  // ì„œë²„ ìƒíƒœ ê´€ë ¨\r\n  server: {\r\n    all: ['server'],\r\n    status: () => [...queryKeys.server.all, 'status'],\r\n    health: () => [...queryKeys.server.all, 'health'],\r\n  },\r\n  \r\n  // ë™ê¸°í™” ê´€ë ¨\r\n  sync: {\r\n    all: ['sync'],\r\n    queue: () => [...queryKeys.sync.all, 'queue'],\r\n    status: () => [...queryKeys.sync.all, 'status'],\r\n  },\r\n};\r\n\r\n// ì˜¤í”„ë¼ì¸ ìƒíƒœ ê°ì§€\r\nexport const isOnline = () => {\r\n  return typeof navigator !== 'undefined' ? navigator.onLine : true;\r\n};\r\n\r\n// ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ\r\nexport const setupNetworkListeners = (queryClient) => {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  const handleOnline = () => {\r\n    console.log('ğŸŒ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ë¨ - ëŒ€ê¸° ì¤‘ì¸ ë®¤í…Œì´ì…˜ ì¬ì‹œë„');\r\n    queryClient.resumePausedMutations();\r\n    queryClient.invalidateQueries();\r\n  };\r\n  \r\n  const handleOffline = () => {\r\n    console.log('ğŸ“´ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ëŠê¹€ - ì˜¤í”„ë¼ì¸ ëª¨ë“œ');\r\n  };\r\n  \r\n  window.addEventListener('online', handleOnline);\r\n  window.addEventListener('offline', handleOffline);\r\n  \r\n  return () => {\r\n    window.removeEventListener('online', handleOnline);\r\n    window.removeEventListener('offline', handleOffline);\r\n  };\r\n};\r\n\r\n// ì—ëŸ¬ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°\r\nexport const handleQueryError = (error, context = '') => {\r\n  console.error(`Query Error ${context}:`, error);\r\n  \r\n  // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜\r\n  if (error?.name === 'NetworkError' || !isOnline()) {\r\n    return {\r\n      type: 'network',\r\n      message: 'ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”. ì˜¤í”„ë¼ì¸ ìƒíƒœì—ì„œë„ í¸ì§‘ì€ ê³„ì† ê°€ëŠ¥í•©ë‹ˆë‹¤.',\r\n      canRetry: true,\r\n    };\r\n  }\r\n  \r\n  // ì„œë²„ ì˜¤ë¥˜\r\n  if (error?.status >= 500) {\r\n    return {\r\n      type: 'server',\r\n      message: 'ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',\r\n      canRetry: true,\r\n    };\r\n  }\r\n  \r\n  // í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜\r\n  if (error?.status >= 400 && error?.status < 500) {\r\n    return {\r\n      type: 'client',\r\n      message: error?.message || 'ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',\r\n      canRetry: false,\r\n    };\r\n  }\r\n  \r\n  // ê¸°íƒ€ ì˜¤ë¥˜\r\n  return {\r\n    type: 'unknown',\r\n    message: 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',\r\n    canRetry: false,\r\n  };\r\n};\r\n\r\nexport default queryClient; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useAutoSave.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'performAutoSave'. Either include it or remove the dependency array.","line":49,"column":6,"nodeType":"ArrayExpression","endLine":49,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [content, title, enabled, interval, performAutoSave]","fix":{"range":[1435,1470],"text":"[content, title, enabled, interval, performAutoSave]"}}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":74,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":74,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2052,2086],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3028,3062],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef, useCallback, useState } from 'react';\r\nimport { useSaveDocument } from './useDocuments';\r\n\r\nconst useAutoSave = ({\r\n  document,\r\n  content,\r\n  title,\r\n  enabled = true,\r\n  interval = 3000, // 3ì´ˆ\r\n  onSaveStart,\r\n  onSaveSuccess,\r\n  onSaveError\r\n}) => {\r\n  const [lastSaved, setLastSaved] = useState(null);\r\n  const [saveStatus, setSaveStatus] = useState('saved'); // 'saved', 'saving', 'pending', 'error'\r\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n  \r\n  const saveTimeoutRef = useRef(null);\r\n  const lastContentRef = useRef(content);\r\n  const lastTitleRef = useRef(title);\r\n  const isManualSaveRef = useRef(false);\r\n  \r\n  const saveMutation = useSaveDocument();\r\n\r\n  // ë³€ê²½ì‚¬í•­ ê°ì§€\r\n  useEffect(() => {\r\n    const contentChanged = content !== lastContentRef.current;\r\n    const titleChanged = title !== lastTitleRef.current;\r\n    \r\n    if (contentChanged || titleChanged) {\r\n      setHasUnsavedChanges(true);\r\n      setSaveStatus('pending');\r\n      \r\n      // ì´ì „ íƒ€ì´ë¨¸ ì·¨ì†Œ\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current);\r\n      }\r\n      \r\n      // ìë™ ì €ì¥ì´ í™œì„±í™”ë˜ì–´ ìˆê³  ìˆ˜ë™ ì €ì¥ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ íƒ€ì´ë¨¸ ì„¤ì •\r\n      if (enabled && !isManualSaveRef.current) {\r\n        saveTimeoutRef.current = setTimeout(() => {\r\n          performAutoSave();\r\n        }, interval);\r\n      }\r\n      \r\n      lastContentRef.current = content;\r\n      lastTitleRef.current = title;\r\n    }\r\n  }, [content, title, enabled, interval]);\r\n\r\n  // ìë™ ì €ì¥ ì‹¤í–‰\r\n  const performAutoSave = useCallback(async () => {\r\n    if (!document || !hasUnsavedChanges) return;\r\n    \r\n    try {\r\n      setSaveStatus('saving');\r\n      onSaveStart?.();\r\n      \r\n      const documentToSave = {\r\n        ...document,\r\n        content,\r\n        title,\r\n        updatedAt: new Date().toISOString()\r\n      };\r\n      \r\n      await saveMutation.mutateAsync(documentToSave);\r\n      \r\n      setHasUnsavedChanges(false);\r\n      setSaveStatus('saved');\r\n      setLastSaved(new Date());\r\n      onSaveSuccess?.();\r\n      \r\n    } catch (error) {\r\n      console.error('ìë™ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      setSaveStatus('error');\r\n      onSaveError?.(error);\r\n    }\r\n  }, [document, content, title, hasUnsavedChanges, saveMutation, onSaveStart, onSaveSuccess, onSaveError]);\r\n\r\n  // ìˆ˜ë™ ì €ì¥\r\n  const manualSave = useCallback(async () => {\r\n    if (!document) return;\r\n    \r\n    // ìˆ˜ë™ ì €ì¥ í”Œë˜ê·¸ ì„¤ì •\r\n    isManualSaveRef.current = true;\r\n    \r\n    // ìë™ ì €ì¥ íƒ€ì´ë¨¸ ì·¨ì†Œ\r\n    if (saveTimeoutRef.current) {\r\n      clearTimeout(saveTimeoutRef.current);\r\n      saveTimeoutRef.current = null;\r\n    }\r\n    \r\n    try {\r\n      setSaveStatus('saving');\r\n      onSaveStart?.();\r\n      \r\n      const documentToSave = {\r\n        ...document,\r\n        content,\r\n        title,\r\n        updatedAt: new Date().toISOString()\r\n      };\r\n      \r\n      await saveMutation.mutateAsync(documentToSave);\r\n      \r\n      setHasUnsavedChanges(false);\r\n      setSaveStatus('saved');\r\n      setLastSaved(new Date());\r\n      onSaveSuccess?.();\r\n      \r\n    } catch (error) {\r\n      console.error('ìˆ˜ë™ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      setSaveStatus('error');\r\n      onSaveError?.(error);\r\n    } finally {\r\n      // ìˆ˜ë™ ì €ì¥ í”Œë˜ê·¸ í•´ì œ\r\n      isManualSaveRef.current = false;\r\n    }\r\n  }, [document, content, title, saveMutation, onSaveStart, onSaveSuccess, onSaveError]);\r\n\r\n  // ì €ì¥ ìƒíƒœ ë©”ì‹œì§€ ìƒì„±\r\n  const getSaveStatusMessage = useCallback(() => {\r\n    switch (saveStatus) {\r\n      case 'saving':\r\n        return 'ì €ì¥ ì¤‘...';\r\n      case 'pending':\r\n        return 'ë³€ê²½ë¨';\r\n      case 'error':\r\n        return 'ì €ì¥ ì‹¤íŒ¨';\r\n      case 'saved':\r\n        if (lastSaved) {\r\n          const now = new Date();\r\n          const diffMs = now - lastSaved;\r\n          const diffMinutes = Math.floor(diffMs / 60000);\r\n          \r\n          if (diffMinutes < 1) {\r\n            return 'ë°©ê¸ˆ ì €ì¥ë¨';\r\n          } else if (diffMinutes < 60) {\r\n            return `${diffMinutes}ë¶„ ì „ ì €ì¥ë¨`;\r\n          } else {\r\n            return lastSaved.toLocaleTimeString('ko-KR', {\r\n              hour: '2-digit',\r\n              minute: '2-digit'\r\n            }) + ' ì €ì¥ë¨';\r\n          }\r\n        }\r\n        return 'ì €ì¥ë¨';\r\n      default:\r\n        return 'ì €ì¥ë¨';\r\n    }\r\n  }, [saveStatus, lastSaved]);\r\n\r\n  // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬\r\n  useEffect(() => {\r\n    return () => {\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // í˜ì´ì§€ ì´íƒˆ ì‹œ ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ ê²½ê³ \r\n  useEffect(() => {\r\n    const handleBeforeUnload = (event) => {\r\n      if (hasUnsavedChanges) {\r\n        event.preventDefault();\r\n        event.returnValue = 'ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?';\r\n        return event.returnValue;\r\n      }\r\n    };\r\n\r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    \r\n    return () => {\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n    };\r\n  }, [hasUnsavedChanges]);\r\n\r\n  return {\r\n    saveStatus,\r\n    hasUnsavedChanges,\r\n    lastSaved,\r\n    manualSave,\r\n    getSaveStatusMessage,\r\n    isAutoSaving: saveStatus === 'saving' && !isManualSaveRef.current,\r\n    isManualSaving: saveStatus === 'saving' && isManualSaveRef.current,\r\n  };\r\n};\r\n\r\nexport default useAutoSave; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useDocuments.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[586,630],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":34,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":34,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1062,1109],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":59,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":59,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1718,1756],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2130,2175],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'queryClient' is assigned a value but never used.","line":125,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":125,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":146,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":146,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3864,3914],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":179,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":179,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[4736,4793],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":215,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":215,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[5773,5816],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'variables' is defined but never used. Allowed unused args must match /^_/u.","line":282,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":32},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":282,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":41},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":286,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":286,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7886,7922],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":305,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":305,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[8442,8490],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":334,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":334,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[9232,9275],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":378,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":378,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10561,10592],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":393,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":393,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[11023,11071],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { queryKeys, handleQueryError, isOnline } from '../config/queryClient';\r\nimport { useDocumentStore } from '../stores';\r\nimport { MikiDatabase } from '../utils/database';\r\n\r\n// API í•¨ìˆ˜ë“¤\r\nconst documentAPI = {\r\n  // ì„œë²„ì—ì„œ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n  async fetchDocuments() {\r\n    try {\r\n      const response = await fetch('/api/posts');\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('ì„œë²„ì—ì„œ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ì„œë²„ì—ì„œ íŠ¹ì • ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°\r\n  async fetchDocument(id) {\r\n    try {\r\n      const response = await fetch(`/api/posts/${id}`);\r\n      if (!response.ok) {\r\n        if (response.status === 404) {\r\n          throw new Error('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\r\n        }\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error(`ì„œë²„ì—ì„œ ë¬¸ì„œ ${id} ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ì„œë²„ì— ë¬¸ì„œ ì €ì¥\r\n  async saveDocument(document) {\r\n    try {\r\n      const method = document.id ? 'PUT' : 'POST';\r\n      const url = document.id ? `/api/posts/${document.id}` : '/api/posts';\r\n      \r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(document),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('ì„œë²„ì— ë¬¸ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ì„œë²„ì—ì„œ ë¬¸ì„œ ì‚­ì œ\r\n  async deleteDocument(id) {\r\n    try {\r\n      const response = await fetch(`/api/posts/${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n      return { success: true, id };\r\n    } catch (error) {\r\n      console.error(`ì„œë²„ì—ì„œ ë¬¸ì„œ ${id} ì‚­ì œ ì‹¤íŒ¨:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\n// IndexedDB í•¨ìˆ˜ë“¤\r\nconst localAPI = {\r\n  async getDocuments() {\r\n    const db = await MikiDatabase.getInstance();\r\n    return await db.documents.orderBy('updatedAt').reverse().toArray();\r\n  },\r\n\r\n  async getDocument(id) {\r\n    const db = await MikiDatabase.getInstance();\r\n    return await db.documents.get(id);\r\n  },\r\n\r\n  async saveDocument(document) {\r\n    const db = await MikiDatabase.getInstance();\r\n    const now = new Date().toISOString();\r\n    \r\n    const docToSave = {\r\n      ...document,\r\n      updatedAt: now,\r\n      syncStatus: 'pending', // ì„œë²„ ë™ê¸°í™” ëŒ€ê¸° ìƒíƒœ\r\n    };\r\n\r\n    if (document.id) {\r\n      await db.documents.put(docToSave);\r\n    } else {\r\n      const id = `doc-${Date.now()}`;\r\n      docToSave.id = id;\r\n      await db.documents.add(docToSave);\r\n    }\r\n\r\n    return docToSave;\r\n  },\r\n\r\n  async deleteDocument(id) {\r\n    const db = await MikiDatabase.getInstance();\r\n    await db.documents.delete(id);\r\n    return { success: true, id };\r\n  },\r\n};\r\n\r\n// 1. ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ í›…\r\nexport const useDocuments = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.documents.lists(),\r\n    queryFn: async () => {\r\n      // ì˜¨ë¼ì¸ ìƒíƒœì—ì„œëŠ” ì„œë²„ ë°ì´í„° ìš°ì„ \r\n      if (isOnline()) {\r\n        try {\r\n          const serverDocs = await documentAPI.fetchDocuments();\r\n          \r\n          // ì„œë²„ ë°ì´í„°ë¥¼ IndexedDBì— ìºì‹œ\r\n          const db = await MikiDatabase.getInstance();\r\n          for (const doc of serverDocs) {\r\n            await db.documents.put({\r\n              ...doc,\r\n              syncStatus: 'synced',\r\n            });\r\n          }\r\n          \r\n          return serverDocs;\r\n        } catch (error) {\r\n          console.warn('ì„œë²„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨, ë¡œì»¬ ë°ì´í„° ì‚¬ìš©:', error);\r\n        }\r\n      }\r\n      \r\n      // ì˜¤í”„ë¼ì¸ì´ê±°ë‚˜ ì„œë²„ ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ë°ì´í„° ì‚¬ìš©\r\n      return await localAPI.getDocuments();\r\n    },\r\n    staleTime: 2 * 60 * 1000, // 2ë¶„\r\n    cacheTime: 10 * 60 * 1000, // 10ë¶„\r\n  });\r\n};\r\n\r\n// 2. íŠ¹ì • ë¬¸ì„œ ì¡°íšŒ í›…\r\nexport const useDocument = (id) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.documents.detail(id),\r\n    queryFn: async () => {\r\n      if (!id) return null;\r\n\r\n      // ì˜¨ë¼ì¸ ìƒíƒœì—ì„œëŠ” ì„œë²„ ë°ì´í„° ìš°ì„ \r\n      if (isOnline()) {\r\n        try {\r\n          const serverDoc = await documentAPI.fetchDocument(id);\r\n          \r\n          // ì„œë²„ ë°ì´í„°ë¥¼ IndexedDBì— ìºì‹œ\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.documents.put({\r\n            ...serverDoc,\r\n            syncStatus: 'synced',\r\n          });\r\n          \r\n          return serverDoc;\r\n        } catch (error) {\r\n          console.warn(`ì„œë²„ì—ì„œ ë¬¸ì„œ ${id} ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨, ë¡œì»¬ ë°ì´í„° ì‚¬ìš©:`, error);\r\n        }\r\n      }\r\n      \r\n      // ì˜¤í”„ë¼ì¸ì´ê±°ë‚˜ ì„œë²„ ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ë°ì´í„° ì‚¬ìš©\r\n      return await localAPI.getDocument(id);\r\n    },\r\n    enabled: !!id,\r\n    staleTime: 5 * 60 * 1000, // 5ë¶„\r\n  });\r\n};\r\n\r\n// 3. ë¬¸ì„œ ì €ì¥ ë®¤í…Œì´ì…˜ (Optimistic UI)\r\nexport const useSaveDocument = () => {\r\n  const queryClient = useQueryClient();\r\n  const { updateDocument, addDocument } = useDocumentStore();\r\n\r\n  return useMutation({\r\n    mutationFn: async (document) => {\r\n      // 1. ë¡œì»¬ì— ì¦‰ì‹œ ì €ì¥ (Optimistic)\r\n      const localDoc = await localAPI.saveDocument(document);\r\n      \r\n      // 2. ì˜¨ë¼ì¸ ìƒíƒœì—ì„œë§Œ ì„œë²„ ë™ê¸°í™” ì‹œë„\r\n      if (isOnline()) {\r\n        try {\r\n          const serverDoc = await documentAPI.saveDocument(localDoc);\r\n          \r\n          // ì„œë²„ ì €ì¥ ì„±ê³µ ì‹œ ë™ê¸°í™” ìƒíƒœ ì—…ë°ì´íŠ¸\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.documents.put({\r\n            ...serverDoc,\r\n            syncStatus: 'synced',\r\n          });\r\n          \r\n          return serverDoc;\r\n        } catch (error) {\r\n          console.warn('ì„œë²„ ì €ì¥ ì‹¤íŒ¨, ë¡œì»¬ì—ë§Œ ì €ì¥ë¨:', error);\r\n          \r\n          // ë™ê¸°í™” íì— ì¶”ê°€\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.syncQueue.add({\r\n            id: `sync-${Date.now()}`,\r\n            type: 'save',\r\n            documentId: localDoc.id,\r\n            data: localDoc,\r\n            status: 'pending',\r\n            createdAt: new Date().toISOString(),\r\n            retryCount: 0,\r\n          });\r\n          \r\n          throw error;\r\n        }\r\n      }\r\n      \r\n      return localDoc;\r\n    },\r\n\r\n    // Optimistic Update\r\n    onMutate: async (newDocument) => {\r\n      // ì§„í–‰ ì¤‘ì¸ ì¿¼ë¦¬ ì·¨ì†Œ\r\n      await queryClient.cancelQueries({ queryKey: queryKeys.documents.all });\r\n\r\n      // ì´ì „ ë°ì´í„° ë°±ì—…\r\n      const previousDocuments = queryClient.getQueryData(queryKeys.documents.lists());\r\n      const previousDocument = newDocument.id \r\n        ? queryClient.getQueryData(queryKeys.documents.detail(newDocument.id))\r\n        : null;\r\n\r\n      // Optimistic ì—…ë°ì´íŠ¸\r\n      if (newDocument.id) {\r\n        // ê¸°ì¡´ ë¬¸ì„œ ì—…ë°ì´íŠ¸\r\n        queryClient.setQueryData(\r\n          queryKeys.documents.detail(newDocument.id),\r\n          (old) => ({ ...old, ...newDocument })\r\n        );\r\n        \r\n        queryClient.setQueryData(\r\n          queryKeys.documents.lists(),\r\n          (old) => old?.map(doc => \r\n            doc.id === newDocument.id ? { ...doc, ...newDocument } : doc\r\n          ) || []\r\n        );\r\n        \r\n        // Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸\r\n        updateDocument(newDocument.id, newDocument);\r\n      } else {\r\n        // ìƒˆ ë¬¸ì„œ ì¶”ê°€\r\n        const tempId = `temp-${Date.now()}`;\r\n        const tempDoc = { ...newDocument, id: tempId };\r\n        \r\n        queryClient.setQueryData(\r\n          queryKeys.documents.lists(),\r\n          (old) => [tempDoc, ...(old || [])]\r\n        );\r\n        \r\n        // Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸\r\n        addDocument(tempDoc);\r\n      }\r\n\r\n      return { previousDocuments, previousDocument };\r\n    },\r\n\r\n    // ì„±ê³µ ì‹œ\r\n    onSuccess: (data, variables, context) => {\r\n      // ì¿¼ë¦¬ ë¬´íš¨í™”í•˜ì—¬ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n      \r\n      console.log('âœ… ë¬¸ì„œ ì €ì¥ ì„±ê³µ:', data.id);\r\n    },\r\n\r\n    // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±\r\n    onError: (error, variables, context) => {\r\n      const errorInfo = handleQueryError(error, 'ë¬¸ì„œ ì €ì¥');\r\n      \r\n      // ì´ì „ ìƒíƒœë¡œ ë¡¤ë°±\r\n      if (context?.previousDocuments) {\r\n        queryClient.setQueryData(queryKeys.documents.lists(), context.previousDocuments);\r\n      }\r\n      \r\n      if (context?.previousDocument && variables.id) {\r\n        queryClient.setQueryData(\r\n          queryKeys.documents.detail(variables.id),\r\n          context.previousDocument\r\n        );\r\n      }\r\n\r\n      console.error('âŒ ë¬¸ì„œ ì €ì¥ ì‹¤íŒ¨:', errorInfo.message);\r\n      \r\n      // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ (í† ìŠ¤íŠ¸ ë“±)\r\n      // ì´ ë¶€ë¶„ì€ ì‹¤ì œ ì•Œë¦¼ ì‹œìŠ¤í…œê³¼ ì—°ê²°\r\n    },\r\n\r\n    // ì™„ë£Œ ì‹œ (ì„±ê³µ/ì‹¤íŒ¨ ë¬´ê´€)\r\n    onSettled: () => {\r\n      // ê´€ë ¨ ì¿¼ë¦¬ ë¦¬íŒ¨ì¹˜\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n    },\r\n  });\r\n};\r\n\r\n// 4. ë¬¸ì„œ ì‚­ì œ ë®¤í…Œì´ì…˜ (Optimistic UI)\r\nexport const useDeleteDocument = () => {\r\n  const queryClient = useQueryClient();\r\n  const { deleteDocument } = useDocumentStore();\r\n\r\n  return useMutation({\r\n    mutationFn: async (id) => {\r\n      // 1. ë¡œì»¬ì—ì„œ ì¦‰ì‹œ ì‚­ì œ (Optimistic)\r\n      const localResult = await localAPI.deleteDocument(id);\r\n      \r\n      // 2. ì˜¨ë¼ì¸ ìƒíƒœì—ì„œë§Œ ì„œë²„ ë™ê¸°í™” ì‹œë„\r\n      if (isOnline()) {\r\n        try {\r\n          return await documentAPI.deleteDocument(id);\r\n        } catch (error) {\r\n          console.warn('ì„œë²„ ì‚­ì œ ì‹¤íŒ¨, ë¡œì»¬ì—ë§Œ ì‚­ì œë¨:', error);\r\n          \r\n          // ë™ê¸°í™” íì— ì¶”ê°€\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.syncQueue.add({\r\n            id: `sync-${Date.now()}`,\r\n            type: 'delete',\r\n            documentId: id,\r\n            status: 'pending',\r\n            createdAt: new Date().toISOString(),\r\n            retryCount: 0,\r\n          });\r\n          \r\n          throw error;\r\n        }\r\n      }\r\n      \r\n      return localResult;\r\n    },\r\n\r\n    // Optimistic Update\r\n    onMutate: async (id) => {\r\n      await queryClient.cancelQueries({ queryKey: queryKeys.documents.all });\r\n\r\n      // ì´ì „ ë°ì´í„° ë°±ì—…\r\n      const previousDocuments = queryClient.getQueryData(queryKeys.documents.lists());\r\n      const previousDocument = queryClient.getQueryData(queryKeys.documents.detail(id));\r\n\r\n      // Optimistic ì‚­ì œ\r\n      queryClient.setQueryData(\r\n        queryKeys.documents.lists(),\r\n        (old) => old?.filter(doc => doc.id !== id) || []\r\n      );\r\n      \r\n      queryClient.removeQueries({ queryKey: queryKeys.documents.detail(id) });\r\n      \r\n      // Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸\r\n      deleteDocument(id);\r\n\r\n      return { previousDocuments, previousDocument };\r\n    },\r\n\r\n    onSuccess: (data, id) => {\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n      console.log('âœ… ë¬¸ì„œ ì‚­ì œ ì„±ê³µ:', id);\r\n    },\r\n\r\n    onError: (error, id, context) => {\r\n      const errorInfo = handleQueryError(error, 'ë¬¸ì„œ ì‚­ì œ');\r\n      \r\n      // ë¡¤ë°±\r\n      if (context?.previousDocuments) {\r\n        queryClient.setQueryData(queryKeys.documents.lists(), context.previousDocuments);\r\n      }\r\n      \r\n      if (context?.previousDocument) {\r\n        queryClient.setQueryData(queryKeys.documents.detail(id), context.previousDocument);\r\n      }\r\n\r\n      console.error('âŒ ë¬¸ì„œ ì‚­ì œ ì‹¤íŒ¨:', errorInfo.message);\r\n    },\r\n\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n    },\r\n  });\r\n};\r\n\r\n// 5. ë¬¸ì„œ ê²€ìƒ‰ í›…\r\nexport const useSearchDocuments = (query) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.documents.search(query),\r\n    queryFn: async () => {\r\n      if (!query || query.trim().length < 2) {\r\n        return [];\r\n      }\r\n\r\n      // ë¡œì»¬ ê²€ìƒ‰ (IndexedDB)\r\n      const db = await MikiDatabase.getInstance();\r\n      const allDocs = await db.documents.toArray();\r\n      \r\n      const searchTerm = query.toLowerCase();\r\n      return allDocs.filter(doc => \r\n        doc.title?.toLowerCase().includes(searchTerm) ||\r\n        doc.content?.toLowerCase().includes(searchTerm)\r\n      );\r\n    },\r\n    enabled: !!query && query.trim().length >= 2,\r\n    staleTime: 30 * 1000, // 30ì´ˆ\r\n  });\r\n};\r\n\r\n// 6. ë™ê¸°í™” ìƒíƒœ í›…\r\nexport const useSyncStatus = () => {\r\n  return useQuery({\r\n    queryKey: queryKeys.sync.status(),\r\n    queryFn: async () => {\r\n      const db = await MikiDatabase.getInstance();\r\n      const pendingItems = await db.syncQueue\r\n        .where('status')\r\n        .equals('pending')\r\n        .toArray();\r\n      \r\n      return {\r\n        hasPendingSync: pendingItems.length > 0,\r\n        pendingCount: pendingItems.length,\r\n        isOnline: isOnline(),\r\n      };\r\n    },\r\n    refetchInterval: 5000, // 5ì´ˆë§ˆë‹¤ ì²´í¬\r\n  });\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useKeyboardShortcuts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useResponsiveLayout.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkScreenSize'. Either include it or remove the dependency array.","line":34,"column":6,"nodeType":"ArrayExpression","endLine":34,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [checkScreenSize, isMobile]","fix":{"range":[981,991],"text":"[checkScreenSize, isMobile]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\n\r\nconst useResponsiveLayout = () => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [isTablet, setIsTablet] = useState(false);\r\n  const [activeMobilePanel, setActiveMobilePanel] = useState('list');\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  // í™”ë©´ í¬ê¸° ê°ì§€ í•¨ìˆ˜\r\n  const checkScreenSize = () => {\r\n    const width = window.innerWidth;\r\n    const newIsMobile = width <= 768;\r\n    const newIsTablet = width > 768 && width <= 1024;\r\n    \r\n    setIsMobile(newIsMobile);\r\n    setIsTablet(newIsTablet);\r\n    \r\n    // ëª¨ë°”ì¼ì—ì„œ ë°ìŠ¤í¬í†±ìœ¼ë¡œ ì „í™˜ ì‹œ í™œì„± íŒ¨ë„ì„ ì—ë””í„°ë¡œ ì„¤ì •\r\n    if (!newIsMobile && isMobile) {\r\n      setActiveMobilePanel('editor');\r\n    }\r\n  };\r\n\r\n  // í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€\r\n  useEffect(() => {\r\n    checkScreenSize();\r\n    \r\n    const handleResize = () => {\r\n      checkScreenSize();\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [isMobile]);\r\n\r\n  // ì „ì²´í™”ë©´ í† ê¸€\r\n  const toggleFullscreen = () => {\r\n    setIsFullscreen(prev => !prev);\r\n  };\r\n\r\n  // ëª¨ë°”ì¼ íŒ¨ë„ ì „í™˜\r\n  const switchMobilePanel = (panel) => {\r\n    if (isMobile) {\r\n      setActiveMobilePanel(panel);\r\n    }\r\n  };\r\n\r\n  // ì—ë””í„° íŒ¨ë„ í´ë˜ìŠ¤ ê³„ì‚°\r\n  const getEditorPanelClass = () => {\r\n    if (isFullscreen) {\r\n      return \"bg-white rounded shadow flex flex-col h-full\";\r\n    }\r\n    return `bg-white rounded shadow flex flex-col ${\r\n      isMobile ? (activeMobilePanel === 'editor' ? 'block' : 'hidden') + ' flex-grow' : 'flex-1 mx-2'\r\n    }`;\r\n  };\r\n\r\n  // ë ˆì´ì•„ì›ƒ ì •ë³´ ë°˜í™˜\r\n  return {\r\n    isMobile,\r\n    isTablet,\r\n    isFullscreen,\r\n    activeMobilePanel,\r\n    setActiveMobilePanel: switchMobilePanel,\r\n    toggleFullscreen,\r\n    editorPanelClass: getEditorPanelClass()\r\n  };\r\n};\r\n\r\nexport default useResponsiveLayout; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\setupTests.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":183,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":183,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4592,4653],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// jest-dom adds custom jest matchers for asserting on DOM nodes.\n// allows you to do things like:\n// expect(element).toHaveTextContent(/react/i)\n// learn more: https://github.com/testing-library/jest-dom\nimport '@testing-library/jest-dom';\n\n// Mock window.matchMedia\nObject.defineProperty(window, 'matchMedia', {\n  writable: true,\n  value: jest.fn().mockImplementation(query => ({\n    matches: false,\n    media: query,\n    onchange: null,\n    addListener: jest.fn(),\n    removeListener: jest.fn(),\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n    dispatchEvent: jest.fn(),\n  })),\n});\n\n// Mock localStorage\nconst localStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nglobal.localStorage = localStorageMock;\n\n// Mock sessionStorage\nconst sessionStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nglobal.sessionStorage = sessionStorageMock;\n\n// Mock fetch\nglobal.fetch = jest.fn();\n\n// ğŸ”§ JSDOM ë¸Œë¼ìš°ì € API í´ë¦¬í•„ ì¶”ê°€ (2ë‹¨ê³„ - í…ŒìŠ¤íŠ¸ í™˜ê²½ ì•ˆì •í™”)\n\n// Mock scrollIntoView (AiPanel.jsx 669ì¤„ì—ì„œ ì‚¬ìš©)\nElement.prototype.scrollIntoView = jest.fn();\n\n// Mock ResizeObserver\nglobal.ResizeObserver = jest.fn().mockImplementation(() => ({\n  observe: jest.fn(),\n  unobserve: jest.fn(),\n  disconnect: jest.fn(),\n}));\n\n// Mock IntersectionObserver\nglobal.IntersectionObserver = jest.fn().mockImplementation(() => ({\n  observe: jest.fn(),\n  unobserve: jest.fn(),\n  disconnect: jest.fn(),\n}));\n\n// Mock MutationObserver\nglobal.MutationObserver = jest.fn().mockImplementation(() => ({\n  observe: jest.fn(),\n  disconnect: jest.fn(),\n  takeRecords: jest.fn(),\n}));\n\n// Mock window.getComputedStyle\nglobal.getComputedStyle = jest.fn().mockImplementation(() => ({\n  getPropertyValue: jest.fn(),\n  setProperty: jest.fn(),\n}));\n\n// Mock window.requestAnimationFrame\nglobal.requestAnimationFrame = jest.fn().mockImplementation(cb => setTimeout(cb, 0));\nglobal.cancelAnimationFrame = jest.fn().mockImplementation(id => clearTimeout(id));\n\n// Mock window.requestIdleCallback\nglobal.requestIdleCallback = jest.fn().mockImplementation(cb => setTimeout(cb, 0));\nglobal.cancelIdleCallback = jest.fn().mockImplementation(id => clearTimeout(id));\n\n// Mock HTMLElement.offsetHeight, offsetWidth ë“±\nObject.defineProperties(HTMLElement.prototype, {\n  offsetHeight: {\n    get() { return parseFloat(this.style.height) || 0; }\n  },\n  offsetWidth: {\n    get() { return parseFloat(this.style.width) || 0; }\n  },\n  offsetTop: {\n    get() { return parseFloat(this.style.top) || 0; }\n  },\n  offsetLeft: {\n    get() { return parseFloat(this.style.left) || 0; }\n  },\n});\n\n// Mock window.location\ndelete window.location;\nwindow.location = {\n  href: 'http://localhost:3000',\n  origin: 'http://localhost:3000',\n  protocol: 'http:',\n  host: 'localhost:3000',\n  hostname: 'localhost',\n  port: '3000',\n  pathname: '/',\n  search: '',\n  hash: '',\n  assign: jest.fn(),\n  replace: jest.fn(),\n  reload: jest.fn(),\n};\n\n// Mock console methods to reduce noise in tests\nglobal.console = {\n  ...console,\n  log: jest.fn(),\n  warn: jest.fn(),\n  error: jest.fn(),\n};\n\n// Mock import.meta.env for Vite compatibility\nglobal.importMeta = {\n  env: {\n    NODE_ENV: 'test',\n    VITE_API_BASE_URL: 'http://localhost:3000',\n    VITE_AI_API_URL: 'http://localhost:3000/api/ai',\n  }\n};\n\n// Mock URL.createObjectURL and revokeObjectURL\nglobal.URL.createObjectURL = jest.fn(() => 'mocked-url');\nglobal.URL.revokeObjectURL = jest.fn();\n\n// Mock File and FileReader\nglobal.File = jest.fn().mockImplementation((bits, name, options) => ({\n  name,\n  size: bits.length,\n  type: options?.type || '',\n  lastModified: Date.now(),\n}));\n\nglobal.FileReader = jest.fn().mockImplementation(() => ({\n  readAsText: jest.fn(),\n  readAsDataURL: jest.fn(),\n  addEventListener: jest.fn(),\n  removeEventListener: jest.fn(),\n  result: null,\n  error: null,\n}));\n\n// Mock Clipboard API\nObject.defineProperty(navigator, 'clipboard', {\n  value: {\n    writeText: jest.fn().mockResolvedValue(undefined),\n    readText: jest.fn().mockResolvedValue(''),\n  },\n  writable: true,\n});\n\n// Mock navigator.userAgent\nObject.defineProperty(navigator, 'userAgent', {\n  value: 'Mozilla/5.0 (Node.js) Jest/Test',\n  writable: true,\n});\n\n// Mock window.crypto\nObject.defineProperty(window, 'crypto', {\n  value: {\n    getRandomValues: jest.fn().mockImplementation(arr => {\n      for (let i = 0; i < arr.length; i++) {\n        arr[i] = Math.floor(Math.random() * 256);\n      }\n      return arr;\n    }),\n    randomUUID: jest.fn().mockReturnValue('mocked-uuid-1234'),\n  },\n  writable: true,\n});\n\nconsole.log('âœ… JSDOM ë¸Œë¼ìš°ì € API í´ë¦¬í•„ ë¡œë“œ ì™„ë£Œ (2ë‹¨ê³„ - í…ŒìŠ¤íŠ¸ í™˜ê²½ ì•ˆì •í™”)');\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\stores\\index.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2664,2698],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3099,3133],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'get' is defined but never used. Allowed unused args must match /^_/u.","line":119,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":119,"endColumn":32},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":150,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":150,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[4155,4187],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'get' is defined but never used. Allowed unused args must match /^_/u.","line":165,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":165,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\r\nimport { immer } from 'zustand/middleware/immer';\r\nimport { subscribeWithSelector } from 'zustand/middleware';\r\nimport { db } from '../utils/database';\r\n\r\n// Document slice\r\nconst createDocumentSlice = (set, get) => ({\r\n  // State\r\n  documents: {},\r\n  currentDocumentId: null,\r\n  isLoading: false,\r\n  saveStatus: 'ì €ì¥ë¨',\r\n  serverSaveStatus: 'ì €ì¥ë¨',\r\n  isSaving: false,\r\n  \r\n  // Document CRUD actions\r\n  setCurrentDocument: (id) => set((state) => {\r\n    state.currentDocumentId = id;\r\n  }),\r\n  \r\n  addDocument: (doc) => set((state) => {\r\n    state.documents[doc.id] = doc;\r\n  }),\r\n  \r\n  updateDocument: (id, updates) => set((state) => {\r\n    if (state.documents[id]) {\r\n      Object.assign(state.documents[id], updates, {\r\n        updatedAt: new Date().toISOString()\r\n      });\r\n    }\r\n  }),\r\n  \r\n  deleteDocument: (id) => set((state) => {\r\n    delete state.documents[id];\r\n    if (state.currentDocumentId === id) {\r\n      state.currentDocumentId = null;\r\n    }\r\n  }),\r\n  \r\n  // Title management with flags\r\n  setTitle: (id, title, isUserEdit = false) => set((state) => {\r\n    if (state.documents[id]) {\r\n      state.documents[id].title = title;\r\n      state.documents[id].isUserEditedTitle = isUserEdit;\r\n      state.documents[id].isAutoSyncedTitle = !isUserEdit;\r\n      state.documents[id].updatedAt = new Date().toISOString();\r\n    }\r\n  }),\r\n  \r\n  setContent: (id, content) => set((state) => {\r\n    if (state.documents[id]) {\r\n      state.documents[id].content = content;\r\n      state.documents[id].updatedAt = new Date().toISOString();\r\n      \r\n      // Auto-extract title if not user-edited\r\n      if (!state.documents[id].isUserEditedTitle) {\r\n        const extractedTitle = extractTitleFromContent(content);\r\n        if (extractedTitle && extractedTitle !== state.documents[id].title) {\r\n          state.documents[id].title = extractedTitle;\r\n          state.documents[id].isAutoSyncedTitle = true;\r\n        }\r\n      }\r\n    }\r\n  }),\r\n  \r\n  // Save status management\r\n  setSaveStatus: (status) => set((state) => {\r\n    state.saveStatus = status;\r\n  }),\r\n  \r\n  setServerSaveStatus: (status) => set((state) => {\r\n    state.serverSaveStatus = status;\r\n  }),\r\n  \r\n  setIsSaving: (saving) => set((state) => {\r\n    state.isSaving = saving;\r\n  }),\r\n  \r\n  // Async actions\r\n  loadDocuments: async () => {\r\n    set((state) => { state.isLoading = true; });\r\n    try {\r\n      const docs = await db.documents.toArray();\r\n      set((state) => {\r\n        state.documents = {};\r\n        docs.forEach(doc => {\r\n          state.documents[doc.id] = doc;\r\n        });\r\n        state.isLoading = false;\r\n      });\r\n    } catch (error) {\r\n      console.error('ë¬¸ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\r\n      set((state) => { state.isLoading = false; });\r\n    }\r\n  },\r\n  \r\n  saveDocument: async (id) => {\r\n    const doc = get().documents[id];\r\n    if (!doc) return;\r\n    \r\n    set((state) => { state.isSaving = true; });\r\n    try {\r\n      await db.documents.put(doc);\r\n      set((state) => { \r\n        state.saveStatus = 'ì €ì¥ë¨';\r\n        state.isSaving = false;\r\n      });\r\n    } catch (error) {\r\n      console.error('ë¬¸ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      set((state) => { \r\n        state.saveStatus = 'ì €ì¥ ì‹¤íŒ¨';\r\n        state.isSaving = false;\r\n      });\r\n    }\r\n  }\r\n});\r\n\r\n// UI slice\r\nconst createUISlice = (set, get) => ({\r\n  // State\r\n  isFullscreen: false,\r\n  searchQuery: '',\r\n  windowWidth: typeof window !== 'undefined' ? window.innerWidth : 0,\r\n  isMobile: false,\r\n  isTablet: false,\r\n  activeMobilePanel: 'editor',\r\n  message: { type: '', text: '' },\r\n  messageVisible: false,\r\n  \r\n  // Actions\r\n  setFullscreen: (fullscreen) => set((state) => {\r\n    state.isFullscreen = fullscreen;\r\n  }),\r\n  \r\n  setSearchQuery: (query) => set((state) => {\r\n    state.searchQuery = query;\r\n  }),\r\n  \r\n  setWindowDimensions: (width) => set((state) => {\r\n    state.windowWidth = width;\r\n    state.isMobile = width < 768;\r\n    state.isTablet = width >= 768 && width < 1024;\r\n  }),\r\n  \r\n  setActiveMobilePanel: (panel) => set((state) => {\r\n    state.activeMobilePanel = panel;\r\n    try {\r\n      localStorage.setItem('miki_active_mobile_panel', panel);\r\n    } catch (e) {\r\n      console.warn('íŒ¨ë„ ìƒíƒœ ì €ì¥ ì‹¤íŒ¨:', e);\r\n    }\r\n  }),\r\n  \r\n  showMessage: (type, text) => set((state) => {\r\n    state.message = { type, text };\r\n    state.messageVisible = true;\r\n  }),\r\n  \r\n  hideMessage: () => set((state) => {\r\n    state.messageVisible = false;\r\n  })\r\n});\r\n\r\n// Editor context slice\r\nconst createEditorSlice = (set, get) => ({\r\n  // State\r\n  editorContext: {\r\n    fullContent: '',\r\n    selection: null\r\n  },\r\n  \r\n  // Actions\r\n  setEditorContext: (context) => set((state) => {\r\n    state.editorContext = context;\r\n  })\r\n});\r\n\r\n// Helper function for title extraction\r\nconst extractTitleFromContent = (content) => {\r\n  if (!content || typeof content !== 'string') return '';\r\n  \r\n  const lines = content.split('\\n');\r\n  for (const line of lines) {\r\n    const trimmed = line.trim();\r\n    if (trimmed && !trimmed.startsWith('#')) {\r\n      // Remove markdown formatting\r\n      return trimmed\r\n        .replace(/\\*\\*(.*?)\\*\\*/g, '$1')\r\n        .replace(/\\*(.*?)\\*/g, '$1')\r\n        .replace(/`(.*?)`/g, '$1')\r\n        .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, '$1')\r\n        .replace(/!\\[([^\\]]*)\\]\\([^)]+\\)/g, '$1')\r\n        .substring(0, 50);\r\n    }\r\n  }\r\n  return '';\r\n};\r\n\r\n// Create the main store\r\nexport const useStore = create(\r\n  subscribeWithSelector(\r\n    immer((...a) => ({\r\n      ...createDocumentSlice(...a),\r\n      ...createUISlice(...a),\r\n      ...createEditorSlice(...a),\r\n      \r\n      // Reset method for testing\r\n      reset: () => a[0]((state) => {\r\n        // Reset document slice\r\n        state.documents = {};\r\n        state.currentDocumentId = null;\r\n        state.isLoading = false;\r\n        state.saveStatus = 'ì €ì¥ë¨';\r\n        state.serverSaveStatus = 'ì €ì¥ë¨';\r\n        state.isSaving = false;\r\n        \r\n        // Reset UI slice\r\n        state.isFullscreen = false;\r\n        state.searchQuery = '';\r\n        state.windowWidth = typeof window !== 'undefined' ? window.innerWidth : 0;\r\n        state.isMobile = false;\r\n        state.isTablet = false;\r\n        state.activeMobilePanel = 'editor';\r\n        state.message = { type: '', text: '' };\r\n        state.messageVisible = false;\r\n        \r\n        // Reset editor slice\r\n        state.editorContext = {\r\n          fullContent: '',\r\n          selection: null\r\n        };\r\n      })\r\n    }))\r\n  )\r\n);\r\n\r\n// Selectors for better performance\r\nexport const useCurrentDocument = () => useStore((state) => {\r\n  const currentId = state.currentDocumentId;\r\n  return currentId ? state.documents[currentId] : null;\r\n});\r\n\r\nexport const useDocumentList = () => useStore((state) => \r\n  Object.values(state.documents).sort((a, b) => \r\n    new Date(b.updatedAt) - new Date(a.updatedAt)\r\n  )\r\n);\r\n\r\nexport const useUIState = () => useStore((state) => ({\r\n  isFullscreen: state.isFullscreen,\r\n  searchQuery: state.searchQuery,\r\n  windowWidth: state.windowWidth,\r\n  isMobile: state.isMobile,\r\n  isTablet: state.isTablet,\r\n  activeMobilePanel: state.activeMobilePanel,\r\n  message: state.message,\r\n  messageVisible: state.messageVisible\r\n}));\r\n\r\n// Individual store hooks for App.jsx compatibility\r\nexport const useDocumentStore = () => useStore((state) => ({\r\n  documents: Object.values(state.documents),\r\n  currentDocument: state.currentDocumentId ? state.documents[state.currentDocumentId] : null,\r\n  setCurrentDocument: (doc) => state.setCurrentDocument(doc?.id || doc),\r\n  updateDocument: state.updateDocument,\r\n  addDocument: state.addDocument,\r\n  deleteDocument: state.deleteDocument,\r\n  loadDocuments: state.loadDocuments,\r\n}));\r\n\r\nexport const useUIStore = () => useStore((state) => ({\r\n  sidebarOpen: false, // ê¸°ë³¸ê°’\r\n  theme: 'light', // ê¸°ë³¸ê°’\r\n  isFullscreen: state.isFullscreen,\r\n  toggleSidebar: () => {}, // ê¸°ë³¸ êµ¬í˜„\r\n  setTheme: () => {}, // ê¸°ë³¸ êµ¬í˜„\r\n  toggleFullscreen: () => state.setFullscreen(!state.isFullscreen),\r\n}));\r\n\r\nexport const useEditorStore = () => useStore((state) => ({\r\n  content: state.currentDocumentId ? state.documents[state.currentDocumentId]?.content || '' : '',\r\n  title: state.currentDocumentId ? state.documents[state.currentDocumentId]?.title || '' : '',\r\n  isEditing: false, // ê¸°ë³¸ê°’\r\n  saveStatus: state.saveStatus,\r\n  setContent: (content) => {\r\n    if (state.currentDocumentId) {\r\n      state.setContent(state.currentDocumentId, content);\r\n    }\r\n  },\r\n  setTitle: (title) => {\r\n    if (state.currentDocumentId) {\r\n      state.setTitle(state.currentDocumentId, title, true);\r\n    }\r\n  },\r\n  setEditing: () => {}, // ê¸°ë³¸ êµ¬í˜„\r\n  setSaveStatus: state.setSaveStatus,\r\n})); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\conflict.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[442,499],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":24,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":24,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[687,739],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[931,984],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1151,1208],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":43,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":43,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1289,1325],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'operation' is defined but never used. Allowed unused args must match /^_/u.","line":58,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":42},{"ruleId":"no-unused-vars","severity":1,"message":"'operation' is defined but never used. Allowed unused args must match /^_/u.","line":334,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":334,"endColumn":49},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":337,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":337,"endColumn":58},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":338,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":338,"endColumn":60}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ConflictResolver - ë¬¸ì„œ ì¶©ëŒ í•´ê²° ëª¨ë“ˆ\r\n */\r\nexport class ConflictResolver {\r\n  constructor(options = {}) {\r\n    this.strategy = options.strategy || 'last-write-wins';\r\n    this.autoResolve = options.autoResolve !== false;\r\n    this.userPromptTimeout = options.userPromptTimeout || 30000; // 30ì´ˆ\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ í•´ê²° ë©”ì¸ ë©”ì„œë“œ\r\n   */\r\n  async resolve(conflict) {\r\n    const { documentId, local, server, operation } = conflict;\r\n    \r\n    console.log(`ğŸ”„ ì¶©ëŒ í•´ê²° ì‹œì‘: ${documentId} (${operation})`);\r\n    \r\n    try {\r\n      // 1. ìë™ í•´ê²° ê°€ëŠ¥í•œì§€ í™•ì¸\r\n      const autoResolution = this.tryAutoResolve(local, server, operation);\r\n      \r\n      if (autoResolution && this.autoResolve) {\r\n        console.log(`âœ… ìë™ ì¶©ëŒ í•´ê²°: ${autoResolution.action}`);\r\n        return autoResolution;\r\n      }\r\n      \r\n      // 2. ì‚¬ìš©ì ê°œì… í•„ìš”\r\n      const userResolution = await this.promptUserResolution(conflict);\r\n      \r\n      if (userResolution) {\r\n        console.log(`âœ… ì‚¬ìš©ì ì¶©ëŒ í•´ê²°: ${userResolution.action}`);\r\n        return userResolution;\r\n      }\r\n      \r\n      // 3. ê¸°ë³¸ ì „ëµ ì ìš©\r\n      const fallbackResolution = this.applyFallbackStrategy(local, server, operation);\r\n      console.log(`âš ï¸ ê¸°ë³¸ ì „ëµ ì ìš©: ${fallbackResolution.action}`);\r\n      \r\n      return fallbackResolution;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ì¶©ëŒ í•´ê²° ì‹¤íŒ¨:', error);\r\n      \r\n      // ìµœí›„ì˜ ìˆ˜ë‹¨: ë¡œì»¬ ë°ì´í„° ìœ ì§€\r\n      return {\r\n        action: 'use_local',\r\n        data: local,\r\n        reason: 'ì¶©ëŒ í•´ê²° ì‹¤íŒ¨ë¡œ ì¸í•œ ë¡œì»¬ ë°ì´í„° ë³´ì¡´',\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ìë™ í•´ê²° ì‹œë„\r\n   */\r\n  tryAutoResolve(local, server, operation) {\r\n    // 1. ë‚´ìš©ì´ ë™ì¼í•œ ê²½ìš°\r\n    if (this.isContentEqual(local, server)) {\r\n      return {\r\n        action: 'no_conflict',\r\n        data: local,\r\n        reason: 'ë‚´ìš©ì´ ë™ì¼í•¨'\r\n      };\r\n    }\r\n    \r\n    // 2. í•œìª½ì´ ë¹„ì–´ìˆëŠ” ê²½ìš°\r\n    if (this.isEmpty(local) && !this.isEmpty(server)) {\r\n      return {\r\n        action: 'use_server',\r\n        data: server,\r\n        reason: 'ë¡œì»¬ ë°ì´í„°ê°€ ë¹„ì–´ìˆìŒ'\r\n      };\r\n    }\r\n    \r\n    if (!this.isEmpty(local) && this.isEmpty(server)) {\r\n      return {\r\n        action: 'use_local',\r\n        data: local,\r\n        reason: 'ì„œë²„ ë°ì´í„°ê°€ ë¹„ì–´ìˆìŒ'\r\n      };\r\n    }\r\n    \r\n    // 3. ë‹¨ìˆœ ì¶”ê°€ë§Œ ìˆëŠ” ê²½ìš° (í…ìŠ¤íŠ¸ ëì— ë‚´ìš© ì¶”ê°€)\r\n    const mergeResult = this.trySimpleMerge(local, server);\r\n    if (mergeResult) {\r\n      return {\r\n        action: 'merge',\r\n        data: mergeResult,\r\n        reason: 'ë‹¨ìˆœ ë³‘í•© ê°€ëŠ¥'\r\n      };\r\n    }\r\n    \r\n    // 4. íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ íŒë‹¨\r\n    if (local.updatedAt && server.updatedAt) {\r\n      const localTime = new Date(local.updatedAt);\r\n      const serverTime = new Date(server.updatedAt);\r\n      const timeDiff = Math.abs(localTime - serverTime);\r\n      \r\n      // ì‹œê°„ ì°¨ì´ê°€ 1ì´ˆ ë¯¸ë§Œì´ë©´ ë‚´ìš© ê¸¸ì´ë¡œ íŒë‹¨\r\n      if (timeDiff < 1000) {\r\n        const localLength = (local.content || '').length;\r\n        const serverLength = (server.content || '').length;\r\n        \r\n        if (localLength > serverLength) {\r\n          return {\r\n            action: 'use_local',\r\n            data: local,\r\n            reason: 'ë™ì‹œ í¸ì§‘ ì‹œ ë” ê¸´ ë‚´ìš© ì„ íƒ'\r\n          };\r\n        } else {\r\n          return {\r\n            action: 'use_server',\r\n            data: server,\r\n            reason: 'ë™ì‹œ í¸ì§‘ ì‹œ ë” ê¸´ ë‚´ìš© ì„ íƒ'\r\n          };\r\n        }\r\n      }\r\n    }\r\n    \r\n    return null; // ìë™ í•´ê²° ë¶ˆê°€\r\n  }\r\n  \r\n  /**\r\n   * ë‹¨ìˆœ ë³‘í•© ì‹œë„\r\n   */\r\n  trySimpleMerge(local, server) {\r\n    const localContent = local.content || '';\r\n    const serverContent = server.content || '';\r\n    \r\n    // í•œìª½ì´ ë‹¤ë¥¸ ìª½ì˜ ë¶€ë¶„ì§‘í•©ì¸ì§€ í™•ì¸\r\n    if (localContent.includes(serverContent)) {\r\n      return {\r\n        ...local,\r\n        content: localContent,\r\n        title: local.title || server.title\r\n      };\r\n    }\r\n    \r\n    if (serverContent.includes(localContent)) {\r\n      return {\r\n        ...server,\r\n        content: serverContent,\r\n        title: server.title || local.title\r\n      };\r\n    }\r\n    \r\n    // ê³µí†µ ì ‘ë‘ì‚¬/ì ‘ë¯¸ì‚¬ ì°¾ê¸°\r\n    const commonPrefix = this.findCommonPrefix(localContent, serverContent);\r\n    const commonSuffix = this.findCommonSuffix(localContent, serverContent);\r\n    \r\n    if (commonPrefix.length > 10 || commonSuffix.length > 10) {\r\n      // ê°„ë‹¨í•œ 3-way merge ì‹œë„\r\n      const localMiddle = localContent.slice(\r\n        commonPrefix.length, \r\n        localContent.length - commonSuffix.length\r\n      );\r\n      const serverMiddle = serverContent.slice(\r\n        commonPrefix.length, \r\n        serverContent.length - commonSuffix.length\r\n      );\r\n      \r\n      // ì¤‘ê°„ ë¶€ë¶„ì„ í•©ì¹˜ê¸°\r\n      const mergedContent = commonPrefix + localMiddle + '\\n' + serverMiddle + commonSuffix;\r\n      \r\n      return {\r\n        ...local,\r\n        content: mergedContent,\r\n        title: local.title || server.title,\r\n        mergedAt: new Date().toISOString()\r\n      };\r\n    }\r\n    \r\n    return null;\r\n  }\r\n  \r\n  /**\r\n   * ì‚¬ìš©ì í•´ê²° í”„ë¡¬í”„íŠ¸\r\n   */\r\n  async promptUserResolution(conflict) {\r\n    return new Promise((resolve) => {\r\n      const { documentId, local, server } = conflict;\r\n      \r\n      // ì¶©ëŒ í•´ê²° UI í‘œì‹œ\r\n      const modal = this.createConflictModal(documentId, local, server);\r\n      document.body.appendChild(modal);\r\n      \r\n      // íƒ€ì„ì•„ì›ƒ ì„¤ì •\r\n      const timeout = setTimeout(() => {\r\n        document.body.removeChild(modal);\r\n        resolve(null); // íƒ€ì„ì•„ì›ƒ ì‹œ null ë°˜í™˜\r\n      }, this.userPromptTimeout);\r\n      \r\n      // ì‚¬ìš©ì ì„ íƒ ì²˜ë¦¬\r\n      const handleChoice = (choice, data) => {\r\n        clearTimeout(timeout);\r\n        document.body.removeChild(modal);\r\n        resolve({\r\n          action: choice,\r\n          data: data,\r\n          reason: 'ì‚¬ìš©ì ì„ íƒ'\r\n        });\r\n      };\r\n      \r\n      // ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ\r\n      modal.querySelector('.use-local').onclick = () => \r\n        handleChoice('use_local', local);\r\n      \r\n      modal.querySelector('.use-server').onclick = () => \r\n        handleChoice('use_server', server);\r\n      \r\n      modal.querySelector('.merge-manual').onclick = () => {\r\n        const mergedData = this.showMergeEditor(local, server);\r\n        handleChoice('merge', mergedData);\r\n      };\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ í•´ê²° ëª¨ë‹¬ ìƒì„±\r\n   */\r\n  createConflictModal(documentId, local, server) {\r\n    const modal = document.createElement('div');\r\n    modal.className = 'conflict-resolution-modal';\r\n    modal.innerHTML = `\r\n      <div class=\"modal-overlay\">\r\n        <div class=\"modal-content\">\r\n          <h3>ğŸ“„ ë¬¸ì„œ ì¶©ëŒ ê°ì§€</h3>\r\n          <p>ë¬¸ì„œ \"${local.title || documentId}\"ì—ì„œ ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>\r\n          \r\n          <div class=\"conflict-comparison\">\r\n            <div class=\"local-version\">\r\n              <h4>ğŸ–¥ï¸ ë¡œì»¬ ë²„ì „</h4>\r\n              <div class=\"content-preview\">${this.truncateContent(local.content)}</div>\r\n              <small>ìˆ˜ì •: ${new Date(local.updatedAt).toLocaleString()}</small>\r\n            </div>\r\n            \r\n            <div class=\"server-version\">\r\n              <h4>â˜ï¸ ì„œë²„ ë²„ì „</h4>\r\n              <div class=\"content-preview\">${this.truncateContent(server.content)}</div>\r\n              <small>ìˆ˜ì •: ${new Date(server.updatedAt).toLocaleString()}</small>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"resolution-buttons\">\r\n            <button class=\"use-local\">ë¡œì»¬ ë²„ì „ ì‚¬ìš©</button>\r\n            <button class=\"use-server\">ì„œë²„ ë²„ì „ ì‚¬ìš©</button>\r\n            <button class=\"merge-manual\">ìˆ˜ë™ ë³‘í•©</button>\r\n          </div>\r\n          \r\n          <p class=\"timeout-warning\">30ì´ˆ í›„ ìë™ìœ¼ë¡œ ë¡œì»¬ ë²„ì „ì´ ì„ íƒë©ë‹ˆë‹¤.</p>\r\n        </div>\r\n      </div>\r\n    `;\r\n    \r\n    // ìŠ¤íƒ€ì¼ ì¶”ê°€\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .conflict-resolution-modal {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        z-index: 10000;\r\n      }\r\n      .modal-overlay {\r\n        background: rgba(0,0,0,0.7);\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n      }\r\n      .modal-content {\r\n        background: white;\r\n        padding: 20px;\r\n        border-radius: 8px;\r\n        max-width: 600px;\r\n        max-height: 80vh;\r\n        overflow-y: auto;\r\n      }\r\n      .conflict-comparison {\r\n        display: flex;\r\n        gap: 20px;\r\n        margin: 20px 0;\r\n      }\r\n      .local-version, .server-version {\r\n        flex: 1;\r\n        border: 1px solid #ddd;\r\n        padding: 10px;\r\n        border-radius: 4px;\r\n      }\r\n      .content-preview {\r\n        background: #f5f5f5;\r\n        padding: 10px;\r\n        border-radius: 4px;\r\n        font-family: monospace;\r\n        font-size: 12px;\r\n        max-height: 150px;\r\n        overflow-y: auto;\r\n        white-space: pre-wrap;\r\n      }\r\n      .resolution-buttons {\r\n        display: flex;\r\n        gap: 10px;\r\n        justify-content: center;\r\n        margin: 20px 0;\r\n      }\r\n      .resolution-buttons button {\r\n        padding: 10px 20px;\r\n        border: none;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n      }\r\n      .use-local { background: #4CAF50; color: white; }\r\n      .use-server { background: #2196F3; color: white; }\r\n      .merge-manual { background: #FF9800; color: white; }\r\n      .timeout-warning {\r\n        text-align: center;\r\n        color: #666;\r\n        font-size: 12px;\r\n      }\r\n    `;\r\n    modal.appendChild(style);\r\n    \r\n    return modal;\r\n  }\r\n  \r\n  /**\r\n   * ê¸°ë³¸ ì „ëµ ì ìš©\r\n   */\r\n  applyFallbackStrategy(local, server, operation) {\r\n    switch (this.strategy) {\r\n      case 'last-write-wins':\r\n        const localTime = new Date(local.updatedAt || 0);\r\n        const serverTime = new Date(server.updatedAt || 0);\r\n        \r\n        return localTime >= serverTime ? {\r\n          action: 'use_local',\r\n          data: local,\r\n          reason: 'Last-Write-Wins: ë¡œì»¬ì´ ë” ìµœì‹ '\r\n        } : {\r\n          action: 'use_server',\r\n          data: server,\r\n          reason: 'Last-Write-Wins: ì„œë²„ê°€ ë” ìµœì‹ '\r\n        };\r\n        \r\n      case 'prefer-local':\r\n        return {\r\n          action: 'use_local',\r\n          data: local,\r\n          reason: 'Prefer-Local ì „ëµ'\r\n        };\r\n        \r\n      case 'prefer-server':\r\n        return {\r\n          action: 'use_server',\r\n          data: server,\r\n          reason: 'Prefer-Server ì „ëµ'\r\n        };\r\n        \r\n      default:\r\n        return {\r\n          action: 'use_local',\r\n          data: local,\r\n          reason: 'ì•Œ ìˆ˜ ì—†ëŠ” ì „ëµìœ¼ë¡œ ì¸í•œ ë¡œì»¬ ì„ íƒ'\r\n        };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œë“¤\r\n   */\r\n  isContentEqual(local, server) {\r\n    return (local.content || '').trim() === (server.content || '').trim() &&\r\n           (local.title || '').trim() === (server.title || '').trim();\r\n  }\r\n  \r\n  isEmpty(data) {\r\n    return !data || \r\n           (!data.content || data.content.trim() === '') &&\r\n           (!data.title || data.title.trim() === '');\r\n  }\r\n  \r\n  findCommonPrefix(str1, str2) {\r\n    let i = 0;\r\n    while (i < str1.length && i < str2.length && str1[i] === str2[i]) {\r\n      i++;\r\n    }\r\n    return str1.slice(0, i);\r\n  }\r\n  \r\n  findCommonSuffix(str1, str2) {\r\n    let i = 0;\r\n    while (i < str1.length && i < str2.length && \r\n           str1[str1.length - 1 - i] === str2[str2.length - 1 - i]) {\r\n      i++;\r\n    }\r\n    return str1.slice(str1.length - i);\r\n  }\r\n  \r\n  truncateContent(content, maxLength = 200) {\r\n    if (!content) return '(ë‚´ìš© ì—†ìŒ)';\r\n    return content.length > maxLength ? \r\n           content.slice(0, maxLength) + '...' : \r\n           content;\r\n  }\r\n}\r\n\r\n/**\r\n * ì¶©ëŒ í•´ê²°ê¸° íŒ©í† ë¦¬\r\n */\r\nexport const createConflictResolver = (options = {}) => {\r\n  return new ConflictResolver(options);\r\n};\r\n\r\n/**\r\n * ê¸°ë³¸ ì¶©ëŒ í•´ê²°ê¸° ì¸ìŠ¤í„´ìŠ¤\r\n */\r\nexport const defaultConflictResolver = new ConflictResolver(); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\httpAdapter.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[801,858],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":58,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":58,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1616,1682],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1743,1798],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'options' is assigned a value but never used.","line":104,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":104,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * HttpAdapter - REST API í†µì‹  ì–´ëŒ‘í„°\r\n */\r\nexport class HttpAdapter {\r\n  constructor(options = {}) {\r\n    this.baseURL = options.baseURL || 'http://localhost:3003/api';\r\n    this.timeout = options.timeout || 10000;\r\n    this.headers = {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * HTTP ìš”ì²­ ê³µí†µ ì²˜ë¦¬\r\n   */\r\n  async request(method, endpoint, data = null, options = {}) {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n    const config = {\r\n      method,\r\n      headers: { ...this.headers, ...options.headers },\r\n      signal: AbortSignal.timeout(this.timeout),\r\n      ...options\r\n    };\r\n    \r\n    if (data && (method === 'POST' || method === 'PUT' || method === 'PATCH')) {\r\n      config.body = JSON.stringify(data);\r\n    }\r\n    \r\n    try {\r\n      console.log(`ğŸŒ ${method} ${url}`, data ? { data } : '');\r\n      \r\n      const response = await fetch(url, config);\r\n      \r\n      // ETag í—¤ë” ì²˜ë¦¬ (ìºì‹œ ë¬´ê²°ì„±)\r\n      const etag = response.headers.get('ETag');\r\n      const lastModified = response.headers.get('Last-Modified');\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        const error = new Error(errorData.message || `HTTP ${response.status}`);\r\n        error.status = response.status;\r\n        error.data = errorData;\r\n        throw error;\r\n      }\r\n      \r\n      const result = await response.json();\r\n      \r\n      // ë©”íƒ€ë°ì´í„° ì¶”ê°€\r\n      if (etag || lastModified) {\r\n        result._meta = {\r\n          etag,\r\n          lastModified,\r\n          status: response.status\r\n        };\r\n      }\r\n      \r\n      console.log(`âœ… ${method} ${url} ì„±ê³µ`, { status: response.status });\r\n      return result;\r\n      \r\n    } catch (error) {\r\n      console.error(`âŒ ${method} ${url} ì‹¤íŒ¨:`, error.message);\r\n      \r\n      // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ í‘œì¤€í™”\r\n      if (error.name === 'AbortError') {\r\n        const timeoutError = new Error('ìš”ì²­ ì‹œê°„ ì´ˆê³¼');\r\n        timeoutError.name = 'TimeoutError';\r\n        timeoutError.code = 'TIMEOUT';\r\n        throw timeoutError;\r\n      }\r\n      \r\n      if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n        const networkError = new Error('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨');\r\n        networkError.name = 'NetworkError';\r\n        networkError.code = 'NETWORK_ERROR';\r\n        throw networkError;\r\n      }\r\n      \r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ìƒì„±\r\n   */\r\n  async createDocument(data) {\r\n    return await this.request('POST', '/posts', {\r\n      title: data.title || 'ì œëª© ì—†ìŒ',\r\n      content: data.content || '',\r\n      ...data\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ì¡°íšŒ\r\n   */\r\n  async getDocument(id) {\r\n    return await this.request('GET', `/posts/${id}`);\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ì—…ë°ì´íŠ¸ (ETag ê¸°ë°˜ ì¶©ëŒ ê°ì§€)\r\n   */\r\n  async updateDocument(id, data, options = {}) {\r\n    const headers = {};\r\n    \r\n    // ETag ê¸°ë°˜ ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸\r\n    if (data._meta?.etag) {\r\n      headers['If-Match'] = data._meta.etag;\r\n    }\r\n    \r\n    // Last-Modified ê¸°ë°˜ ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸\r\n    if (data._meta?.lastModified) {\r\n      headers['If-Unmodified-Since'] = data._meta.lastModified;\r\n    }\r\n    \r\n    return await this.request('PUT', `/posts/${id}`, {\r\n      title: data.title,\r\n      content: data.content,\r\n      updatedAt: data.updatedAt || new Date().toISOString(),\r\n      ...data\r\n    }, { headers });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ì‚­ì œ\r\n   */\r\n  async deleteDocument(id) {\r\n    return await this.request('DELETE', `/posts/${id}`);\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ\r\n   */\r\n  async getDocuments(options = {}) {\r\n    const params = new URLSearchParams();\r\n    \r\n    if (options.limit) params.append('limit', options.limit);\r\n    if (options.offset) params.append('offset', options.offset);\r\n    if (options.search) params.append('search', options.search);\r\n    if (options.since) params.append('since', options.since);\r\n    \r\n    const query = params.toString();\r\n    const endpoint = query ? `/posts?${query}` : '/posts';\r\n    \r\n    return await this.request('GET', endpoint);\r\n  }\r\n  \r\n  /**\r\n   * ì„œë²„ ìƒíƒœ í™•ì¸\r\n   */\r\n  async healthCheck() {\r\n    try {\r\n      const result = await this.request('GET', '/health', null, { \r\n        timeout: 5000 \r\n      });\r\n      return { status: 'ok', ...result };\r\n    } catch (error) {\r\n      return { \r\n        status: 'error', \r\n        error: error.message,\r\n        code: error.code \r\n      };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ\r\n   */\r\n  async getSyncStatus(documentIds = []) {\r\n    if (documentIds.length === 0) {\r\n      return await this.request('GET', '/sync/status');\r\n    }\r\n    \r\n    return await this.request('POST', '/sync/status', {\r\n      documentIds\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ë°°ì¹˜ ì—…ë°ì´íŠ¸ (ì—¬ëŸ¬ ë¬¸ì„œ í•œë²ˆì—)\r\n   */\r\n  async batchUpdate(documents) {\r\n    return await this.request('POST', '/posts/batch', {\r\n      documents: documents.map(doc => ({\r\n        id: doc.id,\r\n        title: doc.title,\r\n        content: doc.content,\r\n        updatedAt: doc.updatedAt\r\n      }))\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ í•´ê²°ì„ ìœ„í•œ ì„œë²„ ë°ì´í„° ì¡°íšŒ\r\n   */\r\n  async getDocumentRevision(id, revision) {\r\n    return await this.request('GET', `/posts/${id}/revisions/${revision}`);\r\n  }\r\n  \r\n  /**\r\n   * ê²€ìƒ‰\r\n   */\r\n  async searchDocuments(query, options = {}) {\r\n    const params = new URLSearchParams({\r\n      q: query,\r\n      limit: options.limit || 20,\r\n      offset: options.offset || 0\r\n    });\r\n    \r\n    if (options.fields) {\r\n      params.append('fields', options.fields.join(','));\r\n    }\r\n    \r\n    return await this.request('GET', `/search?${params.toString()}`);\r\n  }\r\n}\r\n\r\n/**\r\n * HTTP ì–´ëŒ‘í„° íŒ©í† ë¦¬\r\n */\r\nexport const createHttpAdapter = (options = {}) => {\r\n  return new HttpAdapter(options);\r\n};\r\n\r\n/**\r\n * ê¸°ë³¸ HTTP ì–´ëŒ‘í„° ì¸ìŠ¤í„´ìŠ¤\r\n */\r\nexport const defaultHttpAdapter = new HttpAdapter(); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\index.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[996,1023],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":44,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":44,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1158,1187],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":85,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":85,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2128,2165],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":128,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":128,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3313,3353],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":189,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":189,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5071,5115],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":206,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":206,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5458,5512],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":216,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":216,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5765,5800],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":299,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":299,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7434,7483],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { HttpAdapter } from './httpAdapter';\r\nimport { WebSocketAdapter } from './wsAdapter';\r\nimport { SyncQueue } from '../utils/database';\r\nimport { ConflictResolver } from './conflict';\r\n\r\n/**\r\n * SyncManager - ì¤‘ì•™í™”ëœ ë™ê¸°í™” ê´€ë¦¬ì\r\n * \r\n * ì—­í• :\r\n * - ë¡œì»¬ IndexedDBì™€ ì›ê²© ì„œë²„ ê°„ ë°ì´í„° ë™ê¸°í™”\r\n * - ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê°ì§€ ë° ì˜¤í”„ë¼ì¸ í ê´€ë¦¬\r\n * - ì¶©ëŒ í•´ê²° ë° ì¬ì‹œë„ ë¡œì§\r\n */\r\nexport class SyncManager {\r\n  constructor(options = {}) {\r\n    this.httpAdapter = options.httpAdapter || new HttpAdapter();\r\n    this.wsAdapter = options.wsAdapter || new WebSocketAdapter();\r\n    this.conflictResolver = options.conflictResolver || new ConflictResolver();\r\n    \r\n    this.isOnline = navigator.onLine;\r\n    this.syncInProgress = false;\r\n    this.syncInterval = null;\r\n    this.retryTimeout = null;\r\n    \r\n    // Event listeners\r\n    this.listeners = {\r\n      sync: [],\r\n      conflict: [],\r\n      error: []\r\n    };\r\n    \r\n    this.init();\r\n  }\r\n  \r\n  init() {\r\n    // Network status monitoring\r\n    window.addEventListener('online', () => {\r\n      console.log('ğŸŒ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ë¨');\r\n      this.isOnline = true;\r\n      this.processPendingQueue();\r\n    });\r\n    \r\n    window.addEventListener('offline', () => {\r\n      console.log('ğŸ“´ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ëŠê¹€');\r\n      this.isOnline = false;\r\n    });\r\n    \r\n    // Start periodic sync\r\n    this.startPeriodicSync();\r\n    \r\n    // WebSocket connection for real-time sync\r\n    if (this.isOnline) {\r\n      this.wsAdapter.connect();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ë™ê¸°í™” (Optimistic UI íŒ¨í„´)\r\n   */\r\n  async syncDocument(documentId, operation = 'update', data = {}) {\r\n    try {\r\n      // 1. ë¡œì»¬ íì— ì¶”ê°€ (ì˜¤í”„ë¼ì¸ ëŒ€ë¹„)\r\n      await SyncQueue.enqueue(documentId, operation, data);\r\n      \r\n      // 2. ì˜¨ë¼ì¸ ìƒíƒœë©´ ì¦‰ì‹œ ë™ê¸°í™” ì‹œë„\r\n      if (this.isOnline) {\r\n        return await this.processSyncItem({\r\n          documentId,\r\n          operation,\r\n          data: JSON.stringify(data)\r\n        });\r\n      }\r\n      \r\n      // 3. ì˜¤í”„ë¼ì¸ì´ë©´ íì—ë§Œ ì €ì¥\r\n      this.emit('sync', {\r\n        status: 'queued',\r\n        documentId,\r\n        operation,\r\n        message: 'ì˜¤í”„ë¼ì¸ ìƒíƒœ - íì— ì €ì¥ë¨'\r\n      });\r\n      \r\n      return { success: true, queued: true };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë¬¸ì„œ ë™ê¸°í™” ì‹¤íŒ¨:', error);\r\n      this.emit('error', { documentId, operation, error: error.message });\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ê°œë³„ ë™ê¸°í™” í•­ëª© ì²˜ë¦¬\r\n   */\r\n  async processSyncItem(item) {\r\n    try {\r\n      const data = JSON.parse(item.data || '{}');\r\n      let result;\r\n      \r\n      switch (item.operation) {\r\n        case 'create':\r\n          result = await this.httpAdapter.createDocument(data);\r\n          break;\r\n        case 'update':\r\n          result = await this.httpAdapter.updateDocument(item.documentId, data);\r\n          break;\r\n        case 'delete':\r\n          result = await this.httpAdapter.deleteDocument(item.documentId);\r\n          break;\r\n        default:\r\n          throw new Error(`ì•Œ ìˆ˜ ì—†ëŠ” ì‘ì—…: ${item.operation}`);\r\n      }\r\n      \r\n      // ì„±ê³µ ì‹œ íì—ì„œ ì œê±°\r\n      if (item.queueId) {\r\n        await SyncQueue.markAsCompleted(item.queueId);\r\n      }\r\n      \r\n      this.emit('sync', {\r\n        status: 'completed',\r\n        documentId: item.documentId,\r\n        operation: item.operation,\r\n        result\r\n      });\r\n      \r\n      return { success: true, result };\r\n      \r\n    } catch (error) {\r\n      console.error(`âŒ ë™ê¸°í™” í•­ëª© ì²˜ë¦¬ ì‹¤íŒ¨:`, error);\r\n      \r\n      // ì¶©ëŒ ê°ì§€ (409 Conflict)\r\n      if (error.status === 409) {\r\n        return await this.handleConflict(item, error);\r\n      }\r\n      \r\n      // ì¬ì‹œë„ ê°€ëŠ¥í•œ ì˜¤ë¥˜ (5xx, ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜)\r\n      if (this.isRetryableError(error)) {\r\n        if (item.queueId) {\r\n          await SyncQueue.markAsFailed(item.queueId, error.message);\r\n        }\r\n        return { success: false, retry: true, error: error.message };\r\n      }\r\n      \r\n      // ì¬ì‹œë„ ë¶ˆê°€ëŠ¥í•œ ì˜¤ë¥˜ (4xx)\r\n      if (item.queueId) {\r\n        await SyncQueue.markAsFailed(item.queueId, error.message);\r\n      }\r\n      \r\n      this.emit('error', {\r\n        documentId: item.documentId,\r\n        operation: item.operation,\r\n        error: error.message\r\n      });\r\n      \r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ ì²˜ë¦¬\r\n   */\r\n  async handleConflict(item, error) {\r\n    try {\r\n      const serverData = error.data || {};\r\n      const localData = JSON.parse(item.data || '{}');\r\n      \r\n      const resolution = await this.conflictResolver.resolve({\r\n        documentId: item.documentId,\r\n        local: localData,\r\n        server: serverData,\r\n        operation: item.operation\r\n      });\r\n      \r\n      this.emit('conflict', {\r\n        documentId: item.documentId,\r\n        resolution,\r\n        local: localData,\r\n        server: serverData\r\n      });\r\n      \r\n      // í•´ê²°ëœ ë°ì´í„°ë¡œ ì¬ì‹œë„\r\n      if (resolution.action === 'merge' || resolution.action === 'use_local') {\r\n        const mergedData = resolution.data || localData;\r\n        return await this.httpAdapter.updateDocument(item.documentId, mergedData);\r\n      }\r\n      \r\n      return { success: true, conflict: true, resolution };\r\n      \r\n    } catch (conflictError) {\r\n      console.error('âŒ ì¶©ëŒ í•´ê²° ì‹¤íŒ¨:', conflictError);\r\n      return { success: false, error: conflictError.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ëŒ€ê¸° ì¤‘ì¸ í ì²˜ë¦¬\r\n   */\r\n  async processPendingQueue() {\r\n    if (this.syncInProgress || !this.isOnline) {\r\n      return;\r\n    }\r\n    \r\n    this.syncInProgress = true;\r\n    \r\n    try {\r\n      const pendingItems = await SyncQueue.getPendingItems();\r\n      console.log(`ğŸ“¤ ì²˜ë¦¬í•  ë™ê¸°í™” í•­ëª©: ${pendingItems.length}ê°œ`);\r\n      \r\n      for (const item of pendingItems) {\r\n        await this.processSyncItem(item);\r\n        \r\n        // Rate limiting - 100ms ê°„ê²©\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ í ì²˜ë¦¬ ì‹¤íŒ¨:', error);\r\n    } finally {\r\n      this.syncInProgress = false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì£¼ê¸°ì  ë™ê¸°í™” ì‹œì‘\r\n   */\r\n  startPeriodicSync(interval = 30000) { // 30ì´ˆ\r\n    if (this.syncInterval) {\r\n      clearInterval(this.syncInterval);\r\n    }\r\n    \r\n    this.syncInterval = setInterval(() => {\r\n      if (this.isOnline && !this.syncInProgress) {\r\n        this.processPendingQueue();\r\n      }\r\n    }, interval);\r\n  }\r\n  \r\n  /**\r\n   * ì£¼ê¸°ì  ë™ê¸°í™” ì¤‘ì§€\r\n   */\r\n  stopPeriodicSync() {\r\n    if (this.syncInterval) {\r\n      clearInterval(this.syncInterval);\r\n      this.syncInterval = null;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì¬ì‹œë„ ê°€ëŠ¥í•œ ì˜¤ë¥˜ íŒë‹¨\r\n   */\r\n  isRetryableError(error) {\r\n    // 5xx ì„œë²„ ì˜¤ë¥˜\r\n    if (error.status >= 500 && error.status < 600) {\r\n      return true;\r\n    }\r\n    \r\n    // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜\r\n    if (error.name === 'NetworkError' || error.code === 'NETWORK_ERROR') {\r\n      return true;\r\n    }\r\n    \r\n    // íƒ€ì„ì•„ì›ƒ\r\n    if (error.name === 'TimeoutError' || error.code === 'TIMEOUT') {\r\n      return true;\r\n    }\r\n    \r\n    return false;\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡\r\n   */\r\n  on(event, callback) {\r\n    if (this.listeners[event]) {\r\n      this.listeners[event].push(callback);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°\r\n   */\r\n  off(event, callback) {\r\n    if (this.listeners[event]) {\r\n      const index = this.listeners[event].indexOf(callback);\r\n      if (index > -1) {\r\n        this.listeners[event].splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë°œìƒ\r\n   */\r\n  emit(event, data) {\r\n    if (this.listeners[event]) {\r\n      this.listeners[event].forEach(callback => {\r\n        try {\r\n          callback(data);\r\n        } catch (error) {\r\n          console.error(`âŒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜ (${event}):`, error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ\r\n   */\r\n  async getStatus() {\r\n    const pendingItems = await SyncQueue.getPendingItems();\r\n    const failedItems = await SyncQueue.getFailedItems?.() || [];\r\n    \r\n    return {\r\n      isOnline: this.isOnline,\r\n      syncInProgress: this.syncInProgress,\r\n      pendingCount: pendingItems.length,\r\n      failedCount: failedItems.length,\r\n      wsConnected: this.wsAdapter.isConnected()\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * ê°•ì œ ë™ê¸°í™”\r\n   */\r\n  async forcSync() {\r\n    if (!this.isOnline) {\r\n      throw new Error('ì˜¤í”„ë¼ì¸ ìƒíƒœì—ì„œëŠ” ë™ê¸°í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\r\n    }\r\n    \r\n    return await this.processPendingQueue();\r\n  }\r\n  \r\n  /**\r\n   * ì •ë¦¬\r\n   */\r\n  destroy() {\r\n    this.stopPeriodicSync();\r\n    \r\n    if (this.retryTimeout) {\r\n      clearTimeout(this.retryTimeout);\r\n    }\r\n    \r\n    this.wsAdapter.disconnect();\r\n    \r\n    window.removeEventListener('online', this.handleOnline);\r\n    window.removeEventListener('offline', this.handleOffline);\r\n    \r\n    this.listeners = { sync: [], conflict: [], error: [] };\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nlet syncManagerInstance = null;\r\n\r\n/**\r\n * SyncManager ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì˜¤ê¸°\r\n */\r\nexport const getSyncManager = (options = {}) => {\r\n  if (!syncManagerInstance) {\r\n    syncManagerInstance = new SyncManager(options);\r\n  }\r\n  return syncManagerInstance;\r\n};\r\n\r\n/**\r\n * SyncManager ì¸ìŠ¤í„´ìŠ¤ ì¬ì„¤ì • (í…ŒìŠ¤íŠ¸ìš©)\r\n */\r\nexport const resetSyncManager = () => {\r\n  if (syncManagerInstance) {\r\n    syncManagerInstance.destroy();\r\n    syncManagerInstance = null;\r\n  }\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\wsAdapter.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":33,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":33,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[854,889],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[936,983],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":47,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":47,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1290,1333],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":56,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":56,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1442,1476],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":82,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":82,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[1999,2047],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2264,2314],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2373,2420],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":139,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":139,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3119,3152],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":154,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":154,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3424,3490],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4054,4103],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":181,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":181,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4151,4198],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":189,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":189,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4273,4340],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":210,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":210,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4728,4768],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":219,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":219,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4939,5004],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":229,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":229,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5208,5303],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":306,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":306,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[6861,6920],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * WebSocketAdapter - ì‹¤ì‹œê°„ ë™ê¸°í™”ë¥¼ ìœ„í•œ WebSocket ì–´ëŒ‘í„°\r\n */\r\nexport class WebSocketAdapter {\r\n  constructor(options = {}) {\r\n    this.url = options.url || 'ws://localhost:3003/ws';\r\n    this.reconnectInterval = options.reconnectInterval || 5000;\r\n    this.maxReconnectAttempts = options.maxReconnectAttempts || 10;\r\n    this.heartbeatInterval = options.heartbeatInterval || 30000;\r\n    \r\n    this.ws = null;\r\n    this.isConnected = false;\r\n    this.reconnectAttempts = 0;\r\n    this.reconnectTimer = null;\r\n    this.heartbeatTimer = null;\r\n    \r\n    this.listeners = {\r\n      connect: [],\r\n      disconnect: [],\r\n      message: [],\r\n      error: [],\r\n      documentUpdate: [],\r\n      documentDelete: [],\r\n      conflict: []\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * WebSocket ì—°ê²°\r\n   */\r\n  connect() {\r\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\r\n      console.log('ğŸ”Œ WebSocket ì´ë¯¸ ì—°ê²°ë¨');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log(`ğŸ”Œ WebSocket ì—°ê²° ì‹œë„: ${this.url}`);\r\n      this.ws = new WebSocket(this.url);\r\n      \r\n      this.ws.onopen = this.handleOpen.bind(this);\r\n      this.ws.onmessage = this.handleMessage.bind(this);\r\n      this.ws.onclose = this.handleClose.bind(this);\r\n      this.ws.onerror = this.handleError.bind(this);\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ WebSocket ì—°ê²° ì‹¤íŒ¨:', error);\r\n      this.scheduleReconnect();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * WebSocket ì—°ê²° í•´ì œ\r\n   */\r\n  disconnect() {\r\n    console.log('ğŸ”Œ WebSocket ì—°ê²° í•´ì œ');\r\n    \r\n    this.clearTimers();\r\n    \r\n    if (this.ws) {\r\n      this.ws.onopen = null;\r\n      this.ws.onmessage = null;\r\n      this.ws.onclose = null;\r\n      this.ws.onerror = null;\r\n      \r\n      if (this.ws.readyState === WebSocket.OPEN) {\r\n        this.ws.close(1000, 'Client disconnect');\r\n      }\r\n      \r\n      this.ws = null;\r\n    }\r\n    \r\n    this.isConnected = false;\r\n    this.reconnectAttempts = 0;\r\n  }\r\n  \r\n  /**\r\n   * ë©”ì‹œì§€ ì „ì†¡\r\n   */\r\n  send(type, data = {}) {\r\n    if (!this.isConnected || !this.ws) {\r\n      console.warn('âš ï¸ WebSocket ì—°ê²°ë˜ì§€ ì•ŠìŒ, ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨');\r\n      return false;\r\n    }\r\n    \r\n    try {\r\n      const message = {\r\n        type,\r\n        data,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n      this.ws.send(JSON.stringify(message));\r\n      console.log(`ğŸ“¤ WebSocket ë©”ì‹œì§€ ì „ì†¡: ${type}`, data);\r\n      return true;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ WebSocket ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨:', error);\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ êµ¬ë…\r\n   */\r\n  subscribeToDocument(documentId) {\r\n    return this.send('subscribe', { documentId });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ êµ¬ë… í•´ì œ\r\n   */\r\n  unsubscribeFromDocument(documentId) {\r\n    return this.send('unsubscribe', { documentId });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ë³€ê²½ ì•Œë¦¼\r\n   */\r\n  notifyDocumentChange(documentId, changes) {\r\n    return this.send('document_change', {\r\n      documentId,\r\n      changes,\r\n      clientId: this.getClientId()\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ì—°ê²° ìƒíƒœ í™•ì¸\r\n   */\r\n  isConnected() {\r\n    return this.isConnected && this.ws && this.ws.readyState === WebSocket.OPEN;\r\n  }\r\n  \r\n  /**\r\n   * ì—°ê²° ì—´ë¦¼ ì²˜ë¦¬\r\n   */\r\n  handleOpen(event) {\r\n    console.log('âœ… WebSocket ì—°ê²° ì„±ê³µ');\r\n    \r\n    this.isConnected = true;\r\n    this.reconnectAttempts = 0;\r\n    \r\n    this.startHeartbeat();\r\n    this.emit('connect', { event });\r\n  }\r\n  \r\n  /**\r\n   * ë©”ì‹œì§€ ìˆ˜ì‹  ì²˜ë¦¬\r\n   */\r\n  handleMessage(event) {\r\n    try {\r\n      const message = JSON.parse(event.data);\r\n      console.log(`ğŸ“¥ WebSocket ë©”ì‹œì§€ ìˆ˜ì‹ : ${message.type}`, message.data);\r\n      \r\n      this.emit('message', message);\r\n      \r\n      // ë©”ì‹œì§€ íƒ€ì…ë³„ ì²˜ë¦¬\r\n      switch (message.type) {\r\n        case 'document_updated':\r\n          this.emit('documentUpdate', message.data);\r\n          break;\r\n          \r\n        case 'document_deleted':\r\n          this.emit('documentDelete', message.data);\r\n          break;\r\n          \r\n        case 'conflict_detected':\r\n          this.emit('conflict', message.data);\r\n          break;\r\n          \r\n        case 'pong':\r\n          // Heartbeat ì‘ë‹µ\r\n          break;\r\n          \r\n        default:\r\n          console.log(`ğŸ¤· ì•Œ ìˆ˜ ì—†ëŠ” ë©”ì‹œì§€ íƒ€ì…: ${message.type}`);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ WebSocket ë©”ì‹œì§€ íŒŒì‹± ì‹¤íŒ¨:', error);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì—°ê²° ì¢…ë£Œ ì²˜ë¦¬\r\n   */\r\n  handleClose(event) {\r\n    console.log(`ğŸ”Œ WebSocket ì—°ê²° ì¢…ë£Œ: ${event.code} - ${event.reason}`);\r\n    \r\n    this.isConnected = false;\r\n    this.clearTimers();\r\n    \r\n    this.emit('disconnect', { \r\n      code: event.code, \r\n      reason: event.reason,\r\n      wasClean: event.wasClean\r\n    });\r\n    \r\n    // ë¹„ì •ìƒ ì¢…ë£Œì¸ ê²½ìš° ì¬ì—°ê²° ì‹œë„\r\n    if (event.code !== 1000 && event.code !== 1001) {\r\n      this.scheduleReconnect();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì˜¤ë¥˜ ì²˜ë¦¬\r\n   */\r\n  handleError(event) {\r\n    console.error('âŒ WebSocket ì˜¤ë¥˜:', event);\r\n    this.emit('error', { event });\r\n  }\r\n  \r\n  /**\r\n   * ì¬ì—°ê²° ìŠ¤ì¼€ì¤„ë§\r\n   */\r\n  scheduleReconnect() {\r\n    if (this.reconnectAttempts >= this.maxReconnectAttempts) {\r\n      console.error(`âŒ ìµœëŒ€ ì¬ì—°ê²° ì‹œë„ íšŸìˆ˜(${this.maxReconnectAttempts}) ì´ˆê³¼`);\r\n      return;\r\n    }\r\n    \r\n    this.reconnectAttempts++;\r\n    const delay = Math.min(\r\n      this.reconnectInterval * Math.pow(2, this.reconnectAttempts - 1),\r\n      30000 // ìµœëŒ€ 30ì´ˆ\r\n    );\r\n    \r\n    console.log(`ğŸ”„ ${delay}ms í›„ ì¬ì—°ê²° ì‹œë„ (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);\r\n    \r\n    this.reconnectTimer = setTimeout(() => {\r\n      this.connect();\r\n    }, delay);\r\n  }\r\n  \r\n  /**\r\n   * Heartbeat ì‹œì‘\r\n   */\r\n  startHeartbeat() {\r\n    this.heartbeatTimer = setInterval(() => {\r\n      if (this.isConnected) {\r\n        this.send('ping');\r\n      }\r\n    }, this.heartbeatInterval);\r\n  }\r\n  \r\n  /**\r\n   * íƒ€ì´ë¨¸ ì •ë¦¬\r\n   */\r\n  clearTimers() {\r\n    if (this.reconnectTimer) {\r\n      clearTimeout(this.reconnectTimer);\r\n      this.reconnectTimer = null;\r\n    }\r\n    \r\n    if (this.heartbeatTimer) {\r\n      clearInterval(this.heartbeatTimer);\r\n      this.heartbeatTimer = null;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±/ì¡°íšŒ\r\n   */\r\n  getClientId() {\r\n    let clientId = localStorage.getItem('miki_client_id');\r\n    \r\n    if (!clientId) {\r\n      clientId = 'client_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n      localStorage.setItem('miki_client_id', clientId);\r\n    }\r\n    \r\n    return clientId;\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡\r\n   */\r\n  on(event, callback) {\r\n    if (this.listeners[event]) {\r\n      this.listeners[event].push(callback);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°\r\n   */\r\n  off(event, callback) {\r\n    if (this.listeners[event]) {\r\n      const index = this.listeners[event].indexOf(callback);\r\n      if (index > -1) {\r\n        this.listeners[event].splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë°œìƒ\r\n   */\r\n  emit(event, data) {\r\n    if (this.listeners[event]) {\r\n      this.listeners[event].forEach(callback => {\r\n        try {\r\n          callback(data);\r\n        } catch (error) {\r\n          console.error(`âŒ WebSocket ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜ (${event}):`, error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì—°ê²° ìƒíƒœ ì •ë³´\r\n   */\r\n  getStatus() {\r\n    return {\r\n      isConnected: this.isConnected,\r\n      readyState: this.ws?.readyState,\r\n      reconnectAttempts: this.reconnectAttempts,\r\n      url: this.url\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * WebSocket ì–´ëŒ‘í„° íŒ©í† ë¦¬\r\n */\r\nexport const createWebSocketAdapter = (options = {}) => {\r\n  return new WebSocketAdapter(options);\r\n};\r\n\r\n/**\r\n * ê¸°ë³¸ WebSocket ì–´ëŒ‘í„° ì¸ìŠ¤í„´ìŠ¤\r\n */\r\nexport const defaultWebSocketAdapter = new WebSocketAdapter(); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\DataSyncManager.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":18,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":18,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[440,472],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[575,612],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":28,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":28,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[721,765],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[860,903],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1246,1337],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2048,2085],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":63,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":63,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2093,2113],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":68,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":68,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2176,2208],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":104,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":104,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3220,3266],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":118,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":118,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3641,3678],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":154,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":154,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[4666,4707],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5237,5274],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":180,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":180,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5320,5369],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":201,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":201,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5892,5929],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":203,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":203,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5964,6013],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'titleKey' is assigned a value but never used.","line":227,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":227,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":238,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":238,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6898,6968],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":267,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":267,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7760,7802],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":284,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":284,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8320,8379],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":288,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":288,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8476,8526],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":300,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":300,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[8839,8888],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":322,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":322,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[9404,9453],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":341,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":341,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9893,9945],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":343,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":343,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[9976,10018],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":353,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":353,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10231,10271],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":354,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":354,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10277,10325],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":368,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":368,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10673,10723],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is assigned a value but never used.","line":401,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":401,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":428,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":428,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12647,12698],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":430,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":430,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[12733,12772],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":438,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":438,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12919,12970],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":441,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":441,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12997,13037],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":442,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":442,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13045,13125],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":446,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":446,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[13185,13219],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":457,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":457,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13485,13534],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":464,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":464,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13701,13776],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'titleKey' is assigned a value but never used.","line":493,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":493,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":524,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":524,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15755,15793],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":525,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":525,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15801,15839],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":530,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":530,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[15912,15948],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":543,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":543,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16144,16180],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":584,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":584,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[17547,17583],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":588,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":588,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[17647,17678],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":43,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ì„œë²„ì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê°„ì˜ ë°ì´í„° ë™ê¸°í™”ë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤\r\n * ìˆ˜ì •: ì„œë²„ API êµ¬ì¡°ì— ë§ê²Œ ë™ê¸°í™” ë¡œì§ ê°œì„ \r\n */\r\nclass DataSyncManager {\r\n  constructor() {\r\n    this.serverUrl = 'http://localhost:3003/api/posts';\r\n    this.syncInProgress = false;\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì™„ì „ ë™ê¸°í™”\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\r\n   * @returns {Object} - ë™ê¸°í™” ê²°ê³¼\r\n   */\r\n  async fullSync(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    if (this.syncInProgress) {\r\n      console.log('ë™ê¸°í™”ê°€ ì´ë¯¸ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.');\r\n      return { success: false, message: 'ë™ê¸°í™” ì§„í–‰ ì¤‘' };\r\n    }\r\n\r\n    this.syncInProgress = true;\r\n    console.log('=== ì „ì²´ ë°ì´í„° ë™ê¸°í™” ì‹œì‘ ===');\r\n\r\n    try {\r\n      // 1ë‹¨ê³„: ì„œë²„ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const serverDocs = await this.getServerDocuments();\r\n      console.log(`ì„œë²„ ë¬¸ì„œ: ${serverDocs.length}ê°œ`);\r\n\r\n      // 2ë‹¨ê³„: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const localDocs = this.getLocalDocuments();\r\n      console.log(`ë¡œì»¬ ë¬¸ì„œ: ${localDocs.length}ê°œ`);\r\n\r\n      // 3ë‹¨ê³„: ë³´ì¡´í•  ë¬¸ì„œë§Œ í•„í„°ë§\r\n      const filteredServerDocs = serverDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      const filteredLocalDocs = localDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n\r\n      console.log(`í•„í„°ë§ í›„ - ì„œë²„: ${filteredServerDocs.length}ê°œ, ë¡œì»¬: ${filteredLocalDocs.length}ê°œ`);\r\n\r\n      // 4ë‹¨ê³„: ë¶ˆí•„ìš”í•œ ì„œë²„ ë¬¸ì„œ ì‚­ì œ\r\n      const serverDeleteResults = await this.cleanupServerDocuments(serverDocs, keepTitles);\r\n      \r\n      // 5ë‹¨ê³„: ë¶ˆí•„ìš”í•œ ë¡œì»¬ ë¬¸ì„œ ì‚­ì œ\r\n      const localDeleteResults = this.cleanupLocalDocuments(localDocs, keepTitles);\r\n\r\n      // 6ë‹¨ê³„: ìµœì‹  ë²„ì „ìœ¼ë¡œ í†µí•©\r\n      const mergeResults = await this.mergeDocuments(filteredServerDocs, filteredLocalDocs);\r\n\r\n      const result = {\r\n        success: true,\r\n        serverDeleted: serverDeleteResults.deleted,\r\n        localDeleted: localDeleteResults.deleted,\r\n        merged: mergeResults.merged,\r\n        finalCount: mergeResults.finalDocuments.length,\r\n        message: `ë™ê¸°í™” ì™„ë£Œ: ${mergeResults.finalDocuments.length}ê°œ ë¬¸ì„œ ìœ ì§€`\r\n      };\r\n\r\n      console.log('=== ì „ì²´ ë°ì´í„° ë™ê¸°í™” ì™„ë£Œ ===');\r\n      console.log(result);\r\n      \r\n      return result;\r\n\r\n    } catch (error) {\r\n      console.error('ë™ê¸°í™” ì˜¤ë¥˜:', error);\r\n      return { \r\n        success: false, \r\n        error: error.message,\r\n        message: 'ë™ê¸°í™” ì‹¤íŒ¨' \r\n      };\r\n    } finally {\r\n      this.syncInProgress = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì—ì„œ ëª¨ë“  ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸° (ìˆ˜ì •: title ì¶”ì¶œ ë¡œì§ ê°œì„ )\r\n   */\r\n  async getServerDocuments() {\r\n    try {\r\n      const response = await fetch(this.serverUrl);\r\n      if (!response.ok) {\r\n        throw new Error(`ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.status}`);\r\n      }\r\n      \r\n      const serverPosts = await response.json();\r\n      \r\n      // ê° ë¬¸ì„œì˜ ì „ì²´ ë‚´ìš©ì„ ê°œë³„ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°\r\n      const fullDocuments = [];\r\n      for (const post of serverPosts) {\r\n        try {\r\n          const fullContent = await this.getServerDocument(post.id);\r\n          fullDocuments.push({\r\n            id: post.id,\r\n            title: post.title || post.id,\r\n            content: fullContent.content || '',\r\n            updatedAt: fullContent.updatedAt || post.updatedAt || new Date().toISOString(),\r\n            source: 'server'\r\n          });\r\n        } catch (error) {\r\n          console.warn(`ë¬¸ì„œ ${post.id} ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`, error);\r\n          // ì‹¤íŒ¨í•œ ê²½ìš° ê¸°ë³¸ ì •ë³´ë§Œ ì‚¬ìš©\r\n          fullDocuments.push({\r\n            id: post.id,\r\n            title: post.title || post.id,\r\n            content: post.preview || '',\r\n            updatedAt: post.updatedAt || new Date().toISOString(),\r\n            source: 'server'\r\n          });\r\n        }\r\n      }\r\n      \r\n      return fullDocuments;\r\n    } catch (error) {\r\n      console.error('ì„œë²„ ë¬¸ì„œ ì¡°íšŒ ì˜¤ë¥˜:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì—ì„œ íŠ¹ì • ë¬¸ì„œì˜ ì „ì²´ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  async getServerDocument(id) {\r\n    const response = await fetch(`${this.serverUrl}/${id}`);\r\n    if (!response.ok) {\r\n      throw new Error(`ë¬¸ì„œ ì¡°íšŒ ì‹¤íŒ¨: ${response.status}`);\r\n    }\r\n    return await response.json();\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ëª¨ë“  ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  getLocalDocuments() {\r\n    const documents = [];\r\n    const documentKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n    \r\n    for (const key of documentKeys) {\r\n      try {\r\n        const docData = JSON.parse(localStorage.getItem(key));\r\n        if (docData && docData.title) {\r\n          documents.push({\r\n            id: docData.id || key.replace('miki_document_', ''),\r\n            title: docData.title,\r\n            content: docData.content || '',\r\n            updatedAt: docData.updatedAt || new Date().toISOString(),\r\n            source: 'local'\r\n          });\r\n        }\r\n      } catch (e) {\r\n        console.warn(`ë¡œì»¬ ë¬¸ì„œ íŒŒì‹± ì˜¤ë¥˜ (${key}):`, e);\r\n      }\r\n    }\r\n    \r\n    return documents;\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì—ì„œ ë¶ˆí•„ìš”í•œ ë¬¸ì„œ ì‚­ì œ\r\n   */\r\n  async cleanupServerDocuments(serverDocs, keepTitles) {\r\n    const toDelete = serverDocs.filter(doc => \r\n      !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n    );\r\n\r\n    let deleted = 0;\r\n    for (const doc of toDelete) {\r\n      try {\r\n        const response = await fetch(`${this.serverUrl}/${doc.id}`, {\r\n          method: 'DELETE'\r\n        });\r\n        if (response.ok) {\r\n          deleted++;\r\n          console.log(`ì„œë²„ì—ì„œ ì‚­ì œ: ${doc.title}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(`ì„œë²„ ì‚­ì œ ì‹¤íŒ¨ (${doc.title}):`, error);\r\n      }\r\n    }\r\n\r\n    return { deleted, total: toDelete.length };\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¶ˆí•„ìš”í•œ ë¬¸ì„œ ì‚­ì œ\r\n   */\r\n  cleanupLocalDocuments(localDocs, keepTitles) {\r\n    const toDelete = localDocs.filter(doc => \r\n      !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n    );\r\n\r\n    let deleted = 0;\r\n    for (const doc of toDelete) {\r\n      try {\r\n        localStorage.removeItem(`miki_document_${doc.id}`);\r\n        localStorage.removeItem(`miki_title_${doc.id}`);\r\n        deleted++;\r\n        console.log(`ë¡œì»¬ì—ì„œ ì‚­ì œ: ${doc.title}`);\r\n      } catch (error) {\r\n        console.error(`ë¡œì»¬ ì‚­ì œ ì‹¤íŒ¨ (${doc.title}):`, error);\r\n      }\r\n    }\r\n\r\n    return { deleted, total: toDelete.length };\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì™€ ë¡œì»¬ ë¬¸ì„œë¥¼ ìµœì‹  ë²„ì „ìœ¼ë¡œ í†µí•©\r\n   */\r\n  async mergeDocuments(serverDocs, localDocs) {\r\n    const finalDocuments = [];\r\n    const titleGroups = {};\r\n\r\n    // ì œëª©ë³„ë¡œ ê·¸ë£¹í™”\r\n    [...serverDocs, ...localDocs].forEach(doc => {\r\n      const titleKey = doc.title.toLowerCase();\r\n      if (!titleGroups[titleKey]) {\r\n        titleGroups[titleKey] = [];\r\n      }\r\n      titleGroups[titleKey].push(doc);\r\n    });\r\n\r\n    // ê° ì œëª©ë³„ë¡œ ìµœì‹  ë²„ì „ ì„ íƒ ë° ë™ê¸°í™”\r\n    for (const [titleKey, docs] of Object.entries(titleGroups)) {\r\n      // ìµœì‹  ë¬¸ì„œ ì„ íƒ (updatedAt ê¸°ì¤€)\r\n      const latestDoc = docs.sort((a, b) => \r\n        new Date(b.updatedAt) - new Date(a.updatedAt)\r\n      )[0];\r\n\r\n      // ì„œë²„ì™€ ë¡œì»¬ ëª¨ë‘ì— ìµœì‹  ë²„ì „ ì €ì¥\r\n      await this.saveToServer(latestDoc);\r\n      this.saveToLocal(latestDoc);\r\n\r\n      finalDocuments.push(latestDoc);\r\n      console.log(`í†µí•© ì™„ë£Œ: ${latestDoc.title} (ìµœì‹ : ${latestDoc.updatedAt})`);\r\n    }\r\n\r\n    return { merged: finalDocuments.length, finalDocuments };\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì— ë¬¸ì„œ ì €ì¥ (ìˆ˜ì •: ì„œë²„ API êµ¬ì¡°ì— ë§ê²Œ ê°œì„ )\r\n   */\r\n  async saveToServer(doc) {\r\n    try {\r\n      // ë¨¼ì € í•´ë‹¹ IDì˜ ë¬¸ì„œê°€ ì„œë²„ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\r\n      const existingResponse = await fetch(`${this.serverUrl}/${doc.id}`);\r\n      \r\n      if (existingResponse.ok) {\r\n        // ë¬¸ì„œê°€ ì¡´ì¬í•˜ë©´ PUTìœ¼ë¡œ ì—…ë°ì´íŠ¸\r\n        const updateResponse = await fetch(`${this.serverUrl}/${doc.id}`, {\r\n          method: 'PUT',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            content: doc.content,\r\n            title: doc.title\r\n          })\r\n        });\r\n        \r\n        if (!updateResponse.ok) {\r\n          throw new Error(`ì„œë²„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${updateResponse.status}`);\r\n        }\r\n        \r\n        console.log(`âœ… ì„œë²„ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${doc.title}`);\r\n      } else {\r\n        // ë¬¸ì„œê°€ ì—†ìœ¼ë©´ POSTë¡œ ìƒˆë¡œ ìƒì„±\r\n        const createResponse = await fetch(this.serverUrl, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            title: doc.title,\r\n            content: doc.content\r\n          })\r\n        });\r\n        \r\n        if (!createResponse.ok) {\r\n          throw new Error(`ì„œë²„ ìƒì„± ì‹¤íŒ¨: ${createResponse.status}`);\r\n        }\r\n        \r\n        const result = await createResponse.json();\r\n        console.log(`âœ… ì„œë²„ ìƒì„± ì™„ë£Œ: ${doc.title} (ID: ${result.id})`);\r\n        \r\n        // ìƒˆë¡œ ìƒì„±ëœ IDê°€ ë‹¤ë¥´ë©´ ë¡œì»¬ì—ì„œë„ ì—…ë°ì´íŠ¸\r\n        if (result.id !== doc.id) {\r\n          console.log(`ğŸ”„ ID ë³€ê²½: ${doc.id} â†’ ${result.id}`);\r\n          \r\n          // ê¸°ì¡´ ë¡œì»¬ ë°ì´í„° ì‚­ì œ\r\n          localStorage.removeItem(`miki_document_${doc.id}`);\r\n          localStorage.removeItem(`miki_title_${doc.id}`);\r\n          \r\n          // ìƒˆ IDë¡œ ì €ì¥\r\n          doc.id = result.id;\r\n          this.saveToLocal(doc);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(`ì„œë²„ ì €ì¥ ì˜¤ë¥˜ (${doc.title}):`, error);\r\n      throw error; // ì—ëŸ¬ë¥¼ ìƒìœ„ë¡œ ì „íŒŒ\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë¬¸ì„œ ì €ì¥\r\n   */\r\n  saveToLocal(doc) {\r\n    try {\r\n      const docKey = `miki_document_${doc.id}`;\r\n      const titleKey = `miki_title_${doc.id}`;\r\n      \r\n      localStorage.setItem(docKey, JSON.stringify({\r\n        id: doc.id,\r\n        title: doc.title,\r\n        content: doc.content,\r\n        updatedAt: doc.updatedAt || new Date().toISOString()\r\n      }));\r\n      \r\n      localStorage.setItem(titleKey, doc.title);\r\n    } catch (error) {\r\n      console.error(`ë¡œì»¬ ì €ì¥ ì˜¤ë¥˜ (${doc.title}):`, error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\r\n   */\r\n  updateRecentDocuments(documents) {\r\n    try {\r\n      const recentDocs = documents\r\n        .sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt))\r\n        .slice(0, 20)\r\n        .map(doc => ({\r\n          id: doc.id,\r\n          title: doc.title,\r\n          updatedAt: doc.updatedAt\r\n        }));\r\n\r\n      localStorage.setItem('miki_recent_docs', JSON.stringify(recentDocs));\r\n      console.log(`ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì—…ë°ì´íŠ¸: ${recentDocs.length}ê°œ`);\r\n    } catch (error) {\r\n      console.error('ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì¦‰ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ (UIì—ì„œ í˜¸ì¶œìš©)\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\r\n   * @returns {Object} - ì •ë¦¬ ê²°ê³¼\r\n   */\r\n  immediateLocalCleanup(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    console.log('=== ì¦‰ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì‹œì‘ ===');\r\n    console.log(`ë³´ì¡´í•  ë¬¸ì„œ: ${keepTitles.join(', ')}`);\r\n    \r\n    const stats = {\r\n      totalDocuments: 0,\r\n      preservedDocuments: 0,\r\n      deletedDocuments: 0,\r\n      spaceSaved: 0\r\n    };\r\n    \r\n    try {\r\n      // ëª¨ë“  ë¬¸ì„œ í‚¤ ìˆ˜ì§‘\r\n      const documentKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n      stats.totalDocuments = documentKeys.length;\r\n      \r\n      console.log(`ğŸ“Š ì´ ${documentKeys.length}ê°œ ë¬¸ì„œ ë°œê²¬`);\r\n      \r\n      const toDelete = [];\r\n      const toKeep = [];\r\n      \r\n      // ì œëª©ë³„ ê·¸ë£¹í™” ë° ë¶„ë¥˜\r\n      const titleGroups = {};\r\n      \r\n      for (const key of documentKeys) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          if (!docData || !docData.title) continue;\r\n          \r\n          const title = docData.title.toLowerCase();\r\n          const shouldKeep = keepTitles.some(keepTitle => \r\n            title === keepTitle.toLowerCase()\r\n          );\r\n          \r\n          if (shouldKeep) {\r\n            if (!titleGroups[title]) {\r\n              titleGroups[title] = [];\r\n            }\r\n            titleGroups[title].push({ key, data: docData });\r\n          } else {\r\n            toDelete.push({ key, title: docData.title });\r\n          }\r\n        } catch (e) {\r\n          // íŒŒì‹± ì˜¤ë¥˜ê°€ ìˆëŠ” ë¬¸ì„œëŠ” ì‚­ì œ\r\n          toDelete.push({ key, title: 'íŒŒì‹± ì˜¤ë¥˜' });\r\n        }\r\n      }\r\n      \r\n      // ê° ì œëª©ë³„ë¡œ ìµœì‹  ë²„ì „ë§Œ ë³´ì¡´\r\n      for (const [title, docs] of Object.entries(titleGroups)) {\r\n        if (docs.length > 1) {\r\n          // ìµœì‹  ë¬¸ì„œ ì„ íƒ\r\n          const latest = docs.sort((a, b) => \r\n            new Date(b.data.updatedAt || 0) - new Date(a.data.updatedAt || 0)\r\n          )[0];\r\n          \r\n          // ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œ ëª©ë¡ì— ì¶”ê°€\r\n          docs.forEach(doc => {\r\n            if (doc.key !== latest.key) {\r\n              toDelete.push({ key: doc.key, title: doc.data.title });\r\n            } else {\r\n              toKeep.push({ key: doc.key, title: doc.data.title });\r\n            }\r\n          });\r\n        } else {\r\n          toKeep.push({ key: docs[0].key, title: docs[0].data.title });\r\n        }\r\n      }\r\n      \r\n      // ì‚­ì œ ì‹¤í–‰\r\n      for (const item of toDelete) {\r\n        try {\r\n          const docId = item.key.replace('miki_document_', '');\r\n          localStorage.removeItem(item.key);\r\n          localStorage.removeItem(`miki_title_${docId}`);\r\n          stats.deletedDocuments++;\r\n          console.log(`âŒ ì‚­ì œ: ${item.key} - \"${item.title}\"`);\r\n        } catch (e) {\r\n          console.error(`ì‚­ì œ ì‹¤íŒ¨: ${item.key}`, e);\r\n        }\r\n      }\r\n      \r\n      stats.preservedDocuments = toKeep.length;\r\n      \r\n      // ë³´ì¡´ëœ ë¬¸ì„œ ë¡œê·¸\r\n      toKeep.forEach(item => {\r\n        console.log(`âœ… ë³´ì¡´: ${item.key} - \"${item.title}\"`);\r\n      });\r\n      \r\n      console.log('=== ì¦‰ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì™„ë£Œ ===');\r\n      console.log(`ë³´ì¡´: ${stats.preservedDocuments}ê°œ, ì‚­ì œ: ${stats.deletedDocuments}ê°œ`);\r\n      \r\n      return stats;\r\n    } catch (error) {\r\n      console.error('ì¦‰ì‹œ ì •ë¦¬ ì˜¤ë¥˜:', error);\r\n      return { ...stats, error: error.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì•ˆì „í•œ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ (ì‹¤ì œ ë³€ê²½ ì—†ì´ ì‹œë®¬ë ˆì´ì…˜ë§Œ)\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\r\n   * @returns {Object} - í…ŒìŠ¤íŠ¸ ê²°ê³¼\r\n   */\r\n  async safeTestSync(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    console.log('=== ì•ˆì „í•œ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì‹œì‘ (ì‹¤ì œ ë³€ê²½ ì—†ìŒ) ===');\r\n    \r\n    try {\r\n      // 1ë‹¨ê³„: í˜„ì¬ ìƒíƒœ ë¶„ì„\r\n      const serverDocs = await this.getServerDocuments();\r\n      const localDocs = this.getLocalDocuments();\r\n      \r\n      console.log(`ğŸ“Š í˜„ì¬ ìƒíƒœ: ì„œë²„ ${serverDocs.length}ê°œ, ë¡œì»¬ ${localDocs.length}ê°œ`);\r\n      \r\n      // 2ë‹¨ê³„: í•„í„°ë§ ì‹œë®¬ë ˆì´ì…˜\r\n      const serverFiltered = serverDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      const localFiltered = localDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      \r\n      // 3ë‹¨ê³„: ì‚­ì œ ëŒ€ìƒ ë¶„ì„\r\n      const serverToDelete = serverDocs.filter(doc => \r\n        !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      const localToDelete = localDocs.filter(doc => \r\n        !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      \r\n      // 4ë‹¨ê³„: í†µí•© ì‹œë®¬ë ˆì´ì…˜\r\n      const titleGroups = {};\r\n      [...serverFiltered, ...localFiltered].forEach(doc => {\r\n        const titleKey = doc.title.toLowerCase();\r\n        if (!titleGroups[titleKey]) {\r\n          titleGroups[titleKey] = [];\r\n        }\r\n        titleGroups[titleKey].push(doc);\r\n      });\r\n      \r\n      const mergeResults = [];\r\n      for (const [titleKey, docs] of Object.entries(titleGroups)) {\r\n        const latest = docs.sort((a, b) => \r\n          new Date(b.updatedAt) - new Date(a.updatedAt)\r\n        )[0];\r\n        mergeResults.push({\r\n          title: latest.title,\r\n          selectedSource: latest.source,\r\n          versions: docs.length,\r\n          latestUpdate: latest.updatedAt\r\n        });\r\n      }\r\n      \r\n      const testResult = {\r\n        success: true,\r\n        currentState: {\r\n          server: serverDocs.length,\r\n          local: localDocs.length\r\n        },\r\n        afterFiltering: {\r\n          server: serverFiltered.length,\r\n          local: localFiltered.length\r\n        },\r\n        toDelete: {\r\n          server: serverToDelete.length,\r\n          local: localToDelete.length\r\n        },\r\n        finalMerged: mergeResults.length,\r\n        mergeDetails: mergeResults,\r\n        message: `í…ŒìŠ¤íŠ¸ ì™„ë£Œ: ${mergeResults.length}ê°œ ë¬¸ì„œê°€ ìµœì¢… ë³´ì¡´ë©ë‹ˆë‹¤`\r\n      };\r\n      \r\n      console.log('=== ì•ˆì „í•œ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');\r\n      console.log('ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼:', testResult);\r\n      \r\n      return testResult;\r\n      \r\n    } catch (error) {\r\n      console.error('ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);\r\n      return {\r\n        success: false,\r\n        error: error.message,\r\n        message: 'í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * í˜„ì¬ ë™ê¸°í™” ìƒíƒœ ì§„ë‹¨\r\n   */\r\n  async diagnoseCurrentState() {\r\n    console.log('=== ë™ê¸°í™” ìƒíƒœ ì§„ë‹¨ ì‹œì‘ ===');\r\n    \r\n    try {\r\n      const serverDocs = await this.getServerDocuments();\r\n      const localDocs = this.getLocalDocuments();\r\n      \r\n      // ì œëª©ë³„ ê·¸ë£¹í™”\r\n      const serverTitles = new Set(serverDocs.map(doc => doc.title.toLowerCase()));\r\n      const localTitles = new Set(localDocs.map(doc => doc.title.toLowerCase()));\r\n      \r\n      const onlyServer = serverDocs.filter(doc => \r\n        !localTitles.has(doc.title.toLowerCase())\r\n      );\r\n      const onlyLocal = localDocs.filter(doc => \r\n        !serverTitles.has(doc.title.toLowerCase())\r\n      );\r\n      const both = serverDocs.filter(doc => \r\n        localTitles.has(doc.title.toLowerCase())\r\n      );\r\n      \r\n      const diagnosis = {\r\n        server: {\r\n          total: serverDocs.length,\r\n          titles: Array.from(serverTitles)\r\n        },\r\n        local: {\r\n          total: localDocs.length,\r\n          titles: Array.from(localTitles)\r\n        },\r\n        discrepancies: {\r\n          onlyServer: onlyServer.length,\r\n          onlyLocal: onlyLocal.length,\r\n          both: both.length\r\n        },\r\n        details: {\r\n          onlyServerDocs: onlyServer.map(doc => ({ id: doc.id, title: doc.title })),\r\n          onlyLocalDocs: onlyLocal.map(doc => ({ id: doc.id, title: doc.title })),\r\n          sharedDocs: both.map(doc => ({ id: doc.id, title: doc.title }))\r\n        }\r\n      };\r\n      \r\n      console.log('ğŸ“Š ì§„ë‹¨ ì™„ë£Œ:', diagnosis);\r\n      return diagnosis;\r\n      \r\n    } catch (error) {\r\n      console.error('ì§„ë‹¨ ì˜¤ë¥˜:', error);\r\n      return { error: error.message };\r\n    }\r\n  }\r\n}\r\n\r\nexport default DataSyncManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\DocumentSearchManager.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'API_TYPE' is assigned a value but never used.","line":7,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'API_KEY' is assigned a value but never used.","line":8,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'SERVER_URL' is assigned a value but never used.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'CLAUDE_API_URL' is assigned a value but never used.","line":11,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":35,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":35,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[929,970],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1033,1093],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":58,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":58,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1782,1832],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":64,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":64,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2072,2113],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":67,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":67,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2167,2208],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2358,2425],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":78,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":78,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2638,2683],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":83,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":83,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2824,2864],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":86,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":86,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2888,2929],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":88,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":88,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2958,2997],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3129,3161],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":137,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":137,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4333,4398],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":157,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":157,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5149,5222],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":160,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":160,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5297,5348],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":174,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":174,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5835,5899],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5951,5999],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":187,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":187,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6274,6321],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":212,"column":19,"nodeType":"MemberExpression","messageId":"unexpected","endLine":212,"endColumn":30,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7208,7268],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":229,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":229,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[7663,7698],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":233,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":233,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7737,7798],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":237,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":237,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7877,7914],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":248,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":248,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8053,8085],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":255,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":255,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8254,8293],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":285,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":285,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9222,9277],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":288,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":288,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[9333,9370],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":301,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":301,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9605,9638],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":307,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":307,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9793,9832],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":313,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":313,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10014,10063],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":326,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":326,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10528,10591],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":334,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":334,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10844,10927],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":335,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":335,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10936,10969],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":336,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":336,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10978,11024],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":337,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":337,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11033,11121],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":342,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":342,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11197,11271],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":345,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":345,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11325,11378],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":368,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":368,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12258,12298],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":379,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":379,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[12591,12626],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":400,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":400,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13072,13107],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":405,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":405,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13205,13260],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":408,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":408,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13315,13345],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":418,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":418,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13622,13657],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":433,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":433,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14189,14252],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":439,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":439,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14391,14481],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":440,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":440,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14492,14538],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":448,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":448,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14743,14790],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":454,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":454,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14964,15010],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":462,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":462,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15226,15267],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":468,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":468,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15441,15482],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":480,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":480,"endColumn":28,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15957,16082],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":483,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":483,"endColumn":27,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[16148,16194],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":492,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":492,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16415,16476],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":497,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":497,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16590,16651],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":500,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":500,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16745,16806],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":503,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":503,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16840,16894],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":507,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":507,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[16993,17048],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":518,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":518,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[17307,17357],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":531,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":531,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[17747,17797],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":543,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":543,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[18192,18234],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":553,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":553,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[18524,18561],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":614,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":614,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[20249,20284],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":620,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":620,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[20424,20476],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":694,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":694,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[22322,22361],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":708,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":708,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[22784,22824],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":741,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":741,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[23816,23859],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":744,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":744,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[23916,23950],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":746,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":746,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[23989,24026],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":757,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":757,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24249,24284],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":763,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":763,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24431,24464],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":769,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":769,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24636,24664],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":773,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":773,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24776,24822],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":780,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":780,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24959,24984],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":785,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":785,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25209,25261],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":790,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":790,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25371,25400],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":795,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":795,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25622,25677],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":801,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":801,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25822,25866],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":805,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":805,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25919,25965],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":808,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":808,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[26024,26061],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":839,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":839,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[26830,26900],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":840,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":840,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[26905,26953],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":856,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":856,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[27336,27393],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":897,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":897,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[28718,28755],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":899,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":899,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[28783,28820],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":933,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":933,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[29817,29856],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":951,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":951,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[30417,30486],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":961,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":961,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[30830,30899],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":972,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":972,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[31219,31283],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":981,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":981,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[31461,31513],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":998,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":998,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[32039,32077],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1000,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1000,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[32118,32165],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1005,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1005,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[32277,32339],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1020,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1020,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[32898,32955],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1022,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1022,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[32992,33033],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1027,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1027,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33085,33123],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1028,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1028,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33130,33176],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1029,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1029,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33183,33235],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1030,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1030,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33242,33292],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1031,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1031,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33299,33364],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1034,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1034,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33413,33441],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1035,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1035,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33450,33492],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1036,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1036,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33501,33549],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1040,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1040,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33610,33658],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1041,"column":39,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1041,"endColumn":50},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1045,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1045,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[33770,33812],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":107,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// DocumentSearchManager.js\n// AI íŒ¨ë„ê³¼ ë§í¬ ìƒì„± ì‚¬ì´ì— ê³µìœ ë˜ëŠ” ë¬¸ì„œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤\n\nimport DocumentSummaryManager from './DocumentSummaryManager.js';\n\n// í™˜ê²½ ë³€ìˆ˜ ì²˜ë¦¬ - Jest í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ ì‚¬ìš©\nconst API_TYPE = 'claude';\nconst API_KEY = '';\nconst SERVER_URL = 'http://localhost:3001';\n\nconst CLAUDE_API_URL = 'https://api.anthropic.com/v1/messages';\nconst CLAUDE_MODEL = 'claude-3-5-haiku-20241022';\n\n/**\n * ë¬¸ì„œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤\n * í‚¤ì›Œë“œ ê²€ìƒ‰ê³¼ ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ì„ ê²°í•©í•˜ì—¬ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì œê³µ\n */\nclass DocumentSearchManager {\n  constructor() {\n    this.summaryManager = new DocumentSummaryManager();\n    this.documentCache = new Map(); // ë¬¸ì„œ IDë¥¼ í‚¤ë¡œ, ë¬¸ì„œ ë‚´ìš© ë° ë©”íƒ€ë°ì´í„°ë¥¼ ê°’ìœ¼ë¡œ ì €ì¥\n    this.documentEmbeddings = new Map(); // ë¬¸ì„œ IDë¥¼ í‚¤ë¡œ, ë¬¸ì„œ ì„ë² ë”©ì„ ê°’ìœ¼ë¡œ ì €ì¥\n    this.maxResults = 10; // ê²€ìƒ‰ ê²°ê³¼ ìµœëŒ€ ê°œìˆ˜\n    this.useAiSearch = true; // AI ê²€ìƒ‰ ì‚¬ìš© ì—¬ë¶€\n    \n    // ì´ˆê¸°í™” ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì§„ë‹¨ ì‹¤í–‰\n    this.analyzeLocalStorage();\n  }\n\n  /**\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì „ì²´ ë¶„ì„ - ë””ë²„ê¹…ìš©\n   */\n  analyzeLocalStorage() {\n    try {\n      console.log(\"===== ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„ ì‹œì‘ =====\");\n      const allKeys = Object.keys(localStorage);\n      \n      console.log(`ì´ ${allKeys.length}ê°œ í•­ëª©ì´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`);\n      \n      // í‚¤ íŒ¨í„´ë³„ ë¶„ë¥˜\n      const patterns = {\n        document: allKeys.filter(key => key.includes('document')),\n        title: allKeys.filter(key => key.includes('title')),\n        content: allKeys.filter(key => key.includes('content')),\n        ai: allKeys.filter(key => key.includes('ai')),\n        temp: allKeys.filter(key => key.includes('temp')),\n        other: allKeys.filter(key => \n          !key.includes('document') && \n          !key.includes('title') && \n          !key.includes('content') && \n          !key.includes('ai') &&\n          !key.includes('temp')\n        )\n      };\n      \n      // íŒ¨í„´ë³„ ì¶œë ¥\n      Object.entries(patterns).forEach(([pattern, keys]) => {\n        console.log(`\\n[${pattern}] íŒ¨í„´: ${keys.length}ê°œ`);\n        keys.slice(0, 5).forEach(key => {\n          const value = localStorage.getItem(key);\n          const valuePreview = value ? \n            (value.length > 50 ? value.substring(0, 50) + '...' : value) : \n            '(ì—†ìŒ)';\n          console.log(`- ${key}: ${valuePreview}`);\n        });\n        if (keys.length > 5) {\n          console.log(`... ì™¸ ${keys.length - 5}ê°œ`);\n        }\n      });\n      \n      // miki_document íŒ¨í„´ ìƒì„¸ ë¶„ì„\n      const documentKeys = allKeys.filter(key => key.startsWith('miki_document_'));\n      console.log(`\\në¬¸ì„œ ë‚´ìš© í‚¤(miki_document_*): ${documentKeys.length}ê°œ`);\n      documentKeys.forEach(key => {\n        const docId = key.replace('miki_document_', '');\n        const content = localStorage.getItem(key);\n        const contentLength = content ? content.length : 0;\n        console.log(`- ${docId}: ${contentLength}ì`);\n        \n        // ê´€ë ¨ íƒ€ì´í‹€ í™•ì¸\n        const titleKey = `miki_title_${docId}`;\n        const title = localStorage.getItem(titleKey);\n        console.log(`  ì œëª©: ${title || '(ì—†ìŒ)'}`);\n      });\n      \n      console.log(\"===== ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„ ì™„ë£Œ =====\");\n    } catch (error) {\n      console.error(\"ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„ ì˜¤ë¥˜:\", error);\n    }\n  }\n\n  /**\n   * ëª¨ë“  ê°€ëŠ¥í•œ ë¬¸ì„œ í‚¤ íŒ¨í„´ ìŠ¤ìº” ë° ìˆ˜ì§‘\n   * @returns {Object} - í‚¤ íŒ¨í„´ë³„ ë¬¸ì„œ ì •ë³´\n   */\n  scanDocumentPatterns() {\n    try {\n      console.log(\"ë¬¸ì„œ ì €ì¥ íŒ¨í„´ ìŠ¤ìº” ì¤‘...\");\n      const allStorageKeys = Object.keys(localStorage);\n      \n      // í‚¤ íŒ¨í„´ ì •ì˜\n      const patterns = {\n        // í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ì„ì‹œ ë¬¸ì„œ\n        temp: {\n          title: 'miki_editor_title_temp',\n          content: 'miki_editor_content_temp',\n          savedAt: 'miki_editor_saved_at'\n        },\n        // ì €ì¥ëœ ë¬¸ì„œ íŒ¨í„´ë“¤\n        document: {\n          prefix: 'miki_document_',\n          titlePrefix: 'miki_title_'\n        },\n        // ê¸°íƒ€ íŒ¨í„´\n        recentDocs: 'miki_recent_docs',\n        conversations: 'miki_ai_conversations_'\n      };\n      \n      // íŒ¨í„´ë³„ ë¬¸ì„œ ìˆ˜ì§‘\n      const collectedDocs = {};\n      \n      // 1. í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ì„ì‹œ ë¬¸ì„œ\n      const tempTitle = localStorage.getItem(patterns.temp.title);\n      const tempContent = localStorage.getItem(patterns.temp.content);\n      const tempSavedAt = localStorage.getItem(patterns.temp.savedAt);\n      \n      if (tempTitle && tempContent) {\n        const tempDoc = {\n          id: this.slugify(tempTitle),\n          title: tempTitle,\n          content: tempContent,\n          savedAt: tempSavedAt,\n          path: `/doc/${this.slugify(tempTitle)}`,\n          isTemp: true\n        };\n        collectedDocs[tempDoc.id] = tempDoc;\n        console.log(`ì„ì‹œ ë¬¸ì„œ ë°œê²¬: \"${tempTitle}\" (${tempContent.length}ì)`);\n      }\n      \n      // 2. ì €ì¥ëœ ë¬¸ì„œ (miki_document_* íŒ¨í„´)\n      const documentKeys = allStorageKeys.filter(key => key.startsWith(patterns.document.prefix));\n      for (const key of documentKeys) {\n        try {\n          const docId = key.replace(patterns.document.prefix, '');\n          const titleKey = `${patterns.document.titlePrefix}${docId}`;\n          const rawDocContent = localStorage.getItem(key);\n          \n          // JSON í˜•ì‹ìœ¼ë¡œ ì €ì¥ëœ ë¬¸ì„œ íŒŒì‹± ì‹œë„\n          let docContent, docTitle;\n          \n          try {\n            // JSON íŒŒì‹± ì‹œë„\n            const docJson = JSON.parse(rawDocContent);\n            docTitle = docJson.title || localStorage.getItem(titleKey) || docId;\n            docContent = docJson.content || '';\n            \n            console.log(`JSON íŒŒì‹± ì„±ê³µ: ë¬¸ì„œ \"${docTitle}\" ë‚´ìš© ê¸¸ì´: ${docContent.length}ì`);\n          } catch (e) {\n            // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©\n            console.log(`JSON íŒŒì‹± ì‹¤íŒ¨, ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©: ${e.message}`);\n            docTitle = localStorage.getItem(titleKey) || docId.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n            docContent = rawDocContent;\n          }\n          \n          if (docId && docContent) {\n            const docObject = {\n              id: docId,\n              title: docTitle,\n              content: docContent,\n              path: `/doc/${docId}`,\n              isDocument: true\n            };\n            collectedDocs[docId] = docObject;\n            console.log(`ì €ì¥ëœ ë¬¸ì„œ ë°œê²¬: \"${docTitle}\" (${docContent.length}ì)`);\n          }\n        } catch (docError) {\n          console.error(`ë¬¸ì„œ í‚¤ ${key} ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:`, docError);\n        }\n      }\n      \n      // 3. ìµœê·¼ ë¬¸ì„œ ëª©ë¡\n      try {\n        const recentDocsJson = localStorage.getItem(patterns.recentDocs);\n        if (recentDocsJson) {\n          const recentDocs = JSON.parse(recentDocsJson);\n          if (Array.isArray(recentDocs)) {\n            console.log(`ìµœê·¼ ë¬¸ì„œ ëª©ë¡: ${recentDocs.length}ê°œ`);\n            \n            for (const doc of recentDocs) {\n              if (!doc.id && !doc.title) continue;\n              \n              const docId = doc.id || this.slugify(doc.title);\n              \n              // ì´ë¯¸ ìˆ˜ì§‘ëœ ë¬¸ì„œì¸ì§€ í™•ì¸\n              if (collectedDocs[docId]) {\n                // ì´ë¯¸ ìˆëŠ” ë¬¸ì„œë¼ë©´ ìµœê·¼ ë¬¸ì„œ í”Œë˜ê·¸ ì¶”ê°€\n                collectedDocs[docId].isRecent = true;\n                continue;\n              }\n              \n              // ë¬¸ì„œ ë‚´ìš© ê²€ìƒ‰ì„ ìœ„í•œ ì—¬ëŸ¬ í‚¤ íŒ¨í„´ ì‹œë„\n              const contentPatterns = [\n                `${patterns.document.prefix}${docId}`,\n                `miki_content_${docId}`,\n                `miki_doc_content_${docId}`\n              ];\n              \n              let docContent = null;\n              for (const pattern of contentPatterns) {\n                docContent = localStorage.getItem(pattern);\n                if (docContent) {\n                  console.log(`\"${doc.title}\" ë¬¸ì„œì˜ ë‚´ìš©ì„ ${pattern} í‚¤ì—ì„œ ì°¾ì•˜ìŠµë‹ˆë‹¤.`);\n                  break;\n                }\n              }\n              \n              // ìµœê·¼ ë¬¸ì„œ ì¶”ê°€\n              collectedDocs[docId] = {\n                id: docId,\n                title: doc.title,\n                content: docContent || '',\n                path: `/doc/${docId}`,\n                isRecent: true\n              };\n            }\n          }\n        }\n      } catch (e) {\n        console.warn(\"ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì²˜ë¦¬ ì˜¤ë¥˜:\", e);\n      }\n      \n      // ë¬¸ì„œ ìˆ˜ ì¶œë ¥\n      console.log(`ì´ ${Object.keys(collectedDocs).length}ê°œ ë¬¸ì„œ ë°œê²¬`);\n      \n      return Object.values(collectedDocs);\n    } catch (error) {\n      console.error(\"ë¬¸ì„œ íŒ¨í„´ ìŠ¤ìº” ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ëª¨ë“  ë¬¸ì„œ ì •ë³´ ë¡œë“œ\n   * @returns {Array} - ë¬¸ì„œ ê°ì²´ ë°°ì—´\n   */\n  getAllDocuments() {\n    try {\n      console.log(\"ëª¨ë“  ë¬¸ì„œ ì •ë³´ ë¡œë“œ ì¤‘...\");\n      \n      // ê°œì„ ëœ ë¬¸ì„œ íŒ¨í„´ ìŠ¤ìº” ì‚¬ìš©\n      const allDocuments = this.scanDocumentPatterns();\n      \n      // ë¬¸ì„œê°€ ì—†ìœ¼ë©´ ìƒ˜í”Œ ë¬¸ì„œ ì¶”ê°€\n      if (allDocuments.length === 0) {\n        console.log(\"ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤. ìƒ˜í”Œ ë¬¸ì„œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\");\n        \n        // ìƒ˜í”Œ ë¬¸ì„œ ì¶”ê°€\n        const sampleDocs = [\n          {\n            id: 'welcome',\n            title: 'Miki ì‚¬ìš©ë²•',\n            content: '# Miki ì‚¬ìš©ë²•\\n\\nMikiëŠ” ë§ˆí¬ë‹¤ìš´ ê¸°ë°˜ ìœ„í‚¤ ì—ë””í„°ì…ë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\n\\n## ì£¼ìš” ê¸°ëŠ¥\\n\\n- ë§ˆí¬ë‹¤ìš´ í¸ì§‘\\n- AI ì—°ë™\\n- ë¬¸ì„œ ê²€ìƒ‰\\n- ë‚´ìš© ê¸°ë°˜ ë§í¬',\n            path: '/doc/welcome',\n            isCommon: true\n          },\n          {\n            id: 'markdown-guide',\n            title: 'ë§ˆí¬ë‹¤ìš´ ê°€ì´ë“œ',\n            content: '# ë§ˆí¬ë‹¤ìš´ ê°€ì´ë“œ\\n\\në§ˆí¬ë‹¤ìš´ì€ í…ìŠ¤íŠ¸ ê¸°ë°˜ì˜ ë§ˆí¬ì—… ì–¸ì–´ë¡œ, ì‰½ê²Œ ì½ê³  ì“¸ ìˆ˜ ìˆìœ¼ë©° HTMLë¡œ ë³€í™˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\\n\\n## ë¬¸ë²•\\n\\n### ì œëª©\\n# ì œëª© 1\\n## ì œëª© 2\\n\\n### ê°•ì¡°\\n**êµµê²Œ** ë˜ëŠ” *ê¸°ìš¸ì„*\\n\\n### ë§í¬\\n[ë§í¬ í…ìŠ¤íŠ¸](URL)',\n            path: '/doc/markdown-guide',\n            isCommon: true\n          }\n        ];\n        \n        sampleDocs.forEach(doc => {\n          allDocuments.push(doc);\n        });\n      }\n      \n      // ë¬¸ì„œ ìºì‹œ ì—…ë°ì´íŠ¸\n      allDocuments.forEach(doc => {\n        this.documentCache.set(doc.id, doc);\n      });\n      \n      console.log(\"ê²€ìƒ‰ ê°€ëŠ¥í•œ ëª¨ë“  ë¬¸ì„œ:\", allDocuments.length, \"ê±´\");\n      return allDocuments;\n    } catch (error) {\n      console.error(\"ë¬¸ì„œ ì •ë³´ ë¡œë“œ ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * í‚¤ì›Œë“œ ê¸°ë°˜ ë¡œì»¬ ë¬¸ì„œ ê²€ìƒ‰\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchByKeyword(query) {\n    if (!query || query.trim().length === 0) return [];\n    \n    console.log(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ì‹œì‘:\", query);\n    const searchQuery = query.toLowerCase().trim();\n    \n    try {\n      // URL í˜•ì‹ì´ë©´ ê²€ìƒ‰í•˜ì§€ ì•Šê³  ë°”ë¡œ ë°˜í™˜\n      if (/^https?:\\/\\//i.test(searchQuery)) {\n        console.log(\"URL í˜•ì‹ ê°ì§€:\", searchQuery);\n        return [{ id: 'url', title: `URL: ${searchQuery}`, path: searchQuery, isUrl: true }];\n      }\n      \n      // ë¬¸ì„œ ë¡œë“œ\n      const allDocuments = this.getAllDocuments();\n      console.log(`ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œ: ${allDocuments.length}ê°œ`);\n      \n      // ê²€ìƒ‰ì–´ë¡œ í•„í„°ë§ (ê°œì„ ëœ ë¡œê·¸ ì¶”ê°€)\n      const searchResults = allDocuments.filter(doc => {\n        const docTitle = (doc.title || '').toLowerCase();\n        \n        // ë‚´ìš© í™•ì¸ - content ì†ì„±ì´ ìˆëŠ”ì§€ í™•ì¸\n        let docContent = '';\n        if (doc.content) {\n          if (typeof doc.content === 'string') {\n            docContent = doc.content.toLowerCase();\n          } else if (typeof doc.content === 'object') {\n            // contentê°€ ê°ì²´ì¸ ê²½ìš° (ë‚´ìš© ë””ë²„ê¹…)\n            console.log(`ë¬¸ì„œ \"${doc.title}\"ì˜ contentê°€ ê°ì²´ì…ë‹ˆë‹¤:`, doc.content);\n            docContent = JSON.stringify(doc.content).toLowerCase();\n          }\n        }\n        \n        const titleMatch = docTitle.includes(searchQuery);\n        const contentMatch = docContent && docContent.includes(searchQuery);\n        \n        console.log(`ë¬¸ì„œ \"${doc.title}\" ê²€ìƒ‰ ê²°ê³¼: ì œëª© ì¼ì¹˜=${titleMatch}, ë‚´ìš© ì¼ì¹˜=${contentMatch}`);\n        console.log(`- ì œëª©: ${docTitle}`);\n        console.log(`- ë‚´ìš© íƒ€ì…: ${typeof doc.content}`);\n        console.log(`- ë‚´ìš© ì¼ë¶€: ${docContent ? docContent.substring(0, 50) + '...' : '(ë‚´ìš© ì—†ìŒ)'}`);\n        \n        return titleMatch || contentMatch;\n      });\n      \n      console.log(`í‚¤ì›Œë“œ \"${searchQuery}\" ê²€ìƒ‰ ê²°ê³¼: ${searchResults.length}ê°œ ë¬¸ì„œ ì¼ì¹˜`);\n      \n      if (searchResults.length > 0) {\n        console.log(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼:\", searchResults.length, \"ê±´\");\n        \n        // í˜„ì¬ ë¬¸ì„œ > ì œëª© ì¼ì¹˜ > ë‚´ìš© ì¼ì¹˜ ìˆœìœ¼ë¡œ ì •ë ¬\n        return searchResults.sort((a, b) => {\n          if (a.isCurrent && !b.isCurrent) return -1;\n          if (!a.isCurrent && b.isCurrent) return 1;\n          \n          const aTitleMatch = a.title.toLowerCase().includes(searchQuery);\n          const bTitleMatch = b.title.toLowerCase().includes(searchQuery);\n          \n          if (aTitleMatch && !bTitleMatch) return -1;\n          if (!aTitleMatch && bTitleMatch) return 1;\n          \n          return a.title.localeCompare(b.title);\n        }).slice(0, this.maxResults).map(doc => ({\n          id: doc.id,\n          title: doc.title + (doc.isCurrent ? ' (í˜„ì¬ ë¬¸ì„œ)' : doc.isRecent ? ' (ìµœê·¼ ë¬¸ì„œ)' : ''),\n          path: doc.path,\n          preview: doc.content ? doc.content.substring(0, 100) + '...' : null\n        }));\n      }\n      \n      // ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ìƒˆ ë¬¸ì„œ ë§Œë“¤ê¸° ì˜µì…˜ ì œê³µ\n      console.log(\"ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ, ìƒˆ ë¬¸ì„œ ë§Œë“¤ê¸° ì˜µì…˜ ì œê³µ\");\n      return [\n        { \n          id: 'new_' + searchQuery, \n          title: `\"${searchQuery}\" ìƒˆ ë¬¸ì„œ ìƒì„±`, \n          path: `/doc/${this.slugify(searchQuery)}`,\n          preview: `\"${searchQuery}\" ë¬¸ì„œë¥¼ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.`, \n          isCreateNew: true \n        }\n      ];\n    } catch (error) {\n      console.error(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [\n        { \n          id: 'error', \n          title: 'ì˜¤ë¥˜ ë°œìƒ - URL ì§ì ‘ ì…ë ¥', \n          path: '#',\n          preview: 'URLì„ ì§ì ‘ ì…ë ¥í•˜ì—¬ ì™¸ë¶€ ë§í¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', \n          isError: true \n        }\n      ];\n    }\n  }\n\n  /**\n   * ì˜ë¯¸ ê¸°ë°˜ ë¬¸ì„œ ê²€ìƒ‰ - í† í° ìµœì í™”ëœ ê²€ìƒ‰ êµ¬í˜„\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchBySemantic(query) {\n    if (!query || query.trim().length === 0) return [];\n    \n    console.log(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ì‹œì‘:\", query);\n    \n    try {\n      // 1ë‹¨ê³„: ë¡œì»¬ ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°\n      const allDocuments = this.getAllDocuments();\n      console.log(`ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œ: ${allDocuments.length}ê°œ`);\n      \n      if (allDocuments.length === 0) {\n        console.log(\"ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤\");\n        return [];\n      }\n      \n      // 2ë‹¨ê³„: í† í° ìµœì í™”ë¥¼ ìœ„í•œ ë¡œì»¬ í•„í„°ë§\n      // ì¿¼ë¦¬ë¥¼ ì˜ë¯¸ ìˆëŠ” í‚¤ì›Œë“œë¡œ ë¶„ë¦¬\n      const queryText = query.toLowerCase().trim();\n      // ë‹¨ì–´ ìµœì†Œ ê¸¸ì´ë¥¼ 0ìœ¼ë¡œ ë‚®ì¶¤ (ëª¨ë“  ë‹¨ì–´ í—ˆìš©)\n      const queryWords = queryText.split(/\\s+/).filter(word => word.length > 0);\n      \n      console.log(\"ê²€ìƒ‰ í‚¤ì›Œë“œ:\", queryWords);\n      \n      // ê° ë¬¸ì„œë³„ ê´€ë ¨ë„ ì ìˆ˜ ê³„ì‚° (ê°„ë‹¨í•œ TF-IDF ìœ ì‚¬)\n      const scoredDocuments = allDocuments.map(doc => {\n        try {\n          // ë¬¸ì„œ í…ìŠ¤íŠ¸ ì¤€ë¹„\n          const docTitle = (doc.title || '').toLowerCase();\n          \n          // ë‚´ìš© í™•ì¸ - content ì†ì„±ì´ ìˆëŠ”ì§€ í™•ì¸\n          let docContent = '';\n          if (doc.content) {\n            if (typeof doc.content === 'string') {\n              docContent = doc.content.toLowerCase();\n            } else if (typeof doc.content === 'object') {\n              // contentê°€ ê°ì²´ì¸ ê²½ìš° (ë‚´ìš© ë””ë²„ê¹…)\n              console.log(`ë¬¸ì„œ \"${doc.title}\"ì˜ contentê°€ ê°ì²´ì…ë‹ˆë‹¤:`, doc.content);\n              docContent = JSON.stringify(doc.content).toLowerCase();\n            }\n          }\n          \n          // ë””ë²„ê¹…ìš© ë¡œê·¸\n          console.log(`ë¬¸ì„œ \"${doc.title}\" ë‚´ìš© ê²€ìƒ‰ ì‹œì‘ (ë‚´ìš© ê¸¸ì´: ${docContent ? docContent.length : 0}ì)`);\n          console.log(`- ë‚´ìš© íƒ€ì…: ${typeof doc.content}`);\n          \n          // ê¸°ë³¸ ì ìˆ˜ ê³„ì‚°\n          let score = 0;\n          \n          // ì œëª©ì— ì¿¼ë¦¬ ì „ì²´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ë†’ì€ ì ìˆ˜\n          if (docTitle.includes(queryText)) {\n            score += 15;  // ì ìˆ˜ ìƒí–¥ ì¡°ì •\n            console.log(`- ì œëª© ì „ì²´ ì¼ì¹˜ (${queryText}): +15ì `);\n          }\n          \n          // ë‚´ìš©ì— ì¿¼ë¦¬ ì „ì²´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì ìˆ˜ ì¶”ê°€\n          if (docContent && docContent.includes(queryText)) {\n            score += 8;  // ì ìˆ˜ ìƒí–¥ ì¡°ì •\n            console.log(`- ë‚´ìš© ì „ì²´ ì¼ì¹˜ (${queryText}): +8ì `);\n          }\n          \n          // ê° ì¿¼ë¦¬ ë‹¨ì–´ë³„ ì ìˆ˜ ê³„ì‚°\n          for (const word of queryWords) {\n            // ì œëª©ì— ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì ìˆ˜ ì¶”ê°€\n            if (docTitle.includes(word)) {\n              score += 3;\n              console.log(`- ì œëª© ë‹¨ì–´ ì¼ì¹˜ (${word}): +3ì `);\n            }\n            \n            // ë‚´ìš©ì— ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì ìˆ˜ ì¶”ê°€ (ê°€ì¤‘ì¹˜ ì¦ê°€)\n            if (docContent && docContent.includes(word)) {\n              score += 2;\n              console.log(`- ë‚´ìš© ë‹¨ì–´ ì¼ì¹˜ (${word}): +2ì `);\n            }\n            \n            // ë‹¨ì–´ ë°œìƒ ë¹ˆë„ì— ë”°ë¼ ì¶”ê°€ ì ìˆ˜\n            try {\n              const titleMatches = (docTitle.match(new RegExp(word, 'gi')) || []).length;\n              const contentMatches = docContent ? (docContent.match(new RegExp(word, 'gi')) || []).length : 0;\n              \n              score += titleMatches * 0.5;\n              score += contentMatches * 0.3;\n              \n              if (titleMatches > 0 || contentMatches > 0) {\n                console.log(`- ë‹¨ì–´ ë¹ˆë„ (${word}): ì œëª©=${titleMatches}íšŒ, ë‚´ìš©=${contentMatches}íšŒ, +${titleMatches * 0.5 + contentMatches * 0.3}ì `);\n              }\n            } catch (regexError) {\n              console.warn(`ì •ê·œì‹ ì˜¤ë¥˜ (${word}):`, regexError);\n            }\n          }\n          \n          // ë¬¸ì„œ ì¶”ê°€ ê°€ì¤‘ì¹˜\n          let finalScore = score;\n          \n          if (doc.content && doc.content.length > 0) {\n            finalScore *= 1.2;  // ë‚´ìš©ì´ ìˆëŠ” ë¬¸ì„œ ìš°ëŒ€\n            console.log(`- ë‚´ìš© ì¡´ì¬ ê°€ì¤‘ì¹˜: x1.2 (${score} -> ${finalScore})`);\n          }\n          \n          if (doc.isTemp) {\n            finalScore *= 1.5;  // í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ë¬¸ì„œ ìš°ëŒ€\n            console.log(`- í˜„ì¬ ë¬¸ì„œ ê°€ì¤‘ì¹˜: x1.5 (${score} -> ${finalScore})`);\n          } else if (doc.isRecent) {\n            finalScore *= 1.3;  // ìµœê·¼ ë¬¸ì„œ ìš°ëŒ€\n            console.log(`- ìµœê·¼ ë¬¸ì„œ ê°€ì¤‘ì¹˜: x1.3 (${score} -> ${finalScore})`);\n          }\n          \n          console.log(`ë¬¸ì„œ \"${doc.title}\" ìµœì¢… ì ìˆ˜: ${finalScore}`);\n          \n          return { ...doc, score: finalScore };\n        } catch (docError) {\n          console.error(`ë¬¸ì„œ \"${doc.title}\" ì ìˆ˜ ê³„ì‚° ì˜¤ë¥˜:`, docError);\n          return { ...doc, score: 0 };\n        }\n      });\n      \n      // ë””ë²„ê¹…ìš©: ê° ë¬¸ì„œì˜ ì ìˆ˜ í™•ì¸ (ìƒìœ„ 5ê°œë§Œ)\n      const top5Docs = [...scoredDocuments]\n        .sort((a, b) => b.score - a.score)\n        .slice(0, 5);\n      \n      top5Docs.forEach(doc => {\n        console.log(`ë¬¸ì„œ \"${doc.title}\" ì ìˆ˜: ${doc.score}`);\n      });\n      \n      // ì ìˆ˜ ê¸°ì¤€ ì •ë ¬ ë° í•„í„°ë§\n      const sortedDocuments = scoredDocuments\n        .filter(doc => doc.score > 0.5)  // ë‚®ì€ ì ìˆ˜ ë¬¸ì„œ ì œì™¸ (ì„ê³„ê°’ ë‚®ì¶¤)\n        .sort((a, b) => b.score - a.score);  // ì ìˆ˜ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬\n      \n      // 3ë‹¨ê³„: ìµœì¢… ê²°ê³¼ êµ¬ì„±\n      // ìƒìœ„ ê²°ê³¼ë§Œ ë°˜í™˜ (í† í° ìµœì í™”)\n      const topResults = sortedDocuments.slice(0, this.maxResults);\n      \n      if (topResults.length > 0) {\n        console.log(`ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼: ${topResults.length}ê±´`);\n        return topResults.map(doc => ({\n          id: doc.id,\n          title: doc.title + (doc.isTemp ? ' (í˜„ì¬ ë¬¸ì„œ)' : doc.isRecent ? ' (ìµœê·¼ ë¬¸ì„œ)' : ''),\n          path: doc.path || `/doc/${doc.id}`,\n          preview: this.generatePreview(doc.content, queryText),\n          score: doc.score,\n          isSemanticMatch: true\n        }));\n      }\n      \n      // 4ë‹¨ê³„: ê²°ê³¼ê°€ ì—†ëŠ” ê²½ìš° ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ ì œê³µ\n      console.log(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ, ìƒˆ ë¬¸ì„œ ì˜µì…˜ ì œê³µ\");\n      return [{ \n        id: 'new_' + queryText, \n        title: `\"${queryText}\" ìƒˆ ë¬¸ì„œ ìƒì„±`, \n        path: `/doc/${this.slugify(queryText)}`,\n        preview: `\"${queryText}\"ì— ê´€í•œ ìƒˆ ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.`, \n        isCreateNew: true,\n        isSemanticMatch: true\n      }];\n    } catch (error) {\n      console.error(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }\n  \n  /**\n   * ê²€ìƒ‰ì–´ ì£¼ë³€ ë¬¸ë§¥ì„ ì¶”ì¶œí•˜ì—¬ ë¯¸ë¦¬ë³´ê¸° ìƒì„±\n   * @param {string|object} content - ë¬¸ì„œ ë‚´ìš© (ë¬¸ìì—´ ë˜ëŠ” ê°ì²´)\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {string} - ë¯¸ë¦¬ë³´ê¸° í…ìŠ¤íŠ¸\n   */\n  generatePreview(content, query) {\n    if (!content || !query) return '';\n    \n    // contentê°€ ê°ì²´ì¸ ê²½ìš° ë¬¸ìì—´ë¡œ ë³€í™˜\n    let contentStr = '';\n    if (typeof content === 'string') {\n      contentStr = content;\n    } else if (typeof content === 'object') {\n      // contentê°€ ê°ì²´ì´ê³  content.contentê°€ ìˆìœ¼ë©´ í•´ë‹¹ ê°’ ì‚¬ìš©\n      if (content.content && typeof content.content === 'string') {\n        contentStr = content.content;\n      } else {\n        // ê·¸ ì™¸ì˜ ê²½ìš° JSON ë¬¸ìì—´ë¡œ ë³€í™˜\n        contentStr = JSON.stringify(content);\n      }\n    }\n    \n    // ë§ˆí¬ë‹¤ìš´ íƒœê·¸ ì œê±°\n    const cleanContent = contentStr.replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1')\n                               .replace(/[*#_~`>]/g, '');\n    \n    // ê²€ìƒ‰ì–´ ìœ„ì¹˜ ì°¾ê¸°\n    const queryPosition = cleanContent.toLowerCase().indexOf(query.toLowerCase());\n    \n    if (queryPosition === -1) {\n      // ê²€ìƒ‰ì–´ê°€ ì •í™•íˆ ì—†ìœ¼ë©´ ë¬¸ì„œ ì•ë¶€ë¶„ ë°˜í™˜\n      return cleanContent.slice(0, 100) + '...';\n    }\n    \n    // ê²€ìƒ‰ì–´ ì£¼ë³€ ë¬¸ë§¥ ì¶”ì¶œ (ì•ë’¤ 50ì)\n    const start = Math.max(0, queryPosition - 50);\n    const end = Math.min(cleanContent.length, queryPosition + query.length + 50);\n    \n    let preview = cleanContent.slice(start, end);\n    \n    // ì‹œì‘/ë ë¶€ë¶„ ì²˜ë¦¬\n    if (start > 0) preview = '...' + preview;\n    if (end < cleanContent.length) preview = preview + '...';\n    \n    return preview;\n  }\n\n  /**\n   * AIë¥¼ í™œìš©í•œ ë¬¸ì„œ ê²€ìƒ‰ (Claude API ì‚¬ìš©)\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchByAi(query) {\n    if (!query || query.trim().length === 0) return [];\n    \n    console.log(\"AI ê¸°ë°˜ ê²€ìƒ‰ ì‹œì‘:\", query);\n    const searchQuery = query.toLowerCase().trim();\n    \n    try {\n      // ë¬¸ì„œ ë¡œë“œ\n      const allDocuments = this.getAllDocuments();\n      console.log(`AI ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œ: ${allDocuments.length}ê°œ`);\n      \n      if (allDocuments.length === 0) {\n        return [];\n      }\n      \n      // ëª¨ë“  ë¬¸ì„œ ë‚´ìš© í†µí•© (AIì— ì „ì†¡í•  ì»¨í…ìŠ¤íŠ¸)\n      let documentsContext = \"ê²€ìƒ‰ ê°€ëŠ¥í•œ ë¬¸ì„œ ëª©ë¡:\\n\\n\";\n      allDocuments.forEach((doc, index) => {\n        let docContent = '';\n        if (typeof doc.content === 'string') {\n          docContent = doc.content.substring(0, 200); // ë‚´ìš©ì€ ì¼ë¶€ë§Œ í¬í•¨\n        } else if (typeof doc.content === 'object') {\n          docContent = doc.content.content || JSON.stringify(doc.content).substring(0, 200);\n        }\n        \n        documentsContext += `${index + 1}. ì œëª©: ${doc.title}\\n`;\n        documentsContext += `   ë‚´ìš© ì¼ë¶€: ${docContent}...\\n\\n`;\n      });\n      \n      // Claude API ìš”ì²­ êµ¬ì„±\n      const prompt = `\në‹¹ì‹ ì€ ë¬¸ì„œ ê²€ìƒ‰ ë„ìš°ë¯¸ì…ë‹ˆë‹¤. ì•„ë˜ ë¬¸ì„œ ëª©ë¡ì—ì„œ ë‹¤ìŒ ê²€ìƒ‰ì–´ì™€ ê°€ì¥ ê´€ë ¨ì„±ì´ ë†’ì€ ë¬¸ì„œë¥¼ ì°¾ì•„ ë¬¸ì„œ ì œëª©, ê´€ë ¨ì„± ì ìˆ˜, ê°„ë‹¨í•œ ì´ìœ ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•´ì£¼ì„¸ìš”.\n\nê²€ìƒ‰ì–´: \"${searchQuery}\"\n\n${documentsContext}\n\nê²€ìƒ‰ ê²°ê³¼ëŠ” ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•´ì£¼ì„¸ìš”:\n\\`\\`\\`json\n{\n  \"results\": [\n    {\n      \"title\": \"ë¬¸ì„œ ì œëª©\",\n      \"score\": 0.95,\n      \"reason\": \"ì´ ë¬¸ì„œê°€ ê²€ìƒ‰ì–´ì™€ ê´€ë ¨ì´ ìˆëŠ” ì´ìœ ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…\"\n    },\n    ...\n  ]\n}\n\\`\\`\\`\n\nìµœëŒ€ ${this.maxResults}ê°œì˜ ê´€ë ¨ ë¬¸ì„œë§Œ í¬í•¨í•´ ì£¼ì„¸ìš”. ê´€ë ¨ì„±ì´ ë†’ì€ ìˆœì„œë¡œ ì •ë ¬í•´ ì£¼ì„¸ìš”.\n`;\n\n      // ë°±ì—”ë“œ í”„ë¡ì‹œ ì„œë²„ë¥¼ í†µí•´ API í˜¸ì¶œ\n      const response = await fetch('http://localhost:3003/api/claude', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: CLAUDE_MODEL,\n          messages: [\n            {\n              role: \"user\",\n              content: [\n                {\n                  type: \"text\",\n                  text: prompt\n                }\n              ]\n            }\n          ],\n          max_tokens: 2000,\n          temperature: 0.1,\n        }),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`AI ê²€ìƒ‰ API ì˜¤ë¥˜: ${response.status}`);\n      }\n      \n      const responseData = await response.json();\n      console.log(\"AI ê²€ìƒ‰ ì‘ë‹µ:\", responseData);\n      \n      // ì‘ë‹µì—ì„œ JSON íŒŒì‹±\n      const textContent = responseData.content\n        .filter(item => item.type === 'text')\n        .map(item => item.text)\n        .join('\\n');\n      \n      const jsonMatch = textContent.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n      if (!jsonMatch || !jsonMatch[1]) {\n        throw new Error(\"AI ì‘ë‹µì—ì„œ JSON í˜•ì‹ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\");\n      }\n      \n      const aiResults = JSON.parse(jsonMatch[1]);\n      console.log(\"íŒŒì‹±ëœ AI ê²€ìƒ‰ ê²°ê³¼:\", aiResults);\n      \n      // AI ê²°ê³¼ë¥¼ ì‹¤ì œ ë¬¸ì„œì™€ ë§¤í•‘\n      const mappedResults = aiResults.results.map(result => {\n        const matchedDoc = allDocuments.find(doc => \n          doc.title.toLowerCase() === result.title.toLowerCase() ||\n          doc.title.toLowerCase().includes(result.title.toLowerCase()) ||\n          result.title.toLowerCase().includes(doc.title.toLowerCase())\n        );\n        \n        if (matchedDoc) {\n          return {\n            id: matchedDoc.id,\n            title: matchedDoc.title,\n            path: matchedDoc.path,\n            preview: result.reason,\n            score: result.score,\n            isAiMatch: true\n          };\n        }\n        \n        // ë§¤ì¹­ë˜ëŠ” ë¬¸ì„œê°€ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ê²°ê³¼ ë°˜í™˜\n        return {\n          id: this.slugify(result.title),\n          title: result.title,\n          path: `/doc/${this.slugify(result.title)}`,\n          preview: result.reason,\n          score: result.score,\n          isAiMatch: true,\n          isCreateNew: true\n        };\n      });\n      \n      console.log(\"ìµœì¢… AI ê²€ìƒ‰ ê²°ê³¼:\", mappedResults);\n      return mappedResults;\n    } catch (error) {\n      console.error(\"AI ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ë³¸ í‚¤ì›Œë“œ ê²€ìƒ‰ìœ¼ë¡œ í´ë°±\n      console.log(\"AI ê²€ìƒ‰ ì‹¤íŒ¨, í‚¤ì›Œë“œ ê²€ìƒ‰ìœ¼ë¡œ ëŒ€ì²´\");\n      return await this.searchByKeyword(query);\n    }\n  }\n\n  /**\n   * í†µí•© ê²€ìƒ‰ - AI ê²€ìƒ‰ ë˜ëŠ” í‚¤ì›Œë“œ ê²€ìƒ‰ì„ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchDocuments(query) {\n    console.log(\"í†µí•© ë¬¸ì„œ ê²€ìƒ‰ ì‹œì‘:\", query);\n    if (!query || query.trim().length === 0) return [];\n    \n    try {\n      // URL í˜•ì‹ í™•ì¸\n      if (/^https?:\\/\\//i.test(query.trim())) {\n        console.log(\"URL í˜•ì‹ ê°ì§€:\", query);\n        return [{ id: 'url', title: `URL: ${query.trim()}`, path: query.trim(), isUrl: true }];\n      }\n      \n      if (this.useAiSearch) {\n        // AI ê²€ìƒ‰ ì‚¬ìš© ì‹œ\n        console.log(\"AI ê²€ìƒ‰ ëª¨ë“œë¡œ ì‹¤í–‰\");\n        const aiResults = await this.searchByAi(query);\n        \n        if (aiResults.length > 0) {\n          console.log(\"AI ê²€ìƒ‰ ê²°ê³¼ ì°¾ìŒ:\", aiResults.length);\n          return aiResults;\n        }\n      }\n      \n      // AI ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ê±°ë‚˜ AI ê²€ìƒ‰ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ê¸°ì¡´ ë¡œì§ ì‹¤í–‰\n      // 1ë‹¨ê³„: í‚¤ì›Œë“œ ê²€ìƒ‰ ë¨¼ì € ì‹œë„\n      console.log(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ì‹œì‘\");\n      const keywordResults = await this.searchByKeyword(query);\n      \n      // í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆê³ , ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë©´ ê²°ê³¼ ë°˜í™˜\n      if (keywordResults.length > 0 && !keywordResults.some(result => result.isCreateNew)) {\n        console.log(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ ì°¾ìŒ:\", keywordResults.length);\n        return keywordResults;\n      }\n      \n      // 2ë‹¨ê³„: í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ê±°ë‚˜ ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆìœ¼ë©´ ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ì‹¤í–‰\n      console.log(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ìœ¼ë¡œ ì „í™˜\");\n      const semanticResults = await this.searchBySemantic(query);\n      \n      // ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ì—ì„œ ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ì´ ì•„ë‹Œ ê²°ê³¼ê°€ ìˆëŠ” ê²½ìš°\n      if (semanticResults.length > 0 && semanticResults.some(result => !result.isCreateNew)) {\n        console.log(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜:\", semanticResults.length);\n        return semanticResults;\n      }\n      \n      // 3ë‹¨ê³„: ë‘ ê²€ìƒ‰ ëª¨ë‘ ì‹¤ì œ ê²°ê³¼ê°€ ì—†ê³  ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆëŠ” ê²½ìš°\n      if (keywordResults.length > 0) {\n        console.log(\"ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆìŒ, í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜\");\n        return keywordResults;\n      }\n      \n      console.log(\"ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆìŒ, ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜\");\n      return semanticResults;\n    } catch (error) {\n      console.error(\"í†µí•© ë¬¸ì„œ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [{ \n        id: 'error', \n        title: 'ì˜¤ë¥˜ ë°œìƒ - ê²€ìƒ‰ ì‹¤íŒ¨', \n        path: '#',\n        preview: 'ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ê±°ë‚˜ URLì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”.', \n        isError: true \n      }];\n    }\n  }\n\n  /**\n   * ë¬¸ìì—´ì„ ìŠ¬ëŸ¬ê·¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (URL ì¹œí™”ì ì¸ í˜•ì‹)\n   * @param {string} str - ë³€í™˜í•  ë¬¸ìì—´\n   * @returns {string} - ìŠ¬ëŸ¬ê·¸ í˜•ì‹ì˜ ë¬¸ìì—´\n   */\n  slugify(str) {\n    return str\n      .toLowerCase()\n      .trim()\n      .replace(/[\\s\\W-]+/g, '-') // ê³µë°±, íŠ¹ìˆ˜ë¬¸ìë¥¼ í•˜ì´í”ˆìœ¼ë¡œ ë³€í™˜\n      .replace(/^-+|-+$/g, '');  // ì‹œì‘/ë í•˜ì´í”ˆ ì œê±°\n  }\n\n  /**\n   * ì‚¬ìš©ì ì§€ì • ë¬¸ì„œë§Œ ë³´ì¡´í•˜ëŠ” ê°•ë ¥í•œ ì •ë¦¬ í•¨ìˆ˜\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\n   * @param {boolean} dryRun - trueë©´ ì‹¤ì œ ì‚­ì œí•˜ì§€ ì•Šê³  ë¡œê·¸ë§Œ ì¶œë ¥\n   * @returns {Object} - ì •ë¦¬ ê²°ê³¼ í†µê³„\n   */\n  cleanupKeepOnlySpecified(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ì•„íŒŒíŠ¸', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬'], dryRun = false) {\n    console.log(`=== ì§€ì • ë¬¸ì„œë§Œ ë³´ì¡´ ì •ë¦¬ ${dryRun ? '(ì‹œë®¬ë ˆì´ì…˜)' : '(ì‹¤ì œ ì‹¤í–‰)'} ===`);\n    console.log(`ë³´ì¡´í•  ë¬¸ì„œ: ${keepTitles.join(', ')}`);\n    \n    const stats = {\n      totalDocuments: 0,\n      preservedDocuments: 0,\n      deletedDocuments: 0,\n      spaceSaved: 0,\n      backupCreated: false,\n      errors: []\n    };\n    \n    try {\n      // 1ë‹¨ê³„: ëª¨ë“  ë¬¸ì„œ ìˆ˜ì§‘\n      const documentKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\n      stats.totalDocuments = documentKeys.length;\n      \n      console.log(`ğŸ“Š ë¶„ì„ ì‹œì‘: ì´ ${documentKeys.length}ê°œ ë¬¸ì„œ ë°œê²¬`);\n      \n      // 2ë‹¨ê³„: ë°±ì—… ìƒì„± (ì‚­ì œí•  ë¬¸ì„œê°€ ìˆì„ ë•Œë§Œ)\n      if (!dryRun) {\n        // ë¨¼ì € ì‚­ì œí•  ë¬¸ì„œê°€ ìˆëŠ”ì§€ ë¯¸ë¦¬ í™•ì¸\n        let hasDocumentsToDelete = false;\n        for (const key of documentKeys) {\n          try {\n            const docData = JSON.parse(localStorage.getItem(key));\n            if (!docData || !docData.title) {\n              hasDocumentsToDelete = true;\n              break;\n            }\n            const title = docData.title.trim().toLowerCase();\n            const shouldKeep = keepTitles.some(keepTitle => \n              title === keepTitle.toLowerCase()\n            );\n            if (!shouldKeep) {\n              hasDocumentsToDelete = true;\n              break;\n            }\n          } catch (e) {\n            hasDocumentsToDelete = true;\n            break;\n          }\n        }\n        \n        // ì‚­ì œí•  ë¬¸ì„œê°€ ìˆì„ ë•Œë§Œ ë°±ì—… ìƒì„±\n        if (hasDocumentsToDelete) {\n          const backupData = {};\n          documentKeys.forEach(key => {\n            backupData[key] = localStorage.getItem(key);\n          });\n          \n          const backupKey = `miki_backup_manual_${Date.now()}`;\n          localStorage.setItem(backupKey, JSON.stringify({\n            timestamp: new Date().toISOString(),\n            documents: backupData,\n            type: 'manual_cleanup'\n          }));\n          stats.backupCreated = true;\n          console.log(`âœ… ë°±ì—… ì™„ë£Œ: ${backupKey}`);\n        } else {\n          console.log(`â­ï¸ ë°±ì—… ê±´ë„ˆëœ€: ì‚­ì œí•  ë¬¸ì„œê°€ ì—†ìŒ`);\n        }\n      }\n      \n      // 3ë‹¨ê³„: ë¬¸ì„œ ë¶„ë¥˜ ë° ì¤‘ë³µ ì œê±°\n      const preserveList = [];\n      const deleteList = [];\n      const titleGroups = {}; // ì œëª©ë³„ ê·¸ë£¹í™”\n      \n      // ë¨¼ì € ì œëª©ë³„ë¡œ ê·¸ë£¹í™”\n      for (const key of documentKeys) {\n        try {\n          const docData = JSON.parse(localStorage.getItem(key));\n          \n          if (!docData || !docData.title) {\n            deleteList.push({ key, reason: 'ì œëª© ì—†ìŒ', size: localStorage.getItem(key)?.length || 0 });\n            continue;\n          }\n          \n          const title = docData.title.trim().toLowerCase();\n          \n          if (!titleGroups[title]) {\n            titleGroups[title] = [];\n          }\n          \n          titleGroups[title].push({\n            key,\n            title: docData.title,\n            data: docData,\n            updatedAt: new Date(docData.updatedAt || 0)\n          });\n          \n        } catch (e) {\n          deleteList.push({ key, reason: 'íŒŒì‹± ì˜¤ë¥˜', size: localStorage.getItem(key)?.length || 0 });\n          console.log(`âŒ ì‚­ì œ ì˜ˆì •: ${key} - íŒŒì‹± ì˜¤ë¥˜`);\n        }\n      }\n      \n      // ê° ì œëª© ê·¸ë£¹ì—ì„œ ì²˜ë¦¬\n      for (const [titleLower, docs] of Object.entries(titleGroups)) {\n        const shouldKeep = keepTitles.some(keepTitle => \n          titleLower === keepTitle.toLowerCase()\n        );\n        \n        if (shouldKeep) {\n          // ë³´ì¡´í•  ì œëª©ì¸ ê²½ìš°: ìµœì‹  ë¬¸ì„œë§Œ ë³´ì¡´, ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œ\n          docs.sort((a, b) => b.updatedAt - a.updatedAt); // ìµœì‹ ìˆœ ì •ë ¬\n          \n          const latestDoc = docs[0]; // ê°€ì¥ ìµœì‹  ë¬¸ì„œ\n          const duplicates = docs.slice(1); // ë‚˜ë¨¸ì§€ ì¤‘ë³µ ë¬¸ì„œë“¤\n          \n          preserveList.push(latestDoc);\n          console.log(`âœ… ë³´ì¡´: ${latestDoc.key} - \"${latestDoc.title}\" (ìµœì‹  ë²„ì „)`);\n          \n          // ì¤‘ë³µ ë¬¸ì„œë“¤ì€ ì‚­ì œ ëª©ë¡ì— ì¶”ê°€\n          for (const duplicate of duplicates) {\n            deleteList.push({\n              key: duplicate.key,\n              title: duplicate.title,\n              reason: `ì¤‘ë³µ ë¬¸ì„œ (${latestDoc.key}ê°€ ìµœì‹ )`,\n              size: localStorage.getItem(duplicate.key)?.length || 0\n            });\n            console.log(`âŒ ì‚­ì œ ì˜ˆì •: ${duplicate.key} - \"${duplicate.title}\" (ì¤‘ë³µ)`);\n          }\n        } else {\n          // ë³´ì¡´í•˜ì§€ ì•Šì„ ì œëª©ì¸ ê²½ìš°: ëª¨ë“  ë¬¸ì„œ ì‚­ì œ\n          for (const doc of docs) {\n            deleteList.push({\n              key: doc.key,\n              title: doc.title,\n              reason: 'ì§€ì • ëª©ë¡ì— ì—†ìŒ',\n              size: localStorage.getItem(doc.key)?.length || 0\n            });\n            console.log(`âŒ ì‚­ì œ ì˜ˆì •: ${doc.key} - \"${doc.title}\" (ë³´ì¡´ ëª©ë¡ì— ì—†ìŒ)`);\n          }\n        }\n      }\n      \n      stats.preservedDocuments = preserveList.length;\n      stats.deletedDocuments = deleteList.length;\n      \n      // 4ë‹¨ê³„: ì‹¤ì œ ì‚­ì œ ì‹¤í–‰\n      console.log(`\\nğŸ”¥ ì‚­ì œ ì‹¤í–‰: ${deleteList.length}ê°œ ë¬¸ì„œ`);\n      \n      if (!dryRun && deleteList.length > 0) {\n        let successCount = 0;\n        \n        for (const item of deleteList) {\n          try {\n            localStorage.removeItem(item.key);\n            \n            // ê´€ë ¨ ì œëª© í‚¤ë„ ì‚­ì œ\n            const titleKey = item.key.replace('miki_document_', 'miki_title_');\n            if (localStorage.getItem(titleKey)) {\n              localStorage.removeItem(titleKey);\n            }\n            \n            stats.spaceSaved += item.size;\n            successCount++;\n            console.log(`  âœ… ì‚­ì œ ì™„ë£Œ: ${item.key}`);\n          } catch (error) {\n            console.error(`  âŒ ì‚­ì œ ì‹¤íŒ¨: ${item.key}`, error);\n            stats.errors.push(`ì‚­ì œ ì‹¤íŒ¨: ${item.key} - ${error.message}`);\n          }\n        }\n        \n        console.log(`âœ… ì‚­ì œ ì™„ë£Œ: ${successCount}/${deleteList.length}ê°œ`);\n      }\n      \n      // 5ë‹¨ê³„: ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\n      if (!dryRun && deleteList.length > 0) {\n        try {\n          const remainingDocs = preserveList.map(item => ({\n            id: item.data.id || item.key.replace('miki_document_', ''),\n            title: item.data.title,\n            updatedAt: item.data.updatedAt || new Date().toISOString()\n          }));\n          \n          remainingDocs.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\n          localStorage.setItem('miki_recent_docs', JSON.stringify(remainingDocs));\n          \n          console.log(`ğŸ“ ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±: ${remainingDocs.length}ê°œ`);\n        } catch (error) {\n          console.error('ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„± ì˜¤ë¥˜:', error);\n        }\n      }\n      \n      // 6ë‹¨ê³„: ê²°ê³¼ ë³´ê³ \n      console.log(`\\nğŸ“Š === ì •ë¦¬ ì™„ë£Œ ë³´ê³ ì„œ ===`);\n      console.log(`ì´ ë¬¸ì„œ: ${stats.totalDocuments}ê°œ`);\n      console.log(`ë³´ì¡´ëœ ë¬¸ì„œ: ${stats.preservedDocuments}ê°œ`);\n      console.log(`ì‚­ì œëœ ë¬¸ì„œ: ${stats.deletedDocuments}ê°œ`);\n      console.log(`ì ˆì•½ëœ ê³µê°„: ${(stats.spaceSaved / 1024).toFixed(1)}KB`);\n      \n      if (stats.backupCreated) {\n        console.log(`\\nğŸ›¡ï¸ ë°±ì—… ì •ë³´:`);\n        console.log(`ë°±ì—… í‚¤: miki_backup_manual_*`);\n        console.log(`ë³µêµ¬ ë°©ë²•: ê°œë°œì ë„êµ¬ì—ì„œ ë°±ì—… í‚¤ë¡œ ê²€ìƒ‰í•˜ì—¬ ë³µêµ¬ ê°€ëŠ¥`);\n      }\n      \n      if (stats.errors.length > 0) {\n        console.log(`\\nâš ï¸ ì˜¤ë¥˜ ${stats.errors.length}ê°œ:`);\n        stats.errors.forEach(error => console.log(`  - ${error}`));\n      }\n      \n    } catch (error) {\n      console.error('ì§€ì • ë¬¸ì„œ ë³´ì¡´ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n      stats.errors.push(`ì •ë¦¬ ì˜¤ë¥˜: ${error.message}`);\n    }\n    \n    return stats;\n  }\n}\n\nexport default DocumentSearchManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\DocumentSummaryManager.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'API_TYPE' is assigned a value but never used.","line":10,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// DocumentSummaryManager.js\n// ë¬¸ì„œë¥¼ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜í•˜ê³  ì„¹ì…˜ë³„ë¡œ ìš”ì•½í•˜ëŠ” í´ë˜ìŠ¤\n\n/**\n * ë¬¸ì„œ ìš”ì•½ ê´€ë¦¬ í´ë˜ìŠ¤\n * Claude APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œ ìš”ì•½ ìƒì„± ë° ê´€ë¦¬\n */\n\n// API íƒ€ì… ì„¤ì • - ë¸Œë¼ìš°ì € í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ ì‚¬ìš©\nconst API_TYPE = (typeof process !== 'undefined' && process.env?.VITE_AI_API_TYPE) || 'claude';\n\n/**\n * ë¬¸ì„œ ìš”ì•½ ë° ë³€í™˜ì„ ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤\n * AI ì²˜ë¦¬ë¥¼ ìœ„í•œ í† í° ìµœì í™”ì™€ ë¬¸ë§¥ ê´€ë¦¬ë¥¼ ë‹´ë‹¹\n */\nclass DocumentSummaryManager {\n  constructor() {\n    this.summaries = new Map(); // ë¬¸ì„œ ID ë˜ëŠ” ê²½ë¡œë¥¼ í‚¤ë¡œ, ìš”ì•½ ì •ë³´ë¥¼ ê°’ìœ¼ë¡œ ì €ì¥\n    this.maxSectionLength = 1000; // ì„¹ì…˜ë‹¹ ìµœëŒ€ ë¬¸ì ìˆ˜ (ì•½ 250 í† í°)\n    this.maxSummaryLength = 150; // ìš”ì•½ë‹¹ ìµœëŒ€ ë¬¸ì ìˆ˜ (ì•½ 40 í† í°)\n  }\n\n  /**\n   * ë¬¸ì„œë¥¼ ì„¹ì…˜ìœ¼ë¡œ ë¶„í• í•˜ê³  ìš”ì•½ ìƒì„±\n   * @param {string} documentId - ë¬¸ì„œ ì‹ë³„ì\n   * @param {string} content - ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¬¸ì„œ ë‚´ìš©\n   * @returns {Object} - ì„¹ì…˜ ë° ìš”ì•½ ì •ë³´ë¥¼ í¬í•¨í•œ ê°ì²´\n   */\n  processDocument(documentId, content) {\n    if (!content) return null;\n\n    // ë¬¸ì„œë¥¼ í—¤ë”©ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¹ì…˜ìœ¼ë¡œ ë¶„í• \n    const sections = this._splitIntoSections(content);\n    \n    // ê° ì„¹ì…˜ì— ëŒ€í•œ ìš”ì•½ ìƒì„±\n    const processedSections = sections.map(section => {\n      const summary = this._generateSummary(section.content);\n      return {\n        ...section,\n        summary: summary\n      };\n    });\n\n    // ë¬¸ì„œ ì „ì²´ ìš”ì•½ ìƒì„±\n    const documentSummary = this._generateDocumentSummary(processedSections);\n    \n    // ê²°ê³¼ ê°ì²´ ìƒì„± ë° ìºì‹œ ì €ì¥\n    const result = {\n      id: documentId,\n      summary: documentSummary,\n      sections: processedSections,\n      lastUpdated: new Date().toISOString()\n    };\n    \n    this.summaries.set(documentId, result);\n    return result;\n  }\n\n  /**\n   * ë¬¸ì„œë¥¼ í—¤ë”©ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¹ì…˜ìœ¼ë¡œ ë¶„í• \n   * @param {string} content - ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¬¸ì„œ ë‚´ìš©\n   * @returns {Array} - ì„¹ì…˜ ê°ì²´ ë°°ì—´\n   */\n  _splitIntoSections(content) {\n    // í—¤ë”© íŒ¨í„´ (# ì œëª©, ## ì œëª© ë“±)\n    const lines = content.split('\\n');\n    const sections = [];\n    \n    let currentHeading = \"ë¬¸ì„œ\";\n    let currentLevel = 0;\n    let currentContent = \"\";\n    let sectionStart = 0;\n    \n    // í—¤ë”©ì´ ì—†ëŠ” ì‹œì‘ ë¶€ë¶„ì„ ì²« ë²ˆì§¸ ì„¹ì…˜ìœ¼ë¡œ ì²˜ë¦¬\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      const headingMatch = line.match(/^(#{1,6})\\s+(.+)$/);\n      \n      if (headingMatch) {\n        // ì²« ë²ˆì§¸ í—¤ë”©ì„ ë§Œë‚¬ì„ ë•Œ ì´ì „ ë‚´ìš©ì´ ìˆìœ¼ë©´ ì„¹ì…˜ìœ¼ë¡œ ì¶”ê°€\n        if (currentContent.trim()) {\n          sections.push({\n            title: \"ì†Œê°œ\",\n            level: 0,\n            content: currentContent.trim(),\n            startLine: sectionStart,\n            endLine: i - 1\n          });\n        }\n        \n        // í˜„ì¬ í—¤ë”© ì •ë³´ ì—…ë°ì´íŠ¸\n        currentHeading = headingMatch[2];\n        currentLevel = headingMatch[1].length;\n        currentContent = line;\n        sectionStart = i;\n      } else {\n        // í—¤ë”©ì´ ì•„ë‹Œ ì¼ë°˜ í…ìŠ¤íŠ¸ ì¤„ ì¶”ê°€\n        currentContent += \"\\n\" + line;\n      }\n      \n      // ë‹¤ìŒ í—¤ë”©ì„ ë§Œë‚˜ê±°ë‚˜ ë¬¸ì„œ ëì— ë„ë‹¬í•˜ë©´ ì„¹ì…˜ ì¶”ê°€\n      const nextLine = i + 1 < lines.length ? lines[i + 1] : null;\n      const isNextHeading = nextLine && nextLine.match(/^(#{1,6})\\s+(.+)$/);\n      \n      if (isNextHeading || i === lines.length - 1) {\n        if (currentContent.trim()) {\n          sections.push({\n            title: currentHeading,\n            level: currentLevel,\n            content: currentContent.trim(),\n            startLine: sectionStart,\n            endLine: i\n          });\n        }\n        \n        if (isNextHeading) {\n          const nextHeadingMatch = nextLine.match(/^(#{1,6})\\s+(.+)$/);\n          currentHeading = nextHeadingMatch[2];\n          currentLevel = nextHeadingMatch[1].length;\n          currentContent = \"\";\n          sectionStart = i + 1;\n        }\n      }\n    }\n    \n    // ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì „ì²´ ë¬¸ì„œë¥¼ í•˜ë‚˜ì˜ ì„¹ì…˜ìœ¼ë¡œ ì²˜ë¦¬\n    if (sections.length === 0 && content.trim()) {\n      sections.push({\n        title: \"ë¬¸ì„œ\",\n        level: 0,\n        content: content.trim(),\n        startLine: 0,\n        endLine: lines.length - 1\n      });\n    }\n    \n    return sections;\n  }\n  \n  /**\n   * ì„¹ì…˜ ë‚´ìš©ì— ëŒ€í•œ ê°„ë‹¨í•œ ìš”ì•½ ìƒì„± (ì‹¤ì œë¡œëŠ” AIë¥¼ í†µí•´ ìš”ì•½í•  ìˆ˜ ìˆìŒ)\n   * @param {string} sectionContent - ì„¹ì…˜ ë‚´ìš©\n   * @returns {string} - ì„¹ì…˜ ìš”ì•½\n   */\n  _generateSummary(sectionContent) {\n    // ê°„ë‹¨í•œ ìš”ì•½ ë°©ì‹: ì²« ë²ˆì§¸ ë¬¸ì¥ ë˜ëŠ” ì¼ì • ê¸¸ì´ ì¶”ì¶œ\n    if (!sectionContent) return \"\";\n    \n    // ë„ˆë¬´ ê¸´ ì„¹ì…˜ì€ ì¼ì • ê¸¸ì´ë§Œ ì‚¬ìš©\n    if (sectionContent.length > this.maxSectionLength) {\n      sectionContent = sectionContent.substring(0, this.maxSectionLength) + \"...\";\n    }\n    \n    // ì²« ë²ˆì§¸ ë¬¸ì¥ ë˜ëŠ” ì²« ë²ˆì§¸ ì¤„ì„ ìš”ì•½ìœ¼ë¡œ ì‚¬ìš©\n    let summary = \"\";\n    const firstSentenceMatch = sectionContent.match(/^.+?[.!?](?:\\s|$)/);\n    \n    if (firstSentenceMatch) {\n      summary = firstSentenceMatch[0].trim();\n    } else {\n      // ë¬¸ì¥ì´ ëª…í™•í•˜ì§€ ì•Šìœ¼ë©´ ì²« ë²ˆì§¸ ì¤„ ì‚¬ìš©\n      const firstLine = sectionContent.split('\\n')[0].trim();\n      summary = firstLine;\n    }\n    \n    // ìš”ì•½ì´ ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸°\n    if (summary.length > this.maxSummaryLength) {\n      summary = summary.substring(0, this.maxSummaryLength) + \"...\";\n    }\n    \n    return summary;\n  }\n  \n  /**\n   * ë¬¸ì„œ ì „ì²´ ìš”ì•½ ìƒì„±\n   * @param {Array} sections - ì„¹ì…˜ ê°ì²´ ë°°ì—´\n   * @returns {string} - ë¬¸ì„œ ì „ì²´ ìš”ì•½\n   */\n  _generateDocumentSummary(sections) {\n    // ê° ì„¹ì…˜ì˜ ì œëª©ì„ ëª¨ì•„ì„œ ë¬¸ì„œ êµ¬ì¡° ìš”ì•½ ìƒì„±\n    const titles = sections.map(section => {\n      const indent = \"  \".repeat(Math.max(0, section.level - 1));\n      return `${indent}- ${section.title}`;\n    });\n    \n    return \"ë¬¸ì„œ êµ¬ì¡°:\\n\" + titles.join('\\n');\n  }\n  \n  /**\n   * ì €ì¥ëœ ë¬¸ì„œ ìš”ì•½ ê°€ì ¸ì˜¤ê¸°\n   * @param {string} documentId - ë¬¸ì„œ ì‹ë³„ì\n   * @returns {Object|null} - ì €ì¥ëœ ìš”ì•½ ê°ì²´ ë˜ëŠ” null\n   */\n  getSummary(documentId) {\n    return this.summaries.get(documentId) || null;\n  }\n  \n  /**\n   * ë¬¸ì„œì˜ íŠ¹ì • ë¶€ë¶„ ì£¼ë³€ ì»¨í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°\n   * @param {string} documentId - ë¬¸ì„œ ì‹ë³„ì\n   * @param {number} lineNumber - ì¤„ ë²ˆí˜¸\n   * @param {number} contextLines - ì•ë’¤ë¡œ í¬í•¨í•  ì¤„ ìˆ˜\n   * @returns {Object|null} - ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ê°ì²´ ë˜ëŠ” null\n   */\n  getContextAroundLine(documentId, lineNumber, contextLines = 5) {\n    const summary = this.summaries.get(documentId);\n    if (!summary) return null;\n    \n    // í•´ë‹¹ ë¼ì¸ì´ í¬í•¨ëœ ì„¹ì…˜ ì°¾ê¸°\n    const section = summary.sections.find(\n      s => lineNumber >= s.startLine && lineNumber <= s.endLine\n    );\n    \n    if (!section) return null;\n    \n    // ì„¹ì…˜ ë‚´ìš©ì—ì„œ ì£¼ë³€ ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œ\n    const lines = section.content.split('\\n');\n    const lineIndex = lineNumber - section.startLine;\n    \n    const start = Math.max(0, lineIndex - contextLines);\n    const end = Math.min(lines.length - 1, lineIndex + contextLines);\n    \n    const contextLines_code = lines.slice(start, end + 1);\n    \n    return {\n      section: section.title,\n      context: contextLines_code.join('\\n'),\n      startLine: section.startLine + start,\n      endLine: section.startLine + end\n    };\n  }\n  \n  /**\n   * ìºì‹œëœ ëª¨ë“  ìš”ì•½ ì •ë³´ ì§€ìš°ê¸°\n   */\n  clearCache() {\n    this.summaries.clear();\n  }\n}\n\nexport default DocumentSummaryManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\ServerDiagnostic.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":13,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":13,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[233,275],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[535,605],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":26,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":26,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[646,683],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[821,922],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1050,1087],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1222,1323],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":48,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":48,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1444,1478],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":58,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":58,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1892,1950],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":59,"column":41,"nodeType":"MemberExpression","messageId":"unexpected","endLine":59,"endColumn":52},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":61,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":61,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2039,2094],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":36,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":64,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":64,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2204,2261],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":40,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":51},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":67,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":67,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2349,2403],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":68,"column":35,"nodeType":"MemberExpression","messageId":"unexpected","endLine":68,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":71,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":71,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2547,2594],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":89,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":89,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3102,3144],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":90,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":90,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3154,3205],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3260,3301],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":97,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":97,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3361,3396],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":100,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":100,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3453,3513],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":102,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":102,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3565,3615],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3693,3753],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3804,3854],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3934,3993],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":116,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":116,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4051,4090],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":139,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":139,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4590,4623],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":161,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":161,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[5149,5195],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":173,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":173,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5327,5367],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5460,5493],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":187,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":187,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5709,5759],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":193,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":193,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5938,5977],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":198,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":198,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6100,6145],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":204,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":204,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6338,6375],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":210,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":210,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6569,6604],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":215,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":215,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6661,6707],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":219,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":219,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[6766,6800],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":37,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ì„œë²„ì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì˜ ìƒì„¸í•œ ì°¨ì´ì ì„ ë¶„ì„í•˜ëŠ” ì§„ë‹¨ ë„êµ¬\r\n */\r\nclass ServerDiagnostic {\r\n  constructor() {\r\n    this.serverUrl = 'http://localhost:3003/api/posts';\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì™€ ë¡œì»¬ì˜ ìƒì„¸í•œ ì°¨ì´ì  ë¶„ì„\r\n   */\r\n  async analyzeDiscrepancies() {\r\n    console.log('ğŸ” === ì„œë²„-ë¡œì»¬ ë¶ˆì¼ì¹˜ ë¶„ì„ ì‹œì‘ ===');\r\n    \r\n    try {\r\n      // 1. ì„œë²„ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const serverResponse = await fetch(this.serverUrl);\r\n      const serverDocs = await serverResponse.json();\r\n      \r\n      // 2. ë¡œì»¬ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const localDocs = this.getLocalDocuments();\r\n      \r\n      console.log(`ğŸ“Š ì„œë²„: ${serverDocs.length}ê°œ, ë¡œì»¬: ${localDocs.length}ê°œ`);\r\n      \r\n      // 3. ì„œë²„ ë¬¸ì„œ ìƒì„¸ ë¶„ì„\r\n      console.log('\\nğŸŒ === ì„œë²„ ë¬¸ì„œ ëª©ë¡ ===');\r\n      const serverTitles = new Set();\r\n      const serverById = new Map();\r\n      \r\n      serverDocs.forEach((doc, index) => {\r\n        console.log(`${index + 1}. ID: \"${doc.id}\" | ì œëª©: \"${doc.title}\" | í¬ê¸°: ${doc.content?.length || 0}ì`);\r\n        serverTitles.add(doc.title);\r\n        serverById.set(doc.id, doc);\r\n      });\r\n      \r\n      // 4. ë¡œì»¬ ë¬¸ì„œ ìƒì„¸ ë¶„ì„\r\n      console.log('\\nğŸ“± === ë¡œì»¬ ë¬¸ì„œ ëª©ë¡ ===');\r\n      const localTitles = new Set();\r\n      const localById = new Map();\r\n      \r\n      localDocs.forEach((doc, index) => {\r\n        console.log(`${index + 1}. ID: \"${doc.id}\" | ì œëª©: \"${doc.title}\" | í¬ê¸°: ${doc.content?.length || 0}ì`);\r\n        localTitles.add(doc.title);\r\n        localById.set(doc.id, doc);\r\n      });\r\n      \r\n      // 5. ì°¨ì´ì  ë¶„ì„\r\n      console.log('\\nâŒ === ì°¨ì´ì  ë¶„ì„ ===');\r\n      \r\n      // ì„œë²„ì—ë§Œ ìˆëŠ” ë¬¸ì„œ\r\n      const serverOnlyTitles = [...serverTitles].filter(title => !localTitles.has(title));\r\n      const serverOnlyIds = serverDocs.filter(doc => !localById.has(doc.id));\r\n      \r\n      // ë¡œì»¬ì—ë§Œ ìˆëŠ” ë¬¸ì„œ\r\n      const localOnlyTitles = [...localTitles].filter(title => !serverTitles.has(title));\r\n      const localOnlyIds = localDocs.filter(doc => !serverById.has(doc.id));\r\n      \r\n      console.log(`ğŸŒ ì„œë²„ì—ë§Œ ìˆëŠ” ì œëª©: ${serverOnlyTitles.length}ê°œ`);\r\n      serverOnlyTitles.forEach(title => console.log(`  - \"${title}\"`));\r\n      \r\n      console.log(`ğŸŒ ì„œë²„ì—ë§Œ ìˆëŠ” ID: ${serverOnlyIds.length}ê°œ`);\r\n      serverOnlyIds.forEach(doc => console.log(`  - ID: \"${doc.id}\" | ì œëª©: \"${doc.title}\"`));\r\n      \r\n      console.log(`ğŸ“± ë¡œì»¬ì—ë§Œ ìˆëŠ” ì œëª©: ${localOnlyTitles.length}ê°œ`);\r\n      localOnlyTitles.forEach(title => console.log(`  - \"${title}\"`));\r\n      \r\n      console.log(`ğŸ“± ë¡œì»¬ì—ë§Œ ìˆëŠ” ID: ${localOnlyIds.length}ê°œ`);\r\n      localOnlyIds.forEach(doc => console.log(`  - ID: \"${doc.id}\" | ì œëª©: \"${doc.title}\"`));\r\n      \r\n      // 6. ì œëª©ì€ ê°™ì§€ë§Œ IDê°€ ë‹¤ë¥¸ ë¬¸ì„œë“¤ ì°¾ê¸°\r\n      console.log('\\nğŸ”„ === ì œëª©ì€ ê°™ì§€ë§Œ IDê°€ ë‹¤ë¥¸ ë¬¸ì„œë“¤ ===');\r\n      const titleConflicts = [];\r\n      \r\n      serverDocs.forEach(serverDoc => {\r\n        const sameTitle = localDocs.filter(localDoc => \r\n          localDoc.title === serverDoc.title && localDoc.id !== serverDoc.id\r\n        );\r\n        \r\n        if (sameTitle.length > 0) {\r\n          titleConflicts.push({\r\n            title: serverDoc.title,\r\n            server: serverDoc,\r\n            local: sameTitle\r\n          });\r\n        }\r\n      });\r\n      \r\n      titleConflicts.forEach(conflict => {\r\n        console.log(`ğŸ“ ì œëª©: \"${conflict.title}\"`);\r\n        console.log(`  ğŸŒ ì„œë²„ ID: \"${conflict.server.id}\"`);\r\n        conflict.local.forEach(local => {\r\n          console.log(`  ğŸ“± ë¡œì»¬ ID: \"${local.id}\"`);\r\n        });\r\n      });\r\n      \r\n      // 7. ë™ê¸°í™” ì œì•ˆ\r\n      console.log('\\nğŸ’¡ === ë™ê¸°í™” ì œì•ˆ ===');\r\n      \r\n      if (serverOnlyIds.length > 0) {\r\n        console.log(`ğŸ”½ ì„œë²„ì—ì„œ ë¡œì»¬ë¡œ ê°€ì ¸ì˜¬ ë¬¸ì„œ: ${serverOnlyIds.length}ê°œ`);\r\n        serverOnlyIds.forEach(doc => {\r\n          console.log(`  - \"${doc.title}\" (ID: ${doc.id})`);\r\n        });\r\n      }\r\n      \r\n      if (localOnlyIds.length > 0) {\r\n        console.log(`ğŸ”¼ ë¡œì»¬ì—ì„œ ì„œë²„ë¡œ ì—…ë¡œë“œí•  ë¬¸ì„œ: ${localOnlyIds.length}ê°œ`);\r\n        localOnlyIds.forEach(doc => {\r\n          console.log(`  - \"${doc.title}\" (ID: ${doc.id})`);\r\n        });\r\n      }\r\n      \r\n      if (titleConflicts.length > 0) {\r\n        console.log(`ğŸ”§ ì¶©ëŒ í•´ê²°ì´ í•„ìš”í•œ ë¬¸ì„œ: ${titleConflicts.length}ê°œ`);\r\n        titleConflicts.forEach(conflict => {\r\n          console.log(`  - \"${conflict.title}\"`);\r\n        });\r\n      }\r\n      \r\n      return {\r\n        server: {\r\n          docs: serverDocs,\r\n          titles: serverTitles,\r\n          count: serverDocs.length\r\n        },\r\n        local: {\r\n          docs: localDocs,\r\n          titles: localTitles,\r\n          count: localDocs.length\r\n        },\r\n        differences: {\r\n          serverOnly: serverOnlyIds,\r\n          localOnly: localOnlyIds,\r\n          titleConflicts: titleConflicts\r\n        }\r\n      };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë¶„ì„ ì‹¤íŒ¨:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  getLocalDocuments() {\r\n    const docs = [];\r\n    \r\n    Object.keys(localStorage).forEach(key => {\r\n      if (key.startsWith('miki_document_')) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          docs.push({\r\n            id: docData.id,\r\n            title: docData.title,\r\n            content: docData.content,\r\n            updatedAt: docData.updatedAt\r\n          });\r\n        } catch (error) {\r\n          console.warn(`âš ï¸ ë¡œì»¬ ë¬¸ì„œ íŒŒì‹± ì‹¤íŒ¨: ${key}`, error);\r\n        }\r\n      }\r\n    });\r\n    \r\n    return docs;\r\n  }\r\n\r\n  /**\r\n   * ìë™ ë™ê¸°í™” ì‹¤í–‰ (ì•ˆì „í•˜ê²Œ)\r\n   */\r\n  async performSafeSync() {\r\n    console.log('ğŸ”„ === ì•ˆì „í•œ ìë™ ë™ê¸°í™” ì‹œì‘ ===');\r\n    \r\n    const analysis = await this.analyzeDiscrepancies();\r\n    if (!analysis) {\r\n      console.error('âŒ ë¶„ì„ ì‹¤íŒ¨ë¡œ ë™ê¸°í™” ì¤‘ë‹¨');\r\n      return false;\r\n    }\r\n    \r\n    const { differences } = analysis;\r\n    let syncCount = 0;\r\n    \r\n    try {\r\n      // 1. ì„œë²„ì—ë§Œ ìˆëŠ” ë¬¸ì„œë“¤ì„ ë¡œì»¬ë¡œ ê°€ì ¸ì˜¤ê¸°\r\n      for (const serverDoc of differences.serverOnly) {\r\n        console.log(`ğŸ”½ ì„œë²„ì—ì„œ ê°€ì ¸ì˜¤ê¸°: \"${serverDoc.title}\"`);\r\n        \r\n        const localKey = `miki_document_${serverDoc.id}`;\r\n        localStorage.setItem(localKey, JSON.stringify(serverDoc));\r\n        \r\n        syncCount++;\r\n        console.log(`âœ… ë¡œì»¬ ì €ì¥ ì™„ë£Œ: ${localKey}`);\r\n      }\r\n      \r\n      // 2. ì œëª© ì¶©ëŒ í•´ê²° (ì„œë²„ ë²„ì „ì„ ìš°ì„ ìœ¼ë¡œ)\r\n      for (const conflict of differences.titleConflicts) {\r\n        console.log(`ğŸ”§ ì¶©ëŒ í•´ê²°: \"${conflict.title}\"`);\r\n        \r\n        // ë¡œì»¬ì˜ êµ¬ë²„ì „ ì œê±°\r\n        conflict.local.forEach(localDoc => {\r\n          const oldKey = `miki_document_${localDoc.id}`;\r\n          localStorage.removeItem(oldKey);\r\n          console.log(`ğŸ—‘ï¸ êµ¬ë²„ì „ ì œê±°: ${oldKey}`);\r\n        });\r\n        \r\n        // ì„œë²„ ë²„ì „ì„ ë¡œì»¬ì— ì €ì¥\r\n        const newKey = `miki_document_${conflict.server.id}`;\r\n        localStorage.setItem(newKey, JSON.stringify(conflict.server));\r\n        console.log(`âœ… ì‹ ë²„ì „ ì €ì¥: ${newKey}`);\r\n        \r\n        syncCount++;\r\n      }\r\n      \r\n      console.log(`ğŸ‰ ë™ê¸°í™” ì™„ë£Œ: ${syncCount}ê°œ ë¬¸ì„œ ì²˜ë¦¬`);\r\n      return true;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë™ê¸°í™” ì‹¤íŒ¨:', error);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\n// ì „ì—­ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ export\r\nexport default ServerDiagnostic; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\SyncManager.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[397,432],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[968,1022],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":90,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":90,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2485,2612],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3172,3225],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":110,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":110,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3303,3337],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3429,3473],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":139,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":139,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4317,4346],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":143,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":143,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4410,4443],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":155,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":155,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4637,4669],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":171,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":171,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5111,5153],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":172,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":172,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5161,5233],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":176,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":176,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5292,5328],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":188,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":188,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5604,5642],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":219,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":219,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6549,6595],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":231,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":231,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7031,7076],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":238,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":238,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7351,7399],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":246,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":246,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7642,7680],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":250,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":250,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7716,7810],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":254,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":254,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7871,7907],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":267,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":267,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8203,8247],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":271,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":271,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8333,8371],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":301,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":301,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9184,9240],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":314,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":314,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9673,9755],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":341,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":341,"endColumn":28,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11002,11047],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":344,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":344,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11102,11148],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":352,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":352,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11369,11419],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":357,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":357,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[11528,11582],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":362,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":362,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11688,11749],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":366,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":366,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[11810,11846],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":376,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":376,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12013,12052],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":405,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":405,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12956,13012],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":409,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":409,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[13077,13118],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":425,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":425,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13473,13501],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":462,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":462,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14564,14593],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":463,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":463,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14601,14734],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":468,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":468,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[14808,14842],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":494,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":494,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15442,15474],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":508,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":508,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15858,15884],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":512,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":512,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[15956,15992],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":39,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì™€ ì„œë²„ ê°„ì˜ ë™ê¸°í™” ë° ë§¤í•‘ ì˜¤ë¥˜ í•´ê²°ì„ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤\r\n * ê¸°ì¡´ DataSyncManagerì™€ ë‹¬ë¦¬ ì•ˆì „í•˜ê³  ì ì§„ì ì¸ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰\r\n */\r\nclass SyncManager {\r\n  constructor() {\r\n    this.serverUrl = 'http://localhost:3003/api/posts';\r\n    this.syncInProgress = false;\r\n    this.backupKey = `miki_sync_backup_${Date.now()}`;\r\n  }\r\n\r\n  /**\r\n   * 1ë‹¨ê³„: í˜„ì¬ ìƒí™© ì§„ë‹¨\r\n   * @returns {Object} - ì§„ë‹¨ ê²°ê³¼\r\n   */\r\n  async diagnoseCurrentState() {\r\n    console.log('=== í˜„ì¬ ìƒí™© ì§„ë‹¨ ì‹œì‘ ===');\r\n    \r\n    const diagnosis = {\r\n      local: {\r\n        documents: [],\r\n        totalCount: 0,\r\n        duplicates: {},\r\n        issues: []\r\n      },\r\n      server: {\r\n        documents: [],\r\n        totalCount: 0,\r\n        accessible: false\r\n      },\r\n      mapping: {\r\n        conflicts: [],\r\n        orphans: []\r\n      }\r\n    };\r\n\r\n    try {\r\n      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„\r\n      const localKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n      diagnosis.local.totalCount = localKeys.length;\r\n      \r\n      console.log(`ğŸ“± ë¡œì»¬ ìŠ¤í† ë¦¬ì§€: ${localKeys.length}ê°œ ë¬¸ì„œ ë°œê²¬`);\r\n      \r\n      const titleGroups = {};\r\n      \r\n      for (const key of localKeys) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          const docId = key.replace('miki_document_', '');\r\n          \r\n          if (!docData || !docData.title) {\r\n            diagnosis.local.issues.push(`${key}: ì œëª© ì—†ìŒ`);\r\n            continue;\r\n          }\r\n          \r\n          const doc = {\r\n            id: docId,\r\n            title: docData.title,\r\n            content: docData.content || '',\r\n            updatedAt: docData.updatedAt || new Date().toISOString(),\r\n            storageKey: key,\r\n            contentLength: (docData.content || '').length\r\n          };\r\n          \r\n          diagnosis.local.documents.push(doc);\r\n          \r\n          // ì œëª©ë³„ ê·¸ë£¹í™” (ì¤‘ë³µ ê²€ì‚¬)\r\n          const titleKey = docData.title.toLowerCase();\r\n          if (!titleGroups[titleKey]) {\r\n            titleGroups[titleKey] = [];\r\n          }\r\n          titleGroups[titleKey].push(doc);\r\n          \r\n        } catch (e) {\r\n          diagnosis.local.issues.push(`${key}: íŒŒì‹± ì˜¤ë¥˜ - ${e.message}`);\r\n        }\r\n      }\r\n      \r\n      // ì¤‘ë³µ ë¬¸ì„œ ì°¾ê¸°\r\n      for (const [title, docs] of Object.entries(titleGroups)) {\r\n        if (docs.length > 1) {\r\n          diagnosis.local.duplicates[title] = docs.map(d => ({\r\n            id: d.id,\r\n            updatedAt: d.updatedAt,\r\n            contentLength: d.contentLength\r\n          }));\r\n        }\r\n      }\r\n      \r\n      console.log(`ğŸ“Š ë¡œì»¬ ë¶„ì„ ì™„ë£Œ: ${diagnosis.local.documents.length}ê°œ ìœ íš¨, ${Object.keys(diagnosis.local.duplicates).length}ê°œ ì œëª©ì— ì¤‘ë³µ`);\r\n      \r\n      // ì„œë²„ ìƒíƒœ í™•ì¸\r\n      try {\r\n        const response = await fetch(this.serverUrl);\r\n        if (response.ok) {\r\n          const serverDocs = await response.json();\r\n          diagnosis.server.accessible = true;\r\n          diagnosis.server.totalCount = serverDocs.length;\r\n          diagnosis.server.documents = serverDocs.map(doc => ({\r\n            id: doc.id,\r\n            title: doc.title,\r\n            preview: doc.preview || '',\r\n            updatedAt: doc.updatedAt,\r\n            filename: doc.filename\r\n          }));\r\n          \r\n          console.log(`ğŸŒ ì„œë²„ ë¶„ì„ ì™„ë£Œ: ${serverDocs.length}ê°œ ë¬¸ì„œ`);\r\n        } else {\r\n          diagnosis.server.accessible = false;\r\n          console.warn('âš ï¸ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤');\r\n        }\r\n      } catch (error) {\r\n        diagnosis.server.accessible = false;\r\n        console.error('âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨:', error.message);\r\n      }\r\n      \r\n      // ë§¤í•‘ ì¶©ëŒ ë¶„ì„\r\n      if (diagnosis.server.accessible) {\r\n        for (const localDoc of diagnosis.local.documents) {\r\n          const serverDoc = diagnosis.server.documents.find(s => s.id === localDoc.id);\r\n          const serverDocByTitle = diagnosis.server.documents.find(s => \r\n            s.title.toLowerCase() === localDoc.title.toLowerCase()\r\n          );\r\n          \r\n          if (serverDoc && serverDocByTitle && serverDoc.id !== serverDocByTitle.id) {\r\n            diagnosis.mapping.conflicts.push({\r\n              localDoc,\r\n              serverDocById: serverDoc,\r\n              serverDocByTitle: serverDocByTitle\r\n            });\r\n          }\r\n          \r\n          if (!serverDoc && !serverDocByTitle) {\r\n            diagnosis.mapping.orphans.push(localDoc);\r\n          }\r\n        }\r\n      }\r\n      \r\n      console.log('=== ì§„ë‹¨ ì™„ë£Œ ===');\r\n      return diagnosis;\r\n      \r\n    } catch (error) {\r\n      console.error('ì§„ë‹¨ ì¤‘ ì˜¤ë¥˜:', error);\r\n      return diagnosis;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 2ë‹¨ê³„: ë°±ì—… ìƒì„±\r\n   * @param {Object} diagnosis - ì§„ë‹¨ ê²°ê³¼\r\n   * @returns {boolean} - ë°±ì—… ì„±ê³µ ì—¬ë¶€\r\n   */\r\n  createBackup(diagnosis) {\r\n    try {\r\n      console.log('=== ë°±ì—… ìƒì„± ì‹œì‘ ===');\r\n      \r\n      const backup = {\r\n        timestamp: new Date().toISOString(),\r\n        diagnosis,\r\n        localStorage: {}\r\n      };\r\n      \r\n      // ëª¨ë“  miki ê´€ë ¨ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë°ì´í„° ë°±ì—…\r\n      for (const key of Object.keys(localStorage)) {\r\n        if (key.startsWith('miki_')) {\r\n          backup.localStorage[key] = localStorage.getItem(key);\r\n        }\r\n      }\r\n      \r\n      localStorage.setItem(this.backupKey, JSON.stringify(backup));\r\n      console.log(`âœ… ë°±ì—… ì™„ë£Œ: ${this.backupKey}`);\r\n      console.log(`ğŸ“¦ ë°±ì—… í¬ê¸°: ${Object.keys(backup.localStorage).length}ê°œ í•­ëª©`);\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('âŒ ë°±ì—… ìƒì„± ì‹¤íŒ¨:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 3ë‹¨ê³„: ë¡œì»¬ ì¤‘ë³µ ë¬¸ì„œ ì •ë¦¬\r\n   * @param {Object} diagnosis - ì§„ë‹¨ ê²°ê³¼\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª©ë“¤\r\n   * @returns {Object} - ì •ë¦¬ ê²°ê³¼\r\n   */\r\n  cleanupLocalDuplicates(diagnosis, keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    console.log('=== ë¡œì»¬ ì¤‘ë³µ ë¬¸ì„œ ì •ë¦¬ ì‹œì‘ ===');\r\n    \r\n    const result = {\r\n      preserved: [],\r\n      removed: [],\r\n      errors: []\r\n    };\r\n    \r\n    try {\r\n      // ì œëª©ë³„ë¡œ ê·¸ë£¹í™”\r\n      const titleGroups = {};\r\n      for (const doc of diagnosis.local.documents) {\r\n        const titleKey = doc.title.toLowerCase();\r\n        if (!titleGroups[titleKey]) {\r\n          titleGroups[titleKey] = [];\r\n        }\r\n        titleGroups[titleKey].push(doc);\r\n      }\r\n      \r\n      for (const [titleKey, docs] of Object.entries(titleGroups)) {\r\n        const shouldKeep = keepTitles.some(keepTitle => \r\n          titleKey === keepTitle.toLowerCase()\r\n        );\r\n        \r\n        if (!shouldKeep) {\r\n          // ë³´ì¡´í•˜ì§€ ì•Šì„ ë¬¸ì„œë“¤ì€ ëª¨ë‘ ì‚­ì œ\r\n          for (const doc of docs) {\r\n            try {\r\n              localStorage.removeItem(doc.storageKey);\r\n              localStorage.removeItem(`miki_title_${doc.id}`);\r\n              result.removed.push(doc);\r\n              console.log(`âŒ ì‚­ì œ: ${doc.title} (ë³´ì¡´ ëª©ë¡ì— ì—†ìŒ)`);\r\n            } catch (e) {\r\n              result.errors.push(`ì‚­ì œ ì‹¤íŒ¨: ${doc.title} - ${e.message}`);\r\n            }\r\n          }\r\n        } else if (docs.length > 1) {\r\n          // ë³´ì¡´í•  ë¬¸ì„œ ì¤‘ ì¤‘ë³µì´ ìˆëŠ” ê²½ìš°: ìµœì‹  ë²„ì „ë§Œ ìœ ì§€\r\n          docs.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\r\n          const latest = docs[0];\r\n          const duplicates = docs.slice(1);\r\n          \r\n          result.preserved.push(latest);\r\n          console.log(`âœ… ë³´ì¡´: ${latest.title} (ìµœì‹  ë²„ì „)`);\r\n          \r\n          for (const duplicate of duplicates) {\r\n            try {\r\n              localStorage.removeItem(duplicate.storageKey);\r\n              localStorage.removeItem(`miki_title_${duplicate.id}`);\r\n              result.removed.push(duplicate);\r\n              console.log(`âŒ ì‚­ì œ: ${duplicate.title} (ì¤‘ë³µ ë²„ì „)`);\r\n            } catch (e) {\r\n              result.errors.push(`ì¤‘ë³µ ì‚­ì œ ì‹¤íŒ¨: ${duplicate.title} - ${e.message}`);\r\n            }\r\n          }\r\n        } else {\r\n          // ë³´ì¡´í•  ë¬¸ì„œ ì¤‘ ì¤‘ë³µì´ ì—†ëŠ” ê²½ìš°\r\n          result.preserved.push(docs[0]);\r\n          console.log(`âœ… ë³´ì¡´: ${docs[0].title}`);\r\n        }\r\n      }\r\n      \r\n      console.log(`=== ë¡œì»¬ ì •ë¦¬ ì™„ë£Œ: ë³´ì¡´ ${result.preserved.length}ê°œ, ì‚­ì œ ${result.removed.length}ê°œ ===`);\r\n      return result;\r\n      \r\n    } catch (error) {\r\n      console.error('ë¡œì»¬ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\r\n      result.errors.push(`ì •ë¦¬ ì˜¤ë¥˜: ${error.message}`);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 4ë‹¨ê³„: ì„œë²„ì™€ ë¡œì»¬ ë§¤í•‘ ìˆ˜ì •\r\n   * @param {Object} diagnosis - ì§„ë‹¨ ê²°ê³¼\r\n   * @returns {Object} - ë§¤í•‘ ìˆ˜ì • ê²°ê³¼\r\n   */\r\n  async fixServerLocalMapping(diagnosis) {\r\n    if (!diagnosis.server.accessible) {\r\n      console.log('âš ï¸ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ì–´ ë§¤í•‘ ìˆ˜ì •ì„ ê±´ë„ˆëœë‹ˆë‹¤');\r\n      return { success: false, reason: 'Server not accessible' };\r\n    }\r\n    \r\n    console.log('=== ì„œë²„-ë¡œì»¬ ë§¤í•‘ ìˆ˜ì • ì‹œì‘ ===');\r\n    \r\n    const result = {\r\n      synced: [],\r\n      conflicts: [],\r\n      errors: []\r\n    };\r\n    \r\n    try {\r\n      // í˜„ì¬ ë¡œì»¬ì— ë‚¨ì•„ìˆëŠ” ë¬¸ì„œë“¤ ë‹¤ì‹œ í™•ì¸\r\n      const currentLocalDocs = [];\r\n      const localKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n      \r\n      for (const key of localKeys) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          if (docData && docData.title) {\r\n            currentLocalDocs.push({\r\n              id: key.replace('miki_document_', ''),\r\n              title: docData.title,\r\n              content: docData.content || '',\r\n              updatedAt: docData.updatedAt,\r\n              storageKey: key\r\n            });\r\n          }\r\n        } catch (e) {\r\n          // íŒŒì‹± ì˜¤ë¥˜ ë¬´ì‹œ\r\n        }\r\n      }\r\n      \r\n      console.log(`ğŸ“± í˜„ì¬ ë¡œì»¬ ë¬¸ì„œ: ${currentLocalDocs.length}ê°œ`);\r\n      \r\n      // ê° ë¡œì»¬ ë¬¸ì„œì— ëŒ€í•´ ì„œë²„ì™€ ë§¤í•‘ í™•ì¸ ë° ìˆ˜ì •\r\n      for (const localDoc of currentLocalDocs) {\r\n        try {\r\n          // ì„œë²„ì—ì„œ ê°™ì€ ì œëª©ì˜ ë¬¸ì„œ ì°¾ê¸°\r\n          const serverDoc = diagnosis.server.documents.find(s => \r\n            s.title.toLowerCase() === localDoc.title.toLowerCase()\r\n          );\r\n          \r\n          if (serverDoc) {\r\n            // ì„œë²„ì— ê°™ì€ ì œëª©ì˜ ë¬¸ì„œê°€ ìˆëŠ” ê²½ìš°\r\n            if (serverDoc.id !== localDoc.id) {\r\n              console.log(`ğŸ”„ ID ë¶ˆì¼ì¹˜ ìˆ˜ì •: \"${localDoc.title}\" ${localDoc.id} â†’ ${serverDoc.id}`);\r\n              \r\n              // ì„œë²„ì˜ ìµœì‹  ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\r\n              const serverContentResponse = await fetch(`${this.serverUrl}/${serverDoc.id}`);\r\n              if (serverContentResponse.ok) {\r\n                const serverContent = await serverContentResponse.json();\r\n                \r\n                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê¸°ì¡´ í‚¤ ì‚­ì œ\r\n                localStorage.removeItem(localDoc.storageKey);\r\n                localStorage.removeItem(`miki_title_${localDoc.id}`);\r\n                \r\n                // ì„œë²„ IDë¡œ ìƒˆë¡œ ì €ì¥\r\n                const newKey = `miki_document_${serverDoc.id}`;\r\n                localStorage.setItem(newKey, JSON.stringify({\r\n                  id: serverDoc.id,\r\n                  title: serverContent.title || localDoc.title,\r\n                  content: serverContent.content || localDoc.content,\r\n                  updatedAt: serverContent.updatedAt || localDoc.updatedAt\r\n                }));\r\n                localStorage.setItem(`miki_title_${serverDoc.id}`, serverContent.title || localDoc.title);\r\n                \r\n                result.synced.push({\r\n                  title: localDoc.title,\r\n                  oldId: localDoc.id,\r\n                  newId: serverDoc.id\r\n                });\r\n                \r\n                console.log(`âœ… ë§¤í•‘ ìˆ˜ì • ì™„ë£Œ: ${localDoc.title}`);\r\n              }\r\n            } else {\r\n              console.log(`âœ… ì´ë¯¸ ì˜¬ë°”ë¥¸ ë§¤í•‘: ${localDoc.title}`);\r\n              result.synced.push({\r\n                title: localDoc.title,\r\n                id: localDoc.id,\r\n                status: 'already_correct'\r\n              });\r\n            }\r\n          } else {\r\n            console.log(`âš ï¸ ì„œë²„ì— ì—†ëŠ” ë¡œì»¬ ë¬¸ì„œ: ${localDoc.title}`);\r\n            // í•„ìš”ì‹œ ì„œë²„ì— ì—…ë¡œë“œí•˜ê±°ë‚˜ ë¡œì»¬ì—ì„œ ì œê±°í•  ìˆ˜ ìˆìŒ\r\n          }\r\n          \r\n        } catch (error) {\r\n          console.error(`âŒ ë§¤í•‘ ìˆ˜ì • ì‹¤íŒ¨: ${localDoc.title}`, error);\r\n          result.errors.push(`${localDoc.title}: ${error.message}`);\r\n        }\r\n      }\r\n      \r\n      console.log(`=== ë§¤í•‘ ìˆ˜ì • ì™„ë£Œ: ${result.synced.length}ê°œ ì²˜ë¦¬ ===`);\r\n      return result;\r\n      \r\n    } catch (error) {\r\n      console.error('ë§¤í•‘ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜:', error);\r\n      result.errors.push(`ë§¤í•‘ ìˆ˜ì • ì˜¤ë¥˜: ${error.message}`);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 5ë‹¨ê³„: ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\r\n   */\r\n  rebuildRecentDocuments() {\r\n    console.log('=== ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„± ì‹œì‘ ===');\r\n    \r\n    try {\r\n      const documents = [];\r\n      const localKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n      \r\n      for (const key of localKeys) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          if (docData && docData.title) {\r\n            documents.push({\r\n              id: docData.id || key.replace('miki_document_', ''),\r\n              title: docData.title,\r\n              updatedAt: docData.updatedAt || new Date().toISOString()\r\n            });\r\n          }\r\n        } catch (e) {\r\n          // íŒŒì‹± ì˜¤ë¥˜ ë¬´ì‹œ\r\n        }\r\n      }\r\n      \r\n      // ìµœì‹ ìˆœ ì •ë ¬\r\n      documents.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\r\n      \r\n      // ìµœëŒ€ 20ê°œë§Œ ìœ ì§€\r\n      const recentDocs = documents.slice(0, 20);\r\n      \r\n      localStorage.setItem('miki_recent_docs', JSON.stringify(recentDocs));\r\n      \r\n      console.log(`âœ… ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„± ì™„ë£Œ: ${recentDocs.length}ê°œ`);\r\n      return recentDocs;\r\n      \r\n    } catch (error) {\r\n      console.error('ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„± ì˜¤ë¥˜:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì „ì²´ ë™ê¸°í™” ì‹¤í–‰\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª©ë“¤\r\n   * @returns {Object} - ë™ê¸°í™” ê²°ê³¼\r\n   */\r\n  async performFullSync(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    if (this.syncInProgress) {\r\n      return { success: false, message: 'ë™ê¸°í™”ê°€ ì´ë¯¸ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤' };\r\n    }\r\n    \r\n    this.syncInProgress = true;\r\n    console.log('ğŸš€ ì „ì²´ ë™ê¸°í™” ì‹œì‘');\r\n    \r\n    try {\r\n      // 1ë‹¨ê³„: ì§„ë‹¨\r\n      const diagnosis = await this.diagnoseCurrentState();\r\n      \r\n      // 2ë‹¨ê³„: ë°±ì—…\r\n      const backupSuccess = this.createBackup(diagnosis);\r\n      if (!backupSuccess) {\r\n        throw new Error('ë°±ì—… ìƒì„± ì‹¤íŒ¨');\r\n      }\r\n      \r\n      // 3ë‹¨ê³„: ë¡œì»¬ ì •ë¦¬\r\n      const cleanupResult = this.cleanupLocalDuplicates(diagnosis, keepTitles);\r\n      \r\n      // 4ë‹¨ê³„: ë§¤í•‘ ìˆ˜ì •\r\n      const mappingResult = await this.fixServerLocalMapping(diagnosis);\r\n      \r\n      // 5ë‹¨ê³„: ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\r\n      const recentDocs = this.rebuildRecentDocuments();\r\n      \r\n      const finalResult = {\r\n        success: true,\r\n        diagnosis,\r\n        backup: this.backupKey,\r\n        cleanup: {\r\n          preserved: cleanupResult.preserved.length,\r\n          removed: cleanupResult.removed.length,\r\n          errors: cleanupResult.errors.length\r\n        },\r\n        mapping: {\r\n          synced: mappingResult.synced?.length || 0,\r\n          errors: mappingResult.errors?.length || 0\r\n        },\r\n        recentDocs: recentDocs.length\r\n      };\r\n      \r\n      console.log('ğŸ‰ ì „ì²´ ë™ê¸°í™” ì™„ë£Œ!');\r\n      console.log(`ğŸ“Š ê²°ê³¼: ë³´ì¡´ ${finalResult.cleanup.preserved}ê°œ, ì‚­ì œ ${finalResult.cleanup.removed}ê°œ, ë§¤í•‘ ìˆ˜ì • ${finalResult.mapping.synced}ê°œ`);\r\n      \r\n      return finalResult;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë™ê¸°í™” ì‹¤íŒ¨:', error);\r\n      return {\r\n        success: false,\r\n        message: error.message,\r\n        backup: this.backupKey\r\n      };\r\n    } finally {\r\n      this.syncInProgress = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ë°±ì—…ì—ì„œ ë³µì›\r\n   * @param {string} backupKey - ë°±ì—… í‚¤ (ì„ íƒì‚¬í•­, ê¸°ë³¸ê°’ì€ ìµœì‹  ë°±ì—…)\r\n   */\r\n  restoreFromBackup(backupKey = null) {\r\n    try {\r\n      const useBackupKey = backupKey || this.backupKey;\r\n      const backupData = localStorage.getItem(useBackupKey);\r\n      \r\n      if (!backupData) {\r\n        throw new Error('ë°±ì—… ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');\r\n      }\r\n      \r\n      const backup = JSON.parse(backupData);\r\n      \r\n      console.log('ğŸ”„ ë°±ì—…ì—ì„œ ë³µì› ì‹œì‘...');\r\n      \r\n      // í˜„ì¬ miki ë°ì´í„° ëª¨ë‘ ì‚­ì œ\r\n      for (const key of Object.keys(localStorage)) {\r\n        if (key.startsWith('miki_') && key !== useBackupKey) {\r\n          localStorage.removeItem(key);\r\n        }\r\n      }\r\n      \r\n      // ë°±ì—… ë°ì´í„° ë³µì›\r\n      for (const [key, value] of Object.entries(backup.localStorage)) {\r\n        localStorage.setItem(key, value);\r\n      }\r\n      \r\n      console.log('âœ… ë°±ì—… ë³µì› ì™„ë£Œ');\r\n      return { success: true };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë°±ì—… ë³µì› ì‹¤íŒ¨:', error);\r\n      return { success: false, message: error.message };\r\n    }\r\n  }\r\n}\r\n\r\nexport default SyncManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\database.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'trans' is defined but never used. Allowed unused args must match /^_/u.","line":15,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":66},{"ruleId":"no-unused-vars","severity":1,"message":"'primKey' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":69},{"ruleId":"no-unused-vars","severity":1,"message":"'obj' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":74},{"ruleId":"no-unused-vars","severity":1,"message":"'trans' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":76,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":81},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[958,1011],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":36,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":36,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1094,1144],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":39,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":39,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1199,1234],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1838,1889],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2108,2145],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":89,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":89,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3006,3049],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3160,3197],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3583,3635],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":130,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":130,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4078,4136],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":132,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":132,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4167,4206],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":205,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":205,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[6136,6175],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":234,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":234,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6917,6946],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":238,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":238,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7018,7057],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":261,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":261,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7757,7797],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":280,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":280,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8273,8306],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":291,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":291,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8742,8798],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":301,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":301,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[8959,9000],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Dexie from 'dexie';\r\n\r\n// Database schema\r\nexport class MikiDatabase extends Dexie {\r\n  constructor() {\r\n    super('MikiEditorDB');\r\n    \r\n    // Define schemas\r\n    this.version(1).stores({\r\n      documents: '++id, title, content, updatedAt, isUserEditedTitle, isAutoSyncedTitle',\r\n      syncQueue: '++queueId, documentId, operation, status, retryAt, retryCount, data'\r\n    });\r\n    \r\n    // Add hooks for automatic timestamps\r\n    this.documents.hook('creating', function (primKey, obj, trans) {\r\n      obj.createdAt = new Date().toISOString();\r\n      obj.updatedAt = new Date().toISOString();\r\n    });\r\n    \r\n    this.documents.hook('updating', function (modifications, primKey, obj, trans) {\r\n      modifications.updatedAt = new Date().toISOString();\r\n    });\r\n  }\r\n}\r\n\r\n// Create database instance\r\nexport const db = new MikiDatabase();\r\n\r\n// Migration utilities\r\nexport class DatabaseMigration {\r\n  static async migrateFromLocalStorage() {\r\n    console.log('ğŸ”„ localStorage â†’ IndexedDB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘');\r\n    \r\n    try {\r\n      const localDocs = this.getLocalStorageDocuments();\r\n      console.log(`ğŸ“„ ë°œê²¬ëœ ë¡œì»¬ ë¬¸ì„œ: ${localDocs.length}ê°œ`);\r\n      \r\n      if (localDocs.length === 0) {\r\n        console.log('âœ… ë§ˆì´ê·¸ë ˆì´ì…˜í•  ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.');\r\n        return { success: true, migrated: 0 };\r\n      }\r\n      \r\n      // Batch insert for better performance\r\n      await db.transaction('rw', db.documents, async () => {\r\n        for (const doc of localDocs) {\r\n          await db.documents.put({\r\n            id: doc.id,\r\n            title: doc.title || 'ì œëª© ì—†ìŒ',\r\n            content: doc.content || '',\r\n            updatedAt: doc.updatedAt || new Date().toISOString(),\r\n            isUserEditedTitle: doc.isUserEditedTitle || false,\r\n            isAutoSyncedTitle: doc.isAutoSyncedTitle || false\r\n          });\r\n        }\r\n      });\r\n      \r\n      console.log(`âœ… ${localDocs.length}ê°œ ë¬¸ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ`);\r\n      \r\n      // Mark migration as completed\r\n      localStorage.setItem('miki_migration_completed', 'true');\r\n      \r\n      return { success: true, migrated: localDocs.length };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  static getLocalStorageDocuments() {\r\n    const documents = [];\r\n    const keys = Object.keys(localStorage);\r\n    \r\n    for (const key of keys) {\r\n      if (key.startsWith('miki_document_')) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          const id = key.replace('miki_document_', '');\r\n          \r\n          documents.push({\r\n            id: id,\r\n            title: docData.title || localStorage.getItem(`miki_title_${id}`) || 'ì œëª© ì—†ìŒ',\r\n            content: docData.content || '',\r\n            updatedAt: docData.updatedAt || new Date().toISOString(),\r\n            isUserEditedTitle: docData.isUserEditedTitle || false,\r\n            isAutoSyncedTitle: docData.isAutoSyncedTitle || false\r\n          });\r\n        } catch (error) {\r\n          console.warn(`âš ï¸ ë¬¸ì„œ íŒŒì‹± ì‹¤íŒ¨: ${key}`, error);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return documents;\r\n  }\r\n  \r\n  static async cleanupLocalStorage() {\r\n    console.log('ğŸ§¹ localStorage ì •ë¦¬ ì‹œì‘');\r\n    \r\n    const keysToRemove = [];\r\n    const keys = Object.keys(localStorage);\r\n    \r\n    for (const key of keys) {\r\n      if (key.startsWith('miki_document_') || \r\n          key.startsWith('miki_title_') ||\r\n          key.startsWith('miki_search_cache_')) {\r\n        keysToRemove.push(key);\r\n      }\r\n    }\r\n    \r\n    keysToRemove.forEach(key => localStorage.removeItem(key));\r\n    console.log(`ğŸ—‘ï¸ ${keysToRemove.length}ê°œ í•­ëª© ì •ë¦¬ ì™„ë£Œ`);\r\n  }\r\n}\r\n\r\n// Sync queue management\r\nexport class SyncQueue {\r\n  static async enqueue(documentId, operation, data = {}) {\r\n    try {\r\n      await db.syncQueue.add({\r\n        documentId,\r\n        operation, // 'create', 'update', 'delete'\r\n        status: 'pending',\r\n        retryAt: new Date().toISOString(),\r\n        retryCount: 0,\r\n        data: JSON.stringify(data),\r\n        createdAt: new Date().toISOString()\r\n      });\r\n      \r\n      console.log(`ğŸ“¤ ë™ê¸°í™” íì— ì¶”ê°€: ${operation} - ${documentId}`);\r\n    } catch (error) {\r\n      console.error('âŒ ë™ê¸°í™” í ì¶”ê°€ ì‹¤íŒ¨:', error);\r\n    }\r\n  }\r\n  \r\n  static async getPendingItems() {\r\n    return await db.syncQueue\r\n      .where('status')\r\n      .equals('pending')\r\n      .and(item => new Date(item.retryAt) <= new Date())\r\n      .toArray();\r\n  }\r\n  \r\n  static async markAsCompleted(queueId) {\r\n    await db.syncQueue.update(queueId, { \r\n      status: 'completed',\r\n      completedAt: new Date().toISOString()\r\n    });\r\n  }\r\n  \r\n  static async markAsFailed(queueId, error) {\r\n    const item = await db.syncQueue.get(queueId);\r\n    const retryCount = (item?.retryCount || 0) + 1;\r\n    const maxRetries = 5;\r\n    \r\n    if (retryCount >= maxRetries) {\r\n      await db.syncQueue.update(queueId, {\r\n        status: 'failed',\r\n        retryCount,\r\n        lastError: error,\r\n        failedAt: new Date().toISOString()\r\n      });\r\n    } else {\r\n      // Exponential backoff: 2^retryCount minutes\r\n      const retryDelay = Math.pow(2, retryCount) * 60 * 1000;\r\n      const retryAt = new Date(Date.now() + retryDelay).toISOString();\r\n      \r\n      await db.syncQueue.update(queueId, {\r\n        status: 'pending',\r\n        retryCount,\r\n        retryAt,\r\n        lastError: error\r\n      });\r\n    }\r\n  }\r\n  \r\n  static async cleanup() {\r\n    // Remove completed items older than 7 days\r\n    const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString();\r\n    \r\n    await db.syncQueue\r\n      .where('status')\r\n      .equals('completed')\r\n      .and(item => item.completedAt < weekAgo)\r\n      .delete();\r\n  }\r\n}\r\n\r\n// Database utilities\r\nexport class DatabaseUtils {\r\n  static async exportData() {\r\n    try {\r\n      const documents = await db.documents.toArray();\r\n      const syncQueue = await db.syncQueue.toArray();\r\n      \r\n      const exportData = {\r\n        version: 1,\r\n        exportedAt: new Date().toISOString(),\r\n        documents,\r\n        syncQueue\r\n      };\r\n      \r\n      return JSON.stringify(exportData, null, 2);\r\n    } catch (error) {\r\n      console.error('âŒ ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  static async importData(jsonData) {\r\n    try {\r\n      const data = JSON.parse(jsonData);\r\n      \r\n      if (data.version !== 1) {\r\n        throw new Error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ë°ì´í„° ë²„ì „ì…ë‹ˆë‹¤.');\r\n      }\r\n      \r\n      await db.transaction('rw', [db.documents, db.syncQueue], async () => {\r\n        // Clear existing data\r\n        await db.documents.clear();\r\n        await db.syncQueue.clear();\r\n        \r\n        // Import documents\r\n        if (data.documents?.length > 0) {\r\n          await db.documents.bulkAdd(data.documents);\r\n        }\r\n        \r\n        // Import sync queue\r\n        if (data.syncQueue?.length > 0) {\r\n          await db.syncQueue.bulkAdd(data.syncQueue);\r\n        }\r\n      });\r\n      \r\n      console.log('âœ… ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ');\r\n      return { success: true };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  static async getStorageInfo() {\r\n    try {\r\n      const docCount = await db.documents.count();\r\n      const queueCount = await db.syncQueue.count();\r\n      \r\n      // Estimate storage usage (rough calculation)\r\n      const docs = await db.documents.toArray();\r\n      const totalSize = docs.reduce((size, doc) => {\r\n        return size + (doc.content?.length || 0) + (doc.title?.length || 0);\r\n      }, 0);\r\n      \r\n      return {\r\n        documentCount: docCount,\r\n        queueCount: queueCount,\r\n        estimatedSize: totalSize,\r\n        formattedSize: this.formatBytes(totalSize)\r\n      };\r\n    } catch (error) {\r\n      console.error('âŒ ì €ì¥ì†Œ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨:', error);\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  static formatBytes(bytes) {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  }\r\n}\r\n\r\n// Initialize database and handle migrations\r\nexport const initializeDatabase = async () => {\r\n  try {\r\n    // Open database\r\n    await db.open();\r\n    console.log('âœ… IndexedDB ì—°ê²° ì„±ê³µ');\r\n    \r\n    // Check if migration is needed\r\n    const migrationCompleted = localStorage.getItem('miki_migration_completed');\r\n    \r\n    if (!migrationCompleted) {\r\n      const result = await DatabaseMigration.migrateFromLocalStorage();\r\n      \r\n      if (result.success && result.migrated > 0) {\r\n        // Optional: Clean up localStorage after successful migration\r\n        // await DatabaseMigration.cleanupLocalStorage();\r\n        console.log('ğŸ“¦ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ, localStorageëŠ” ë°±ì—…ìš©ìœ¼ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.');\r\n      }\r\n    }\r\n    \r\n    // Cleanup old sync queue items\r\n    await SyncQueue.cleanup();\r\n    \r\n    return { success: true };\r\n    \r\n  } catch (error) {\r\n    console.error('âŒ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\errorHandler.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3010,3172],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ì—ëŸ¬ íƒ€ì… ì •ì˜\r\nexport const ErrorTypes = {\r\n  NETWORK_ERROR: 'NETWORK_ERROR',\r\n  SERVER_ERROR: 'SERVER_ERROR',\r\n  NOT_FOUND: 'NOT_FOUND',\r\n  VALIDATION_ERROR: 'VALIDATION_ERROR',\r\n  UNKNOWN_ERROR: 'UNKNOWN_ERROR',\r\n};\r\n\r\n// ì—ëŸ¬ ë¶„ë¥˜ í•¨ìˆ˜\r\nexport const classifyError = (error) => {\r\n  if (!error) return ErrorTypes.UNKNOWN_ERROR;\r\n\r\n  // ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜\r\n  if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n    return ErrorTypes.NETWORK_ERROR;\r\n  }\r\n\r\n  // HTTP ìƒíƒœ ì½”ë“œ ê¸°ë°˜ ë¶„ë¥˜\r\n  if (error.message.includes('HTTP')) {\r\n    const statusMatch = error.message.match(/HTTP (\\d+)/);\r\n    if (statusMatch) {\r\n      const status = parseInt(statusMatch[1]);\r\n      if (status === 404) return ErrorTypes.NOT_FOUND;\r\n      if (status >= 400 && status < 500) return ErrorTypes.VALIDATION_ERROR;\r\n      if (status >= 500) return ErrorTypes.SERVER_ERROR;\r\n    }\r\n  }\r\n\r\n  // íŠ¹ì • ì—ëŸ¬ ë©”ì‹œì§€ íŒ¨í„´\r\n  if (error.message.includes('ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤')) {\r\n    return ErrorTypes.NOT_FOUND;\r\n  }\r\n\r\n  return ErrorTypes.UNKNOWN_ERROR;\r\n};\r\n\r\n// ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€ ìƒì„±\r\nexport const getErrorMessage = (error, context = '') => {\r\n  const errorType = classifyError(error);\r\n  \r\n  const messages = {\r\n    [ErrorTypes.NETWORK_ERROR]: {\r\n      title: 'ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜',\r\n      message: 'ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',\r\n      action: 'ë‹¤ì‹œ ì‹œë„',\r\n      canRetry: true,\r\n    },\r\n    [ErrorTypes.SERVER_ERROR]: {\r\n      title: 'ì„œë²„ ì˜¤ë¥˜',\r\n      message: 'ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',\r\n      action: 'ë‹¤ì‹œ ì‹œë„',\r\n      canRetry: true,\r\n    },\r\n    [ErrorTypes.NOT_FOUND]: {\r\n      title: 'ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ',\r\n      message: 'ìš”ì²­í•œ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.',\r\n      action: 'ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°',\r\n      canRetry: false,\r\n    },\r\n    [ErrorTypes.VALIDATION_ERROR]: {\r\n      title: 'ì…ë ¥ ì˜¤ë¥˜',\r\n      message: 'ì…ë ¥í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',\r\n      action: 'ìˆ˜ì •í•˜ê¸°',\r\n      canRetry: false,\r\n    },\r\n    [ErrorTypes.UNKNOWN_ERROR]: {\r\n      title: 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜',\r\n      message: 'ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',\r\n      action: 'ë‹¤ì‹œ ì‹œë„',\r\n      canRetry: true,\r\n    },\r\n  };\r\n\r\n  const errorInfo = messages[errorType];\r\n  \r\n  // ì»¨í…ìŠ¤íŠ¸ë³„ ë©”ì‹œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•\r\n  if (context) {\r\n    switch (context) {\r\n      case 'save':\r\n        errorInfo.message = `ë¬¸ì„œ ì €ì¥ ì¤‘ ${errorInfo.message.toLowerCase()}`;\r\n        break;\r\n      case 'load':\r\n        errorInfo.message = `ë¬¸ì„œ ë¶ˆëŸ¬ì˜¤ê¸° ì¤‘ ${errorInfo.message.toLowerCase()}`;\r\n        break;\r\n      case 'delete':\r\n        errorInfo.message = `ë¬¸ì„œ ì‚­ì œ ì¤‘ ${errorInfo.message.toLowerCase()}`;\r\n        break;\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...errorInfo,\r\n    originalError: error,\r\n    timestamp: new Date().toISOString(),\r\n  };\r\n};\r\n\r\n// ì—ëŸ¬ ë¡œê¹… í•¨ìˆ˜\r\nexport const logError = (error, context = '', additionalInfo = {}) => {\r\n  const errorInfo = getErrorMessage(error, context);\r\n  \r\n  const logData = {\r\n    ...errorInfo,\r\n    context,\r\n    additionalInfo,\r\n    userAgent: navigator.userAgent,\r\n    url: window.location.href,\r\n    timestamp: new Date().toISOString(),\r\n  };\r\n\r\n  // ê°œë°œ í™˜ê²½ì—ì„œë§Œ ìƒì„¸ ë¡œê·¸ ì¶œë ¥\r\n  if ((typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') || false) {\r\n    console.error('ğŸ” Error Details:', {\r\n      message: error.message,\r\n      stack: error.stack,\r\n      context,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n\r\n  // í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì—ëŸ¬ ë¦¬í¬íŒ… ì„œë¹„ìŠ¤ë¡œ ì „ì†¡\r\n  if ((typeof process !== 'undefined' && process.env?.NODE_ENV === 'production') || false) {\r\n    // TODO: Sentry.captureException(error, { extra: logData });\r\n  }\r\n\r\n  return logData;\r\n};\r\n\r\n// ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬ì¸ì§€ í™•ì¸\r\nexport const isRetryableError = (error) => {\r\n  const errorType = classifyError(error);\r\n  return [ErrorTypes.NETWORK_ERROR, ErrorTypes.SERVER_ERROR, ErrorTypes.UNKNOWN_ERROR].includes(errorType);\r\n};\r\n\r\n// ì˜¤í”„ë¼ì¸ ìƒíƒœ ê°ì§€\r\nexport const isOfflineError = (error) => {\r\n  return classifyError(error) === ErrorTypes.NETWORK_ERROR;\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\keywordExtractor.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\logger.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[590,633],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[721,763],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"info"},"fix":{"range":[851,893],"text":""},"desc":"Remove the console.info()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":43,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":43,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[994,1035],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":50,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":50,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"time"},"fix":{"range":[1146,1188],"text":""},"desc":"Remove the console.time()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":56,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":56,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"timeEnd"},"fix":{"range":[1289,1334],"text":""},"desc":"Remove the console.timeEnd()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":70,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":70,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1603,1635],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// í™˜ê²½ë³„ ë¡œê¹… ì œì–´ ìœ í‹¸ë¦¬í‹°\r\nconst isDevelopment = (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') || false;\r\nconst isTest = (typeof process !== 'undefined' && process.env?.NODE_ENV === 'test') || false;\r\n\r\n// ë¡œê·¸ ë ˆë²¨ ì •ì˜\r\nconst LOG_LEVELS = {\r\n  ERROR: 0,\r\n  WARN: 1,\r\n  INFO: 2,\r\n  DEBUG: 3\r\n};\r\n\r\n// í˜„ì¬ ë¡œê·¸ ë ˆë²¨ ì„¤ì • (í™˜ê²½ë³€ìˆ˜ë¡œ ì œì–´ ê°€ëŠ¥)\r\nconst currentLogLevel = isDevelopment \r\n  ? LOG_LEVELS.DEBUG \r\n  : LOG_LEVELS.ERROR;\r\n\r\nclass Logger {\r\n  constructor(module = 'App') {\r\n    this.module = module;\r\n  }\r\n\r\n  error(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.ERROR) {\r\n      console.error(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  warn(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.WARN) {\r\n      console.warn(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  info(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.INFO) {\r\n      console.info(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  debug(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.DEBUG && !isTest) {\r\n      console.log(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  // ì„±ëŠ¥ ì¸¡ì •ìš©\r\n  time(label) {\r\n    if (currentLogLevel >= LOG_LEVELS.DEBUG && !isTest) {\r\n      console.time(`[${this.module}] ${label}`);\r\n    }\r\n  }\r\n\r\n  timeEnd(label) {\r\n    if (currentLogLevel >= LOG_LEVELS.DEBUG && !isTest) {\r\n      console.timeEnd(`[${this.module}] ${label}`);\r\n    }\r\n  }\r\n}\r\n\r\n// ëª¨ë“ˆë³„ ë¡œê±° ìƒì„± í•¨ìˆ˜\r\nexport const createLogger = (module) => new Logger(module);\r\n\r\n// ê¸°ë³¸ ë¡œê±°\r\nexport const logger = new Logger('App');\r\n\r\n// ë ˆê±°ì‹œ console.log ëŒ€ì²´ìš© (ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜)\r\nexport const debugLog = (...args) => {\r\n  if (isDevelopment && !isTest) {\r\n    console.log('[DEBUG]', ...args);\r\n  }\r\n};\r\n\r\nexport default logger; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\searchCache.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":27,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":27,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[801,848],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1275,1326],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[1692,1741],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[2522,2570],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":106,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":106,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2922,2984],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":126,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":126,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3370,3418],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":145,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":145,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3804,3853],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":180,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":180,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[4687,4735],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":226,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":226,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5934,5983],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":279,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":279,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[7315,7365],"text":""},"desc":"Remove the console.warn()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ê²€ìƒ‰ ê²°ê³¼ ìºì‹± ë° ê´€ë¦¬ë¥¼ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\r\n * ë©”ëª¨ë¦¬ ë° ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ í™œìš©í•˜ì—¬ ê²€ìƒ‰ ê²°ê³¼ ìºì‹±\r\n */\r\n\r\nclass SearchCache {\r\n  constructor(options = {}) {\r\n    this.memoryCache = new Map(); // ë©”ëª¨ë¦¬ ë‚´ ìºì‹œ\r\n    this.localStoragePrefix = options.localStoragePrefix || 'miki_search_cache_';\r\n    this.defaultTtl = options.defaultTtl || 1000 * 60 * 30; // ê¸°ë³¸ TTL: 30ë¶„\r\n    this.maxCacheSize = options.maxCacheSize || 100; // ìµœëŒ€ ìºì‹œ í•­ëª© ìˆ˜\r\n    this.useLocalStorage = options.useLocalStorage !== false; // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì‚¬ìš© ì—¬ë¶€\r\n    \r\n    // ì´ˆê¸°í™” ì‹œ ìºì‹œ ì •ë¦¬\r\n    this.cleanup();\r\n  }\r\n  \r\n  /**\r\n   * ìºì‹œì—ì„œ ê²€ìƒ‰ ê²°ê³¼ ê°€ì ¸ì˜¤ê¸°\r\n   * @param {string} key - ìºì‹œ í‚¤\r\n   * @returns {Object|null} - ìºì‹œëœ ê²°ê³¼ ë˜ëŠ” null\r\n   */\r\n  get(key) {\r\n    // 1. ë©”ëª¨ë¦¬ ìºì‹œ í™•ì¸\r\n    const memoryItem = this.memoryCache.get(key);\r\n    if (memoryItem && memoryItem.expiry > Date.now()) {\r\n      console.log(`[SearchCache] ë©”ëª¨ë¦¬ ìºì‹œ íˆíŠ¸: ${key}`);\r\n      return memoryItem.value;\r\n    }\r\n    \r\n    // 2. ë©”ëª¨ë¦¬ ìºì‹œì— ì—†ê±°ë‚˜ ë§Œë£Œëœ ê²½ìš° ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í™•ì¸\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        const storageKey = this.localStoragePrefix + key;\r\n        const storedItem = localStorage.getItem(storageKey);\r\n        \r\n        if (storedItem) {\r\n          const item = JSON.parse(storedItem);\r\n          \r\n          // ë§Œë£Œ í™•ì¸\r\n          if (item.expiry > Date.now()) {\r\n            console.log(`[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ íˆíŠ¸: ${key}`);\r\n            \r\n            // ë©”ëª¨ë¦¬ ìºì‹œì—ë„ ì¶”ê°€\r\n            this.memoryCache.set(key, {\r\n              value: item.value,\r\n              expiry: item.expiry\r\n            });\r\n            \r\n            return item.value;\r\n          } else {\r\n            // ë§Œë£Œëœ í•­ëª© ì œê±°\r\n            localStorage.removeItem(storageKey);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì•¡ì„¸ìŠ¤ ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n    \r\n    // ìºì‹œ ë¯¸ìŠ¤\r\n    return null;\r\n  }\r\n  \r\n  /**\r\n   * ê²€ìƒ‰ ê²°ê³¼ë¥¼ ìºì‹œì— ì €ì¥\r\n   * @param {string} key - ìºì‹œ í‚¤\r\n   * @param {Object} value - ì €ì¥í•  ê°’\r\n   * @param {number} ttl - ìºì‹œ ìœ íš¨ ì‹œê°„(ms)\r\n   */\r\n  set(key, value, ttl = this.defaultTtl) {\r\n    const expiry = Date.now() + ttl;\r\n    \r\n    // 1. ë©”ëª¨ë¦¬ ìºì‹œì— ì €ì¥\r\n    this.memoryCache.set(key, {\r\n      value,\r\n      expiry\r\n    });\r\n    \r\n    // ë©”ëª¨ë¦¬ ìºì‹œ í¬ê¸° ì œí•œ\r\n    if (this.memoryCache.size > this.maxCacheSize) {\r\n      this.pruneMemoryCache();\r\n    }\r\n    \r\n    // 2. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        const storageKey = this.localStoragePrefix + key;\r\n        localStorage.setItem(storageKey, JSON.stringify({\r\n          value,\r\n          expiry\r\n        }));\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥ ì˜¤ë¥˜:', e);\r\n        // ì €ì¥ ì‹¤íŒ¨ ì‹œ ê°€ì¥ ì˜¤ë˜ëœ í•­ëª© ì œê±° í›„ ì¬ì‹œë„\r\n        this.pruneLocalStorageCache();\r\n        \r\n        try {\r\n          const storageKey = this.localStoragePrefix + key;\r\n          localStorage.setItem(storageKey, JSON.stringify({\r\n            value,\r\n            expiry\r\n          }));\r\n        } catch (retryError) {\r\n          // ì¬ì‹œë„ ì‹¤íŒ¨ ì‹œ ë¬´ì‹œ\r\n          console.error('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥ ì¬ì‹œë„ ì‹¤íŒ¨:', retryError);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * íŠ¹ì • í‚¤ì˜ ìºì‹œ ì‚­ì œ\r\n   * @param {string} key - ì‚­ì œí•  ìºì‹œ í‚¤\r\n   */\r\n  delete(key) {\r\n    // ë©”ëª¨ë¦¬ ìºì‹œì—ì„œ ì‚­ì œ\r\n    this.memoryCache.delete(key);\r\n    \r\n    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚­ì œ\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        const storageKey = this.localStoragePrefix + key;\r\n        localStorage.removeItem(storageKey);\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì‚­ì œ ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ëª¨ë“  ìºì‹œ í•­ëª© ì œê±°\r\n   */\r\n  clear() {\r\n    // ë©”ëª¨ë¦¬ ìºì‹œ ì´ˆê¸°í™”\r\n    this.memoryCache.clear();\r\n    \r\n    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ ì´ˆê¸°í™”\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        Object.keys(localStorage)\r\n          .filter(key => key.startsWith(this.localStoragePrefix))\r\n          .forEach(key => localStorage.removeItem(key));\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì´ˆê¸°í™” ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë§Œë£Œëœ ìºì‹œ í•­ëª© ì œê±°\r\n   */\r\n  cleanup() {\r\n    const now = Date.now();\r\n    \r\n    // ë©”ëª¨ë¦¬ ìºì‹œ ì •ë¦¬\r\n    for (const [key, item] of this.memoryCache.entries()) {\r\n      if (item.expiry < now) {\r\n        this.memoryCache.delete(key);\r\n      }\r\n    }\r\n    \r\n    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ ì •ë¦¬\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        Object.keys(localStorage)\r\n          .filter(key => key.startsWith(this.localStoragePrefix))\r\n          .forEach(key => {\r\n            try {\r\n              const item = JSON.parse(localStorage.getItem(key));\r\n              if (item.expiry < now) {\r\n                localStorage.removeItem(key);\r\n              }\r\n            } catch (e) {\r\n              // íŒŒì‹± ì˜¤ë¥˜ ì‹œ í•­ëª© ì œê±°\r\n              localStorage.removeItem(key);\r\n            }\r\n          });\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë©”ëª¨ë¦¬ ìºì‹œ ì •ë¦¬ (ê°€ì¥ ì˜¤ë˜ëœ í•­ëª©ë¶€í„° ì œê±°)\r\n   */\r\n  pruneMemoryCache() {\r\n    // ë§Œë£Œ ì‹œê°„ ê¸°ì¤€ ì •ë ¬\r\n    const entries = Array.from(this.memoryCache.entries())\r\n      .sort((a, b) => a[1].expiry - b[1].expiry);\r\n    \r\n    // ì ˆë°˜ ì œê±°\r\n    const removeCount = Math.floor(this.memoryCache.size / 2);\r\n    entries.slice(0, removeCount).forEach(([key]) => {\r\n      this.memoryCache.delete(key);\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ ì •ë¦¬ (ê°€ì¥ ì˜¤ë˜ëœ í•­ëª©ë¶€í„° ì œê±°)\r\n   */\r\n  pruneLocalStorageCache() {\r\n    try {\r\n      // ìºì‹œ í•­ëª© ì¶”ì¶œ ë° ì •ë ¬\r\n      const cacheItems = Object.keys(localStorage)\r\n        .filter(key => key.startsWith(this.localStoragePrefix))\r\n        .map(key => {\r\n          try {\r\n            return {\r\n              key,\r\n              value: JSON.parse(localStorage.getItem(key))\r\n            };\r\n          } catch (e) {\r\n            return { key, value: { expiry: 0 } };\r\n          }\r\n        })\r\n        .sort((a, b) => a.value.expiry - b.value.expiry);\r\n      \r\n      // ì ˆë°˜ ì œê±°\r\n      const removeCount = Math.floor(cacheItems.length / 2);\r\n      cacheItems.slice(0, removeCount).forEach(item => {\r\n        localStorage.removeItem(item.key);\r\n      });\r\n    } catch (e) {\r\n      console.error('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì˜¤ë¥˜:', e);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ê²€ìƒ‰ ì¿¼ë¦¬ì— ëŒ€í•œ ìºì‹œ í‚¤ ìƒì„±\r\n   * @param {string} type - ê²€ìƒ‰ ìœ í˜• (keyword, ai ë“±)\r\n   * @param {string} query - ê²€ìƒ‰ ì¿¼ë¦¬\r\n   * @param {Object} options - ì¶”ê°€ ì˜µì…˜\r\n   * @returns {string} - ìºì‹œ í‚¤\r\n   */\r\n  static generateKey(type, query, options = {}) {\r\n    // ê¸°ë³¸ í‚¤ ìƒì„±\r\n    let key = `${type}_${query.toLowerCase().trim()}`;\r\n    \r\n    // ì˜µì…˜ì— ë”°ë¥¸ í‚¤ ë³€í˜•\r\n    if (options) {\r\n      const optionsStr = Object.entries(options)\r\n        .filter(([_, value]) => value !== undefined)\r\n        .sort(([keyA], [keyB]) => keyA.localeCompare(keyB))\r\n        .map(([key, value]) => `${key}:${JSON.stringify(value)}`)\r\n        .join('_');\r\n      \r\n      if (optionsStr) {\r\n        key += `_${optionsStr}`;\r\n      }\r\n    }\r\n    \r\n    return key;\r\n  }\r\n  \r\n  /**\r\n   * ëª¨ë“  ìºì‹œ í‚¤ ë°˜í™˜\r\n   * @returns {Array<string>} - ëª¨ë“  ìºì‹œ í‚¤ ë°°ì—´\r\n   */\r\n  getAllKeys() {\r\n    const keys = new Set();\r\n    \r\n    // ë©”ëª¨ë¦¬ ìºì‹œ í‚¤ ì¶”ê°€\r\n    for (const key of this.memoryCache.keys()) {\r\n      keys.add(key);\r\n    }\r\n    \r\n    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ í‚¤ ì¶”ê°€\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        Object.keys(localStorage)\r\n          .filter(key => key.startsWith(this.localStoragePrefix))\r\n          .forEach(key => {\r\n            const cacheKey = key.replace(this.localStoragePrefix, '');\r\n            keys.add(cacheKey);\r\n          });\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤ ì¡°íšŒ ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n    \r\n    return Array.from(keys);\r\n  }\r\n}\r\n\r\nexport default SearchCache; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
./eslint-report.json:[{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\AiPanel.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":1,"column":92,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":99},{"ruleId":"no-unused-vars","severity":1,"message":"'API_KEY' is assigned a value but never used.","line":8,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'SERVER_URL' is assigned a value but never used.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'CUSTOM_API_ENDPOINT' is assigned a value but never used.","line":15,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":26},{"ruleId":"no-unused-vars","severity":1,"message":"'CUSTOM_API_KEY' is assigned a value but never used.","line":16,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":16,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":26,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":26,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1043,1097],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1485,1525],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2289,2329],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2417,2467],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":68,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":68,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2526,2565],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":78,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":78,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2862,2940],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":86,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":86,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3194,3237],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":89,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":89,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3322,3367],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3466,3514],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":99,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":99,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3596,3644],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":108,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":108,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3844,3911],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'inEditorCommandContext' is assigned a value but never used.","line":122,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":122,"endColumn":93},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":125,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":125,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4440,4580],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":137,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":137,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4782,4831],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":144,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":144,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5022,5060],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":148,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":148,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5195,5242],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":280,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":280,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9206,9280],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":284,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":284,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9372,9415],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":297,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":297,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[9742,9805],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":302,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":302,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9956,10027],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":308,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":308,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[10155,10197],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":311,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":311,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10239,10279],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":318,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":318,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10454,10529],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":329,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":329,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10848,10893],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":351,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":351,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11874,12010],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":358,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":358,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12231,12269],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":605,"column":17,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":1020,"endColumn":3},{"ruleId":"no-unused-vars","severity":1,"message":"'promptInput' is assigned a value but never used.","line":606,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":606,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'userInputRows' is assigned a value but never used.","line":608,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":608,"endColumn":23},{"ruleId":"no-unused-vars","severity":1,"message":"'setUserInputRows' is assigned a value but never used.","line":608,"column":25,"nodeType":"Identifier","messageId":"unusedVar","endLine":608,"endColumn":41},{"ruleId":"no-unused-vars","severity":1,"message":"'proactiveSuggestionTimeoutRef' is assigned a value but never used.","line":613,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":613,"endColumn":38},{"ruleId":"no-unused-vars","severity":1,"message":"'additionalContext' is assigned a value but never used.","line":617,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":617,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":632,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":632,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[27277,27326],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":635,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":635,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[27426,27466],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":651,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":651,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[27908,27939],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":662,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":662,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[28263,28298],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'isLoading'. Either include it or remove the dependency array.","line":670,"column":6,"nodeType":"ArrayExpression","endLine":670,"endColumn":70,"suggestions":[{"desc":"Update the dependencies array to be: [editorContext, conversation, userInput, searchRelatedDocuments, isLoading]","fix":{"range":[28453,28517],"text":"[editorContext, conversation, userInput, searchRelatedDocuments, isLoading]"}}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleInputChange' is assigned a value but never used.","line":672,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":672,"endColumn":26},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":697,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":697,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[29371,29412],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":699,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":699,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[29510,29550],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":715,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":715,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[30044,30083],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":719,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":719,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[30310,30352],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":727,"column":19,"nodeType":"MemberExpression","messageId":"unexpected","endLine":727,"endColumn":30,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[30729,30776],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":748,"column":27,"nodeType":"MemberExpression","messageId":"unexpected","endLine":748,"endColumn":38,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[31749,31796],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":783,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":783,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[33307,33340],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":799,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":799,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[33983,34020],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has unnecessary dependencies: 'editorContext' and 'onApplyAiCommand'. Either exclude them or remove the dependency array.","line":813,"column":6,"nodeType":"ArrayExpression","endLine":813,"endColumn":92,"suggestions":[{"desc":"Update the dependencies array to be: [isLoading, onDisplaySuggestion, onStructuredCommand]","fix":{"range":[34366,34452],"text":"[isLoading, onDisplaySuggestion, onStructuredCommand]"}}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":840,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":840,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[35076,35109],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":844,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":844,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[35167,35214],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'handleSuggestionAction' is assigned a value but never used.","line":851,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":851,"endColumn":31},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":887,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":887,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[36938,36998],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":889,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":889,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[37022,37051],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":892,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":892,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[37088,37125],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":58,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useCallback, useEffect, forwardRef, useImperativeHandle, useRef, useMemo } from 'react';\nimport DocumentSummaryManager from './utils/DocumentSummaryManager';\nimport DocumentSearchManager from './utils/DocumentSearchManager';\nimport './styles/AiPanel.css';\n\n// í™˜ê²½ ë³€ìˆ˜ ì²˜ë¦¬ - Jest í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ ì‚¬ìš©\nconst API_TYPE = 'claude';\nconst API_KEY = '';\nconst SERVER_URL = 'http://localhost:3001';\n\n// API ì„¤ì •\nconst CLAUDE_API_KEY = ''; // í™˜ê²½ë³€ìˆ˜ì—ì„œ API í‚¤ ê°€ì ¸ì˜¤ê¸°\nconst CLAUDE_API_URL = 'https://api.anthropic.com/v1/messages';\nconst CLAUDE_MODEL = 'claude-3-5-haiku-20241022';\nconst CUSTOM_API_ENDPOINT = 'http://localhost:3100/api/ai/command';\nconst CUSTOM_API_KEY = 'dev_key';\n\n// ë¬¸ì„œ ìš”ì•½ ê´€ë¦¬ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\nconst documentSummaryManager = new DocumentSummaryManager();\nconst documentSearchManager = new DocumentSearchManager(); // ë¬¸ì„œ ê²€ìƒ‰ ë§¤ë‹ˆì € ì¸ìŠ¤í„´ìŠ¤ ì¶”ê°€\n\n// Claude API ì‘ë‹µì„ Miki í¬ë§·ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜\nconst transformClaudeResponse = (claudeResponse) => {\n  try {\n    if (!claudeResponse || !claudeResponse.content || claudeResponse.content.length === 0) {\n      console.error('Claude API ì‘ë‹µ í˜•ì‹ ì˜¤ë¥˜:', claudeResponse);\n      return JSON.stringify({\n        isSuggestion: false,\n        isCommand: false,\n        action: \"display_text\",\n        commandType: \"error\",\n        displayText: \"Claude API ì‘ë‹µ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.\"\n      });\n    }\n\n    // Claude ì‘ë‹µì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ\n    const textContent = claudeResponse.content\n      .filter(item => item.type === 'text')\n      .map(item => item.text)\n      .join('\\n');\n\n    console.log('ì¶”ì¶œëœ í…ìŠ¤íŠ¸ ë‚´ìš©:', textContent);\n\n    // JSON ë¸”ë¡ ì¶”ì¶œ (```json ... ``` í˜•ì‹)\n    const jsonMatch = textContent.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n    \n    if (jsonMatch && jsonMatch[1]) {\n      try {\n        // ë§ˆì§€ë§‰ ì‹œë„: JSON.parse ì‹¤íŒ¨ ì‹œ ì•ˆì „í•œ ëŒ€ì•ˆ ì‚¬ìš©\n        try {\n          // eval() ëŒ€ì‹  ì•ˆì „í•œ JSON íŒŒì‹± ì‹œë„\n          // ê¸°ë³¸ì ì¸ JSON ìˆ˜ì •ì„ í†µí•´ íŒŒì‹± ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê¸°\n          let cleanJson = jsonMatch[1].trim();\n          \n          // ì¼ë°˜ì ì¸ JavaScript ê°ì²´ í‘œê¸°ë²•ì„ JSONìœ¼ë¡œ ë³€í™˜\n          cleanJson = cleanJson\n            .replace(/([{,]\\s*)([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*:/g, '$1\"$2\":') // í‚¤ë¥¼ ë”°ì˜´í‘œë¡œ ê°ì‹¸ê¸°\n            .replace(/:\\s*'([^']*)'/g, ': \"$1\"') // ë‹¨ì¼ ë”°ì˜´í‘œë¥¼ ì´ì¤‘ ë”°ì˜´í‘œë¡œ\n            .replace(/:\\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\\s*([,}])/g, ': \"$1\"$2'); // ê°’ì„ ë”°ì˜´í‘œë¡œ ê°ì‹¸ê¸°\n          \n          const jsonObj = JSON.parse(cleanJson);\n          console.log('ì•ˆì „í•œ JSON íŒŒì‹± ì„±ê³µ:', jsonObj);\n          return JSON.stringify(jsonObj);\n        } catch (safeParseError) {\n          console.error('ì•ˆì „í•œ JSON íŒŒì‹±ë„ ì‹¤íŒ¨:', safeParseError);\n          \n          // ëª¨ë“  íŒŒì‹±ì´ ì‹¤íŒ¨í•˜ë©´ í…ìŠ¤íŠ¸ ì‘ë‹µìœ¼ë¡œ ì²˜ë¦¬\n          console.log('JSON íŒŒì‹± ì‹¤íŒ¨, í…ìŠ¤íŠ¸ ì‘ë‹µìœ¼ë¡œ ì²˜ë¦¬');\n          return JSON.stringify({\n            isSuggestion: false,\n            isCommand: false,\n            action: \"display_text\",\n            commandType: \"info\",\n            displayText: jsonMatch[1].trim() // ì›ë³¸ JSON ë¬¸ìì—´ì„ í…ìŠ¤íŠ¸ë¡œ í‘œì‹œ\n          });\n        }\n      } catch (parseError) {\n        console.error('Claude ì‘ë‹µì—ì„œ JSON íŒŒì‹± ì‹¤íŒ¨:', parseError, 'ì›ë³¸ í…ìŠ¤íŠ¸:', jsonMatch[1]);\n        \n        // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ë‹¤ë¥¸ í˜•íƒœì˜ JSONì„ ì°¾ì•„ë´„\n        const altJsonMatch = textContent.match(/{[\\s\\S]*}/);\n        if (altJsonMatch) {\n          try {\n            // ì¤‘ê´„í˜¸ ë‚´ë¶€ ë‚´ìš©ë§Œ ì¶”ì¶œí•´ì„œ íŒŒì‹± ì‹œë„\n            const jsonContent = altJsonMatch[0];\n            console.log('ëŒ€ì²´ JSON í˜•ì‹ ì°¾ìŒ:', jsonContent);\n            \n            const altParsedJson = JSON.parse(jsonContent);\n            console.log('ëŒ€ì²´ JSON íŒŒì‹± ì„±ê³µ:', altParsedJson);\n            return JSON.stringify(altParsedJson);\n          } catch (altParseError) {\n            console.error('ëŒ€ì²´ JSON íŒŒì‹±ë„ ì‹¤íŒ¨:', altParseError);\n          }\n        }\n      }\n    }\n    \n    // JSON íŒŒì‹±ì´ ëª¨ë‘ ì‹¤íŒ¨í•˜ë©´ í…ìŠ¤íŠ¸ ì‘ë‹µìœ¼ë¡œ ì²˜ë¦¬\n    console.log('JSON í˜•ì‹ì„ ì°¾ì„ ìˆ˜ ì—†ì–´ í…ìŠ¤íŠ¸ ì‘ë‹µìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.');\n    return JSON.stringify({\n      isSuggestion: false,\n      isCommand: false,\n      action: \"display_text\",\n      commandType: \"info\",\n      displayText: textContent\n    });\n  } catch (error) {\n    console.error('Claude ì‘ë‹µ ë³€í™˜ ì˜¤ë¥˜:', error, 'ì›ë³¸ ì‘ë‹µ:', claudeResponse);\n    return JSON.stringify({\n      isSuggestion: false,\n      isCommand: false,\n      action: \"display_text\",\n      commandType: \"error\",\n      displayText: \"AI ì‘ë‹µ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\"\n    });\n  }\n};\n\n// AI APIì™€ í†µì‹ í•˜ì—¬ ì‘ë‹µì„ ë°›ì•„ì˜¤ëŠ” í•¨ìˆ˜\nconst getAiResponse = async (requestData, editorContext, isProactiveSuggestionCheck = false) => {\n  const { fullContent, selection } = editorContext;\n  const { text: userCommand, type: commandTypeSource, commandContext: inEditorCommandContext } = requestData || {};\n  \n  // í™˜ê²½ ë³€ìˆ˜ ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\n  console.log('API í™˜ê²½ ì„¤ì •:', {\n    API_TYPE,\n    CLAUDE_API_KEY: CLAUDE_API_KEY ? 'ì„¤ì •ë¨' : 'ì„¤ì •ë˜ì§€ ì•ŠìŒ',\n    CLAUDE_API_URL,\n    CLAUDE_MODEL\n  });\n  \n  // ê°œë°œ ëª¨ë“œë‚˜ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œì—ì„œëŠ” ê°€ì§œ ì‘ë‹µ ë°˜í™˜ - ì¡°ê±´ ìˆ˜ì •\n  // const useSimulation = true; // ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ í•­ìƒ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ ì‚¬ìš©\n  const useSimulation = false; // ë°±ì—”ë“œ í”„ë¡ì‹œ ì„œë²„ë¥¼ í†µí•´ ì‹¤ì œ Claude API í˜¸ì¶œ\n  \n  if (useSimulation) {\n    console.log('ì‹œë®¬ë ˆì´ì…˜ ì‘ë‹µì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ëª…ë ¹:', userCommand);\n    return await simulateAiResponse(requestData, editorContext, isProactiveSuggestionCheck);\n  }\n  \n  // Claude APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°\n  if (API_TYPE === 'claude' && CLAUDE_API_KEY) {\n    try {\n      console.log('Claude APIë¡œ ìš”ì²­ ì „ì†¡ ì¤‘...');\n      \n      // ì„ ì œì  ì œì•ˆ ì²´í¬ ì‹œ ë³µì¡í•œ ì‘ì—…ì€ ê±´ë„ˆë›°ê¸°\n      if (isProactiveSuggestionCheck && (!fullContent || fullContent.length < 10)) {\n        console.log('ì„ ì œì  ì œì•ˆ ì²´í¬: ì»¨í…ìŠ¤íŠ¸ê°€ ì¶©ë¶„í•˜ì§€ ì•Šì•„ ê±´ë„ˆëœë‹ˆë‹¤.');\n        return null;\n      }\n      \n      // ë¬¸ì„œ ìš”ì•½ ì²˜ë¦¬ (í† í° ìµœì í™”)\n      let contextDescription = \"\";\n      let documentSummary = null;\n      \n      if (fullContent) {\n        // ë¬¸ì„œ ID ìƒì„± (ê°„ë‹¨í•˜ê²Œ íƒ€ì„ìŠ¤íƒ¬í”„ ì‚¬ìš©)\n        const docId = `doc_${Date.now()}`;\n        \n        // ë¬¸ì„œ ìš”ì•½ ì²˜ë¦¬\n        documentSummary = documentSummaryManager.processDocument(docId, fullContent);\n        \n        if (documentSummary) {\n          // ìš”ì•½ëœ ì •ë³´ ì‚¬ìš©\n          contextDescription += \"í˜„ì¬ ë¬¸ì„œ êµ¬ì¡°:\\n\" + documentSummary.summary + \"\\n\\n\";\n          \n          // ì„ íƒ ì˜ì—­ ì£¼ë³€ ì»¨í…ìŠ¤íŠ¸ë§Œ ìƒì„¸í•˜ê²Œ ì œê³µ\n          if (selection && selection.cursor) {\n            const lineNumber = selection.cursor[0];\n            const context = documentSummaryManager.getContextAroundLine(docId, lineNumber, 10);\n            \n            if (context) {\n              contextDescription += `í˜„ì¬ ì»¤ì„œê°€ ìœ„ì¹˜í•œ \"${context.section}\" ì„¹ì…˜ ë‚´ìš©:\\n`;\n              contextDescription += \"```\\n\" + context.context + \"\\n```\\n\\n\";\n            } else {\n              // ì»¨í…ìŠ¤íŠ¸ë¥¼ ì°¾ì§€ ëª»í•œ ê²½ìš° ì „ì²´ ë¬¸ì„œì˜ ì¼ë¶€ë§Œ ì œê³µ\n              contextDescription += \"í˜„ì¬ ë¬¸ì„œëŠ” \" + fullContent.length + \"ì ë¶„ëŸ‰ì…ë‹ˆë‹¤.\\n\";\n              if (fullContent.length > 1000) {\n                contextDescription += \"ë¬¸ì„œ ë‚´ìš© ì¼ë¶€:\\n```\\n\" + fullContent.substring(0, 1000) + \"...\\n```\\n\\n\";\n              } else {\n        contextDescription += \"ë¬¸ì„œ ë‚´ìš©:\\n```\\n\" + fullContent + \"\\n```\\n\\n\";\n      }\n            }\n          } else {\n            // ì»¤ì„œ ì •ë³´ê°€ ì—†ëŠ” ê²½ìš° ì „ì²´ ë¬¸ì„œ ì •ë³´ ìš”ì•½ë§Œ ì œê³µ\n            contextDescription += \"í˜„ì¬ ë¬¸ì„œëŠ” \" + fullContent.length + \"ì ë¶„ëŸ‰ì…ë‹ˆë‹¤.\\n\";\n          }\n        } else {\n          // ìš”ì•½ ì‹¤íŒ¨ ì‹œ ì›ë˜ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬\n          contextDescription += \"í˜„ì¬ ë¬¸ì„œëŠ” \" + fullContent.length + \"ì ë¶„ëŸ‰ì…ë‹ˆë‹¤.\\n\";\n          \n          // ë¬¸ì„œê°€ ë„ˆë¬´ ê¸¸ë©´ ì¼ë¶€ë§Œ ì‚¬ìš©\n          if (fullContent.length > 3000) {\n            contextDescription += \"ë¬¸ì„œ ë‚´ìš© ì¼ë¶€:\\n```\\n\" + fullContent.substring(0, 3000) + \"...\\n```\\n\\n\";\n          } else {\n            contextDescription += \"ë¬¸ì„œ ë‚´ìš©:\\n```\\n\" + fullContent + \"\\n```\\n\\n\";\n          }\n        }\n      }\n      \n      // ì„ íƒ ì˜ì—­ ì •ë³´ ì¶”ê°€\n      if (selection && selection.text) {\n        const selectionPreview = selection.text.length > 100 \n          ? selection.text.substring(0, 100) + \"...\" \n          : selection.text;\n        contextDescription += \"í˜„ì¬ ì„ íƒëœ í…ìŠ¤íŠ¸: \\\"\" + selectionPreview + \"\\\"\\n\\n\";\n      } else if (selection && selection.cursor) {\n        contextDescription += \"ì»¤ì„œ ìœ„ì¹˜: \" + (selection.cursor[0]+1) + \"ë²ˆì§¸ ì¤„, \" + selection.cursor[1] + \"ë²ˆì§¸ ë¬¸ì\\n\\n\";\n      }\n      \n      // ëª…ë ¹ ì •ë³´\n      const commandInfo = (userCommand || '(ì„ ì œì  ì œì•ˆ ìš”ì²­)');\n      const commandSource = (commandTypeSource || 'ì§ì ‘ ì…ë ¥');\n      \n      // ì„ ì œì  ì œì•ˆ ì •ë³´\n      const proactiveInfo = isProactiveSuggestionCheck\n        ? \"ì´ê²ƒì€ ì„ ì œì  ì œì•ˆ ìš”ì²­ì…ë‹ˆë‹¤. ë¬¸ì„œ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë³´ê³  ë„ì›€ì´ ë ë§Œí•œ ì œì•ˆì´ ìˆìœ¼ë©´ ì œì•ˆí•˜ê³ , ì—†ìœ¼ë©´ nullë¡œ ì‘ë‹µí•˜ì„¸ìš”.\"\n        : \"\";\n      \n      // ì „ì²´ í”„ë¡¬í”„íŠ¸ êµ¬ì„±\n      const prompt = `ë‹¹ì‹ ì€ ë§ˆí¬ë‹¤ìš´ ìœ„í‚¤ ì—ë””í„° Mikiì˜ AI ë™ë£Œì…ë‹ˆë‹¤. ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ ë‹¤ìŒ ë‘ ê°€ì§€ ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:\n\n1. ê¸€ì“°ê¸° ë™ë£Œ: ì‚¬ìš©ìì™€ ëŒ€í™”í•˜ë©° ê¸€ì„ í•¨ê»˜ ë°œì „ì‹œí‚µë‹ˆë‹¤.\n2. ë¬¸ì„œ ê´€ë¦¬ì: ë¬¸ì„œ ê²€ìƒ‰, ë§í¬ ìƒì„±, ë§ˆí¬ë‹¤ìš´ ì„œì‹ ë“±ì„ ì§€ì›í•©ë‹ˆë‹¤.\n\nì‘ë‹µ ê·œì¹™:\n- ì‚¬ìš©ì ìš”ì²­ì´ ë¬¸ì„œ ë§í¬/ê²€ìƒ‰ ê´€ë ¨ì´ë©´ â†’ insert_markdown_link ì•¡ì…˜ ìƒì„±\n- ì‚¬ìš©ì ìš”ì²­ì´ ì¼ë°˜ ëŒ€í™”/ê¸€ í™•ì¥ì´ë©´ â†’ insert_content ì•¡ì…˜ ìƒì„±\n- ì‚¬ìš©ì ìš”ì²­ì´ ë§ˆí¬ë‹¤ìš´ ì„œì‹ ê´€ë ¨ì´ë©´ â†’ í•´ë‹¹ ì„œì‹ ì•¡ì…˜ ìƒì„±\n\nì»¨í…ìŠ¤íŠ¸ ì •ë³´:\n${contextDescription}\n\ní˜„ì¬ ëª…ë ¹ (${commandSource}):\n${commandInfo}\n\n${proactiveInfo}\n\nJSON ì‘ë‹µ í˜•ì‹:\n\\`\\`\\`json\n{\n  \"isSuggestion\": true,\n  \"suggestionType\": \"[ì•¡ì…˜ ìœ í˜•]\",\n  \"displayText\": \"[ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ì œì•ˆ í…ìŠ¤íŠ¸]\",\n  \"actions\": [\n    {\n      \"actionType\": \"[ì•¡ì…˜ íƒ€ì…]\",\n      \"range\": \"cursor\",\n      \"content\": \"[ì‚½ì…í•  ë‚´ìš©]\"\n    }\n  ]\n}\n\\`\\`\\`\n\nì•¡ì…˜ íƒ€ì… ëª©ë¡:\n- insert_content: ì¼ë°˜ í…ìŠ¤íŠ¸ ì‚½ì… (ëŒ€í™”/ê¸€ í™•ì¥)\n- insert_markdown_link: ë§ˆí¬ë‹¤ìš´ ë§í¬ ì‚½ì…\n- format_bold, format_italic ë“±: ë§ˆí¬ë‹¤ìš´ ì„œì‹\n\nì¤‘ìš”: ë°˜ë“œì‹œ ìœ„ JSON í˜•ì‹ìœ¼ë¡œë§Œ ì‘ë‹µí•˜ì„¸ìš”. ë‹¤ë¥¸ ì„¤ëª…ì´ë‚˜ í…ìŠ¤íŠ¸ëŠ” í¬í•¨í•˜ì§€ ë§ˆì„¸ìš”.`;\n      \n      // Claude API ìš”ì²­ êµ¬ì„±\n      const claudeRequest = {\n        model: CLAUDE_MODEL,\n        messages: [\n          {\n            role: \"user\",\n            content: [\n              {\n                type: \"text\",\n                text: prompt\n              }\n            ]\n          }\n        ],\n        max_tokens: 2000,\n        temperature: 0.1,\n      };\n\n      console.log('Claude API ìš”ì²­ ë°ì´í„°:', JSON.stringify(claudeRequest, null, 2));\n\n      // ë°±ì—”ë“œ API ì—”ë“œí¬ì¸íŠ¸\n      const backendUrl = 'http://localhost:3003/api/claude';\n      console.log('ë°±ì—”ë“œ API ìš”ì²­ URL:', backendUrl);\n\n      // ë°±ì—”ë“œ í”„ë¡ì‹œ ì„œë²„ë¥¼ í†µí•´ API í˜¸ì¶œ\n      const response = await fetch(backendUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(claudeRequest),\n      });\n      \n      if (!response.ok) {\n        const errorText = await response.text();\n        console.error(\"Claude API ì‘ë‹µ ì˜¤ë¥˜:\", response.status, errorText);\n        throw new Error(`Claude API ì‘ë‹µ ì˜¤ë¥˜: ${response.status}, ${errorText}`);\n      }\n      \n      const responseData = await response.json();\n      console.log('Claude ì‘ë‹µ ìˆ˜ì‹  ì™„ë£Œ:', JSON.stringify(responseData, null, 2));\n      \n      // Claude ì‘ë‹µì„ Miki í¬ë§·ìœ¼ë¡œ ë³€í™˜\n      return transformClaudeResponse(responseData);\n      \n    } catch (error) {\n      console.error('Claude API í†µì‹  ì˜¤ë¥˜:', error);\n      \n      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ í´ë°±\n      console.log('API ì˜¤ë¥˜ ë°œìƒ, ì‹œë®¬ë ˆì´ì…˜ ì‘ë‹µìœ¼ë¡œ í´ë°±');\n      return await simulateAiResponse(requestData, editorContext, isProactiveSuggestionCheck);\n    }\n  }\n  \n  // Claude API ì„¤ì •ì´ ì—†ëŠ” ê²½ìš° ì‹œë®¬ë ˆì´ì…˜ìœ¼ë¡œ ëŒ€ì²´\n  if (!CLAUDE_API_KEY) {\n    console.log('Claude API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í™˜ê²½ ë³€ìˆ˜ì— API í‚¤ë¥¼ ì„¤ì •í•˜ê±°ë‚˜ ì½”ë“œì— ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”.');\n    // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ í‘œì‹œ\n    return JSON.stringify({\n      isSuggestion: false,\n      isCommand: false,\n      action: \"display_text\",\n      commandType: \"error\",\n      displayText: \"Claude API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Miki Editorë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ Claude API í‚¤ë¥¼ ì„¤ì •í•´ì£¼ì„¸ìš”. AiPanel.jsx íŒŒì¼ì˜ CLAUDE_API_KEY ë³€ìˆ˜ì— API í‚¤ë¥¼ ì§ì ‘ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\n    });\n  }\n  \n  console.log('Claude API ì„¤ì • í™•ì¸ í•„ìš”, ì‹œë®¬ë ˆì´ì…˜ ì‚¬ìš©');\n  return await simulateAiResponse(requestData, editorContext, isProactiveSuggestionCheck);\n};\n\n// ê¸°ì¡´ ì‹œë®¬ë ˆì´ì…˜ ì½”ë“œ ìœ ì§€\nconst simulateAiResponse = async (requestData, editorContext, isProactiveSuggestionCheck = false) => {\n  const { fullContent, selection } = editorContext;\n  const { text: userCommand, type: commandTypeSource, commandContext: inEditorCommandContext } = requestData || {};\n\n  let contextSummary = \"\";\n  if (fullContent) {\n    contextSummary += `Document is ${fullContent.length} chars long.`;\n  }\n  if (selection && selection.text) {\n    contextSummary += ` Selected: \"${selection.text.substring(0, 50)}...\".`;\n  } else if (selection && selection.cursor) {\n    contextSummary += ` Cursor at line ${selection.cursor[0]}, char ${selection.cursor[1]}.`;\n  }\n  if (inEditorCommandContext && inEditorCommandContext.fullLineText) {\n    contextSummary += ` Command issued on line ${inEditorCommandContext.lineNumber}: \"${inEditorCommandContext.fullLineText.trim()}\".`;\n  }\n\n  console.log(`ì‹œë®¬ë ˆì´ì…˜ AI: ëª…ë ¹ \"${userCommand}\" (ìœ í˜•: ${commandTypeSource}, ì„ ì œì  ì²´í¬: ${isProactiveSuggestionCheck}). ì»¨í…ìŠ¤íŠ¸: ${contextSummary}`);\n  \n  // ì„ ì œì  ì²´í¬ê°€ ì•„ë‹Œ ê²½ìš° ë” ê¸´ ì§€ì—° ì‹œê°„ìœ¼ë¡œ ì‹¤ì œ API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜\n  await new Promise(resolve => setTimeout(resolve, isProactiveSuggestionCheck ? 700 : 1300));\n\n  // ëª…ë ¹ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ ì‘ë‹µ\n  if (!userCommand && isProactiveSuggestionCheck) {\n    console.log('ì„ ì œì  ì œì•ˆ ì²´í¬ì´ì§€ë§Œ ì œì•ˆí•  ë‚´ìš© ì—†ìŒ');\n    return null;\n  }\n\n  const lowerCommand = userCommand ? userCommand.toLowerCase() : \"\";\n  const suggestionId = `sugg_${Date.now()}_${Math.random().toString(36).substring(2, 7)}`;\n\n  // ì¼ë°˜ í…ìŠ¤íŠ¸ ì‘ë‹µ ëª…ë ¹ ì²˜ë¦¬\n  if (lowerCommand.startsWith('ì•ˆë…•') || \n      lowerCommand.includes('ë°˜ê°€ì›Œ') || \n      lowerCommand.includes('hello') || \n      lowerCommand.includes('hi')) {\n    return JSON.stringify({\n      isSuggestion: false,\n      isCommand: false,\n      action: \"display_text\",\n      commandType: \"info\",\n      displayText: `ì•ˆë…•í•˜ì„¸ìš”! Miki Editorì˜ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤. ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?`\n    });\n  }\n  \n  // ì—ë””í„° ëª…ë ¹ì–´ê°€ ì•„ë‹Œ ì¼ë°˜ ì§ˆë¬¸ìœ¼ë¡œ ë³´ì´ëŠ” ê²½ìš°\n  if (lowerCommand.endsWith('?') || \n      lowerCommand.endsWith('ì„ê¹Œìš”') || \n      lowerCommand.endsWith('ì¼ê¹Œìš”') || \n      lowerCommand.endsWith('ì¸ê°€ìš”') ||\n      lowerCommand.startsWith('ì™œ') ||\n      lowerCommand.startsWith('ì–´ë–»ê²Œ') ||\n      lowerCommand.startsWith('ë¬´ì—‡')) {\n    return JSON.stringify({\n      isSuggestion: false,\n      isCommand: false,\n      action: \"display_text\",\n      commandType: \"info\",\n      displayText: `ì§ˆë¬¸í•˜ì‹  \"${userCommand}\"ì— ê´€í•´ì„œëŠ”, ì—ë””í„° ê¸°ëŠ¥ì´ ì•„ë‹ˆë¼ ì¼ë°˜ì ì¸ ì •ë³´ë¥¼ ìš”ì²­í•˜ì‹  ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì €ëŠ” í˜„ì¬ ì—ë””í„° ë‚´ìš©ì„ ìˆ˜ì •í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì— ì¤‘ì ì„ ë‘ê³  ìˆìŠµë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ í˜•ì‹ ì§€ì •ì´ë‚˜ ë¬¸ì„œ êµ¬ì¡°í™”ì— ê´€í•œ ë„ì›€ì´ í•„ìš”í•˜ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”.`\n    });\n  }\n\n  const getTargetRange = () => {\n    if (selection && selection.range && selection.text) return selection.range;\n    if (inEditorCommandContext && typeof inEditorCommandContext.lineNumber === 'number') {\n        const lineText = inEditorCommandContext.fullLineText;\n        // For Toast UI, line numbers are 1-based, array indices are 0-based for range.\n        // Assuming lineNumber is 1-based from editor, convert to 0-based for range.\n        const zeroBasedLine = inEditorCommandContext.lineNumber -1; \n        return { \n            from: [zeroBasedLine, 0], \n            to: [zeroBasedLine, lineText ? lineText.length : 0]\n        };\n    }\n    return selection?.range || null; // [[line, char], [line, char]]\n  };\n  const targetRange = getTargetRange();\n  const targetTextForCommand = selection?.text || (inEditorCommandContext?.fullLineText ? inEditorCommandContext.fullLineText.trim() : \"\");\n\n  // Helper to create the 'actions' part of the suggestion, or a direct command if needed.\n  const createAction = (actionType, commandType, content = null, customRange = null, additionalProps = {}) => {\n    return {\n      actionId: `act_${Date.now()}_${Math.random().toString(36).substring(2, 7)}`,\n      actionType: actionType,\n      commandType: commandType,\n      range: customRange || targetRange,\n      content: content,\n      targetText: targetTextForCommand,\n      ...additionalProps\n    };\n  };\n\n  // Helper to create the full suggestion JSON\n  const createSuggestionResponse = (suggestionType, displayText, actions, userCmd = userCommand, src = commandTypeSource) => {\n    return JSON.stringify({\n      isSuggestion: true,\n      suggestionId: suggestionId,\n      suggestionType: suggestionType,\n      displayText: displayText,\n      userCommand: userCmd,\n      source: src || (inEditorCommandContext ? \"user_command_editor\" : \"user_command_panel\"),\n      actions: Array.isArray(actions) ? actions : [actions],\n      confidenceScore: 0.9\n    });\n  };\n\n  // --- Proactive Suggestion Logic (isProactiveSuggestionCheck = true) ---\n  if (isProactiveSuggestionCheck) {\n    const lines = fullContent ? fullContent.split('\\n') : [];\n    if (lines.length > 15 && !fullContent.match(/^#\\s.+/m) && !fullContent.match(/^title:/im)) {\n      return createSuggestionResponse(\n        \"proactive_add_title\",\n        \"This document is getting quite long. Would you like me to suggest a title based on the content?\",\n        createAction(\"generate_title\", \"title_generation\", \"suggest a title for this document\", null, { targetText: fullContent }),\n        null, // No user command for proactive\n        \"proactive_ai_pattern_analysis\"\n      );\n    }\n    if (fullContent && fullContent.split('\\n').length > 20 && !fullContent.toLowerCase().includes(\"table of contents\") && fullContent.match(/^(##|###)\\s.+/gm)) {\n      return createSuggestionResponse(\n        \"proactive_add_toc\",\n        \"I see several headings. Would you like to add a Table of Contents?\",\n        createAction(\"create_toc\", \"toc\", fullContent),\n        null,\n        \"proactive_ai_pattern_analysis\"\n      );\n    }\n    const simpleListItems = lines.filter(line => line.trim().startsWith(\"- \") && !line.trim().startsWith(\"- [\"));\n    if (simpleListItems.length >= 3) {\n      return createSuggestionResponse(\n        \"proactive_convert_to_checklist\",\n        \"I see a list here. Would you like to convert it to a checklist (task list)?\",\n        createAction(\"convert_list\", \"taskList\", null, \"current_list_range\"), // Placeholder for actual range detection\n        null,\n        \"proactive_ai_pattern_analysis\"\n      );\n    }\n    const longParagraphs = lines.filter(line => line.length > 300 && !line.match(/^#+\\s/));\n    if (longParagraphs.length > 0) {\n        return createSuggestionResponse(\n            \"proactive_add_subheadings\",\n            \"Some paragraphs seem quite long. Would you like me to try and add subheadings to break them up?\",\n            createAction(\"generate_subheadings\", \"subheading_suggestion\", fullContent),\n            null,\n            \"proactive_ai_pattern_analysis\"\n        );\n    }\n    return null; // No proactive suggestion\n  }\n\n  // --- User Command Processing Logic (all become suggestions now) ---\n  if (lowerCommand.includes(\"bold\")) {\n    return createSuggestionResponse(\"format_bold\", `Format \"${targetTextForCommand || 'selection'}\" as bold?`, createAction(\"apply_style\", \"bold\"));\n  } else if (lowerCommand.includes(\"italic\")) {\n    return createSuggestionResponse(\"format_italic\", `Format \"${targetTextForCommand || 'selection'}\" as italic?`, createAction(\"apply_style\", \"italic\"));\n  } else if (lowerCommand.includes(\"strike\")) {\n    return createSuggestionResponse(\"format_strike\", `Format \"${targetTextForCommand || 'selection'}\" with strikethrough?`, createAction(\"apply_style\", \"strike\"));\n  } else if (lowerCommand.includes(\"inline code\")) {\n    return createSuggestionResponse(\"format_inline_code\", `Format \"${targetTextForCommand || 'selection'}\" as inline code?`, createAction(\"apply_style\", \"code\"));\n  }\n\n  if (lowerCommand.startsWith(\"insert \")) {\n    const contentToInsert = userCommand.substring(\"insert \".length).trim();\n    return createSuggestionResponse(\"insert_text\", `Insert \"${contentToInsert.substring(0,30)}...\"?`, createAction(\"insert_content\", \"text\", contentToInsert));\n  }\n  if (lowerCommand.startsWith(\"replace this with \") || lowerCommand.startsWith(\"replace selection with \")) {\n    const contentToReplaceWith = userCommand.substring(userCommand.indexOf(\" with \") + \" with \".length).trim();\n    return createSuggestionResponse(\"replace_text\", `Replace \"${targetTextForCommand || 'selection'}\" with \"${contentToReplaceWith.substring(0,30)}...\"?`, createAction(\"replace_content\", \"text\", contentToReplaceWith, targetRange));\n  }\n  if (lowerCommand.startsWith(\"change this line to \")) {\n    const newLineContent = userCommand.substring(\"change this line to \".length).trim();\n    if (inEditorCommandContext && typeof inEditorCommandContext.lineNumber === 'number'){\n        return createSuggestionResponse(\"replace_line_text\", `Change line ${inEditorCommandContext.lineNumber} to \"${newLineContent.substring(0,30)}...\"?`, createAction(\"replace_line\", \"text\", newLineContent, null, { lineNumber: inEditorCommandContext.lineNumber }));\n    }\n  }\n\n  const headingMatch = lowerCommand.match(/(?:make this|create|set as) (heading|h)(\\d)(?:\\s*:\\s*(.*))?/i);\n  if (headingMatch) {\n    const level = parseInt(headingMatch[2], 10);\n    const headingText = headingMatch[3] ? headingMatch[3].trim() : (targetTextForCommand || \"New Heading\");\n    if (level >= 1 && level <= 6) {\n      const headingContent = `${\"#\".repeat(level)} ${headingText}`;\n      let actionType = \"insert_content\";\n      let displayText = `Insert H${level}: \"${headingText}\"?`;\n      if (targetRange && targetRange.from[0] === targetRange.to[0] && targetTextForCommand) {\n         actionType = \"replace_line\";\n         displayText = `Change line to H${level}: \"${headingText}\"?`;\n         return createSuggestionResponse(`format_heading_${level}`, displayText, createAction(actionType, `h${level}`, headingContent, null, { lineNumber: targetRange.from[0] }));\n      } else {\n         return createSuggestionResponse(`create_heading_${level}`, displayText, createAction(actionType, `h${level}`, headingContent));\n      }\n    }\n  }\n\n  const linkMatch = lowerCommand.match(/(?:link this to|create link to|make this a link to) (https?:\\/\\/[^\\s]+)(?: with text (.*))?/i);\n  const internalLinkMatch = lowerCommand.match(/(?:link this to note|create internal link to) ([\\w\\s-]+)(?: with text (.*))?/i);\n  if (linkMatch) {\n    const url = linkMatch[1];\n    const linkText = linkMatch[2] || targetTextForCommand || \"link\";\n    return createSuggestionResponse(\"create_external_link\", `Create link to ${url} with text \"${linkText}\"?`, createAction(\"create_link\", \"external\", url, null, { linkText: linkText }));\n  } else if (internalLinkMatch) {\n    const noteName = internalLinkMatch[1];\n    const linkText = internalLinkMatch[2] || targetTextForCommand || noteName;\n    return createSuggestionResponse(\"create_internal_link\", `Create internal link to note \"${noteName}\" with text \"${linkText}\"?`, createAction(\"create_link\", \"internal\", slugify(noteName) + \".md\", null, { linkText: linkText, noteSlug: noteName }));\n  }\n\n  const listMatch = lowerCommand.match(/(?:create|make) (an? )?(ordered|numbered|bullet|unordered|task|check) list(?: with items:? (.*))?/i);\n  if (listMatch) {\n    let listTypeCmd = \"ul\";\n    if (listMatch[2].includes(\"order\") || listMatch[2].includes(\"number\")) listTypeCmd = \"ol\";\n    if (listMatch[2].includes(\"task\") || listMatch[2].includes(\"check\")) listTypeCmd = \"taskList\";\n    let items = listMatch[3] ? listMatch[3].split(/, | and /).map(item => item.trim()) : [\"Item 1\", \"Item 2\"];\n    if (targetTextForCommand && targetTextForCommand.includes('\\n')) {\n        items = targetTextForCommand.split('\\n').map(s => s.trim()).filter(s => s);\n    } else if (targetTextForCommand && !listMatch[3]) {\n        items = [targetTextForCommand.trim()];\n    }\n    return createSuggestionResponse(`create_list_${listTypeCmd}`, `Create ${listMatch[2]} list with items: ${items.join(', ').substring(0,50)}...?`, createAction(\"create_list\", listTypeCmd, items));\n  }\n  if (lowerCommand === \"convert current list to checklist\") {\n    return createSuggestionResponse(\"convert_to_checklist\", \"Convert current list to checklist?\", createAction(\"convert_list\", \"taskList\", null, targetRange || \"current_list_range\"));\n  }\n\n  const tableMatch = lowerCommand.match(/(?:create|make) a table(?: with (\\d+) columns? and (\\d+) rows?)?(?: with headers:? (.*))?/i);\n  if (tableMatch) {\n    const cols = tableMatch[1] ? parseInt(tableMatch[1], 10) : (tableMatch[3] ? tableMatch[3].split(/, | and /).length : 2);\n    const rows = tableMatch[2] ? parseInt(tableMatch[2], 10) : 2;\n    const headers = tableMatch[3] ? tableMatch[3].split(/, | and /).map(h => h.trim()) : Array(cols).fill(null).map((_, i) => `Header ${i + 1}`);\n    return createSuggestionResponse(\"create_table\", `Create a table with ${cols} cols, ${rows} rows, and headers: ${headers.join(', ')}?`, createAction(\"create_table\", \"table\", { rows: rows, cols: Math.max(cols, headers.length), headers: headers }));\n  }\n\n  const codeBlockMatch = lowerCommand.match(/(?:create|make) a (javascript|python|java|c\\+\\+|c#|ruby|php|go|rust|css|html|shell|bash|text)? code block(?: with content:? ([\\s\\S]*))?/i);\n  if (codeBlockMatch) {\n    const language = codeBlockMatch[1] || \"\";\n    const codeContent = codeBlockMatch[2] || targetTextForCommand || \"// your code here\";\n    return createSuggestionResponse(\"insert_code_block\", `Insert ${language || 'plain text'} code block?`, createAction(\"insert_code_block\", language || \"plaintext\", codeContent));\n  }\n  \n  if (lowerCommand.includes(\"make this a quote\") || lowerCommand.includes(\"blockquote\")) {\n    return createSuggestionResponse(\"format_quote\", `Format \"${targetTextForCommand || 'selection'}\" as a quote?`, createAction(\"apply_style\", \"quote\"));\n  }\n\n  const footnoteMatch = lowerCommand.match(/(?:add|create|insert) footnote(?: with text:? (.*))?/i);\n  if (footnoteMatch) {\n    const footnoteText = footnoteMatch[1] || \"Your footnote here\";\n    const refText = targetTextForCommand || \"reference\";\n    return createSuggestionResponse(\"insert_footnote\", `Insert footnote for \"${refText}\" with text \"${footnoteText.substring(0,30)}...\"?`, createAction(\"insert_footnote\", \"footnote\", footnoteText, null, { refText: refText }));\n  }\n\n  if (lowerCommand.includes(\"create table of contents\") || lowerCommand.includes(\"add toc\")) {\n    return createSuggestionResponse(\"create_toc_suggestion\", \"Create a Table of Contents for this document?\", createAction(\"create_toc\", \"toc\", fullContent));\n  }\n  \n  // Fallback for unhandled commands - now also a suggestion, but maybe a less confident one or just info.\n  // For now, let's make it a non-actionable info display via the old mechanism if no clear suggestion can be made.\n  return JSON.stringify({\n    isSuggestion: false, // This is not a suggestion to act upon, but info to display\n    isCommand: false,    // And not a direct command either\n    action: \"display_text\", // Tells AiPanel to just display this message\n    commandType: \"info\",\n    displayText: `I received your command: \"${userCommand}\". I'm not sure how to turn that into a specific suggestion right now. How can I help you with Markdown formatting or content generation?`,\n    targetText: userCommand\n  });\n};\n\nconst slugify = (str) =>\n  str.toLowerCase()\n     .trim()\n     .replace(/[\\s\\W-]+/g, '-')\n     .replace(/^-+|-+$/g, '');\n\nconst AiPanel = forwardRef(({ editorContext, onApplyAiCommand, onDisplaySuggestion, onStructuredCommand }, ref) => {\n  const [promptInput, setPromptInput] = useState(''); \n  const [userInput, setUserInput] = useState('');\n  const [userInputRows, setUserInputRows] = useState(3);\n  const userInputRef = useRef(null);\n  const [conversation, setConversation] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const conversationEndRef = useRef(null);\n  const proactiveSuggestionTimeoutRef = useRef(null);\n  const [relatedDocuments, setRelatedDocuments] = useState([]);\n  const [showRelatedDocuments, setShowRelatedDocuments] = useState(false);\n  const [selectedDocuments, setSelectedDocuments] = useState([]);\n  const [additionalContext, setAdditionalContext] = useState([]);\n  const [expanded, setExpanded] = useState(true); // íŒ¨ë„ í™•ì¥ ìƒíƒœ ì¶”ê°€\n  \n  // íŒ¨ë„ ì ‘ê¸°/í¼ì¹˜ê¸° í† ê¸€ í•¨ìˆ˜\n  const handleExpandToggle = () => {\n    setExpanded(prev => !prev);\n  };\n\n  useEffect(() => {\n    conversationEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [conversation]);\n\n  // ë¬¸ì„œ ê²€ìƒ‰ ê¸°ëŠ¥\n  const searchRelatedDocuments = useCallback(async (searchQuery) => {\n    try {\n      console.log(\"AI íŒ¨ë„ì—ì„œ ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì‹œì‘:\", searchQuery);\n      return await documentSearchManager.searchDocuments(searchQuery);\n    } catch (error) {\n      console.error(\"AI íŒ¨ë„ ë¬¸ì„œ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }, []);\n\n  // í”„ë¡œì•¡í‹°ë¸Œ ì œì•ˆ ê²€ì‚¬\n  useEffect(() => {\n    // ì‚¬ìš©ìê°€ ì§ˆë¬¸ ì¤‘ì¼ ë•Œ ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì—¬ë¶€ í™•ì¸\n    if (!userInput || userInput.length < 3 || isLoading) return;\n    \n    // ë””ë°”ìš´ìŠ¤ ì‹¤í–‰ìœ¼ë¡œ ë„ˆë¬´ ìì£¼ ì²´í¬í•˜ì§€ ì•Šë„ë¡ í•¨\n    const checkForProactiveSuggestions = async () => {\n      // í˜„ì¬ ì…ë ¥ì¤‘ì¸ ì§ˆë¬¸ì´ ë¬¸ì„œ ê²€ìƒ‰ì´ë‚˜ ìš”ì•½ì— ê´€í•œ ê²ƒì¸ì§€ í™•ì¸\n      const isSearchQuery = /ê²€ìƒ‰|ì°¾ì•„|ìœ ì‚¬í•œ|ê´€ë ¨ëœ|ë¬¸ì„œ/.test(userInput);\n      \n      if (isSearchQuery && conversation.length > 0) {\n        console.log(\"ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì¿¼ë¦¬ ê°ì§€ë¨\");\n        \n        try {\n          const relatedDocs = await searchRelatedDocuments(userInput);\n          \n          if (relatedDocs.length > 0) {\n            // ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆìœ¼ë©´ ìƒíƒœ ì—…ë°ì´íŠ¸í•˜ì—¬ UIì— í‘œì‹œ\n            setRelatedDocuments(relatedDocs);\n            setShowRelatedDocuments(true);\n          }\n        } catch (err) {\n          console.error(\"í”„ë¡œì•¡í‹°ë¸Œ ê²€ìƒ‰ ì˜¤ë¥˜:\", err);\n        }\n      }\n    };\n\n    // ë””ë°”ìš´ìŠ¤ íƒ€ì´ë¨¸ ì„¤ì •\n    const timer = setTimeout(checkForProactiveSuggestions, 2000);\n    return () => clearTimeout(timer);\n  }, [editorContext, conversation, userInput, searchRelatedDocuments]);\n\n  const handleInputChange = (event) => {\n    setPromptInput(event.target.value);\n  };\n\n  const processUserRequestInternal = useCallback(async (requestData, currentEditorContext) => {\n    const commandText = requestData.text;\n    if (!commandText || !commandText.trim() || isLoading || !currentEditorContext) return;\n\n    // Clear any existing UI suggestions in MikiEditor (MikiEditor will need a method for this)\n    if (onDisplaySuggestion) onDisplaySuggestion(null); \n\n    const userMessage = { type: 'user', text: commandText }; \n    setConversation(prev => [...prev, userMessage]);\n    setIsLoading(true);\n    setUserInput(''); // userInput ë¹„ìš°ê¸°\n\n    // ë¡œë”© ë©”ì‹œì§€ ì¶”ê°€\n    const loadingMessage = { \n      type: 'ai', \n      text: 'ëª…ë ¹ì„ ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤...', \n      isLoading: true \n    };\n    setConversation(prev => [...prev, loadingMessage]);\n\n    try {\n      console.log('AIì— ìš”ì²­ ì „ì†¡ ì¤‘:', commandText);\n      const rawAiResponse = await getAiResponse(requestData, currentEditorContext, false);\n      console.log(\"AI ì›ë³¸ ì‘ë‹µ:\", rawAiResponse); // ë””ë²„ê¹…ìš© ë¡œê·¸ ì¶”ê°€\n      \n      // ë¡œë”© ë©”ì‹œì§€ ì œê±°\n      setConversation(prev => prev.filter(msg => !msg.isLoading));\n      \n      let aiTextToDisplayInPanel = \"\";\n      let parsedResponse = null;\n      \n      if (rawAiResponse) {\n        try {\n          // ì›ë³¸ ì‘ë‹µì´ nullì¸ ê²½ìš° ì²˜ë¦¬\n          if (rawAiResponse === null) {\n            aiTextToDisplayInPanel = \"AI ì‘ë‹µì´ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\";\n          } else {\n            // JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µì´ ì™”ëŠ”ì§€ í™•ì¸\n            parsedResponse = JSON.parse(rawAiResponse);\n            console.log(\"íŒŒì‹±ëœ ì‘ë‹µ:\", parsedResponse); // íŒŒì‹±ëœ ì‘ë‹µ ë¡œê·¸\n            \n            // 1ë‹¨ê³„: êµ¬ì¡°í™” ëª…ë ¹(action/actionType ë“±)ì´ ìˆìœ¼ë©´ ì‚¬ìš©ìì—ê²Œ í™•ì¸ ìš”ì²­\n            if (parsedResponse && (parsedResponse.action || parsedResponse.actionType || parsedResponse.isSuggestion)) {\n              console.log(\"êµ¬ì¡°í™” ëª…ë ¹ ê°ì§€:\", parsedResponse); // ë””ë²„ê¹… ë¡œê·¸\n              \n              // ì—ë””í„°ì— ì§ì ‘ ëª…ë ¹ì„ ì „ë‹¬í•˜ëŠ” ëŒ€ì‹  í‘œì‹œë¥¼ ìœ„í•œ ë©”ì‹œì§€ë¡œ ë³€í™˜\n                if (parsedResponse.isSuggestion && parsedResponse.displayText) {\n                  aiTextToDisplayInPanel = `ğŸ’¡ ì œì•ˆ: ${parsedResponse.displayText}`;\n                \n                // onDisplaySuggestion ì½œë°±ì´ ìˆìœ¼ë©´ ì œì•ˆì„ í‘œì‹œí•©ë‹ˆë‹¤\n                if (onDisplaySuggestion) {\n                  console.log(\"ì œì•ˆì„ ì—ë””í„°ì— í‘œì‹œí•©ë‹ˆë‹¤:\", parsedResponse);\n                  onDisplaySuggestion(parsedResponse);\n                }\n                } else if (parsedResponse.action === \"display_text\" && parsedResponse.displayText) {\n                // display_text ì•¡ì…˜ì€ í…ìŠ¤íŠ¸ë§Œ í‘œì‹œí•˜ê³  ì—ë””í„°ë¥¼ ë³€ê²½í•˜ì§€ ì•ŠìŒ\n                  aiTextToDisplayInPanel = parsedResponse.displayText;\n                } else {\n                // ë‹¤ë¥¸ ëª¨ë“  ëª…ë ¹ì€ ì‚¬ìš©ì í™•ì¸ í›„ ì‹¤í–‰í•˜ë„ë¡ AiPanelì— í‘œì‹œ\n                aiTextToDisplayInPanel = \"AIê°€ ì—ë””í„°ì— ë‹¤ìŒ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë ¤ê³  í•©ë‹ˆë‹¤. ì•„ë˜ 'ì‹¤í–‰' ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë³€ê²½ì´ ì ìš©ë©ë‹ˆë‹¤.\";\n                \n                // ëª…ë ¹ì„ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë²„íŠ¼ì„ ëŒ€í™”ì°½ì— ì¶”ê°€\n                const pendingCommandMessage = { \n                  type: 'ai', \n                  text: aiTextToDisplayInPanel,\n                  isPendingCommand: true,\n                  pendingCommand: parsedResponse,\n                  actionButtons: [\n                    {\n                      label: 'ì‹¤í–‰',\n                      action: () => {\n                        if (onStructuredCommand) {\n                          console.log(\"ì‚¬ìš©ì ìŠ¹ì¸ í›„ ëª…ë ¹ ì‹¤í–‰:\", parsedResponse);\n                          onStructuredCommand(parsedResponse);\n                          // ì•¡ì…˜ ë²„íŠ¼ì„ ìˆ¨ê¸°ê³  í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸\n                          setConversation(prev => prev.map(msg => \n                            msg.isPendingCommand ? \n                              {...msg, text: \"âœ… ëª…ë ¹ì´ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.\", isPendingCommand: false, actionButtons: null} : \n                              msg\n                          ));\n                        }\n                      }\n                    },\n                    {\n                      label: 'ì·¨ì†Œ',\n                      action: () => {\n                        // ì•¡ì…˜ ë²„íŠ¼ì„ ìˆ¨ê¸°ê³  í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸\n                        setConversation(prev => prev.map(msg => \n                          msg.isPendingCommand ? \n                            {...msg, text: \"âŒ ëª…ë ¹ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.\", isPendingCommand: false, actionButtons: null} : \n                            msg\n                        ));\n                      }\n                    }\n                  ]\n                };\n                \n                setConversation(prev => [...prev.filter(msg => !msg.isLoading), pendingCommandMessage]);\n                return; // ì´ í•¨ìˆ˜ ì¢…ë£Œ\n              }\n            } else if (parsedResponse.action === \"display_text\" && parsedResponse.displayText) {\n              aiTextToDisplayInPanel = parsedResponse.displayText;\n            } else {\n              aiTextToDisplayInPanel = `AIê°€ ì‘ë‹µí–ˆì§€ë§Œ ëª…í™•í•œ ëª…ë ¹ì´ ì•„ë‹™ë‹ˆë‹¤: \"${JSON.stringify(parsedResponse)}\"`;\n            }\n          }\n        } catch (e) {\n          console.error(\"AI ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜:\", e);\n          // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ í…ìŠ¤íŠ¸ë¥¼ ì‘ë‹µìœ¼ë¡œ ì‚¬ìš©\n          if (typeof rawAiResponse === 'string') {\n            aiTextToDisplayInPanel = rawAiResponse.substring(0, 500) + \n              (rawAiResponse.length > 500 ? '...' : '');\n          } else {\n            aiTextToDisplayInPanel = \"AI ì‘ë‹µ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ ë°œìƒ. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\";\n          }\n        }\n      } else {\n        aiTextToDisplayInPanel = \"AIê°€ ì‘ë‹µí•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\";\n      }\n      \n      const aiMessage = { type: 'ai', text: aiTextToDisplayInPanel, rawResponseForDebug: rawAiResponse };\n      setConversation(prev => [...prev.filter(msg => !msg.isLoading), aiMessage]);\n    } catch (error) {\n      console.error(\"AI ì‘ë‹µ ì²˜ë¦¬ ì˜¤ë¥˜:\", error);\n      \n      // ë¡œë”© ë©”ì‹œì§€ ì œê±°\n      setConversation(prev => prev.filter(msg => !msg.isLoading));\n      \n      const errorMessage = { \n        type: 'ai',\n        text: 'ìš”ì²­ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message,\n        isError: true\n      };\n      setConversation(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [isLoading, onDisplaySuggestion, editorContext, onApplyAiCommand, onStructuredCommand]);\n\n  useImperativeHandle(ref, () => ({\n    triggerAiProcessing(commandData) {\n      if (editorContext) { \n        processUserRequestInternal(commandData, editorContext);\n      }\n    },\n    clearConversation() {\n      setConversation([]);\n      saveConversationToStorage([]);\n    },\n    // ëŒ€í™” ë‚´ìš©ì„ ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ ì¶”ê°€\n    getConversation() {\n      return conversation;\n    },\n    // ì €ì¥ëœ ëŒ€í™” ë‚´ìš©ì„ ë³µì›í•˜ëŠ” ë©”ì„œë“œ ì¶”ê°€\n    setConversation(savedConversation) {\n      if (Array.isArray(savedConversation)) {\n        setConversation(savedConversation);\n      }\n    }\n  }));\n\n  // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ìƒíƒœ ë³´ì¡´\n  useEffect(() => {\n    // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ í•œë²ˆ ì‹¤í–‰ë¨\n    console.log('AiPanel ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ë¨');\n    \n    return () => {\n      // ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ ì‹¤í–‰ë¨\n      console.log('AiPanel ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ë¨, ëŒ€í™” ë‚´ìš© ì €ì¥ ì‹œë„');\n      if (conversation.length > 0) {\n        saveConversationToStorage(conversation);\n      }\n    };\n  }, [conversation]);\n\n  const handleSuggestionAction = (suggestion, accept) => {\n    // This function is now primarily for proactive suggestions shown in AiPanel, if any.\n    // Most suggestion interactions will happen in MikiEditor's UI.\n    // setActiveSuggestion(null); // Assuming activeSuggestion state is still used for panel-specific suggestions\n    if (accept && suggestion.command_on_accept && onApplyAiCommand) {\n        const userMessage = {type: 'user', text: `(Accepted suggestion: ${suggestion.message})`};\n        const aiMessage = {type: 'ai', text: `Okay, applying suggestion: ${suggestion.message}`};\n        setConversation(prev => [...prev, userMessage, aiMessage]);\n        onApplyAiCommand(suggestion.command_on_accept);\n    } else if (!accept) {\n        const userMessage = {type: 'user', text: `(Declined suggestion: ${suggestion.message})`};\n        setConversation(prev => [...prev, userMessage]);\n    }\n  };\n\n  // ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ í•¨ìˆ˜\n  const handleUserInputChange = (event) => {\n    setUserInput(event.target.value);\n  };\n\n  // í‚¤ë³´ë“œ ì…ë ¥ ì²˜ë¦¬ í•¨ìˆ˜\n  const handleInputKeyDown = (event) => {\n    if (event.key === 'Enter' && !event.shiftKey) {\n      event.preventDefault();\n      \n      if (!isLoading && userInput.trim()) {\n        processUserRequestInternal({text: userInput.trim(), type: 'user_command_panel'}, editorContext);\n      }\n    }\n  };\n\n  // ëŒ€í™” ë‚´ìš©ì„ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜\n  const saveConversationToStorage = (conversations) => {\n    try {\n      if (Array.isArray(conversations) && conversations.length > 0) {\n        localStorage.setItem('miki_ai_conversations', JSON.stringify(conversations));\n        console.log('ëŒ€í™” ë‚´ìš© ì €ì¥ ì™„ë£Œ:', conversations.length, 'ê°œì˜ ë©”ì‹œì§€');\n      } else {\n        console.log('ì €ì¥í•  ëŒ€í™” ë‚´ìš©ì´ ì—†ìŒ');\n      }\n    } catch (error) {\n      console.error('ëŒ€í™” ë‚´ìš© ì €ì¥ ì˜¤ë¥˜:', error);\n    }\n  };\n\n  // ê´€ë ¨ ë¬¸ì„œ ì‚¬ìš© í•¸ë“¤ëŸ¬\n  const handleUseRelatedDocument = useCallback((doc) => {\n    // ì„ íƒí•œ ë¬¸ì„œ ì •ë³´ë¥¼ AI ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€\n    const docInfo = {\n      title: doc.title,\n      content: doc.content || \"ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.\",\n      path: doc.path\n    };\n    \n    // ë¬¸ì„œ ë‚´ìš©ì„ AI ì§ˆë¬¸ì— ì»¨í…ìŠ¤íŠ¸ë¡œ ì¶”ê°€\n    setAdditionalContext(prev => [...prev, docInfo]);\n    \n    // ì„ íƒí•œ ë¬¸ì„œë¥¼ UIì— í‘œì‹œ\n    setSelectedDocuments(prev => [...prev, docInfo]);\n    \n    // UI ìƒíƒœ ì—…ë°ì´íŠ¸\n    setShowRelatedDocuments(false);\n    setRelatedDocuments([]);\n    \n    // ë§í¬ ìƒì„± ì»´í¬ë„ŒíŠ¸ì™€ ì •ë³´ ê³µìœ  (í–¥í›„ í™•ì¥)\n    if (editorContext && editorContext.onDocumentSelected) {\n      editorContext.onDocumentSelected(docInfo);\n    }\n  }, [editorContext, setAdditionalContext]);\n\n  return (\n    <div className={`ai-panel ${expanded ? 'expanded' : 'collapsed'}`}>\n      {/* íŒ¨ë„ í—¤ë” */}\n      <div className=\"panel-header\">\n        <h3>AI ì–´ì‹œìŠ¤í„´íŠ¸</h3>\n        <div className=\"controls\">\n          <button onClick={handleExpandToggle}>\n            {expanded ? 'ì ‘ê¸°' : 'í¼ì¹˜ê¸°'}\n          </button>\n        </div>\n      </div>\n      \n      {/* íŒ¨ë„ ë‚´ìš© */}\n      <div className=\"panel-content\">\n        {/* ëŒ€í™” ë‚´ì—­ */}\n        <div className=\"conversation-history\">\n          {conversation.map((entry, index) => (\n            <div key={index} className={`message ${entry.type}`}>\n              <div className=\"message-header\">{entry.type === 'user' ? 'ğŸ‘¤ ì‚¬ìš©ì' : 'ğŸ¤– AI'}</div>\n              <div className=\"message-content\">{entry.text}</div>\n              \n              {/* ì•¡ì…˜ ë²„íŠ¼ë“¤ í‘œì‹œ */}\n              {entry.actionButtons && entry.actionButtons.length > 0 && (\n                <div className=\"action-buttons\">\n                  {entry.actionButtons.map((button, btnIndex) => (\n          <button \n                      key={btnIndex}\n                      onClick={button.action}\n                      className={button.label === 'ì‹¤í–‰' ? 'accept-button' : 'cancel-button'}\n          >\n                      {button.label}\n          </button>\n                  ))}\n        </div>\n              )}\n            </div>\n          ))}\n          <div ref={conversationEndRef}></div>\n        </div>\n        \n        {/* ê´€ë ¨ ë¬¸ì„œ ì¶”ì²œ ì˜ì—­ */}\n        {showRelatedDocuments && relatedDocuments.length > 0 && (\n          <div className=\"related-documents\">\n            <h4>ê´€ë ¨ ë¬¸ì„œ ì¶”ì²œ</h4>\n            <div className=\"documents-list\">\n              {relatedDocuments.map((doc, idx) => (\n                <div key={idx} className=\"document-item\" onClick={() => handleUseRelatedDocument(doc)}>\n                  <div className=\"document-title\">{doc.title}</div>\n                  {doc.preview && <div className=\"document-preview\">{doc.preview}</div>}\n                  {doc.isSemanticMatch && <div className=\"match-type\">AI ì¶”ì²œ</div>}\n                  </div>\n              ))}\n                </div>\n          </div>\n        )}\n        \n        {/* ì„ íƒëœ ë¬¸ì„œ í‘œì‹œ ì˜ì—­ */}\n        {selectedDocuments.length > 0 && (\n          <div className=\"selected-documents\">\n            <h4>ì„ íƒëœ ë¬¸ì„œ</h4>\n            <div className=\"documents-list\">\n              {selectedDocuments.map((doc, idx) => (\n                <div key={idx} className=\"document-item selected\">\n                  <div className=\"document-title\">{doc.title}</div>\n                  <button \n                    onClick={() => {\n                      setSelectedDocuments(prev => prev.filter((_, i) => i !== idx));\n                      setAdditionalContext(prev => prev.filter((_, i) => i !== idx));\n                    }}\n                    className=\"remove-button\"\n                  >\n                    âœ•\n                  </button>\n          </div>\n        ))}\n      </div>\n          </div>\n        )}\n        \n        {/* ì…ë ¥ ì˜ì—­ */}\n        <div className=\"input-area\">\n          <textarea \n            ref={userInputRef}\n            value={userInput}\n            onChange={handleUserInputChange}\n            onKeyDown={handleInputKeyDown}\n            placeholder=\"AIì—ê²Œ ì§ˆë¬¸í•˜ì„¸ìš”...\"\n            disabled={isLoading}\n          />\n            <button \n            onClick={() => !isLoading && userInput.trim() && processUserRequestInternal({text: userInput.trim(), type: 'user_command_panel'}, editorContext)}\n            disabled={isLoading || !userInput.trim()}\n            >\n            {isLoading ? 'ì²˜ë¦¬ ì¤‘...' : 'ì „ì†¡'}\n            </button>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport default AiPanel;\n\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\App.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":1,"column":59,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":66},{"ruleId":"no-unused-vars","severity":1,"message":"'QueryClient' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":21},{"ruleId":"no-unused-vars","severity":1,"message":"'slugify' is assigned a value but never used.","line":26,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'queryClient' is assigned a value but never used.","line":85,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":85,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'saveStatus' is assigned a value but never used.","line":89,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":89,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'lastSaved' is assigned a value but never used.","line":91,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":91,"endColumn":14},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":165,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":165,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4755,4783],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":207,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":207,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5849,5880],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":212,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":212,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5969,6003],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":218,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":218,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6156,6190],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useCallback, useMemo } from 'react';\nimport { QueryClient, QueryClientProvider, useQueryClient } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\n\n// ì»´í¬ë„ŒíŠ¸ imports\nimport ErrorBoundary from './components/common/ErrorBoundary';\nimport MessageToast from './components/common/MessageToast';\nimport ErrorDisplay from './components/common/ErrorDisplay';\nimport { DocumentListSkeleton, EditorSkeleton, AiPanelSkeleton } from './components/common/LoadingSpinner';\nimport AppLayout from './components/layout/AppLayout';\n\n// í›… imports\nimport { useDocuments } from './hooks/useDocuments';\nimport { useDocumentStore } from './stores';\nimport useResponsiveLayout from './hooks/useResponsiveLayout';\nimport useKeyboardShortcuts from './hooks/useKeyboardShortcuts';\nimport useAutoSave from './hooks/useAutoSave';\n\n// ì„¤ì • imports\nimport { queryClient } from './config/queryClient';\n\n// ìœ í‹¸ë¦¬í‹° imports\nimport { logError } from './utils/errorHandler';\n\n// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤\nconst slugify = (str) => {\n  return str\n    .toLowerCase()\n    .trim()\n    .replace(/[^\\w\\s-]/g, '')\n    .replace(/[\\s_-]+/g, '-')\n    .replace(/^-+|-+$/g, '');\n};\n\nconst extractTitleFromContent = (content) => {\n  if (!content || content.trim() === '') return 'ìƒˆ ë©”ëª¨';\n  \n  const lines = content.split('\\n');\n  const firstLine = lines[0]?.trim() || '';\n  \n  if (firstLine === '') return 'ìƒˆ ë©”ëª¨';\n  \n  const cleanTitle = firstLine\n    .replace(/^#+\\s*/, '')\n    .replace(/\\*\\*(.*?)\\*\\*/g, '$1')\n    .replace(/\\*(.*?)\\*/g, '$1')\n    .replace(/`(.*?)`/g, '$1')\n    .replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1')\n    .trim();\n  \n  return cleanTitle || 'ìƒˆ ë©”ëª¨';\n};\n\nconst createNewMemo = () => {\n  const timestamp = Date.now();\n  const randomSuffix = Math.random().toString(36).substring(2, 8);\n  return {\n    id: `memo_${timestamp}_${randomSuffix}`,\n    title: 'ìƒˆ ë©”ëª¨',\n    content: '',\n    createdAt: new Date().toISOString(),\n    updatedAt: new Date().toISOString(),\n    isEmpty: true\n  };\n};\n\nfunction AppContent() {\n  // ìƒíƒœ ê´€ë¦¬\n  const [message, setMessage] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [editorContext, setEditorContext] = useState(null);\n  const [error, setError] = useState(null);\n  \n  // Refs\n  const editorRef = useRef(null);\n  const aiPanelRef = useRef(null);\n  const searchInputRef = useRef(null);\n  \n  // ì»¤ìŠ¤í…€ í›…ë“¤\n  const { isMobile, isFullscreen, activeMobilePanel, setActiveMobilePanel, toggleFullscreen, editorPanelClass } = useResponsiveLayout();\n  const { data: documentsData, isLoading: isLoadingDocuments, error: documentsError, refetch: refetchDocuments } = useDocuments();\n  const { currentDocument, setCurrentDocument } = useDocumentStore();\n  const queryClient = useQueryClient();\n\n  // ìë™ ì €ì¥ í›…\n  const {\n    saveStatus,\n    hasUnsavedChanges,\n    lastSaved,\n    manualSave,\n    getSaveStatusMessage,\n    isAutoSaving,\n    isManualSaving\n  } = useAutoSave({\n    document: currentDocument,\n    content,\n    title,\n    enabled: true,\n    onSaveStart: () => setMessage({ type: 'info', text: 'ì €ì¥ ì¤‘...' }),\n    onSaveSuccess: () => setMessage({ type: 'success', text: 'ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.' }),\n    onSaveError: (error) => {\n      logError(error, 'save');\n      setMessage({ type: 'error', text: 'ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' });\n    }\n  });\n\n  // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ í›…\n  useKeyboardShortcuts({\n    onSave: manualSave,\n    onNewDocument: () => newPost(),\n    onSearch: () => searchInputRef.current?.focus(),\n    onToggleFullscreen: toggleFullscreen,\n    onFocusEditor: () => editorRef.current?.focus?.(),\n    onFocusSearch: () => searchInputRef.current?.focus(),\n    disabled: false\n  });\n\n  // ì—ëŸ¬ ì²˜ë¦¬\n  useEffect(() => {\n    if (documentsError) {\n      logError(documentsError, 'load');\n      setError(documentsError);\n    }\n  }, [documentsError]);\n\n  // ë©”ì‹œì§€ ë‹«ê¸° í•¸ë“¤ëŸ¬\n  const handleCloseMessage = useCallback(() => {\n    setMessage(null);\n  }, []);\n\n  // ì—ëŸ¬ ë‹«ê¸° í•¸ë“¤ëŸ¬\n  const handleCloseError = useCallback(() => {\n    setError(null);\n  }, []);\n\n  // ì—ëŸ¬ ì¬ì‹œë„ í•¸ë“¤ëŸ¬\n  const handleRetryError = useCallback(() => {\n    setError(null);\n    refetchDocuments();\n  }, [refetchDocuments]);\n\n  // ì œëª© ë³€ê²½ í•¸ë“¤ëŸ¬\n  const handleTitleChange = useCallback((e) => {\n    setTitle(e.target.value);\n  }, []);\n\n  // ì—ë””í„° ì»¨í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ í•¸ë“¤ëŸ¬\n  const handleEditorContextUpdate = useCallback((context) => {\n    setEditorContext(context);\n  }, []);\n\n  // ì—ë””í„° ë‚´ìš© ë³€ê²½ í•¸ë“¤ëŸ¬\n  const handleEditorChange = useCallback((newContent) => {\n    setContent(newContent);\n    const extractedTitle = extractTitleFromContent(newContent);\n    setTitle(extractedTitle);\n  }, []);\n\n  // ë¬¸ì„œ ë¡œë“œ\n  const loadPost = useCallback(async (id) => {\n    try {\n      // ì‹¤ì œ ë¬¸ì„œ ë¡œë“œ ë¡œì§ êµ¬í˜„\n      console.log(`ë¬¸ì„œ ë¡œë“œ: ${id}`);\n    } catch (error) {\n      logError(error, 'load');\n      setMessage({ type: 'error', text: 'ë¬¸ì„œ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' });\n    }\n  }, []);\n\n  // ìƒˆ ê¸€ ìƒì„±\n  const newPost = useCallback(() => {\n    const newMemo = createNewMemo();\n    setCurrentDocument(newMemo);\n    setTitle(newMemo.title);\n    setContent('');\n    \n    if (editorRef.current) {\n      editorRef.current.getEditorInstance().setMarkdown('');\n    }\n    \n    if (aiPanelRef.current) {\n      aiPanelRef.current.clearConversation();\n    }\n  }, [setCurrentDocument]);\n\n  // ë¬¸ì„œ ì‚­ì œ í›„ ì²˜ë¦¬\n  const handleDeletePost = useCallback((deletedPost) => {\n    if (currentDocument && currentDocument.id === deletedPost.id) {\n      if (editorRef.current) {\n        editorRef.current.getEditorInstance().setMarkdown('');\n      }\n      \n      if (aiPanelRef.current) {\n        aiPanelRef.current.clearConversation();\n      }\n      \n      setCurrentDocument(null);\n      setTitle('');\n      setContent('');\n    }\n  }, [currentDocument, setCurrentDocument]);\n\n  // AI ëª…ë ¹ ì²˜ë¦¬\n  const handleAiCommand = useCallback((command) => {\n    console.log('AI ëª…ë ¹:', command);\n  }, []);\n\n  // AI ì œì•ˆ í‘œì‹œ\n  const handleAiSuggestion = useCallback((suggestion) => {\n    console.log('AI ì œì•ˆ:', suggestion);\n  }, []);\n\n  // ë‚´ë¶€ ë¬¸ì„œ ë§í¬ ë„¤ë¹„ê²Œì´ì…˜\n  const handleNavigateToId = useCallback(async (docId) => {\n    if (!docId || docId === currentDocument?.id) return;\n    console.log(`ë„¤ë¹„ê²Œì´ì…˜ ìš”ì²­: ${docId}`);\n    try {\n      await loadPost(docId);\n    } catch (error) {\n      logError(error, 'load');\n      setMessage({ type: 'error', text: `ë¬¸ì„œ(${docId}) ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ` });\n    }\n  }, [loadPost, currentDocument?.id]);\n\n  // ë¡œë”© ìƒíƒœ ì²˜ë¦¬\n  if (isLoadingDocuments) {\n    return (\n      <div className=\"h-screen flex flex-col bg-gray-100\">\n        <header className=\"p-4 bg-blue-500 text-white\">\n          <div className=\"container mx-auto flex justify-between items-center\">\n            <h1 className=\"text-xl font-bold\">Miki Editor v7 AI ì—°ë™</h1>\n          </div>\n        </header>\n        \n        <div className=\"flex-grow p-4 overflow-hidden\">\n          <div className=\"flex h-full\" style={{ flexDirection: isMobile ? 'column' : 'row' }}>\n            {/* ë¬¸ì„œ ëª©ë¡ ìŠ¤ì¼ˆë ˆí†¤ */}\n            <div className={`bg-white rounded shadow flex flex-col ${\n              isMobile ? 'block flex-grow mb-2' : 'w-1/5 mr-2'\n            }`}>\n              <div className=\"p-3 border-b\">\n                <div className=\"h-6 bg-gray-200 rounded w-20 animate-pulse\"></div>\n              </div>\n              <div className=\"flex-grow overflow-auto p-3\">\n                <DocumentListSkeleton />\n              </div>\n            </div>\n            \n            {/* ì—ë””í„° ìŠ¤ì¼ˆë ˆí†¤ */}\n            <div className={`bg-white rounded shadow flex flex-col ${\n              isMobile ? 'block flex-grow mb-2' : 'flex-1 mx-2'\n            }`}>\n              <EditorSkeleton />\n            </div>\n            \n            {/* AI íŒ¨ë„ ìŠ¤ì¼ˆë ˆí†¤ */}\n            <div className={`bg-white rounded shadow flex flex-col ${\n              isMobile ? 'block flex-grow' : 'w-1/4 ml-2'\n            }`}>\n              <AiPanelSkeleton />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-100\">\n      {/* í—¤ë” */}\n      <header className={`p-4 bg-blue-500 text-white ${isFullscreen ? 'hidden' : ''}`}>\n        <div className=\"container mx-auto flex justify-between items-center\">\n          <h1 className=\"text-xl font-bold\">Miki Editor v7 AI ì—°ë™</h1>\n        </div>\n      </header>\n      \n      {/* ì—ëŸ¬ í‘œì‹œ */}\n      {error && (\n        <div className=\"p-4\">\n          <ErrorDisplay\n            error={error}\n            context=\"load\"\n            onRetry={handleRetryError}\n            onDismiss={handleCloseError}\n          />\n        </div>\n      )}\n      \n      {/* ë©”ì‹œì§€ í† ìŠ¤íŠ¸ */}\n      <MessageToast message={message} onClose={handleCloseMessage} />\n      \n      {/* ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ */}\n      <div className=\"flex-grow p-4 overflow-hidden\">\n        <AppLayout\n          isFullscreen={isFullscreen}\n          isMobile={isMobile}\n          activeMobilePanel={activeMobilePanel}\n          setActiveMobilePanel={setActiveMobilePanel}\n          editorPanelClass={editorPanelClass}\n          \n          // DocumentSidebar props\n          documentsData={documentsData}\n          currentDocument={currentDocument}\n          searchQuery={searchQuery}\n          setSearchQuery={setSearchQuery}\n          searchInputRef={searchInputRef}\n          onLoadPost={loadPost}\n          onNewPost={newPost}\n          onDeletePost={handleDeletePost}\n          setMessage={setMessage}\n          \n          // EditorPanel props\n          title={title}\n          saveStatus={getSaveStatusMessage()}\n          isLoadingDocuments={isLoadingDocuments}\n          editorRef={editorRef}\n          onTitleChange={handleTitleChange}\n          onSavePost={manualSave}\n          onToggleFullscreen={toggleFullscreen}\n          onEditorContextUpdate={handleEditorContextUpdate}\n          onEditorChange={handleEditorChange}\n          onSendToAi={(data) => aiPanelRef.current?.triggerAiProcessing(data)}\n          onNavigateRequest={handleNavigateToId}\n          hasUnsavedChanges={hasUnsavedChanges}\n          isAutoSaving={isAutoSaving}\n          isManualSaving={isManualSaving}\n          \n          // AiPanelContainer props\n          aiPanelRef={aiPanelRef}\n          editorContext={editorContext}\n          onStructuredCommand={handleAiCommand}\n          onDisplaySuggestion={handleAiSuggestion}\n        />\n      </div>\n    </div>\n  );\n}\n\n// QueryClientProviderë¡œ ê°ì‹¸ëŠ” ë©”ì¸ App ì»´í¬ë„ŒíŠ¸\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <QueryClientProvider client={queryClient}>\n        <AppContent />\n        {/* ê°œë°œ í™˜ê²½ì—ì„œë§Œ React Query DevTools í‘œì‹œ */}\n        {process.env.NODE_ENV === 'development' && (\n          <ReactQueryDevtools initialIsOpen={false} />\n        )}\n      </QueryClientProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n\n\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\App_backup.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport './App.css';\nimport './index.css';\n\n// ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸\nfunction App() {\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-100\">\n      <header className=\"p-4 bg-blue-500 text-white text-center font-bold\">\n        Miki Editor v7 Tailwind CSS í…ŒìŠ¤íŠ¸\n      </header>\n      \n      <main className=\"flex-grow flex p-4\">\n        <div className=\"w-1/2 p-4 bg-white rounded-lg shadow-md mr-2\">\n          <h2 className=\"text-xl font-bold text-gray-800 mb-4\">ì™¼ìª½ íŒ¨ë„</h2>\n          <p className=\"text-gray-600\">Tailwind CSSê°€ ì •ìƒì ìœ¼ë¡œ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.</p>\n          <button className=\"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors\">\n            í…ŒìŠ¤íŠ¸ ë²„íŠ¼\n          </button>\n        </div>\n        \n        <div className=\"w-1/2 p-4 bg-white rounded-lg shadow-md ml-2\">\n          <h2 className=\"text-xl font-bold text-gray-800 mb-4\">ì˜¤ë¥¸ìª½ íŒ¨ë„</h2>\n          <div className=\"p-3 bg-yellow-100 border border-yellow-300 rounded-md\">\n            <p className=\"text-yellow-800\">Tailwind CSS ì ìš© í…ŒìŠ¤íŠ¸ ì•Œë¦¼</p>\n          </div>\n          <div className=\"mt-4 flex space-x-2\">\n            <span className=\"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm\">íƒœê·¸ 1</span>\n            <span className=\"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-sm\">íƒœê·¸ 2</span>\n            <span className=\"px-2 py-1 bg-red-100 text-red-800 rounded-full text-sm\">íƒœê·¸ 3</span>\n          </div>\n        </div>\n      </main>\n      \n      <footer className=\"p-4 bg-gray-200 text-center text-gray-600\">\n        Miki Editor í…ŒìŠ¤íŠ¸ í˜ì´ì§€ Â© 2024\n      </footer>\n    </div>\n  );\n}\n\nexport default App;\n\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\App_full_ui_bak.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":1,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useState, useEffect, useCallback } from 'react';\nimport './App.css';\nimport './index.css';\nimport Split from 'react-split';\nimport MikiEditor from './MikiEditor';\nimport AiPanel from './AiPanel';\n\nfunction App() {\n  const editorRef = useRef(null);\n  const aiPanelRef = useRef(null);\n  const [editorContext, setEditorContext] = useState({\n    fullContent: '',\n    selection: null\n  });\n\n  // ì—ë””í„° ì»¨í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ í•¸ë“¤ëŸ¬\n  const handleEditorContextUpdate = useCallback((context) => {\n    setEditorContext(context);\n  }, []);\n\n  // AI ëª…ë ¹ ì²˜ë¦¬ í•¸ë“¤ëŸ¬\n  const handleAiCommand = useCallback((command) => {\n    if (editorRef.current && command) {\n      editorRef.current.applyStructuredAiCommand(command);\n    }\n  }, []);\n\n  // AI ì œì•ˆ í‘œì‹œ í•¸ë“¤ëŸ¬\n  const handleAiSuggestion = useCallback((suggestion) => {\n    if (editorRef.current && suggestion) {\n      editorRef.current.displayAiSuggestion(suggestion);\n    }\n  }, []);\n\n  return (\n    <div className=\"h-screen flex flex-col bg-gray-100\">\n      <header className=\"p-4 bg-blue-500 text-white text-center font-bold\">\n        Miki Editor v7 AI ì—°ë™\n      </header>\n      \n      <Split \n        className=\"flex-grow flex p-4\"\n        sizes={[60, 40]}\n        minSize={300}\n        gutterSize={10}\n        gutterAlign=\"center\"\n      >\n        <div className=\"p-2 bg-white rounded shadow mr-2 h-full overflow-y-auto flex flex-col\">\n          <h2 className=\"text-lg font-bold mb-4\">ì—ë””í„° ì˜ì—­</h2>\n          <div className=\"flex-grow border rounded\">\n            <MikiEditor\n              ref={editorRef}\n              onContextUpdate={handleEditorContextUpdate}\n            />\n          </div>\n        </div>\n        \n        <div className=\"p-2 bg-white rounded shadow ml-2 h-full overflow-y-auto flex flex-col\">\n          <h2 className=\"text-lg font-bold mb-4\">AI íŒ¨ë„ ì˜ì—­</h2>\n          <AiPanel\n            ref={aiPanelRef}\n            editorContext={editorContext}\n            onCommand={handleAiCommand}\n            onSuggestion={handleAiSuggestion}\n          />\n        </div>\n      </Split>\n    </div>\n  );\n}\n\nexport default App;\n\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\KnowledgeGraph.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":56,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":56,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1911,1954],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport ForceGraph2D from 'react-force-graph-2d';\n\n// Function to process notes index into graph data\nconst processNotesForGraph = (notes) => {\n  if (!Array.isArray(notes) || notes.length === 0) {\n    return { nodes: [], links: [] };\n  }\n\n  const nodes = notes.map(note => ({\n    id: note.slug, // Use slug as unique ID\n    name: note.title,\n    val: 1, // Basic size, could be based on connections or content length\n    // Add other properties if needed, e.g., group based on tags\n  }));\n\n  const links = [];\n  const nodeIds = new Set(nodes.map(n => n.id));\n\n  notes.forEach(note => {\n    // Links based on explicit parent/child (if available)\n    if (note.parent && nodeIds.has(note.parent)) {\n      links.push({ source: note.slug, target: note.parent, type: 'parent' });\n    }\n\n    // Links based on tags (connect notes with shared tags)\n    if (note.tags && Array.isArray(note.tags)) {\n      note.tags.forEach(tag => {\n        notes.forEach(otherNote => {\n          if (note.slug !== otherNote.slug && otherNote.tags && otherNote.tags.includes(tag)) {\n            // Avoid duplicate links\n            const exists = links.some(\n              link => (link.source === note.slug && link.target === otherNote.slug) || (link.source === otherNote.slug && link.target === note.slug)\n            );\n            if (!exists) {\n              links.push({ source: note.slug, target: otherNote.slug, type: 'tag', tag: tag });\n            }\n          }\n        });\n      });\n    }\n    \n    // TODO: Add links based on [[wiki-links]] if parsed and available in index\n  });\n\n  return { nodes, links };\n};\n\nfunction KnowledgeGraph({ notesIndex }) {\n  const [graphData, setGraphData] = useState({ nodes: [], links: [] });\n  const graphRef = useRef();\n\n  useEffect(() => {\n    const data = processNotesForGraph(notesIndex);\n    setGraphData(data);\n    console.log(\"Processed graph data:\", data);\n  }, [notesIndex]);\n\n  // Handle node click - navigate to the note page\n  const handleNodeClick = useCallback(node => {\n    // Assuming notes are accessible via /slug or /_notes/slug.md\n    // Adjust the URL structure based on your Jekyll setup\n    window.open(`/${node.id}`, '_blank'); // Open in new tab\n    // Optional: Center graph on clicked node\n    // graphRef.current.centerAt(node.x, node.y, 1000);\n    // graphRef.current.zoom(2, 1000);\n  }, []);\n\n  // Optional: Customize node appearance\n  const nodeCanvasObject = (node, ctx, globalScale) => {\n    const label = node.name || node.id;\n    const fontSize = 12 / globalScale;\n    ctx.font = `${fontSize}px Sans-Serif`;\n    const textWidth = ctx.measureText(label).width;\n    const bgDimensions = [textWidth, fontSize].map(n => n + fontSize * 0.4); // Box padding\n\n    // Background rectangle\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';\n    ctx.fillRect(node.x - bgDimensions[0] / 2, node.y - bgDimensions[1] / 2, ...bgDimensions);\n\n    // Text\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillStyle = 'rgb(50, 50, 50)';\n    ctx.fillText(label, node.x, node.y);\n\n    node.__bckgDimensions = bgDimensions; // Store for interaction\n  };\n\n  // Optional: Customize link appearance\n  const linkCanvasObject = (link, ctx, globalScale) => {\n    const start = link.source;\n    const end = link.target;\n\n    // Ignore unbound links\n    if (typeof start !== 'object' || typeof end !== 'object') return;\n\n    // Line style\n    ctx.beginPath();\n    ctx.moveTo(start.x, start.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.lineWidth = 0.5 / globalScale;\n    ctx.strokeStyle = link.type === 'parent' ? 'rgba(0, 255, 0, 0.5)' : 'rgba(0, 0, 255, 0.2)'; // Green for parent, blue for tag\n    ctx.stroke();\n\n    // Optional: Add arrow for parent links\n    if (link.type === 'parent') {\n        const arrowLength = 5 / globalScale;\n        const arrowAngle = Math.PI / 6;\n        const angle = Math.atan2(end.y - start.y, end.x - start.x);\n        ctx.beginPath();\n        ctx.moveTo(end.x, end.y);\n        ctx.lineTo(end.x - arrowLength * Math.cos(angle - arrowAngle), end.y - arrowLength * Math.sin(angle - arrowAngle));\n        ctx.moveTo(end.x, end.y);\n        ctx.lineTo(end.x - arrowLength * Math.cos(angle + arrowAngle), end.y - arrowLength * Math.sin(angle + arrowAngle));\n        ctx.strokeStyle = 'rgba(0, 255, 0, 0.5)';\n        ctx.lineWidth = 0.5 / globalScale;\n        ctx.stroke();\n    }\n  };\n\n  return (\n    <div className=\"w-full h-full bg-gray-100 rounded-lg overflow-hidden shadow-inner\">\n      {graphData.nodes.length > 0 ? (\n        <ForceGraph2D\n          ref={graphRef}\n          graphData={graphData}\n          nodeLabel=\"name\" // Show title on hover\n          // Node appearance\n          nodeVal=\"val\"\n          nodeCanvasObject={nodeCanvasObject}\n          nodePointerAreaPaint={(node, color, ctx) => {\n            ctx.fillStyle = color;\n            const bckgDimensions = node.__bckgDimensions;\n            bckgDimensions && ctx.fillRect(node.x - bckgDimensions[0] / 2, node.y - bckgDimensions[1] / 2, ...bckgDimensions);\n          }}\n          // Link appearance\n          // linkDirectionalParticles={1}\n          // linkDirectionalParticleWidth={1}\n          linkCanvasObjectMode={() => 'after'}\n          linkCanvasObject={linkCanvasObject}\n          // Interaction\n          onNodeClick={handleNodeClick}\n          // Performance\n          cooldownTicks={100}\n          onEngineStop={() => graphRef.current.zoomToFit(400, 100)} // Zoom to fit after stabilization\n          // Styling\n          backgroundColor=\"#f7fafc\" // Tailwind gray-100\n          width={undefined} // Use container width\n          height={undefined} // Use container height\n        />\n      ) : (\n        <div className=\"flex items-center justify-center h-full text-gray-500\">\n          {notesIndex === null ? 'Loading graph data...' : 'No notes found to display graph.'}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default KnowledgeGraph;\n\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\MikiEditor.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'convertMarkdownToHTML' is assigned a value but never used.","line":47,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":47,"endColumn":28},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":131,"column":27,"nodeType":"Identifier","endLine":131,"endColumn":38},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":141,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":141,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4783,4820],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":158,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":158,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5241,5274],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":162,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":162,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5399,5433],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":199,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":199,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[6603,6632],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":246,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":246,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7865,7926],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":251,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":251,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8100,8148],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":254,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":254,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[8191,8225],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":269,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":269,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8749,8794],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":271,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":271,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[8839,8885],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":284,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":284,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[9306,9344],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":602,"column":20,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":1538,"endColumn":3},{"ruleId":"no-unused-vars","severity":1,"message":"'savedSelection' is assigned a value but never used.","line":617,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":617,"endColumn":24},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":620,"column":34,"nodeType":"Identifier","endLine":620,"endColumn":45},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":630,"column":34,"nodeType":"Identifier","endLine":630,"endColumn":45},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":642,"column":32,"nodeType":"Identifier","endLine":642,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":666,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":666,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[22493,22579],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'editorRect' is assigned a value but never used.","line":694,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":694,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":784,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":784,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[26838,26877],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":790,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":790,"endColumn":29,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[27062,27126],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":860,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":860,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[30179,30264],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":898,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":898,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[31437,31489],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":902,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":902,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[31548,31578],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":911,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":911,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[31859,31939],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'suggestionId' is defined but never used. Allowed unused args must match /^_/u.","line":945,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":945,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":953,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":953,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33497,33542],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":974,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":974,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[34545,34600],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":977,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":977,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[34644,34690],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":982,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":982,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[34766,34794],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":984,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":984,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[34827,34868],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1031,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1031,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[36627,36687],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1050,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1050,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[37327,37362],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1080,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1080,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[38648,38712],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1083,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1083,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[38907,39021],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1091,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1091,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[39466,39554],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1105,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1105,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[39910,39959],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1118,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1118,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[40355,40403],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1131,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1131,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[40739,40803],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1133,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1133,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[40847,40902],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1138,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1138,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[41114,41151],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1144,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1144,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[41328,41376],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1147,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1147,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[41413,41447],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1155,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1155,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[41755,41798],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'editorStyle' is assigned a value but never used.","line":1169,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":1169,"endColumn":20},{"ruleId":"no-unused-vars","severity":1,"message":"'toastUIEditorStyle' is assigned a value but never used.","line":1177,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":1177,"endColumn":27},{"ruleId":"no-unused-vars","severity":1,"message":"'loadDocumentByPath' is assigned a value but never used.","line":1195,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":1195,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1196,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1196,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[42642,42700],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1216,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1216,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[43282,43321],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1219,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1219,"endColumn":25,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[43386,43433],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1226,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1226,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[43535,43574],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'foundKey' is assigned a value but never used.","line":1238,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":1238,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1239,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1239,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[44126,44170],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1250,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1250,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[44357,44398],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1263,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1263,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[44902,44950],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1268,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1268,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[45175,45217],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1272,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1272,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[45286,45330],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1280,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1280,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[45486,45525],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1292,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1292,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[45828,45864],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'createNewDocument' and 'loadDocumentToEditor'. Either include them or remove the dependency array.","line":1304,"column":6,"nodeType":"ArrayExpression","endLine":1304,"endColumn":23,"suggestions":[{"desc":"Update the dependencies array to be: [createNewDocument, loadDocumentToEditor, onContextUpdate]","fix":{"range":[46122,46139],"text":"[createNewDocument, loadDocumentToEditor, onContextUpdate]"}}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1308,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1308,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[46242,46298],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1331,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1331,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[46976,47025],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1349,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1349,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[47540,47594],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1351,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1351,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[47623,47661],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1358,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1358,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[47819,47852],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1383,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1383,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[48501,48537],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1385,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1385,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[48566,48602],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":67,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useRef, useCallback, useState, useEffect, forwardRef, useImperativeHandle } from 'react';\nimport { Editor } from '@toast-ui/react-editor';\nimport '@toast-ui/editor/dist/toastui-editor.css';\nimport '@toast-ui/editor/dist/theme/toastui-editor-dark.css'; // Optional: Dark theme\nimport DocumentSearchManager from './utils/DocumentSearchManager'; // ì¶”ê°€ëœ ì„í¬íŠ¸\n\n// debounce í•¨ìˆ˜ ì •ì˜\nconst debounce = (func, wait) => {\n  let timeout;\n  return function executedFunction(...args) {\n    const later = () => {\n      clearTimeout(timeout);\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\n\n// Helper to slugify strings for internal links\nconst slugify = (str) => {\n  if (!str || str.trim() === '') {\n    // ë¹ˆ ë¬¸ìì—´ì´ë‚˜ ê³µë°±ë§Œ ìˆëŠ” ê²½ìš° íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ ID ìƒì„±\n    return `doc-${Date.now()}`;\n  }\n  \n  // 1ë‹¨ê³„: ê¸°ë³¸ ë³€í™˜ (ì†Œë¬¸ìë¡œ ë³€í™˜, ì–‘ìª½ ê³µë°± ì œê±°)\n  let result = str.toLowerCase().trim();\n  \n  // 2ë‹¨ê³„: URLì— ì•ˆì „í•˜ì§€ ì•Šì€ ë¬¸ì ì²˜ë¦¬\n  result = result\n    // ì—°ì†ëœ ê³µë°±, íŠ¹ìˆ˜ë¬¸ìë¥¼ í•˜ì´í”ˆìœ¼ë¡œ ë³€í™˜ (í•œê¸€ì€ ë³´ì¡´)\n    .replace(/[\\s\\t\\r\\n]+/g, '-')  // ê³µë°±ë¥˜ ë¬¸ì ë³€í™˜\n    .replace(/[^\\w\\u3131-\\uD79D-]+/g, '-') // í•œê¸€(ìœ ë‹ˆì½”ë“œ ë²”ìœ„)ê³¼ ì˜ìˆ«ì, ì–¸ë”ìŠ¤ì½”ì–´ë¥¼ ì œì™¸í•œ ë¬¸ìë¥¼ í•˜ì´í”ˆìœ¼ë¡œ ë³€í™˜\n    .replace(/-+/g, '-')  // ì¤‘ë³µëœ í•˜ì´í”ˆ ì œê±°\n    .replace(/^-+|-+$/g, ''); // ì‹œì‘/ë í•˜ì´í”ˆ ì œê±°\n  \n  // 3ë‹¨ê³„: ê²°ê³¼ê°€ ë¹ˆ ë¬¸ìì—´ì´ë©´ íƒ€ì„ìŠ¤íƒ¬í”„ ì‚¬ìš©\n  if (!result || result === '') {\n    return `doc-${Date.now()}`;\n  }\n  \n  return result;\n};\n\n// ë§ˆí¬ë‹¤ìš´ì„ WYSIWYG í˜¸í™˜ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜\nconst convertMarkdownToHTML = (markdownText) => {\n  if (!markdownText || typeof markdownText !== 'string') return markdownText;\n  \n  // í—¤ë”© ë³€í™˜ (# ì œëª© -> <h1>ì œëª©</h1>)\n  const headingProcessed = markdownText\n    .replace(/^# (.+)$/gm, '<h1>$1</h1>')\n    .replace(/^## (.+)$/gm, '<h2>$1</h2>')\n    .replace(/^### (.+)$/gm, '<h3>$1</h3>')\n    .replace(/^#### (.+)$/gm, '<h4>$1</h4>')\n    .replace(/^##### (.+)$/gm, '<h5>$1</h5>')\n    .replace(/^###### (.+)$/gm, '<h6>$1</h6>');\n    \n  // êµµê²Œ, ê¸°ìš¸ì„, ì·¨ì†Œì„  ë³€í™˜\n  const styleProcessed = headingProcessed\n    .replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>')\n    .replace(/\\*(.+?)\\*/g, '<em>$1</em>')\n    .replace(/~~(.+?)~~/g, '<del>$1</del>');\n  \n  // ëª©ë¡ ë³€í™˜\n  const listProcessed = styleProcessed\n    .replace(/^- (.+)$/gm, '<ul><li>$1</li></ul>')\n    .replace(/^\\* (.+)$/gm, '<ul><li>$1</li></ul>')\n    .replace(/^[0-9]+\\. (.+)$/gm, '<ol><li>$1</li></ol>');\n  \n  // ì½”ë“œ ë¸”ë¡ ë° ì¸ë¼ì¸ ì½”ë“œ\n  const codeProcessed = listProcessed\n    .replace(/`(.+?)`/g, '<code>$1</code>')\n    .replace(/```(.+?)```/gs, '<pre><code>$1</code></pre>');\n  \n  // ë§í¬ ë° ì´ë¯¸ì§€ ë³€í™˜\n  const linkProcessed = codeProcessed\n    .replace(/\\[(.+?)\\]\\((.+?)\\)/g, '<a href=\"$2\">$1</a>')\n    .replace(/!\\[(.+?)\\]\\((.+?)\\)/g, '<img src=\"$2\" alt=\"$1\">');\n  \n  // ì¸ìš©ë¬¸ ë³€í™˜\n  const quoteProcessed = linkProcessed\n    .replace(/^> (.+)$/gm, '<blockquote>$1</blockquote>');\n  \n  return quoteProcessed;\n};\n\n// --- AI Suggestion Popover Component ---\nconst AiSuggestionPopover = ({ suggestion, onAccept, onCancel, position }) => {\n  if (!suggestion || !suggestion.visible || suggestion.suggestionType === 'clarification_needed') return null;\n\n  const positionStyle = {\n    top: `${position?.top || 0}px`,\n    left: `${position?.left || 0}px`,\n  };\n\n  return (\n    <div \n      style={positionStyle} \n      className=\"fixed z-50 bg-white border border-gray-200 rounded-lg p-3 shadow-lg max-w-sm\"\n    >\n      <p className=\"mb-3 text-sm text-gray-700\">{suggestion.displayText}</p>\n      <div className=\"flex justify-end space-x-2\">\n        <button \n          onClick={() => onAccept(suggestion)}\n          className=\"px-4 py-1.5 bg-blue-500 text-white text-xs font-semibold rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 transition-colors\"\n        >\n          Run\n        </button>\n        <button \n          onClick={() => onCancel(suggestion.suggestionId)}\n          className=\"px-4 py-1.5 bg-gray-200 text-gray-700 text-xs font-semibold rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300 transition-colors\"\n        >\n          Cancel\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// --- Link Suggestion Popover Component ---\nconst LinkCreationPopover = ({ position, onCreateLink, onCancel, selectedText }) => {\n  const [inputValue, setInputValue] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [useAiSearch, setUseAiSearch] = useState(true); // AI ê²€ìƒ‰ ì‚¬ìš© ì—¬ë¶€ (ê¸°ë³¸ê°’: true)\n  const docSearchManager = useRef(new DocumentSearchManager());\n  \n  // debounced ê²€ìƒ‰ í•¨ìˆ˜\n  const debouncedSearch = useCallback(\n    debounce(async (searchTerm) => {\n      if (!searchTerm || searchTerm.trim().length === 0) {\n        setSearchResults([]);\n        setLoading(false);\n        return;\n      }\n      \n      try {\n        setLoading(true);\n        console.log(\"ë§í¬ ê²€ìƒ‰ ì‹œì‘:\", searchTerm);\n        \n        // URL í˜•ì‹ì¸ì§€ í™•ì¸\n        if (/^https?:\\/\\//i.test(searchTerm.trim())) {\n          setSearchResults([{\n            id: 'url',\n            title: `URL: ${searchTerm.trim()}`,\n            path: searchTerm.trim(),\n            isUrl: true\n          }]);\n          setLoading(false);\n          return;\n        }\n        \n        // ê²€ìƒ‰ ë°©ì‹ ì„ íƒ (AI ë˜ëŠ” í‚¤ì›Œë“œ)\n        let results;\n        if (useAiSearch) {\n          console.log(\"AI ê²€ìƒ‰ ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘...\");\n          // AI ê²€ìƒ‰ ì‚¬ìš©\n          results = await docSearchManager.current.searchByAi(searchTerm);\n        } else {\n          console.log(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘...\");\n          // í‚¤ì›Œë“œ ê²€ìƒ‰ë§Œ ì‚¬ìš©\n          results = await docSearchManager.current.searchByKeyword(searchTerm);\n        }\n        \n        // ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ìƒˆ ë¬¸ì„œ ë§Œë“¤ê¸° ì˜µì…˜ ì œê³µ\n        if (results.length === 0) {\n          const searchQuery = searchTerm.trim();\n          \n          // ê°œì„ ëœ slugify í•¨ìˆ˜ ì •ì˜ (ë‚´ë¶€ìš©)\n          const slugifyText = (text) => {\n            if (!text || text.trim() === '') {\n              return `doc-${Date.now()}`;\n            }\n            \n            const result = text.toLowerCase().trim()\n              .replace(/[\\s\\t\\r\\n]+/g, '-')\n              .replace(/[^\\w\\u3131-\\uD79D-]+/g, '-')\n              .replace(/-+/g, '-')\n              .replace(/^-+|-+$/g, '');\n              \n            return result || `doc-${Date.now()}`;\n          };\n          \n          setSearchResults([{ \n            id: 'new_' + searchQuery, \n            title: `\"${searchQuery}\" ìƒˆ ë¬¸ì„œ ìƒì„±`, \n            path: `/doc/${slugifyText(searchQuery)}`,\n            preview: `\"${searchQuery}\" ë¬¸ì„œë¥¼ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.`, \n            isCreateNew: true \n          }]);\n        } else {\n          setSearchResults(results);\n        }\n        \n        setLoading(false);\n      } catch (err) {\n        console.error(\"ê²€ìƒ‰ ì˜¤ë¥˜:\", err);\n        setError(\"ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.\");\n        setSearchResults([]);\n        setLoading(false);\n      }\n    }, 300),\n    [useAiSearch] // useAiSearch ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í•¨ìˆ˜ ì¬ìƒì„±\n  );\n  \n  // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ì‹œ ì„ íƒ í…ìŠ¤íŠ¸ë¡œ ìë™ ê²€ìƒ‰\n  useEffect(() => {\n    if (selectedText && selectedText.trim().length > 0) {\n      setInputValue(selectedText);\n      debouncedSearch(selectedText);\n    }\n  }, [selectedText, debouncedSearch]);\n  \n  // ì…ë ¥ê°’ ë³€ê²½ í•¸ë“¤ëŸ¬\n  const handleInputChange = (e) => {\n    const value = e.target.value;\n    setInputValue(value);\n    setError(null);\n    \n    if (value.trim().length > 0) {\n      setLoading(true);\n      debouncedSearch(value);\n    } else {\n      setSearchResults([]);\n    }\n  };\n\n  // ê²€ìƒ‰ ê²°ê³¼ ì„ íƒ í•¸ë“¤ëŸ¬\n  const handleResultClick = (result) => {\n    const editorInstance = window.editorRef?.current?.getInstance();\n    \n    if (editorInstance) {\n      const linkText = selectedText || result.title || result.path;\n      const linkUrl = result.path;\n      \n      try {\n        // WYSIWYG ëª¨ë“œì—ì„œ ì‹¤ì œ í•˜ì´í¼ë§í¬ë¡œ ì‚½ì…\n        if (editorInstance.isWysiwygMode()) {\n          // WYSIWYG ëª¨ë“œ: Toast UI Editorì˜ addLink ëª…ë ¹ ì‚¬ìš©\n          editorInstance.exec('addLink', {\n            linkText: linkText,\n            linkUrl: linkUrl\n          });\n          console.log(`WYSIWYG ëª¨ë“œì—ì„œ ë§í¬ ì‚½ì…: ${linkText} -> ${linkUrl}`);\n        } else {\n          // ë§ˆí¬ë‹¤ìš´ ëª¨ë“œ: ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ìœ¼ë¡œ ì‚½ì…\n          const markdownLink = `[${linkText}](${linkUrl})`;\n          editorInstance.insertText(markdownLink);\n          console.log(`ë§ˆí¬ë‹¤ìš´ ëª¨ë“œì—ì„œ ë§í¬ ì‚½ì…: ${markdownLink}`);\n        }\n      } catch (error) {\n        console.error('ë§í¬ ì‚½ì… ì˜¤ë¥˜:', error);\n        \n        // ì˜¤ë¥˜ ë°œìƒ ì‹œ ëŒ€ì²´ ë°©ë²•: ì§ì ‘ HTML ì‚½ì… ì‹œë„\n        try {\n          const linkHtml = `<a href=\"${linkUrl}\" target=\"_blank\" rel=\"noopener noreferrer\">${linkText}</a>`;\n          \n          if (editorInstance.isWysiwygMode()) {\n            // WYSIWYG ëª¨ë“œì—ì„œ HTML ì§ì ‘ ì‚½ì…\n            editorInstance.insertHTML(linkHtml);\n          } else {\n            // ë§ˆí¬ë‹¤ìš´ ëª¨ë“œì—ì„œëŠ” ë§ˆí¬ë‹¤ìš´ ë¬¸ë²• ì‚¬ìš©\n            const markdownLink = `[${linkText}](${linkUrl})`;\n            editorInstance.insertText(markdownLink);\n          }\n          \n          console.log(`ëŒ€ì²´ ë°©ë²•ìœ¼ë¡œ ë§í¬ ì‚½ì… ì„±ê³µ: ${linkText}`);\n        } catch (fallbackError) {\n          console.error('ëŒ€ì²´ ë§í¬ ì‚½ì…ë„ ì‹¤íŒ¨:', fallbackError);\n          \n          // ìµœí›„ì˜ ë°©ë²•: í´ë¦½ë³´ë“œì— ë³µì‚¬\n          try {\n            const linkText = `[${result.title}](${result.path})`;\n            navigator.clipboard.writeText(linkText);\n            alert(`ë§í¬ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤:\\n${linkText}`);\n          } catch (clipboardError) {\n            alert(`ë§í¬ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•´ì£¼ì„¸ìš”: [${result.title}](${result.path})`);\n          }\n        }\n      }\n    } else {\n      console.error('ì—ë””í„° ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\n    }\n    \n    onCancel();\n  };\n\n  return (\n    <div className=\"link-creation-popover\" style={{\n      position: 'absolute',\n      top: `${position.top}px`,\n      left: `${position.left}px`,\n      zIndex: 999,\n      backgroundColor: 'white',\n      border: '1px solid #ccc',\n      borderRadius: '4px',\n      boxShadow: '0 2px 5px rgba(0,0,0,0.2)',\n      padding: '10px',\n      width: '300px',\n    }}>\n      <div style={{ \n        display: 'flex', \n        justifyContent: 'space-between', \n        alignItems: 'center',\n        marginBottom: '10px' \n      }}>\n        <div style={{ fontWeight: 'bold' }}>ë§í¬ ìƒì„±</div>\n        <div style={{ \n          display: 'flex', \n          alignItems: 'center', \n          fontSize: '12px',\n          color: '#666'\n        }}>\n          <span style={{ marginRight: '6px' }}>AI ê²€ìƒ‰</span>\n          <label style={{ \n            position: 'relative',\n            display: 'inline-block',\n            width: '34px',\n            height: '18px',\n            cursor: 'pointer'\n          }}>\n            <input\n              type=\"checkbox\"\n              checked={useAiSearch}\n              onChange={() => setUseAiSearch(!useAiSearch)}\n              style={{ opacity: 0, width: 0, height: 0 }}\n            />\n            <span style={{ \n              position: 'absolute',\n              top: 0,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              backgroundColor: useAiSearch ? '#2196F3' : '#ccc',\n              borderRadius: '14px',\n              transition: '0.4s'\n            }}>\n              <span style={{ \n                position: 'absolute',\n                content: '\"\"',\n                height: '14px',\n                width: '14px',\n                left: useAiSearch ? '17px' : '3px',\n                bottom: '2px',\n                backgroundColor: 'white',\n                borderRadius: '50%',\n                transition: '0.4s'\n              }}></span>\n            </span>\n          </label>\n        </div>\n      </div>\n        \n      <div style={{ marginBottom: '10px' }}>\n        <input\n          type=\"text\"\n          placeholder=\"URL ë˜ëŠ” ë¬¸ì„œ ê²€ìƒ‰ì–´ ì…ë ¥...\"\n          value={inputValue}\n          onChange={handleInputChange}\n          style={{\n            width: '100%',\n            padding: '8px',\n            border: '1px solid #ddd',\n            borderRadius: '4px',\n            fontSize: '14px',\n          }}\n          autoFocus\n        />\n      </div>\n      \n      {loading ? (\n        <div style={{ \n          textAlign: 'center', \n          padding: '20px',\n          display: 'flex',\n          justifyContent: 'center',\n          alignItems: 'center'\n        }}>\n          <div style={{\n            border: '2px solid #f3f3f3',\n            borderTop: '2px solid #3498db',\n            borderRadius: '50%',\n            width: '20px',\n            height: '20px',\n            animation: 'spin 2s linear infinite',\n          }}></div>\n          <style>\n            {`\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n            `}\n          </style>\n          <span style={{ marginLeft: '8px' }}>ê²€ìƒ‰ ì¤‘...</span>\n        </div>\n      ) : error ? (\n        <div style={{ \n          color: 'red', \n          padding: '10px',\n          backgroundColor: '#fff8f8',\n          borderRadius: '4px',\n          marginBottom: '10px'\n        }}>\n          {error}\n        </div>\n      ) : (\n        <div style={{ maxHeight: '200px', overflowY: 'auto' }}>\n          {searchResults.length === 0 && inputValue.trim() !== '' ? (\n            <div style={{ \n              textAlign: 'center', \n              padding: '20px',\n              color: '#666'\n            }}>\n              <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\n              <p style={{ fontSize: '12px', marginTop: '6px' }}>\n                ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‹œë„í•˜ê±°ë‚˜ ìƒˆ ë¬¸ì„œë¥¼ ìƒì„±í•˜ì„¸ìš”.\n              </p>\n            </div>\n          ) : (\n            searchResults.map((result) => (\n              <div\n                key={result.id}\n                onClick={e => {\n                  e.stopPropagation();\n                  handleResultClick(result);\n                }}\n                style={{\n                  padding: '8px',\n                  borderBottom: '1px solid #eee',\n                  cursor: 'pointer',\n                  backgroundColor: result.isCreateNew ? '#f0f8ff' : (result.isSemanticMatch ? '#fff8e6' : 'white'),\n                  display: 'flex',\n                  flexDirection: 'column',\n                  transition: 'background-color 0.2s',\n                  borderRadius: '2px',\n                  ':hover': {\n                    backgroundColor: '#f5f5f5'\n                  }\n                }}\n                onMouseOver={(e) => e.currentTarget.style.backgroundColor = result.isCreateNew ? '#e6f0ff' : (result.isSemanticMatch ? '#fff0d0' : '#f5f5f5')}\n                onMouseOut={(e) => e.currentTarget.style.backgroundColor = result.isCreateNew ? '#f0f8ff' : (result.isSemanticMatch ? '#fff8e6' : 'white')}\n              >\n                <div style={{ fontWeight: 'bold' }}>\n                  {result.title}\n                  {result.isUrl && (\n                    <span style={{ \n                      marginLeft: '4px', \n                      fontSize: '10px', \n                      backgroundColor: '#e8f5e9', \n                      color: '#43a047',\n                      padding: '2px 4px',\n                      borderRadius: '4px',\n                      verticalAlign: 'middle'\n                    }}>URL</span>\n                  )}\n                </div>\n                \n                {result.preview && (\n                  <div style={{ \n                    fontSize: '12px', \n                    color: '#666', \n                    marginTop: '4px',\n                    whiteSpace: 'normal',\n                    overflow: 'hidden',\n                    textOverflow: 'ellipsis',\n                    display: '-webkit-box',\n                    WebkitLineClamp: 2,\n                    WebkitBoxOrient: 'vertical',\n                  }}>\n                    {result.preview}\n                  </div>\n                )}\n                \n                {result.isSemanticMatch && result.relevanceScore && (\n                  <div style={{ \n                    display: 'flex',\n                    alignItems: 'center',\n                    marginTop: '4px',\n                  }}>\n                    <span style={{ \n                      fontSize: '10px',\n                      color: '#ef6c00',\n                      backgroundColor: '#fff3e0',\n                      padding: '2px 4px',\n                      borderRadius: '4px',\n                      display: 'flex',\n                      alignItems: 'center',\n                      fontWeight: '500',\n                    }}>\n                      <span style={{ marginRight: '2px' }}>âœ¨</span>\n                      ê´€ë ¨ë„ {result.relevanceScore}%\n                    </span>\n                    \n                    {result.reason && (\n                      <span style={{ \n                        fontSize: '10px', \n                        color: '#757575',\n                        marginLeft: '6px',\n                        fontStyle: 'italic',\n                      }}>\n                        {result.reason.length > 40 ? result.reason.substring(0, 40) + '...' : result.reason}\n                      </span>\n                    )}\n                  </div>\n                )}\n                \n                {result.isCreateNew && (\n                  <div style={{ \n                    fontSize: '10px', \n                    color: '#1976d2', \n                    marginTop: '4px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    fontWeight: '500',\n                  }}>\n                    <span style={{ marginRight: '2px' }}>â•</span>\n                    ìƒˆ ë¬¸ì„œ ìƒì„±\n                  </div>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n      )}\n      \n      <div style={{ \n        marginTop: '10px', \n        display: 'flex', \n        justifyContent: 'space-between' \n      }}>\n        <button\n          onClick={onCancel}\n          style={{\n            padding: '6px 12px',\n            backgroundColor: '#f0f0f0',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n          }}\n        >\n          ì·¨ì†Œ\n        </button>\n        \n        <button\n          onClick={() => {\n            if (inputValue.trim()) {\n              // URL í˜•ì‹ì´ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš©\n              if (/^https?:\\/\\//i.test(inputValue.trim())) {\n                onCreateLink(inputValue.trim(), selectedText || inputValue.trim());\n              } else {\n                // ì•„ë‹ˆë©´ ìƒˆ ë¬¸ì„œ ìƒì„± ë§í¬ë¡œ ì‚¬ìš©\n                const slugify = (text) => text.toLowerCase().replace(/\\s+/g, '-').replace(/[^\\w-]+/g, '');\n                onCreateLink(`/doc/${slugify(inputValue.trim())}`, selectedText || inputValue.trim());\n              }\n            }\n          }}\n          style={{\n            padding: '6px 12px',\n            backgroundColor: '#4c9aff',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer',\n            opacity: inputValue.trim() ? 1 : 0.6,\n          }}\n          disabled={!inputValue.trim()}\n        >\n          ë§í¬ ìƒì„±\n        </button>\n      </div>\n    </div>\n  );\n};\n\n// --- Link Button Component ---\nconst LinkButton = ({ position, onClick, selectedText }) => {\n  return (\n    <button\n      style={{\n        position: 'fixed',\n        top: `${position?.top || 0}px`,\n        left: `${position?.left || 0}px`,\n        zIndex: 1000,\n        transform: 'translateX(-50%)',\n      }}\n      className=\"bg-blue-500 hover:bg-blue-600 text-white rounded-full p-3 shadow-lg flex items-center justify-center\"\n      onClick={() => onClick(selectedText)}\n      title=\"ë§í¬ ìƒì„±\"\n    >\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" viewBox=\"0 0 16 16\">\n        <path d=\"M6.354 5.5H4a3 3 0 0 0 0 6h3a3 3 0 0 0 2.83-4H9c-.086 0-.17.01-.25.031A2 2 0 0 1 7 10.5H4a2 2 0 1 1 0-4h1.535c.218-.376.495-.714.82-1z\"/>\n        <path d=\"M9 5.5a3 3 0 0 0-2.83 4h1.098A2 2 0 0 1 9 6.5h3a2 2 0 1 1 0 4h-1.535a4.02 4.02 0 0 1-.82 1H12a3 3 0 1 0 0-6H9z\"/>\n      </svg>\n    </button>\n  );\n};\n\n// --- MikiEditor Component ---\nconst MikiEditor = forwardRef(({ onContentChange, onSendToAi, onContextUpdate, onNavigateRequest }, ref) => {\n  const editorRef = useRef(null);\n  const [currentContent, setCurrentContent] = useState('');\n  const [editorSelection, setEditorSelection] = useState(null); // Store { range, text, cursor }\n  const [commandHistory, setCommandHistory] = useState([]);\n  const [historyPointer, setHistoryPointer] = useState(-1);\n  const [activeSuggestion, setActiveSuggestion] = useState(null); // Stores the AI suggestion object\n  const [pendingCommand, setPendingCommand] = useState(null);\n  const [showLinkButton, setShowLinkButton] = useState(false);\n  const [linkButtonPosition, setLinkButtonPosition] = useState({ top: 0, left: 0 });\n  const [showLinkPopover, setShowLinkPopover] = useState(false);\n  const [linkPopoverPosition, setLinkPopoverPosition] = useState({ top: 0, left: 0 });\n  const lastContentRef = useRef(''); // ë§ˆì§€ë§‰ ë‚´ìš©ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ref\n  const updateCountRef = useRef(0); // ë””ë²„ê¹…ìš© ì—…ë°ì´íŠ¸ ì¹´ìš´í„°\n  const [selectedTextForLink, setSelectedTextForLink] = useState(''); // ë§í¬ìš© ì„ íƒ í…ìŠ¤íŠ¸ ìƒíƒœ ì¶”ê°€\n  const [savedSelection, setSavedSelection] = useState(null); // WYSIWYGìš© ì„ íƒ ì˜ì—­ ì €ì¥\n\n  // ì—ë””í„° ì»¨í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•œ ë””ë°”ìš´ìŠ¤ í•¨ìˆ˜\n  const debouncedContextUpdate = useCallback(\n    debounce((markdownContent, selectionInfo) => {\n      if (onContextUpdate) {\n        onContextUpdate({ fullContent: markdownContent, selection: selectionInfo });\n      }\n    }, 300),\n    [onContextUpdate]\n  );\n\n  // ì—ë””í„° ë‚´ìš© ë³€ê²½ ì½œë°±ì„ ìœ„í•œ ë””ë°”ìš´ìŠ¤ í•¨ìˆ˜ (ë” ì§§ì€ ì‹œê°„)\n  const debouncedContentChange = useCallback(\n    debounce((content) => {\n      if (onContentChange && lastContentRef.current !== content) {\n        // ì‹¤ì œ ë‚´ìš©ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œë§Œ í˜¸ì¶œ\n        lastContentRef.current = content;\n        onContentChange(content);\n      }\n    }, 150), // íƒ€ì´í•‘ ì‘ë‹µì„±ì„ ìœ„í•´ ì§§ê²Œ ì„¤ì •\n    [onContentChange]\n  );\n\n  // Handles editor content and selection changes - ë””ë°”ìš´ìŠ¤ ì²˜ë¦¬\n  const handleEditorActivity = useCallback(\n    debounce(() => {\n    if (!editorRef.current) return;\n    const instance = editorRef.current.getInstance();\n    const markdownContent = instance.getMarkdown();\n    const selection = instance.getSelection(); // [[line, char], [line, char]]\n    const selectedText = instance.getSelectedText();\n    let cursorPositionInfo = null;\n    if (selection && selection.length === 2 && selection[0] && selection[0].length === 2) {\n      cursorPositionInfo = selection[0]; // [line, char] for the start of the selection or cursor\n    }\n\n    const selectionInfo = {\n      range: selection,\n      text: selectedText,\n      cursor: cursorPositionInfo,\n    };\n\n      // ë‚´ìš©ì´ ë³€ê²½ëœ ê²½ìš°ì—ë§Œ ìƒíƒœ ì—…ë°ì´íŠ¸ ë° ì½œë°± í˜¸ì¶œ\n      if (currentContent !== markdownContent) {\n        updateCountRef.current++;\n        \n        // ê°œë°œ ë¡œê·¸ëŠ” 10íšŒë§ˆë‹¤ ì¶œë ¥ (ë¡œê·¸ ìˆ˜ ê°ì†Œ)\n        if (updateCountRef.current % 10 === 0) {\n          console.log(`ì—ë””í„° ë‚´ìš© ì—…ë°ì´íŠ¸ (${updateCountRef.current}íšŒ): ê¸¸ì´=${markdownContent.length}`);\n        }\n        \n    setCurrentContent(markdownContent);\n        debouncedContentChange(markdownContent);\n      }\n\n      setEditorSelection(selectionInfo);\n    debouncedContextUpdate(markdownContent, selectionInfo);\n    }, 50), // 50ms ë””ë°”ìš´ìŠ¤ë¡œ ì—…ë°ì´íŠ¸ ë¹ˆë„ ì œí•œ\n    [debouncedContextUpdate, debouncedContentChange, currentContent]\n  );\n\n  // í…ìŠ¤íŠ¸ ì„ íƒ ì‹œ ë§í¬ ë²„íŠ¼ í‘œì‹œ ì²˜ë¦¬\n  const handleSelectionChange = useCallback(() => {\n    if (!editorRef.current) return;\n    const instance = editorRef.current.getInstance();\n    const selectedText = instance.getSelectedText();\n    \n    if (selectedText && selectedText.trim().length > 0) {\n      // ì„ íƒ ì˜ì—­ ìœ„ì¹˜ ê³„ì‚°\n      const selection = window.getSelection();\n      if (selection && selection.rangeCount > 0) {\n        const range = selection.getRangeAt(0);\n        const rect = range.getBoundingClientRect();\n        \n        // ì—ë””í„° ìš”ì†Œì˜ ê²½ê³„ ê°€ì ¸ì˜¤ê¸°\n        const editorEl = instance.wwEditor?.el || instance.mdEditor?.el;\n        const editorRect = editorEl ? editorEl.getBoundingClientRect() : { left: 0, right: window.innerWidth };\n        \n        // ì„ íƒëœ í…ìŠ¤íŠ¸ì˜ ì¤‘ê°„ ì§€ì  ê³„ì‚°\n        const leftPos = rect.left + (rect.width / 2);\n        \n        // ì„ íƒëœ í…ìŠ¤íŠ¸ ì €ì¥\n        setSelectedTextForLink(selectedText);\n        \n        // ë§í¬ ë²„íŠ¼ ìœ„ì¹˜ ì„¤ì • (ì„ íƒ í…ìŠ¤íŠ¸ ì¤‘ê°„ ì§€ì  ê¸°ì¤€)\n        setLinkButtonPosition({\n          top: rect.bottom + window.scrollY + 5, // í…ìŠ¤íŠ¸ ì•„ë˜ì— ì•½ê°„ì˜ ì—¬ë°± ì¶”ê°€\n          left: leftPos // í…ìŠ¤íŠ¸ì˜ ì¤‘ê°„ ìœ„ì¹˜\n        });\n        setShowLinkButton(true);\n      }\n    } else {\n      setShowLinkButton(false);\n    }\n  }, []);\n\n  // ì—ë””í„° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ìˆ˜ì • - ìµœì í™”\n  useEffect(() => {\n    const instance = editorRef.current?.getInstance();\n    if (instance) {\n      // ì´ì „ ë¦¬ìŠ¤ë„ˆ ëª¨ë‘ ì œê±°\n      instance.off('change');\n      instance.off('caretChange');\n      \n      // í•„ìˆ˜ ì´ë²¤íŠ¸ë§Œ ë“±ë¡\n      instance.on('change', handleEditorActivity);\n      \n      // ìºëŸ¿ ë³€ê²½ì€ ì„ íƒ ë³€ê²½ì—ë§Œ ì˜í–¥ì„ ì¤Œ\n      instance.on('caretChange', () => {\n        handleSelectionChange();\n      });\n      \n      const editorRoot = instance.wwEditor?.el || instance.mdEditor?.el;\n      if (editorRoot) {\n        // í‚¤ë³´ë“œ ê´€ë ¨ ì´ë²¤íŠ¸ëŠ” í‚¤ë‹¤ìš´ë§Œ ì‚¬ìš© (ì¤‘ë³µ ë°©ì§€)\n        const handleEditorKeyDown = (event) => {\n          // Undo/Redo shortcuts\n          if ((event.ctrlKey || event.metaKey) && event.key === 'z') {\n            event.preventDefault();\n            ref.current?.undo();\n            return;\n          }\n          if ((event.ctrlKey || event.metaKey) && event.key === 'y') {\n            event.preventDefault();\n            ref.current?.redo();\n            return;\n          }\n          \n          // Enter í‚¤ ì²˜ë¦¬ë¥¼ ìœ„í•œ ë¡œì§ - AI ì—°ë™\n          if (event.key === 'Enter' && !event.shiftKey) {\n            const currentSelection = instance.getSelection();\n            if (currentSelection && currentSelection.length > 0 && currentSelection[0] && currentSelection[0].length > 0) {\n              const lineIndex = currentSelection[0][0]; // 0-based line index\n              const currentLineText = instance.getMarkdown().split('\\n')[lineIndex];\n              \n              if (currentLineText && currentLineText.trim().length > 0 && onSendToAi) {\n                // ì½˜ì†” ë¡œê·¸ ìµœì†Œí™”\n                // console.log(`Enter pressed on line ${lineIndex + 1}`);\n                \n                onSendToAi({\n                  text: currentLineText.trim(),\n                  type: 'user_command_editor_enter',\n                  commandContext: {\n                    lineNumber: lineIndex + 1, // 1-based for AI\n                    fullLineText: currentLineText,\n                    currentSelection: editorSelection, // Send full editor selection context\n                    fullContent: instance.getMarkdown()\n                  }\n                });\n              }\n            }\n          }\n        };\n        \n        // ë§í¬ í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€\n        const handleLinkClick = (event) => {\n          const link = event.target.closest('a');\n          if (link && link.getAttribute('href')) { // .href ëŒ€ì‹  getAttribute ì‚¬ìš©\n            const href = link.getAttribute('href');\n            // ë‚´ë¶€ ë¬¸ì„œ ë§í¬ì¸ì§€ í™•ì¸ (/doc/ ì ‘ë‘ì‚¬)\n            if (href.startsWith('/doc/')) {\n              event.preventDefault();\n              event.stopPropagation();\n              \n              // ë¬¸ì„œ ê²½ë¡œ ì¶”ì¶œ\n              const docPath = href.split('/doc/')[1].replace('/', '');\n              console.log(`ë‚´ë¶€ ë¬¸ì„œ ë§í¬ í´ë¦­: ${docPath}`);\n              \n              // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸(App.jsx)ì˜ ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜ í˜¸ì¶œ\n              if (onNavigateRequest) {\n                onNavigateRequest(docPath);\n              } else {\n                console.warn('onNavigateRequest propì´ MikiEditorì— ì „ë‹¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');\n              }\n            } else if (href.startsWith('http')) {\n              // ì™¸ë¶€ ë§í¬ëŠ” ìƒˆ íƒ­ì—ì„œ ì—´ê¸°\n              event.preventDefault();\n              window.open(href, '_blank', 'noopener,noreferrer');\n            }\n            // ê·¸ ì™¸ (mailto: ë“±)ëŠ” ê¸°ë³¸ ë™ì‘ í—ˆìš©\n          }\n        };\n        \n        // ë¶™ì—¬ë„£ê¸° ì´ë²¤íŠ¸ (ì£¼ìš” ì´ë²¤íŠ¸ì´ë¯€ë¡œ ìœ ì§€)\n        const handlePaste = () => {\n          // ë¶™ì—¬ë„£ê¸° í›„ ì•½ê°„ì˜ ì§€ì—°ì„ ì£¼ì–´ ë‚´ìš©ì´ ë°˜ì˜ëœ í›„ í˜¸ì¶œ\n          setTimeout(handleEditorActivity, 10);\n        };\n        \n        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬ - í•„ìˆ˜ ì´ë²¤íŠ¸ë§Œ ë“±ë¡\n        editorRoot.addEventListener('keydown', handleEditorKeyDown);\n        editorRoot.addEventListener('paste', handlePaste);\n        editorRoot.addEventListener('mouseup', handleSelectionChange);\n        editorRoot.addEventListener('click', handleLinkClick); // ë§í¬ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€\n        \n        return () => {\n          editorRoot.removeEventListener('keydown', handleEditorKeyDown);\n          editorRoot.removeEventListener('paste', handlePaste);\n          editorRoot.removeEventListener('mouseup', handleSelectionChange);\n          editorRoot.removeEventListener('click', handleLinkClick);\n        };\n      }\n    }\n  }, [handleEditorActivity, onSendToAi, editorSelection, commandHistory, historyPointer, ref, handleSelectionChange, onNavigateRequest]);\n\n  // Calculates position for the suggestion popover\n  const calculateSuggestionPosition = (actionRange) => {\n    if (!editorRef.current) return { top: 100, left: 100 }; // Default fallback\n    const editorInstance = editorRef.current.getInstance();\n    const editorDomElement = editorInstance.wwEditor?.el || editorInstance.mdEditor?.el;\n    if (!editorDomElement) return { top: 100, left: 100 };\n    const editorRect = editorDomElement.getBoundingClientRect();\n\n    let targetRangeForPos = actionRange;\n    if (typeof actionRange === 'string') {\n        if (actionRange === 'cursor' || actionRange === 'selection') {\n            targetRangeForPos = editorSelection?.range;\n        }\n        // 'document_start', 'document_end', 'line_number' might need more specific handling\n    }\n\n    if (targetRangeForPos && targetRangeForPos.from && Array.isArray(targetRangeForPos.from)) {\n      try {\n        const winSel = window.getSelection();\n        if (winSel && winSel.rangeCount > 0) {\n          const range = winSel.getRangeAt(0);\n          const rect = range.getBoundingClientRect();\n          if (editorDomElement.contains(range.commonAncestorContainer) && (rect.width > 0 || rect.height > 0)) {\n            return {\n              top: rect.bottom + window.scrollY + 5,\n              left: rect.left + window.scrollX,\n            };\n          }\n        }\n        // Fallback if window selection is not useful or not in editor\n        const approxLineHeight = 20;\n        const targetLine = targetRangeForPos.from[0]; // 0-based line\n        return {\n          top: editorRect.top + window.scrollY + (targetLine * approxLineHeight) + approxLineHeight + 10,\n          left: editorRect.left + window.scrollX + editorRect.width * 0.1, // Indent a bit\n        };\n      } catch (e) {\n        console.warn(\"Error calculating suggestion position from range, using fallback.\", e);\n      }\n    }\n    // General fallback if no specific range info\n    return { top: editorRect.top + window.scrollY + 50, left: editorRect.left + window.scrollX + 50 };\n  };\n\n  /**\n   * AI ì•¡ì…˜ì„ ì—ë””í„°ì— ì ìš©í•˜ëŠ” í•¨ìˆ˜\n   * @param {Object} action - ì ìš©í•  ì•¡ì…˜ ê°ì²´\n   * @param {Object} editorInstance - ì—ë””í„° ì¸ìŠ¤í„´ìŠ¤\n   * @returns {boolean} - ì•¡ì…˜ ì ìš© ì„±ê³µ ì—¬ë¶€\n   */\n  const _applySingleActionToEditor = (action, editorInstance) => {\n    if (!action || !editorInstance) return false;\n    try {\n      switch (action.actionType) {\n        // ì¼ë°˜ í…ìŠ¤íŠ¸ ì‚½ì… (ëŒ€í™”/ê¸€ í™•ì¥)\n      case 'insert_content':\n          editorInstance.insertText(action.content);\n          return true;\n        // ë§ˆí¬ë‹¤ìš´ ë§í¬ ì‚½ì…\n        case 'insert_markdown_link':\n          editorInstance.insertText(action.content);\n          return true;\n        // ê¸°ì¡´ ë¬¸ì„œ ë³µì› (ì „ì²´ ë¬¸ì„œ êµì²´)\n        case 'restore_document':\n          if (action.range === 'full_document') {\n            editorInstance.setMarkdown(action.content || '');\n            return true;\n          }\n          return false;\n        // ê¸°íƒ€ ë§ˆí¬ë‹¤ìš´ ì„œì‹ ì•¡ì…˜ë“¤ (ì˜ˆì‹œ)\n        case 'format_bold':\n        case 'format_italic':\n          // í•„ìš”ì‹œ ì„œì‹ ì²˜ë¦¬ ì¶”ê°€\n          return true;\n          default:\n          console.warn(`ì§€ì›ë˜ì§€ ì•ŠëŠ” ì•¡ì…˜ íƒ€ì…: ${action.actionType}`);\n          return false;\n        }\n    } catch (e) {\n      console.error('ì•¡ì…˜ ì ìš© ì˜¤ë¥˜:', e);\n      return false;\n    }\n  };\n\n  // Handles accepting an AI suggestion\n  const handleAcceptSuggestion = (suggestion) => {\n    if (!editorRef.current || !suggestion || !Array.isArray(suggestion.actions) || suggestion.actions.length === 0) {\n      setActiveSuggestion(null);\n      console.warn('Attempted to accept an invalid or empty suggestion:', suggestion);\n      return;\n    }\n    const editorInstance = editorRef.current.getInstance();\n    const beforeStateAllActions = editorInstance.getMarkdown();\n    let anyActionApplied = false;\n\n    suggestion.actions.forEach(action => {\n      // Validate action structure here if needed, or assume valid from AI\n      const commandApplied = _applySingleActionToEditor(action, editorInstance);\n      if (commandApplied) {\n        anyActionApplied = true;\n      }\n    });\n\n    if (anyActionApplied) {\n      const afterStateAllActions = editorInstance.getMarkdown();\n      if (beforeStateAllActions !== afterStateAllActions) {\n        const newHistory = commandHistory.slice(0, historyPointer + 1);\n        newHistory.push({\n          before: beforeStateAllActions,\n          after: afterStateAllActions,\n          // Store the whole suggestion for context, or just the applied actions\n          command: { type: \"ai_suggestion\", suggestionId: suggestion.suggestionId, actions: suggestion.actions }\n        });\n        setCommandHistory(newHistory);\n        setHistoryPointer(newHistory.length - 1);\n      }\n      handleEditorActivity(); // Update context after applying actions\n    }\n    setActiveSuggestion(null); // Hide popover\n  };\n\n  // Handles cancelling an AI suggestion\n  const handleCancelSuggestion = (suggestionId) => {\n    setActiveSuggestion(null);\n    // Optionally, send feedback to AI that suggestion was cancelled\n  };\n\n  // 4ë‹¨ê³„: AI êµ¬ì¡°í™” ëª…ë ¹ ì ìš© í•¨ìˆ˜\n  const handleApplySuggestion = useCallback(() => {\n    if (!pendingCommand || !editorRef.current) return;\n    console.log(\"êµ¬ì¡°í™” ëª…ë ¹ ì ìš© ì‹œë„:\", pendingCommand); // ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\n    const editorInstance = editorRef.current.getInstance();\n    let anyActionApplied = false;\n\n    // ë‹¤ì–‘í•œ ëª…ë ¹ í˜•ì‹ ì²˜ë¦¬\n    if (pendingCommand.actions && Array.isArray(pendingCommand.actions)) {\n      // v7 actions ë°°ì—´ í˜•ì‹\n      pendingCommand.actions.forEach(action => {\n        const commandApplied = _applySingleActionToEditor(action, editorInstance);\n        if (commandApplied) anyActionApplied = true;\n      });\n    } else if (pendingCommand.action && typeof pendingCommand.action === 'object') {\n      // action ê°ì²´ê°€ ì§ì ‘ ìˆëŠ” ê²½ìš°\n      const commandApplied = _applySingleActionToEditor(pendingCommand.action, editorInstance);\n      if (commandApplied) anyActionApplied = true;\n    } else if (pendingCommand.actionType) {\n      // ìì²´ê°€ ì•¡ì…˜ ê°ì²´ì¸ ê²½ìš°\n      const commandApplied = _applySingleActionToEditor(pendingCommand, editorInstance);\n      if (commandApplied) anyActionApplied = true;\n    } else if (pendingCommand.displayText && !pendingCommand.isSuggestion) {\n      // ë‹¨ìˆœ í‘œì‹œìš© í…ìŠ¤íŠ¸ë§Œ ìˆëŠ” ê²½ìš°\n      console.log(\"í‘œì‹œìš© í…ìŠ¤íŠ¸ ì‘ë‹µ:\", pendingCommand.displayText);\n      // ì•„ë¬´ ì•¡ì…˜ë„ ìˆ˜í–‰í•˜ì§€ ì•ŠìŒ\n    } else {\n      console.warn(\"ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ í˜•ì‹:\", pendingCommand);\n    }\n    \n    if (anyActionApplied) {\n      handleEditorActivity();\n      console.log(\"êµ¬ì¡°í™” ëª…ë ¹ ì ìš© ì„±ê³µ\"); // ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\n    } else {\n      console.warn(\"êµ¬ì¡°í™” ëª…ë ¹ ì ìš© ì‹¤íŒ¨ ë˜ëŠ” í‘œì‹œ ì „ìš© ëª…ë ¹\"); // ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€\n    }\n    setPendingCommand(null);\n  }, [pendingCommand, editorRef, handleEditorActivity]);\n\n  // AiPanelì—ì„œ êµ¬ì¡°í™” ëª…ë ¹ì„ ë°›ëŠ” ì½œë°±\n  const handleStructuredCommand = useCallback((cmd) => {\n    setPendingCommand(cmd);\n  }, []);\n\n  // pendingCommandê°€ ë³€ê²½ë  ë•Œ handleApplySuggestion í˜¸ì¶œ\n  useEffect(() => {\n    if (pendingCommand) {\n      handleApplySuggestion();\n    }\n  }, [pendingCommand, handleApplySuggestion]);\n\n  // Expose methods to parent component (App.js)\n  useImperativeHandle(ref, () => ({\n    insertText(textToInsert, atRange) { // Simple text insertion, can be part of AI action too\n      if (editorRef.current) {\n        const instance = editorRef.current.getInstance();\n        if (instance.getMode && instance.getMode() !== 'wysiwyg') instance.changeMode('wysiwyg');\n        const beforeState = instance.getMarkdown();\n        \n        let insertFrom = atRange?.from;\n        let insertTo = atRange?.to;\n        if (!insertFrom || !insertTo){\n            const currentSel = instance.getSelection();\n            insertFrom = currentSel[0];\n            insertTo = currentSel[0]; // insert at cursor start\n        }\n\n        instance.replaceSelection(textToInsert, insertFrom, insertTo);\n        \n        const afterState = instance.getMarkdown();\n        if (beforeState !== afterState) {\n          const newHistory = commandHistory.slice(0, historyPointer + 1);\n          newHistory.push({ before: beforeState, after: afterState, command: { type: 'insertText', content: textToInsert } });\n          setCommandHistory(newHistory);\n          setHistoryPointer(newHistory.length - 1);\n        }\n        handleEditorActivity();\n      }\n    },\n    // App.jsxì—ì„œ í˜¸ì¶œí•˜ëŠ” applyStructuredAiCommand ë©”ì„œë“œ êµ¬í˜„\n    applyStructuredAiCommand(commandAction) {\n      console.log(\"applyStructuredAiCommand í˜¸ì¶œë¨:\", commandAction);\n      \n      // ì‚¬ìš©ì í™•ì¸ì´ í•„ìš”í•œ ëª…ë ¹ì¸ì§€ í™•ì¸\n      const requiresConfirmation = true; // ëª¨ë“  ëª…ë ¹ì— ëŒ€í•´ ì‚¬ìš©ì í™•ì¸ í•„ìš”\n\n      if (requiresConfirmation) {\n        // ëª…ë ¹ ë‚´ìš© ì„¤ëª… ì¤€ë¹„\n        let actionDesc = \"ì—ë””í„° ë‚´ìš©ì„ ìˆ˜ì •í•˜ë ¤ê³  í•©ë‹ˆë‹¤.\";\n        if (commandAction.displayText) {\n          actionDesc = commandAction.displayText;\n        } else if (commandAction.actionType) {\n          actionDesc = `${commandAction.actionType} ì‘ì—…ì„ ìˆ˜í–‰í•˜ë ¤ê³  í•©ë‹ˆë‹¤.`;\n        }\n\n        // ì‚¬ìš©ì í™•ì¸ ìš”ì²­\n        if (window.confirm(`AIê°€ ë‹¤ìŒ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë ¤ê³  í•©ë‹ˆë‹¤:\\n\\n${actionDesc}\\n\\ní—ˆìš©í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\n          // ì‚¬ìš©ìê°€ í™•ì¸í•œ ê²½ìš°ì—ë§Œ ëª…ë ¹ ì‹¤í–‰\n          handleStructuredCommand(commandAction);\n        } else {\n          console.log(\"ì‚¬ìš©ìê°€ ëª…ë ¹ ì‹¤í–‰ì„ ì·¨ì†Œí–ˆìŠµë‹ˆë‹¤.\");\n        }\n      } else {\n        // ì¦‰ì‹œ ì‹¤í–‰ì´ í•„ìš”í•œ íŠ¹ìˆ˜í•œ ê²½ìš°ê°€ ìˆë‹¤ë©´ ì—¬ê¸°ì— ì¶”ê°€\n        handleStructuredCommand(commandAction);\n      }\n    },\n    undo() {\n      if (historyPointer < 0) return;\n      const lastEdit = commandHistory[historyPointer];\n      editorRef.current.getInstance().setMarkdown(lastEdit.before);\n      setHistoryPointer(historyPointer - 1);\n      handleEditorActivity();\n    },\n    redo() {\n      if (historyPointer + 1 >= commandHistory.length) return;\n      const nextEdit = commandHistory[historyPointer + 1];\n      editorRef.current.getInstance().setMarkdown(nextEdit.after);\n      setHistoryPointer(historyPointer + 1);\n      handleEditorActivity();\n    },\n    displayAiSuggestion(suggestionObject) {\n      // Expect suggestionObject to be the parsed JSON from AI according to v7 schema\n      if (suggestionObject && suggestionObject.isSuggestion && suggestionObject.actions && suggestionObject.actions.length > 0) {\n        // Determine position based on the first action's range, or a general position\n        const firstActionRange = suggestionObject.actions[0].range;\n        const pos = calculateSuggestionPosition(firstActionRange);\n        setActiveSuggestion({ ...suggestionObject, visible: true, position: pos });\n        \n        // ì‚¬ìš©ìì—ê²Œ ì œì•ˆ ë‚´ìš© ì•Œë¦¼ì„ ìœ„í•œ ë¡œê·¸\n        console.log(\"ì—ë””í„°ì— AI ì œì•ˆì´ í‘œì‹œë©ë‹ˆë‹¤:\", suggestionObject.displayText);\n      } else if (suggestionObject && suggestionObject.suggestionType === 'clarification_needed'){\n        // Handle clarification requests (e.g., show a different UI or send to AiPanel)\n        console.log(\"Clarification needed from AI:\", suggestionObject.displayText, suggestionObject.clarificationDetails);\n        // For now, just log it. AiPanel could handle this.\n        if(onSendToAi && suggestionObject.clarificationDetails && suggestionObject.clarificationDetails.query){\n            // Example: Forward clarification to AiPanel to display options\n            // This part needs AiPanel to be able to handle such interactions\n        }\n        setActiveSuggestion(null); // Don't show standard popover for clarifications\n      } else {\n        console.warn('Received invalid or non-actionable suggestion object:', suggestionObject);\n        setActiveSuggestion(null); // Hide popover if any\n      }\n    },\n    getEditorInstance() {\n      return editorRef.current?.getInstance();\n    },\n    getCurrentContext() {\n        return { fullContent: currentContent, selection: editorSelection };\n    }\n  }));\n\n  // ë§í¬ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬\n  const handleLinkButtonClick = useCallback((selectedText) => {\n    console.log(\"ë§í¬ ë²„íŠ¼ í´ë¦­ë¨, ì„ íƒëœ í…ìŠ¤íŠ¸:\", selectedText);\n    // ì„ íƒ ì˜ì—­ ì €ì¥ (WYSIWYG ëª¨ë“œì—ì„œ í•„ìš”)\n    if (editorRef.current) {\n      const instance = editorRef.current.getInstance();\n      setSavedSelection(instance.getSelection());\n    }\n    setLinkPopoverPosition(linkButtonPosition);\n    setShowLinkButton(false);\n    setShowLinkPopover(true);\n  }, [linkButtonPosition]);\n\n  // ë§í¬ ìƒì„± í•¸ë“¤ëŸ¬\n  const handleLinkCreate = useCallback((linkUrl, linkText) => {\n    console.log(`ë§í¬ ìƒì„±: ${linkText} -> ${linkUrl}`);\n    if (!editorRef.current) return;\n\n    const editor = editorRef.current.getInstance();\n\n    try {\n      if (editor.isWysiwygMode()) {\n        // WYSIWYG ëª¨ë“œ: Toast UI Editorì˜ addLink ëª…ë ¹ ì‚¬ìš©\n        try {\n          editor.exec('addLink', {\n            linkText: linkText || linkUrl,\n            linkUrl: linkUrl\n          });\n          console.log(`WYSIWYG ëª¨ë“œì—ì„œ ë§í¬ ì‚½ì… ì„±ê³µ: ${linkText} -> ${linkUrl}`);\n        } catch (addLinkError) {\n          console.warn('addLink ëª…ë ¹ ì‹¤íŒ¨, ëŒ€ì²´ ë°©ë²• ì‹œë„:', addLinkError);\n          \n          // ëŒ€ì²´ ë°©ë²•: HTML ì§ì ‘ ì‚½ì…\n          const linkHtml = `<a href=\"${linkUrl}\" target=\"_blank\" rel=\"noopener noreferrer\">${linkText || linkUrl}</a>`;\n          editor.insertHTML(linkHtml);\n          console.log(`HTML ì§ì ‘ ì‚½ì…ìœ¼ë¡œ ë§í¬ ìƒì„± ì„±ê³µ`);\n        }\n      } else {\n        // ë§ˆí¬ë‹¤ìš´ ëª¨ë“œ: ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ìœ¼ë¡œ ì‚½ì…\n        const markdownLink = `[${linkText || linkUrl}](${linkUrl})`;\n        editor.insertText(markdownLink);\n        console.log(`ë§ˆí¬ë‹¤ìš´ ëª¨ë“œì—ì„œ ë§í¬ ì‚½ì…: ${markdownLink}`);\n      }\n    } catch (error) {\n      console.error(\"ë§í¬ ìƒì„± ì˜¤ë¥˜:\", error);\n      \n      // ìµœí›„ì˜ ë°©ë²•: í´ë¦½ë³´ë“œì— ë³µì‚¬ í›„ ì•Œë¦¼\n      try {\n        const fallbackText = `[${linkText || linkUrl}](${linkUrl})`;\n        navigator.clipboard.writeText(fallbackText);\n        alert(`ë§í¬ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤:\\n${fallbackText}\\n\\nCtrl+Vë¡œ ë¶™ì—¬ë„£ê¸° í•´ì£¼ì„¸ìš”.`);\n      } catch (clipboardErr) {\n        console.error(\"í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:\", clipboardErr);\n        alert(`ë§í¬ ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë§í¬ë¥¼ ì¶”ê°€í•´ì£¼ì„¸ìš”:\\n[${linkText || linkUrl}](${linkUrl})`);\n      }\n    }\n\n    setShowLinkPopover(false);\n  }, []);\n\n  // ë§í¬ ìƒì„± ì·¨ì†Œ í•¸ë“¤ëŸ¬\n  const handleCancelLinkCreation = useCallback(() => {\n    setShowLinkPopover(false);\n  }, []);\n\n  // EditorUI ìŠ¤íƒ€ì¼ ì°¸ì¡°\n  const editorStyle = {\n    height: '100%',\n    overflow: 'auto',\n    display: 'flex',\n    flexDirection: 'column',\n  };\n\n  // ì—ë””í„° ì¸ìŠ¤í„´ìŠ¤ ê´€ë ¨ ìŠ¤íƒ€ì¼\n  const toastUIEditorStyle = {\n    flex: 1,\n    overflow: 'auto',\n    minHeight: '200px',\n    maxHeight: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  };\n\n  // ì „ì—­ ì ‘ê·¼ì„ ìœ„í•´ window ê°ì²´ì— ì„¤ì •\n  useEffect(() => {\n    window.editorRef = editorRef;\n    return () => {\n      delete window.editorRef;\n    };\n  }, []);\n\n  // ë¬¸ì„œ ê²½ë¡œë¡œ ë¬¸ì„œ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜\n  const loadDocumentByPath = useCallback(async (docPath, linkText) => {\n    console.log(`ë¬¸ì„œ ë¡œë“œ ì‹œë„: ${docPath} (ë§í¬ í…ìŠ¤íŠ¸: ${linkText})`);\n    \n    try {\n      // 1. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¬¸ì„œ ì°¾ê¸° (ì—¬ëŸ¬ íŒ¨í„´ ì‹œë„)\n      const possibleKeys = [\n        `miki_document_${docPath}`,\n        `miki_document_${docPath.toLowerCase()}`,\n        `miki_document_${docPath.replace(/-/g, ' ')}`,\n        `miki_document_${linkText ? slugify(linkText) : docPath}`\n      ];\n      \n      let foundDoc = null;\n      let foundKey = null;\n      \n      for (const key of possibleKeys) {\n        const docData = localStorage.getItem(key);\n        if (docData) {\n          try {\n            foundDoc = JSON.parse(docData);\n            foundKey = key;\n            console.log(`ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¬¸ì„œ ë°œê²¬: ${key}`);\n            break;\n          } catch (parseError) {\n            console.warn(`ë¬¸ì„œ íŒŒì‹± ì˜¤ë¥˜ (${key}):`, parseError);\n          }\n        }\n      }\n      \n      // 2. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì—†ìœ¼ë©´ ì œëª©ìœ¼ë¡œ ê²€ìƒ‰\n      if (!foundDoc) {\n        console.log('í‚¤ë¡œ ì°¾ì§€ ëª»í•¨, ì œëª©ìœ¼ë¡œ ê²€ìƒ‰ ì‹œë„...');\n        const allKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\n        \n        for (const key of allKeys) {\n          try {\n            const docData = JSON.parse(localStorage.getItem(key));\n            if (docData.title && (\n              docData.title.toLowerCase() === linkText?.toLowerCase() ||\n              docData.title.toLowerCase() === docPath.toLowerCase() ||\n              slugify(docData.title) === docPath\n            )) {\n              foundDoc = docData;\n              foundKey = key;\n              console.log(`ì œëª©ìœ¼ë¡œ ë¬¸ì„œ ë°œê²¬: ${docData.title}`);\n              break;\n            }\n          } catch (e) {\n            // íŒŒì‹± ì˜¤ë¥˜ ë¬´ì‹œ\n          }\n        }\n      }\n      \n      // 3. ì„œë²„ì—ì„œ ë¬¸ì„œ ì°¾ê¸° (ë¡œì»¬ì— ì—†ëŠ” ê²½ìš°)\n      if (!foundDoc) {\n        console.log('ë¡œì»¬ì—ì„œ ì°¾ì§€ ëª»í•¨, ì„œë²„ì—ì„œ ê²€ìƒ‰ ì‹œë„...');\n        try {\n          const response = await fetch(`http://localhost:3003/api/posts`);\n          if (response.ok) {\n            const serverPosts = await response.json();\n            const matchedPost = serverPosts.find(post => \n              post.id === docPath || \n              post.title?.toLowerCase() === linkText?.toLowerCase() ||\n              slugify(post.title || '') === docPath\n            );\n            \n            if (matchedPost) {\n              foundDoc = matchedPost;\n              console.log(`ì„œë²„ì—ì„œ ë¬¸ì„œ ë°œê²¬: ${matchedPost.title}`);\n              \n              // ì„œë²„ì—ì„œ ê°€ì ¸ì˜¨ ë¬¸ì„œë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ë„ ì €ì¥\n              const localKey = `miki_document_${matchedPost.id || docPath}`;\n              localStorage.setItem(localKey, JSON.stringify(matchedPost));\n              console.log(`ì„œë²„ ë¬¸ì„œë¥¼ ë¡œì»¬ì— ìºì‹œ: ${localKey}`);\n            }\n          }\n        } catch (serverError) {\n          console.warn('ì„œë²„ì—ì„œ ë¬¸ì„œ ê²€ìƒ‰ ì‹¤íŒ¨:', serverError);\n        }\n      }\n      \n      // 4. ë¬¸ì„œë¥¼ ì°¾ì•˜ìœ¼ë©´ ì—ë””í„°ì— ë¡œë“œ\n      if (foundDoc) {\n        await loadDocumentToEditor(foundDoc, linkText);\n      } else {\n        console.log(`ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ${docPath}`);\n        \n        // ë¬¸ì„œê°€ ì—†ìœ¼ë©´ ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ ì œê³µ\n        const shouldCreate = window.confirm(\n          `\"${linkText || docPath}\" ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\\n\\nìƒˆ ë¬¸ì„œë¥¼ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`\n        );\n        \n        if (shouldCreate) {\n          createNewDocument(linkText || docPath);\n        }\n      }\n    } catch (error) {\n      console.error('ë¬¸ì„œ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:', error);\n      \n      // ì‚¬ìš©ìì—ê²Œ ì˜¤ë¥˜ ì•Œë¦¼\n      if (onContextUpdate) {\n        onContextUpdate({ \n          message: { \n            type: 'error', \n            text: `ë¬¸ì„œ ë¡œë“œ ì‹¤íŒ¨: ${error.message}` \n                  }\n                });\n              }\n            }\n  }, [onContextUpdate]);\n\n  // ì—ë””í„°ì— ë¬¸ì„œ ë¡œë“œí•˜ëŠ” í•¨ìˆ˜\n  const loadDocumentToEditor = useCallback(async (docData, linkText) => {\n    console.log(`ì—ë””í„°ì— ë¬¸ì„œ ë¡œë“œ: ${docData.title || linkText}`);\n    \n    try {\n      // í˜„ì¬ ë¬¸ì„œê°€ ë³€ê²½ë˜ì—ˆìœ¼ë©´ ì €ì¥ ì—¬ë¶€ í™•ì¸\n      if (currentContent && currentContent.trim() !== '' && onContentChange) {\n        const shouldSave = window.confirm(\n          'í˜„ì¬ ë¬¸ì„œì— ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.\\n\\nì €ì¥í•˜ê³  ìƒˆ ë¬¸ì„œë¥¼ ì—¬ì‹œê² ìŠµë‹ˆê¹Œ?'\n        );\n        \n        if (shouldSave) {\n          // í˜„ì¬ ë¬¸ì„œ ì €ì¥ ë¡œì§ í˜¸ì¶œ (App.jsxì˜ saveCurrentDocument)\n          if (window.saveCurrentDocument) {\n            await window.saveCurrentDocument();\n          }\n        }\n      }\n      \n      // ì—ë””í„°ì— ìƒˆ ë¬¸ì„œ ë‚´ìš© ë¡œë“œ\n      if (editorRef.current) {\n        const editor = editorRef.current.getInstance();\n        const content = docData.content || '';\n        \n        editor.setMarkdown(content);\n        console.log(`ì—ë””í„°ì— ë‚´ìš© ë¡œë“œ ì™„ë£Œ: ${content.length}ì`);\n      }\n      \n      // ìƒíƒœ ì—…ë°ì´íŠ¸ (App.jsxì˜ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤ í˜¸ì¶œ)\n      if (window.setCurrentDocument) window.setCurrentDocument(docData);\n      if (window.setTitle) window.setTitle(docData.title || linkText || '');\n      if (window.setSaveStatus) window.setSaveStatus('ì €ì¥ë¨');\n      \n      // ì‚¬ìš©ìì—ê²Œ ì„±ê³µ ì•Œë¦¼\n      if (onContextUpdate) {\n        onContextUpdate({ \n          message: { \n            type: 'success', \n            text: `\"${docData.title || linkText}\" ë¬¸ì„œë¥¼ ì—´ì—ˆìŠµë‹ˆë‹¤.` \n          } \n        });\n      }\n      \n      console.log(`ë¬¸ì„œ ë¡œë“œ ì™„ë£Œ: ${docData.title || linkText}`);\n    } catch (error) {\n      console.error('ì—ë””í„° ë¬¸ì„œ ë¡œë“œ ì˜¤ë¥˜:', error);\n      throw error;\n    }\n  }, [currentContent, onContentChange, onContextUpdate]);\n\n  // ìƒˆ ë¬¸ì„œ ìƒì„± í•¨ìˆ˜\n  const createNewDocument = useCallback((title) => {\n    console.log(`ìƒˆ ë¬¸ì„œ ìƒì„±: ${title}`);\n    \n    try {\n      // ì—ë””í„° ì´ˆê¸°í™”\n      if (editorRef.current) {\n        const editor = editorRef.current.getInstance();\n        const initialContent = `# ${title}\\n\\n`;\n        editor.setMarkdown(initialContent);\n      }\n      \n      // ìƒíƒœ ì—…ë°ì´íŠ¸\n      if (window.setCurrentDocument) window.setCurrentDocument(null);\n      if (window.setTitle) window.setTitle(title);\n      if (window.setSaveStatus) window.setSaveStatus('ë³€ê²½ë¨');\n      \n      // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼\n      if (onContextUpdate) {\n        onContextUpdate({ \n          message: { \n            type: 'info', \n            text: `\"${title}\" ìƒˆ ë¬¸ì„œë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.` \n          } \n        });\n      }\n      \n      console.log(`ìƒˆ ë¬¸ì„œ ìƒì„± ì™„ë£Œ: ${title}`);\n    } catch (error) {\n      console.error('ìƒˆ ë¬¸ì„œ ìƒì„± ì˜¤ë¥˜:', error);\n    }\n  }, [onContextUpdate]);\n\n  return (\n    <div style={{ \n      position: 'relative', \n      height: '100%', \n      overflow: 'auto',\n      display: 'flex',\n      flexDirection: 'column'\n    }} className=\"miki-editor-container flex-grow\">\n      <Editor\n        ref={editorRef}\n        initialValue=\"\"\n        previewStyle={window.innerWidth > 1000 ? 'vertical' : 'tab'}\n        height=\"100%\"\n        initialEditType=\"wysiwyg\"\n        useCommandShortcut={true} // Enables default shortcuts, but we override some\n        theme={localStorage.getItem('theme') === 'dark' ? 'dark' : 'default'}\n        usageStatistics={false}\n        // ë§í¬ í´ë¦­ í™œì„±í™” ì„¤ì •\n        linkAttributes={{\n          target: '_self', // ê°™ì€ íƒ­ì—ì„œ ì—´ê¸°\n          rel: null // rel ì†ì„± ì œê±°\n        }}\n        // ì„œì‹ ë„êµ¬ëª¨ìŒ ì¶”ê°€\n        toolbarItems={[\n          ['heading', 'bold', 'italic', 'strike'],\n          ['hr', 'quote', 'ul', 'ol', 'task'],\n          ['table', 'image', 'link'],\n          ['code', 'codeblock']\n        ]}\n        // ì—ë””í„° í™•ì¥ ì˜µì…˜ ì¶”ê°€\n        extendedAutolinks={true}\n        // WYSIWYG ëª¨ë“œì—ì„œ ë§í¬ í´ë¦­ í—ˆìš©\n        viewer={false}\n        customHTMLRenderer={{\n          // ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì´ WYSIWYGì—ì„œ ì œëŒ€ë¡œ í‘œì‹œë˜ë„ë¡ ì‚¬ìš©ì ì •ì˜ ë Œë”ëŸ¬ ì¶”ê°€\n          heading: (node) => {\n            const { level } = node;\n            const tagName = `h${level}`;\n            \n            return {\n              type: 'element', \n              tagName,\n              attributes: {},\n              children: node.children\n            };\n          },\n          // ë§í¬ ë Œë”ëŸ¬ ê°œì„  - í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •\n          link: (node) => {\n            return {\n              type: 'element',\n              tagName: 'a',\n              attributes: { \n                href: node.destination,\n                title: node.title || '',\n                // ë‚´ë¶€ ë§í¬ì™€ ì™¸ë¶€ ë§í¬ êµ¬ë¶„\n                target: node.destination.startsWith('http') ? '_blank' : '_self',\n                rel: node.destination.startsWith('http') ? 'noopener noreferrer' : null,\n                // í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡ ìŠ¤íƒ€ì¼ ì¶”ê°€\n                style: 'color: #2563eb; text-decoration: underline; cursor: pointer;'\n              },\n              children: node.children\n            };\n          },\n          // ì´ë¯¸ì§€ ë Œë”ëŸ¬ ì¶”ê°€\n          image: (node) => {\n            return {\n              type: 'element',\n              tagName: 'img',\n              attributes: {\n                src: node.destination,\n                alt: node.title || '',\n                title: node.title || ''\n              },\n              children: []\n            };\n          },\n          // ì½”ë“œ ë¸”ë¡ ë Œë”ëŸ¬ ì¶”ê°€\n          codeBlock: (node) => {\n            return {\n              type: 'element',\n              tagName: 'pre',\n              attributes: {},\n              children: [{\n                type: 'element',\n                tagName: 'code',\n                attributes: {\n                  'data-language': node.info || ''\n                },\n                children: [{\n                  type: 'text',\n                  content: node.literal || ''\n                }]\n              }]\n            };\n          },\n          // ì¸ë¼ì¸ ì½”ë“œ ë Œë”ëŸ¬ ì¶”ê°€\n          code: (node) => {\n            return {\n              type: 'element',\n              tagName: 'code',\n              attributes: {},\n              children: [{\n                type: 'text',\n                content: node.literal || ''\n              }]\n            };\n          },\n          // ì¸ìš©êµ¬ ë Œë”ëŸ¬ ì¶”ê°€\n          blockQuote: (node) => {\n            return {\n              type: 'element',\n              tagName: 'blockquote',\n              attributes: {},\n              children: node.children\n            };\n          }\n        }}\n      />\n      \n      {/* ë§í¬ ìƒì„± ë²„íŠ¼ */}\n      {showLinkButton && (\n        <LinkButton \n          position={linkButtonPosition}\n          onClick={handleLinkButtonClick}\n          selectedText={selectedTextForLink}\n        />\n      )}\n      \n      {/* ë§í¬ ìƒì„± íŒì˜¤ë²„ */}\n      {showLinkPopover && (\n        <LinkCreationPopover \n          position={linkPopoverPosition}\n          selectedText={selectedTextForLink}\n          onCreateLink={handleLinkCreate}\n          onCancel={handleCancelLinkCreation}\n        />\n      )}\n      \n      {/* AI ì œì•ˆ í‘œì‹œìš© íŒì˜¤ë²„ */}\n      {activeSuggestion && (\n        <AiSuggestionPopover\n          suggestion={activeSuggestion}\n          position={calculateSuggestionPosition(activeSuggestion.actionRange || 'cursor')}\n          onAccept={handleAcceptSuggestion}\n          onCancel={handleCancelSuggestion}\n        />\n      )}\n    </div>\n  );\n});\n\nexport default MikiEditor;\n\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__mocks__\\@testing-library\\react.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__mocks__\\fileMock.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\App.snapshot.test.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { render } from '@testing-library/react';\r\nimport '@testing-library/jest-dom';\r\nimport App from '../App';\r\n\r\n// Mock TanStack Query\r\njest.mock('@tanstack/react-query', () => ({\r\n  QueryClient: jest.fn().mockImplementation(() => ({\r\n    invalidateQueries: jest.fn(),\r\n    setQueryData: jest.fn(),\r\n    getQueryData: jest.fn(),\r\n    removeQueries: jest.fn(),\r\n    cancelQueries: jest.fn(),\r\n    resumePausedMutations: jest.fn(),\r\n  })),\r\n  QueryClientProvider: ({ children }) => children,\r\n  useQuery: () => ({\r\n    data: [],\r\n    isLoading: false,\r\n    error: null,\r\n    refetch: jest.fn(),\r\n  }),\r\n  useMutation: () => ({\r\n    mutate: jest.fn(),\r\n    mutateAsync: jest.fn(),\r\n    isLoading: false,\r\n    error: null,\r\n  }),\r\n  useQueryClient: () => ({\r\n    invalidateQueries: jest.fn(),\r\n    setQueryData: jest.fn(),\r\n    getQueryData: jest.fn(),\r\n  }),\r\n}));\r\n\r\njest.mock('@tanstack/react-query-devtools', () => ({\r\n  ReactQueryDevtools: () => null,\r\n}));\r\n\r\n// Mock config modules\r\njest.mock('../config/queryClient', () => ({\r\n  queryClient: {\r\n    invalidateQueries: jest.fn(),\r\n    setQueryData: jest.fn(),\r\n    getQueryData: jest.fn(),\r\n  },\r\n  setupNetworkListeners: jest.fn(),\r\n  queryKeys: {\r\n    documents: {\r\n      all: ['documents'],\r\n      lists: () => ['documents', 'list'],\r\n      detail: (id) => ['documents', 'detail', id],\r\n    },\r\n  },\r\n  handleQueryError: jest.fn(),\r\n  isOnline: () => true,\r\n}));\r\n\r\njest.mock('../config/featureFlags', () => ({\r\n  FEATURE_FLAGS: {},\r\n  isFeatureEnabled: () => true,\r\n}));\r\n\r\n// Mock hooks\r\njest.mock('../hooks/useDocuments', () => ({\r\n  useDocuments: () => ({\r\n    data: [],\r\n    isLoading: false,\r\n    error: null,\r\n  }),\r\n  useDocument: () => ({\r\n    data: null,\r\n    isLoading: false,\r\n    error: null,\r\n  }),\r\n  useSaveDocument: () => ({\r\n    mutate: jest.fn(),\r\n    mutateAsync: jest.fn(),\r\n    isLoading: false,\r\n  }),\r\n  useDeleteDocument: () => ({\r\n    mutate: jest.fn(),\r\n    mutateAsync: jest.fn(),\r\n    isLoading: false,\r\n  }),\r\n  useSyncStatus: () => ({\r\n    data: { hasPendingSync: false, pendingCount: 0, isOnline: true },\r\n  }),\r\n}));\r\n\r\n// Mock dependencies that might cause issues in test environment\r\njest.mock('../utils/database', () => ({\r\n  MikiDatabase: {\r\n    getInstance: () => ({\r\n      documents: {\r\n        toArray: () => Promise.resolve([]),\r\n        add: () => Promise.resolve(),\r\n        update: () => Promise.resolve(),\r\n        delete: () => Promise.resolve()\r\n      }\r\n    })\r\n  }\r\n}));\r\n\r\njest.mock('../stores', () => ({\r\n  useDocumentStore: () => ({\r\n    documents: [],\r\n    currentDocument: null,\r\n    setCurrentDocument: jest.fn(),\r\n    updateDocument: jest.fn(),\r\n    addDocument: jest.fn(),\r\n    deleteDocument: jest.fn(),\r\n    loadDocuments: jest.fn(),\r\n  }),\r\n  useUIStore: () => ({\r\n    sidebarOpen: false,\r\n    theme: 'light',\r\n    isFullscreen: false,\r\n    toggleSidebar: jest.fn(),\r\n    setTheme: jest.fn(),\r\n    toggleFullscreen: jest.fn(),\r\n  }),\r\n  useEditorStore: () => ({\r\n    content: '',\r\n    title: '',\r\n    isEditing: false,\r\n    saveStatus: 'ì €ì¥ë¨',\r\n    setContent: jest.fn(),\r\n    setTitle: jest.fn(),\r\n    setEditing: jest.fn(),\r\n    setSaveStatus: jest.fn(),\r\n  })\r\n}));\r\n\r\n// Mock window.matchMedia for responsive tests\r\nObject.defineProperty(window, 'matchMedia', {\r\n  writable: true,\r\n  value: jest.fn().mockImplementation(query => ({\r\n    matches: false,\r\n    media: query,\r\n    onchange: null,\r\n    addListener: jest.fn(),\r\n    removeListener: jest.fn(),\r\n    addEventListener: jest.fn(),\r\n    removeEventListener: jest.fn(),\r\n    dispatchEvent: jest.fn(),\r\n  })),\r\n});\r\n\r\ndescribe('App Component Snapshots', () => {\r\n  beforeEach(() => {\r\n    // Reset any mocks before each test\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  test('App ì»´í¬ë„ŒíŠ¸ ê¸°ë³¸ ë Œë”ë§ ìŠ¤ëƒ…ìƒ·', () => {\r\n    const { asFragment } = render(<App />);\r\n    expect(asFragment()).toMatchSnapshot();\r\n  });\r\n\r\n  test('App ì»´í¬ë„ŒíŠ¸ DOM êµ¬ì¡° ê²€ì¦', () => {\r\n    const { container } = render(<App />);\r\n    \r\n    // ì‹¤ì œ App.jsx êµ¬ì¡°ì— ë§ëŠ” í•µì‹¬ UI ìš”ì†Œë“¤ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\r\n    expect(container.querySelector('header')).toBeInTheDocument();\r\n    expect(container.querySelector('.flex-grow')).toBeInTheDocument();\r\n    \r\n    // ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ ì „ì²´ êµ¬ì¡° ë³´ì¡´\r\n    expect(container.firstChild).toMatchSnapshot('app-dom-structure');\r\n  });\r\n\r\n  test('ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ìŠ¤ëƒ…ìƒ· (ëª¨ë°”ì¼)', () => {\r\n    // ëª¨ë°”ì¼ ë·°í¬íŠ¸ ì‹œë®¬ë ˆì´ì…˜\r\n    Object.defineProperty(window, 'innerWidth', {\r\n      writable: true,\r\n      configurable: true,\r\n      value: 375,\r\n    });\r\n    \r\n    window.matchMedia = jest.fn().mockImplementation(query => ({\r\n      matches: query.includes('max-width: 768px'),\r\n      media: query,\r\n      onchange: null,\r\n      addListener: jest.fn(),\r\n      removeListener: jest.fn(),\r\n      addEventListener: jest.fn(),\r\n      removeEventListener: jest.fn(),\r\n      dispatchEvent: jest.fn(),\r\n    }));\r\n\r\n    const { asFragment } = render(<App />);\r\n    expect(asFragment()).toMatchSnapshot('app-mobile-layout');\r\n  });\r\n\r\n  test('ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ìŠ¤ëƒ…ìƒ· (ë°ìŠ¤í¬í†±)', () => {\r\n    // ë°ìŠ¤í¬í†± ë·°í¬íŠ¸ ì‹œë®¬ë ˆì´ì…˜\r\n    Object.defineProperty(window, 'innerWidth', {\r\n      writable: true,\r\n      configurable: true,\r\n      value: 1920,\r\n    });\r\n    \r\n    window.matchMedia = jest.fn().mockImplementation(query => ({\r\n      matches: query.includes('min-width: 1024px'),\r\n      media: query,\r\n      onchange: null,\r\n      addListener: jest.fn(),\r\n      removeListener: jest.fn(),\r\n      addEventListener: jest.fn(),\r\n      removeEventListener: jest.fn(),\r\n      dispatchEvent: jest.fn(),\r\n    }));\r\n\r\n    const { asFragment } = render(<App />);\r\n    expect(asFragment()).toMatchSnapshot('app-desktop-layout');\r\n  });\r\n});\r\n\r\ndescribe('Critical UI Components Snapshots', () => {\r\n  test('MikiEditor ì»´í¬ë„ŒíŠ¸ ìŠ¤ëƒ…ìƒ·', async () => {\r\n    // MikiEditorê°€ ë³„ë„ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ê²½ìš°\r\n    const MikiEditor = (await import('../MikiEditor')).default;\r\n    const { asFragment } = render(<MikiEditor />);\r\n    expect(asFragment()).toMatchSnapshot('miki-editor-component');\r\n  });\r\n\r\n  test('AiPanel ì»´í¬ë„ŒíŠ¸ ìŠ¤ëƒ…ìƒ·', async () => {\r\n    // AiPanelì´ ë³„ë„ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ê²½ìš°\r\n    const AiPanel = (await import('../AiPanel')).default;\r\n    const { asFragment } = render(<AiPanel />);\r\n    expect(asFragment()).toMatchSnapshot('ai-panel-component');\r\n  });\r\n}); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\components\\ErrorDisplay.test.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'ErrorTypes' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { render, screen, fireEvent } from '@testing-library/react';\r\nimport ErrorDisplay from '../../components/common/ErrorDisplay';\r\nimport { ErrorTypes } from '../../utils/errorHandler';\r\n\r\ndescribe('ErrorDisplay', () => {\r\n  const mockOnRetry = jest.fn();\r\n  const mockOnDismiss = jest.fn();\r\n\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('ë Œë”ë§', () => {\r\n    test('ì—ëŸ¬ê°€ ì—†ìœ¼ë©´ ì•„ë¬´ê²ƒë„ ë Œë”ë§í•˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const { container } = render(<ErrorDisplay error={null} />);\r\n      expect(container.firstChild).toBeNull();\r\n    });\r\n\r\n    test('ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={networkError} \r\n          onRetry={mockOnRetry}\r\n          onDismiss={mockOnDismiss}\r\n        />\r\n      );\r\n\r\n      expect(screen.getByText('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜')).toBeInTheDocument();\r\n      expect(screen.getByText('ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.')).toBeInTheDocument();\r\n      expect(screen.getByText('ë‹¤ì‹œ ì‹œë„')).toBeInTheDocument();\r\n      expect(screen.getByText('ë‹«ê¸°')).toBeInTheDocument();\r\n    });\r\n\r\n    test('ì„œë²„ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§í•´ì•¼ í•¨', () => {\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={serverError} \r\n          onRetry={mockOnRetry}\r\n          onDismiss={mockOnDismiss}\r\n        />\r\n      );\r\n\r\n      expect(screen.getByText('ì„œë²„ ì˜¤ë¥˜')).toBeInTheDocument();\r\n      expect(screen.getByText('ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.')).toBeInTheDocument();\r\n    });\r\n\r\n    test('NOT_FOUND ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={notFoundError} \r\n          onRetry={mockOnRetry}\r\n          onDismiss={mockOnDismiss}\r\n        />\r\n      );\r\n\r\n      expect(screen.getByText('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ')).toBeInTheDocument();\r\n      expect(screen.getByText('ìš”ì²­í•œ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.')).toBeInTheDocument();\r\n      expect(screen.queryByText('ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°')).not.toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('ì»¨í…ìŠ¤íŠ¸ë³„ ë©”ì‹œì§€', () => {\r\n    test('save ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë©”ì‹œì§€ê°€ ì»¤ìŠ¤í„°ë§ˆì´ì§•ë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('HTTP 500: Internal Server Error');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          context=\"save\"\r\n          onRetry={mockOnRetry}\r\n        />\r\n      );\r\n\r\n      expect(screen.getByText(/ë¬¸ì„œ ì €ì¥ ì¤‘/)).toBeInTheDocument();\r\n    });\r\n\r\n    test('load ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë©”ì‹œì§€ê°€ ì»¤ìŠ¤í„°ë§ˆì´ì§•ë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('HTTP 500: Internal Server Error');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          context=\"load\"\r\n          onRetry={mockOnRetry}\r\n        />\r\n      );\r\n\r\n      expect(screen.getByText(/ë¬¸ì„œ ë¶ˆëŸ¬ì˜¤ê¸° ì¤‘/)).toBeInTheDocument();\r\n    });\r\n\r\n    test('delete ì»¨í…ìŠ¤íŠ¸ì—ì„œ ë©”ì‹œì§€ê°€ ì»¤ìŠ¤í„°ë§ˆì´ì§•ë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('HTTP 500: Internal Server Error');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          context=\"delete\"\r\n          onRetry={mockOnRetry}\r\n        />\r\n      );\r\n\r\n      expect(screen.getByText(/ë¬¸ì„œ ì‚­ì œ ì¤‘/)).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('í¬ê¸° ì˜µì…˜', () => {\r\n    test('small í¬ê¸°ë¡œ ë Œë”ë§ë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('Test error');\r\n      \r\n      const { container } = render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          size=\"small\"\r\n        />\r\n      );\r\n\r\n      const errorContainer = container.querySelector('.p-3');\r\n      expect(errorContainer).toBeInTheDocument();\r\n    });\r\n\r\n    test('large í¬ê¸°ë¡œ ë Œë”ë§ë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('Test error');\r\n      \r\n      const { container } = render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          size=\"large\"\r\n        />\r\n      );\r\n\r\n      const errorContainer = container.querySelector('.p-6');\r\n      expect(errorContainer).toBeInTheDocument();\r\n    });\r\n\r\n    test('ê¸°ë³¸ í¬ê¸°ë¡œ ë Œë”ë§ë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('Test error');\r\n      \r\n      const { container } = render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          size=\"normal\"\r\n        />\r\n      );\r\n\r\n      const errorContainer = container.querySelector('.p-4');\r\n      expect(errorContainer).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('ì•„ì´ì½˜ í‘œì‹œ', () => {\r\n    test('ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ì— ëŒ€í•´ ë„¤íŠ¸ì›Œí¬ ì•„ì´ì½˜ì„ í‘œì‹œí•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      \r\n      const { container } = render(\r\n        <ErrorDisplay error={networkError} />\r\n      );\r\n\r\n      const networkIcon = container.querySelector('svg.text-orange-500');\r\n      expect(networkIcon).toBeInTheDocument();\r\n    });\r\n\r\n    test('ì¼ë°˜ ì—ëŸ¬ì— ëŒ€í•´ ì—ëŸ¬ ì•„ì´ì½˜ì„ í‘œì‹œí•´ì•¼ í•¨', () => {\r\n      const generalError = new Error('General error');\r\n      \r\n      const { container } = render(\r\n        <ErrorDisplay error={generalError} />\r\n      );\r\n\r\n      const errorIcon = container.querySelector('svg.text-red-500');\r\n      expect(errorIcon).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('ë²„íŠ¼ ë™ì‘', () => {\r\n    test('ì¬ì‹œë„ ë²„íŠ¼ í´ë¦­ ì‹œ onRetryê°€ í˜¸ì¶œë˜ì–´ì•¼ í•¨', () => {\r\n      const retryableError = new TypeError('Failed to fetch');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={retryableError} \r\n          onRetry={mockOnRetry}\r\n        />\r\n      );\r\n\r\n      const retryButton = screen.getByText('ë‹¤ì‹œ ì‹œë„');\r\n      fireEvent.click(retryButton);\r\n\r\n      expect(mockOnRetry).toHaveBeenCalledTimes(1);\r\n    });\r\n\r\n    test('ë‹«ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ onDismissê°€ í˜¸ì¶œë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('Test error');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          onDismiss={mockOnDismiss}\r\n        />\r\n      );\r\n\r\n      const dismissButton = screen.getByText('ë‹«ê¸°');\r\n      fireEvent.click(dismissButton);\r\n\r\n      expect(mockOnDismiss).toHaveBeenCalledTimes(1);\r\n    });\r\n\r\n    test('ìš°ìƒë‹¨ X ë²„íŠ¼ í´ë¦­ ì‹œ onDismissê°€ í˜¸ì¶œë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('Test error');\r\n      \r\n      const { container } = render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          onDismiss={mockOnDismiss}\r\n        />\r\n      );\r\n\r\n      // X ë²„íŠ¼ì„ ì°¾ê¸° (SVGê°€ í¬í•¨ëœ ë²„íŠ¼)\r\n      const buttons = container.querySelectorAll('button');\r\n      const xButton = Array.from(buttons).find(button => \r\n        button.querySelector('svg') && !button.textContent.trim()\r\n      );\r\n      \r\n      expect(xButton).toBeTruthy();\r\n      fireEvent.click(xButton);\r\n      expect(mockOnDismiss).toHaveBeenCalledTimes(1);\r\n    });\r\n\r\n    test('ì¬ì‹œë„ ë¶ˆê°€ëŠ¥í•œ ì—ëŸ¬ì—ì„œëŠ” ì¬ì‹œë„ ë²„íŠ¼ì´ í‘œì‹œë˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={notFoundError} \r\n          onRetry={mockOnRetry}\r\n        />\r\n      );\r\n\r\n      expect(screen.queryByText('ë‹¤ì‹œ ì‹œë„')).not.toBeInTheDocument();\r\n      expect(screen.queryByText('ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°')).not.toBeInTheDocument();\r\n    });\r\n\r\n    test('onRetryê°€ ì—†ìœ¼ë©´ ì¬ì‹œë„ ë²„íŠ¼ì´ í‘œì‹œë˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const retryableError = new TypeError('Failed to fetch');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={retryableError} \r\n          // onRetry ì—†ìŒ\r\n        />\r\n      );\r\n\r\n      expect(screen.queryByText('ë‹¤ì‹œ ì‹œë„')).not.toBeInTheDocument();\r\n    });\r\n\r\n    test('onDismissê°€ ì—†ìœ¼ë©´ ë‹«ê¸° ë²„íŠ¼ë“¤ì´ í‘œì‹œë˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const error = new Error('Test error');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          // onDismiss ì—†ìŒ\r\n        />\r\n      );\r\n\r\n      expect(screen.queryByText('ë‹«ê¸°')).not.toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('ê°œë°œì ì •ë³´', () => {\r\n    const originalEnv = process.env.NODE_ENV;\r\n\r\n    afterEach(() => {\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n\r\n    test('ê°œë°œ í™˜ê²½ì—ì„œ ê°œë°œì ì •ë³´ê°€ í‘œì‹œë˜ì–´ì•¼ í•¨', () => {\r\n      process.env.NODE_ENV = 'development';\r\n      \r\n      const error = new Error('Test error');\r\n      error.stack = 'Error: Test error\\n    at test.js:1:1';\r\n      \r\n      render(<ErrorDisplay error={error} />);\r\n\r\n      expect(screen.getByText('ê°œë°œì ì •ë³´ (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)')).toBeInTheDocument();\r\n    });\r\n\r\n    test('í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ê°œë°œì ì •ë³´ê°€ í‘œì‹œë˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      process.env.NODE_ENV = 'production';\r\n      \r\n      const error = new Error('Test error');\r\n      error.stack = 'Error: Test error\\n    at test.js:1:1';\r\n      \r\n      render(<ErrorDisplay error={error} />);\r\n\r\n      expect(screen.queryByText('ê°œë°œì ì •ë³´ (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)')).not.toBeInTheDocument();\r\n    });\r\n\r\n    test('ê°œë°œì ì •ë³´ details ìš”ì†Œë¥¼ í´ë¦­í•˜ì—¬ í¼ì¹  ìˆ˜ ìˆì–´ì•¼ í•¨', () => {\r\n      process.env.NODE_ENV = 'development';\r\n      \r\n      const error = new Error('Test error');\r\n      error.stack = 'Error: Test error\\n    at test.js:1:1';\r\n      \r\n      render(<ErrorDisplay error={error} />);\r\n\r\n      const details = screen.getByText('ê°œë°œì ì •ë³´ (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)');\r\n      fireEvent.click(details);\r\n\r\n      // ì •ê·œì‹ì„ ì‚¬ìš©í•˜ì—¬ ì¤„ë°”ê¿ˆê³¼ ê³µë°±ì„ ë¬´ì‹œí•˜ê³  í…ìŠ¤íŠ¸ ë§¤ì¹­\r\n      expect(screen.getByText(/Test error/)).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('CSS í´ë˜ìŠ¤', () => {\r\n    test('ì»¤ìŠ¤í…€ classNameì´ ì ìš©ë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('Test error');\r\n      \r\n      const { container } = render(\r\n        <ErrorDisplay \r\n          error={error} \r\n          className=\"custom-error-class\"\r\n        />\r\n      );\r\n\r\n      const errorContainer = container.querySelector('.custom-error-class');\r\n      expect(errorContainer).toBeInTheDocument();\r\n    });\r\n\r\n    test('ê¸°ë³¸ ìŠ¤íƒ€ì¼ í´ë˜ìŠ¤ë“¤ì´ ì ìš©ë˜ì–´ì•¼ í•¨', () => {\r\n      const error = new Error('Test error');\r\n      \r\n      const { container } = render(\r\n        <ErrorDisplay error={error} />\r\n      );\r\n\r\n      const errorContainer = container.querySelector('.bg-red-50.border.border-red-200.rounded-lg');\r\n      expect(errorContainer).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('ì ‘ê·¼ì„±', () => {\r\n    test('ë²„íŠ¼ë“¤ì´ ì ì ˆí•œ í¬ì»¤ìŠ¤ë¥¼ ë°›ì„ ìˆ˜ ìˆì–´ì•¼ í•¨', () => {\r\n      const retryableError = new TypeError('Failed to fetch');\r\n      \r\n      render(\r\n        <ErrorDisplay \r\n          error={retryableError} \r\n          onRetry={mockOnRetry}\r\n          onDismiss={mockOnDismiss}\r\n        />\r\n      );\r\n\r\n      const retryButton = screen.getByText('ë‹¤ì‹œ ì‹œë„');\r\n      const dismissButton = screen.getByText('ë‹«ê¸°');\r\n\r\n      expect(retryButton).toHaveClass('focus:outline-none', 'focus:ring-2');\r\n      expect(dismissButton).toHaveClass('focus:outline-none', 'focus:ring-2');\r\n    });\r\n  });\r\n}); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\hooks\\useAutoSave.test.js","messages":[{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":26,"column":10,"nodeType":"ArrowFunctionExpression","messageId":"noDisplayName","endLine":30,"endColumn":4},{"ruleId":"no-unused-vars","severity":1,"message":"'mockOnSaveStart' is assigned a value but never used.","line":34,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":34,"endColumn":22},{"ruleId":"no-unused-vars","severity":1,"message":"'mockOnSaveSuccess' is assigned a value but never used.","line":35,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":35,"endColumn":24},{"ruleId":"no-unused-vars","severity":1,"message":"'mockOnSaveError' is assigned a value but never used.","line":36,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":36,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { renderHook, act } from '@testing-library/react';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport useAutoSave from '../../hooks/useAutoSave';\r\n\r\n// useSaveDocument í›… ëª¨í‚¹\r\nconst mockMutateAsync = jest.fn();\r\n\r\njest.mock('../../hooks/useDocuments', () => ({\r\n  useSaveDocument: () => ({\r\n    mutateAsync: mockMutateAsync\r\n  })\r\n}));\r\n\r\n// íƒ€ì´ë¨¸ ëª¨í‚¹\r\njest.useFakeTimers();\r\n\r\n// QueryClient ë˜í¼ ìƒì„±\r\nconst createWrapper = () => {\r\n  const queryClient = new QueryClient({\r\n    defaultOptions: {\r\n      queries: { retry: false },\r\n      mutations: { retry: false }\r\n    }\r\n  });\r\n  \r\n  return ({ children }) => (\r\n    <QueryClientProvider client={queryClient}>\r\n      {children}\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n\r\ndescribe('useAutoSave', () => {\r\n  let mockOnSaveStart;\r\n  let mockOnSaveSuccess;\r\n  let mockOnSaveError;\r\n\r\n  beforeEach(() => {\r\n    // ëª¨í‚¹ëœ í•¨ìˆ˜ë“¤ ì´ˆê¸°í™”\r\n    mockMutateAsync.mockClear();\r\n    \r\n    mockOnSaveStart = jest.fn();\r\n    mockOnSaveSuccess = jest.fn();\r\n    mockOnSaveError = jest.fn();\r\n    \r\n    jest.clearAllTimers();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('ì´ˆê¸° ìƒíƒœ', () => {\r\n    test('ì´ˆê¸° ìƒíƒœê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì–´ì•¼ í•¨', () => {\r\n      const { result } = renderHook(\r\n        () => useAutoSave({\r\n          document: null,\r\n          content: '',\r\n          title: '',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      expect(result.current.saveStatus).toBe('saved');\r\n      expect(result.current.hasUnsavedChanges).toBe(false);\r\n      expect(result.current.lastSaved).toBeNull();\r\n      expect(result.current.isAutoSaving).toBe(false);\r\n      expect(result.current.isManualSaving).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('ë³€ê²½ì‚¬í•­ ê°ì§€', () => {\r\n    test('ë‚´ìš© ë³€ê²½ ì‹œ unsaved ìƒíƒœê°€ ë˜ì–´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ì´ˆê¸° ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ content }) => useAutoSave({\r\n          document: testDocument,\r\n          content,\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: true\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { content: 'ì´ˆê¸° ë‚´ìš©' }\r\n        }\r\n      );\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(false);\r\n\r\n      // ë‚´ìš© ë³€ê²½\r\n      rerender({ content: 'ë³€ê²½ëœ ë‚´ìš©' });\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n      expect(result.current.saveStatus).toBe('pending');\r\n    });\r\n\r\n    test('ì œëª© ë³€ê²½ ì‹œ unsaved ìƒíƒœê°€ ë˜ì–´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'ì´ˆê¸° ì œëª©',\r\n        content: 'ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ title }) => useAutoSave({\r\n          document: testDocument,\r\n          content: 'ë‚´ìš©',\r\n          title,\r\n          enabled: true\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { title: 'ì´ˆê¸° ì œëª©' }\r\n        }\r\n      );\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(false);\r\n\r\n      // ì œëª© ë³€ê²½\r\n      rerender({ title: 'ë³€ê²½ëœ ì œëª©' });\r\n\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n      expect(result.current.saveStatus).toBe('pending');\r\n    });\r\n  });\r\n\r\n  describe('ìë™ ì €ì¥', () => {\r\n    test('ë³€ê²½ì‚¬í•­ ê°ì§€ê°€ ì •ìƒ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ì´ˆê¸° ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ content }) => useAutoSave({\r\n          document: testDocument,\r\n          content,\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: true,\r\n          interval: 3000\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { content: 'ì´ˆê¸° ë‚´ìš©' }\r\n        }\r\n      );\r\n\r\n      // ë‚´ìš© ë³€ê²½\r\n      rerender({ content: 'ë³€ê²½ëœ ë‚´ìš©' });\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n      expect(result.current.saveStatus).toBe('pending');\r\n    });\r\n\r\n    test('ìë™ ì €ì¥ì´ ë¹„í™œì„±í™”ë˜ë©´ ì €ì¥ë˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ì´ˆê¸° ë‚´ìš©'\r\n      };\r\n\r\n      const { result, rerender } = renderHook(\r\n        ({ content }) => useAutoSave({\r\n          document: testDocument,\r\n          content,\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: false, // ë¹„í™œì„±í™”\r\n          interval: 3000\r\n        }),\r\n        { \r\n          wrapper: createWrapper(),\r\n          initialProps: { content: 'ì´ˆê¸° ë‚´ìš©' }\r\n        }\r\n      );\r\n\r\n      // ë‚´ìš© ë³€ê²½\r\n      rerender({ content: 'ë³€ê²½ëœ ë‚´ìš©' });\r\n      // enabledê°€ falseì´ë¯€ë¡œ hasUnsavedChangesëŠ” ì—¬ì „íˆ trueê°€ ë˜ì§€ë§Œ ìë™ì €ì¥ì€ ì•ˆë¨\r\n      expect(result.current.hasUnsavedChanges).toBe(true);\r\n\r\n      // 3ì´ˆ ê²½ê³¼\r\n      act(() => {\r\n        jest.advanceTimersByTime(3000);\r\n      });\r\n\r\n      expect(mockMutateAsync).not.toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('ìˆ˜ë™ ì €ì¥', () => {\r\n    test('ìˆ˜ë™ ì €ì¥ í•¨ìˆ˜ê°€ ì¡´ì¬í•´ì•¼ í•¨', () => {\r\n      const testDocument = {\r\n        id: 'test-1',\r\n        title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n        content: 'ë‚´ìš©'\r\n      };\r\n\r\n      const { result } = renderHook(\r\n        () => useAutoSave({\r\n          document: testDocument,\r\n          content: 'ë³€ê²½ëœ ë‚´ìš©',\r\n          title: 'í…ŒìŠ¤íŠ¸ ë¬¸ì„œ',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      expect(typeof result.current.manualSave).toBe('function');\r\n    });\r\n  });\r\n\r\n  describe('ì €ì¥ ìƒíƒœ ë©”ì‹œì§€', () => {\r\n    test('ì €ì¥ ìƒíƒœ ë©”ì‹œì§€ í•¨ìˆ˜ê°€ ì¡´ì¬í•´ì•¼ í•¨', () => {\r\n      const { result } = renderHook(\r\n        () => useAutoSave({\r\n          document: { id: 'test' },\r\n          content: 'ë‚´ìš©',\r\n          title: 'ì œëª©',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      expect(typeof result.current.getSaveStatusMessage).toBe('function');\r\n      expect(result.current.getSaveStatusMessage()).toBe('ì €ì¥ë¨');\r\n    });\r\n  });\r\n\r\n  describe('í˜ì´ì§€ ì´íƒˆ ê²½ê³ ', () => {\r\n    test('beforeunload ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ê´€ë ¨ ê¸°ëŠ¥ì´ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const { unmount } = renderHook(\r\n        () => useAutoSave({\r\n          document: { id: 'test' },\r\n          content: 'ë‚´ìš©',\r\n          title: 'ì œëª©',\r\n          enabled: true\r\n        }),\r\n        { wrapper: createWrapper() }\r\n      );\r\n\r\n      // ì»´í¬ë„ŒíŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë§ˆìš´íŠ¸ë˜ê³  ì–¸ë§ˆìš´íŠ¸ë˜ëŠ”ì§€ í™•ì¸\r\n      expect(() => unmount()).not.toThrow();\r\n    });\r\n  });\r\n}); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\hooks\\useKeyboardShortcuts.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\integration\\documentFlow.test.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'waitFor' is defined but never used.","line":2,"column":26,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":33},{"ruleId":"no-unused-vars","severity":1,"message":"'userEvent' is defined but never used.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":17},{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":10,"column":10,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":21,"endColumn":5},{"ruleId":"no-unused-vars","severity":1,"message":"'queryClient' is assigned a value but never used.","line":67,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":67,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { render, screen, waitFor, act } from '@testing-library/react';\r\nimport userEvent from '@testing-library/user-event';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport App from '../../App';\r\n\r\n// Toast UI Editor ê´€ë ¨ DOM ì—ëŸ¬ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•œ ëª¨í‚¹\r\njest.mock('../../MikiEditor', () => {\r\n  const React = require('react');\r\n  return React.forwardRef((props, ref) => {\r\n    React.useImperativeHandle(ref, () => ({\r\n      getEditorInstance: () => ({\r\n        setMarkdown: jest.fn(),\r\n        getMarkdown: () => 'Test content'\r\n      })\r\n    }));\r\n\r\n    return React.createElement('div', {\r\n      'data-testid': 'miki-editor'\r\n    }, React.createElement('div', null, 'Mocked Editor'));\r\n  });\r\n});\r\n\r\n// Mock modules - ì‹¤ì œ ì¡´ì¬í•˜ëŠ” ëª¨ë“ˆë“¤ë§Œ ëª¨í‚¹\r\njest.mock('../../hooks/useAutoSave', () => ({\r\n  __esModule: true,\r\n  default: jest.fn(() => ({\r\n    saveStatus: 'saved',\r\n    hasUnsavedChanges: false,\r\n    lastSaved: null,\r\n    manualSave: jest.fn(),\r\n    getSaveStatusMessage: jest.fn(() => 'ì €ì¥ë¨'),\r\n    isAutoSaving: false,\r\n    isManualSaving: false,\r\n  })),\r\n}));\r\n\r\njest.mock('../../hooks/useKeyboardShortcuts', () => ({\r\n  __esModule: true,\r\n  default: jest.fn(() => ({})),\r\n}));\r\n\r\n// í…ŒìŠ¤íŠ¸ìš© QueryClient ìƒì„±\r\nconst createTestQueryClient = () => new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      retry: false,\r\n      cacheTime: 0,\r\n    },\r\n    mutations: {\r\n      retry: false,\r\n    },\r\n  },\r\n});\r\n\r\n// í…ŒìŠ¤íŠ¸ ë˜í¼ ì»´í¬ë„ŒíŠ¸\r\nconst TestWrapper = ({ children }) => {\r\n  const queryClient = createTestQueryClient();\r\n  return (\r\n    <QueryClientProvider client={queryClient}>\r\n      {children}\r\n    </QueryClientProvider>\r\n  );\r\n};\r\n\r\ndescribe('ë¬¸ì„œ í”Œë¡œìš° í†µí•© í…ŒìŠ¤íŠ¸', () => {\r\n  let queryClient;\r\n\r\n  beforeEach(() => {\r\n    queryClient = createTestQueryClient();\r\n    jest.clearAllMocks();\r\n    jest.useFakeTimers();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.runOnlyPendingTimers();\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  describe('ê¸°ë³¸ ì•± ë Œë”ë§', () => {\r\n    test('ì•±ì´ ì •ìƒì ìœ¼ë¡œ ë Œë”ë§ë˜ì–´ì•¼ í•¨', async () => {\r\n      render(\r\n        <TestWrapper>\r\n          <App />\r\n        </TestWrapper>\r\n      );\r\n\r\n      // í—¤ë” í™•ì¸\r\n      expect(screen.getByText('Miki Editor v7 AI ì—°ë™')).toBeInTheDocument();\r\n      \r\n      // ë¡œë”©ì´ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°\r\n      await act(async () => {\r\n        jest.advanceTimersByTime(1000);\r\n      });\r\n    });\r\n\r\n    test('ê¸°ë³¸ UI ìš”ì†Œë“¤ì´ ë Œë”ë§ë˜ì–´ì•¼ í•¨', async () => {\r\n      render(\r\n        <TestWrapper>\r\n          <App />\r\n        </TestWrapper>\r\n      );\r\n\r\n      // ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ìš”ì†Œë“¤ í™•ì¸\r\n      expect(screen.getByText('Miki Editor v7 AI ì—°ë™')).toBeInTheDocument();\r\n      \r\n      await act(async () => {\r\n        jest.advanceTimersByTime(1000);\r\n      });\r\n\r\n      // ì•±ì´ í¬ë˜ì‹œí•˜ì§€ ì•Šê³  ì •ìƒì ìœ¼ë¡œ ë Œë”ë§ë˜ëŠ”ì§€ í™•ì¸\r\n      expect(document.body).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  describe('í›… í†µí•© í…ŒìŠ¤íŠ¸', () => {\r\n    test('ëª¨ë“  í›…ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•´ì•¼ í•¨', async () => {\r\n      const useAutoSave = require('../../hooks/useAutoSave').default;\r\n      const useKeyboardShortcuts = require('../../hooks/useKeyboardShortcuts').default;\r\n      \r\n      render(\r\n        <TestWrapper>\r\n          <App />\r\n        </TestWrapper>\r\n      );\r\n\r\n      await act(async () => {\r\n        jest.advanceTimersByTime(1000);\r\n      });\r\n\r\n      // í›…ë“¤ì´ í˜¸ì¶œë˜ì—ˆëŠ”ì§€ í™•ì¸\r\n      expect(useAutoSave).toHaveBeenCalled();\r\n      expect(useKeyboardShortcuts).toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('ì—ëŸ¬ ì²˜ë¦¬', () => {\r\n    test('ì•±ì´ ì—ëŸ¬ ì—†ì´ ë Œë”ë§ë˜ì–´ì•¼ í•¨', async () => {\r\n      // ì½˜ì†” ì—ëŸ¬ë¥¼ ìºì¹˜í•˜ì—¬ ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ê°€ ì—†ëŠ”ì§€ í™•ì¸\r\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation(() => {});\r\n      \r\n      render(\r\n        <TestWrapper>\r\n          <App />\r\n        </TestWrapper>\r\n      );\r\n\r\n      await act(async () => {\r\n        jest.advanceTimersByTime(2000);\r\n      });\r\n\r\n      // ê¸°ë³¸ ë Œë”ë§ì´ ì„±ê³µí–ˆëŠ”ì§€ í™•ì¸\r\n      expect(screen.getByText('Miki Editor v7 AI ì—°ë™')).toBeInTheDocument();\r\n      \r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ', () => {\r\n    test('ê¸°ë³¸ ë ˆì´ì•„ì›ƒì´ í‘œì‹œë˜ì–´ì•¼ í•¨', async () => {\r\n      render(\r\n        <TestWrapper>\r\n          <App />\r\n        </TestWrapper>\r\n      );\r\n\r\n      await act(async () => {\r\n        jest.advanceTimersByTime(1000);\r\n      });\r\n\r\n      // ê¸°ë³¸ ë ˆì´ì•„ì›ƒ í™•ì¸\r\n      expect(screen.getByText('Miki Editor v7 AI ì—°ë™')).toBeInTheDocument();\r\n    });\r\n  });\r\n}); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\stores\\documentStore.test.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\__tests__\\utils\\errorHandler.test.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":11,"column":30,"nodeType":"MemberExpression","messageId":"unexpected","endLine":11,"endColumn":43},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":13,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":13,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":127,"column":14,"nodeType":"MemberExpression","messageId":"unexpected","endLine":127,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":150,"column":14,"nodeType":"MemberExpression","messageId":"unexpected","endLine":150,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":211,"column":14,"nodeType":"MemberExpression","messageId":"unexpected","endLine":211,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n  ErrorTypes,\r\n  classifyError,\r\n  getErrorMessage,\r\n  logError,\r\n  isRetryableError,\r\n  isOfflineError\r\n} from '../../utils/errorHandler';\r\n\r\n// ì½˜ì†” ì—ëŸ¬ ëª¨í‚¹\r\nconst originalConsoleError = console.error;\r\nbeforeEach(() => {\r\n  console.error = jest.fn();\r\n});\r\n\r\nafterEach(() => {\r\n  console.error = originalConsoleError;\r\n});\r\n\r\ndescribe('ErrorHandler', () => {\r\n  describe('ErrorTypes', () => {\r\n    test('ëª¨ë“  ì—ëŸ¬ íƒ€ì…ì´ ì •ì˜ë˜ì–´ ìˆì–´ì•¼ í•¨', () => {\r\n      expect(ErrorTypes.NETWORK_ERROR).toBe('NETWORK_ERROR');\r\n      expect(ErrorTypes.SERVER_ERROR).toBe('SERVER_ERROR');\r\n      expect(ErrorTypes.NOT_FOUND).toBe('NOT_FOUND');\r\n      expect(ErrorTypes.VALIDATION_ERROR).toBe('VALIDATION_ERROR');\r\n      expect(ErrorTypes.UNKNOWN_ERROR).toBe('UNKNOWN_ERROR');\r\n    });\r\n  });\r\n\r\n  describe('classifyError', () => {\r\n    test('null/undefined ì—ëŸ¬ëŠ” UNKNOWN_ERRORë¡œ ë¶„ë¥˜ë˜ì–´ì•¼ í•¨', () => {\r\n      expect(classifyError(null)).toBe(ErrorTypes.UNKNOWN_ERROR);\r\n      expect(classifyError(undefined)).toBe(ErrorTypes.UNKNOWN_ERROR);\r\n    });\r\n\r\n    test('ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      expect(classifyError(networkError)).toBe(ErrorTypes.NETWORK_ERROR);\r\n    });\r\n\r\n    test('HTTP 404 ì—ëŸ¬ë¥¼ NOT_FOUNDë¡œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      expect(classifyError(notFoundError)).toBe(ErrorTypes.NOT_FOUND);\r\n    });\r\n\r\n    test('HTTP 4xx ì—ëŸ¬ë¥¼ VALIDATION_ERRORë¡œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const validationError = new Error('HTTP 400: Bad Request');\r\n      expect(classifyError(validationError)).toBe(ErrorTypes.VALIDATION_ERROR);\r\n      \r\n      const unauthorizedError = new Error('HTTP 401: Unauthorized');\r\n      expect(classifyError(unauthorizedError)).toBe(ErrorTypes.VALIDATION_ERROR);\r\n    });\r\n\r\n    test('HTTP 5xx ì—ëŸ¬ë¥¼ SERVER_ERRORë¡œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      expect(classifyError(serverError)).toBe(ErrorTypes.SERVER_ERROR);\r\n      \r\n      const badGatewayError = new Error('HTTP 502: Bad Gateway');\r\n      expect(classifyError(badGatewayError)).toBe(ErrorTypes.SERVER_ERROR);\r\n    });\r\n\r\n    test('íŠ¹ì • ë©”ì‹œì§€ íŒ¨í„´ì„ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¥˜í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');\r\n      expect(classifyError(notFoundError)).toBe(ErrorTypes.NOT_FOUND);\r\n    });\r\n\r\n    test('ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ëŠ” UNKNOWN_ERRORë¡œ ë¶„ë¥˜ë˜ì–´ì•¼ í•¨', () => {\r\n      const unknownError = new Error('Something went wrong');\r\n      expect(classifyError(unknownError)).toBe(ErrorTypes.UNKNOWN_ERROR);\r\n    });\r\n  });\r\n\r\n  describe('getErrorMessage', () => {\r\n    test('ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      const errorMessage = getErrorMessage(networkError);\r\n\r\n      expect(errorMessage.title).toBe('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜');\r\n      expect(errorMessage.message).toBe('ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');\r\n      expect(errorMessage.action).toBe('ë‹¤ì‹œ ì‹œë„');\r\n      expect(errorMessage.canRetry).toBe(true);\r\n      expect(errorMessage.originalError).toBe(networkError);\r\n      expect(errorMessage.timestamp).toBeDefined();\r\n    });\r\n\r\n    test('ì„œë²„ ì—ëŸ¬ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•¨', () => {\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      const errorMessage = getErrorMessage(serverError);\r\n\r\n      expect(errorMessage.title).toBe('ì„œë²„ ì˜¤ë¥˜');\r\n      expect(errorMessage.message).toBe('ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');\r\n      expect(errorMessage.canRetry).toBe(true);\r\n    });\r\n\r\n    test('NOT_FOUND ì—ëŸ¬ì— ëŒ€í•œ ë©”ì‹œì§€ë¥¼ ë°˜í™˜í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      const errorMessage = getErrorMessage(notFoundError);\r\n\r\n      expect(errorMessage.title).toBe('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');\r\n      expect(errorMessage.message).toBe('ìš”ì²­í•œ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');\r\n      expect(errorMessage.canRetry).toBe(false);\r\n    });\r\n\r\n    test('ì»¨í…ìŠ¤íŠ¸ë³„ ë©”ì‹œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const error = new Error('HTTP 500: Internal Server Error');\r\n      \r\n      const saveErrorMessage = getErrorMessage(error, 'save');\r\n      expect(saveErrorMessage.message).toContain('ë¬¸ì„œ ì €ì¥ ì¤‘');\r\n      \r\n      const loadErrorMessage = getErrorMessage(error, 'load');\r\n      expect(loadErrorMessage.message).toContain('ë¬¸ì„œ ë¶ˆëŸ¬ì˜¤ê¸° ì¤‘');\r\n      \r\n      const deleteErrorMessage = getErrorMessage(error, 'delete');\r\n      expect(deleteErrorMessage.message).toContain('ë¬¸ì„œ ì‚­ì œ ì¤‘');\r\n    });\r\n  });\r\n\r\n  describe('logError', () => {\r\n    test('ê°œë°œ í™˜ê²½ì—ì„œ ì½˜ì†”ì— ì—ëŸ¬ë¥¼ ë¡œê¹…í•´ì•¼ í•¨', () => {\r\n      const originalEnv = process.env.NODE_ENV;\r\n      process.env.NODE_ENV = 'development';\r\n\r\n      const testError = new Error('í…ŒìŠ¤íŠ¸ ì—ëŸ¬');\r\n      const logData = logError(testError, 'test', { extra: 'info' });\r\n\r\n      expect(console.error).toHaveBeenCalledWith('ğŸš¨ Error logged:', expect.objectContaining({\r\n        title: expect.any(String),\r\n        message: expect.any(String),\r\n        context: 'test',\r\n        additionalInfo: { extra: 'info' },\r\n        userAgent: expect.any(String),\r\n        url: expect.any(String),\r\n        timestamp: expect.any(String)\r\n      }));\r\n\r\n      expect(logData.context).toBe('test');\r\n      expect(logData.additionalInfo).toEqual({ extra: 'info' });\r\n\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n\r\n    test('í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì½˜ì†” ë¡œê¹…ì„ í•˜ì§€ ì•Šì•„ì•¼ í•¨', () => {\r\n      const originalEnv = process.env.NODE_ENV;\r\n      process.env.NODE_ENV = 'production';\r\n\r\n      const testError = new Error('í…ŒìŠ¤íŠ¸ ì—ëŸ¬');\r\n      logError(testError);\r\n\r\n      expect(console.error).not.toHaveBeenCalled();\r\n\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n  });\r\n\r\n  describe('isRetryableError', () => {\r\n    test('ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      expect(isRetryableError(networkError)).toBe(true);\r\n\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      expect(isRetryableError(serverError)).toBe(true);\r\n\r\n      const unknownError = new Error('Something went wrong');\r\n      expect(isRetryableError(unknownError)).toBe(true);\r\n    });\r\n\r\n    test('ì¬ì‹œë„ ë¶ˆê°€ëŠ¥í•œ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•´ì•¼ í•¨', () => {\r\n      const notFoundError = new Error('HTTP 404: Not Found');\r\n      expect(isRetryableError(notFoundError)).toBe(false);\r\n\r\n      const validationError = new Error('HTTP 400: Bad Request');\r\n      expect(isRetryableError(validationError)).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('isOfflineError', () => {\r\n    test('ì˜¤í”„ë¼ì¸ ì—ëŸ¬ë¥¼ ì˜¬ë°”ë¥´ê²Œ íŒë‹¨í•´ì•¼ í•¨', () => {\r\n      const networkError = new TypeError('Failed to fetch');\r\n      expect(isOfflineError(networkError)).toBe(true);\r\n\r\n      const serverError = new Error('HTTP 500: Internal Server Error');\r\n      expect(isOfflineError(serverError)).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('í†µí•© ì‹œë‚˜ë¦¬ì˜¤', () => {\r\n    test('ì „ì²´ ì—ëŸ¬ ì²˜ë¦¬ í”Œë¡œìš°ê°€ ì •ìƒ ì‘ë™í•´ì•¼ í•¨', () => {\r\n      const originalEnv = process.env.NODE_ENV;\r\n      process.env.NODE_ENV = 'development';\r\n\r\n      // 1. ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ë°œìƒ\r\n      const networkError = new TypeError('Failed to fetch');\r\n      \r\n      // 2. ì—ëŸ¬ ë¶„ë¥˜\r\n      const errorType = classifyError(networkError);\r\n      expect(errorType).toBe(ErrorTypes.NETWORK_ERROR);\r\n      \r\n      // 3. ì‚¬ìš©ì ì¹œí™”ì  ë©”ì‹œì§€ ìƒì„±\r\n      const errorMessage = getErrorMessage(networkError, 'save');\r\n      expect(errorMessage.title).toBe('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜');\r\n      expect(errorMessage.message).toContain('ë¬¸ì„œ ì €ì¥ ì¤‘');\r\n      expect(errorMessage.canRetry).toBe(true);\r\n      \r\n      // 4. ì¬ì‹œë„ ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸\r\n      expect(isRetryableError(networkError)).toBe(true);\r\n      expect(isOfflineError(networkError)).toBe(true);\r\n      \r\n      // 5. ì—ëŸ¬ ë¡œê¹…\r\n      const logData = logError(networkError, 'save', { documentId: 'test-123' });\r\n      expect(console.error).toHaveBeenCalled();\r\n      expect(logData.context).toBe('save');\r\n      expect(logData.additionalInfo.documentId).toBe('test-123');\r\n\r\n      process.env.NODE_ENV = originalEnv;\r\n    });\r\n  });\r\n}); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\aiUtils.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\api\\aiService.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":48,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":48,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1243,1290],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":96,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":96,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2617,2664],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":201,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":201,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5212,5248],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// aiService.js - Claude API ì—°ë™ ì„œë¹„ìŠ¤\n\n// API í‚¤ í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” ê¸°ë³¸ê°’ ì‚¬ìš© (ì‹¤ì œ ë°°í¬ ì‹œì—ëŠ” í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© ê¶Œì¥)\n// !!! ì‹¤ì œ API í‚¤ë¥¼ ì½”ë“œì— í•˜ë“œì½”ë”©í•˜ì§€ ë§ˆì„¸ìš”. ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ìš©ì…ë‹ˆë‹¤. !!!\nconst API_KEY = process.env.CLAUDE_API_KEY || '';\n\n// ë¯¸í‚¤ ì—ë””í„°ë¥¼ ìœ„í•œ Claude í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿\nconst SYSTEM_PROMPT = `ë‹¹ì‹ ì€ ë¯¸í‚¤ ì—ë””í„°(Miki Editor)ì˜ AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.\nì‚¬ìš©ìì˜ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œ í¸ì§‘ì„ ë„ì™€ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.\nì‚¬ìš©ìì˜ ëª…ë ¹ì„ ì´í•´í•˜ê³  ë¬¸ì„œ í¸ì§‘ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ì œì•ˆí•´ì•¼ í•©ë‹ˆë‹¤.\n\nëª…ë ¹ì´ ë¬¸ì„œ í¸ì§‘ ê´€ë ¨ì´ë©´(ì˜ˆ: \"ì´ í…ìŠ¤íŠ¸ë¥¼ êµµê²Œ í•´ì¤˜\", \"í‘œ ë§Œë“¤ì–´ì¤˜\" ë“±), JSON í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ì—¬ ì—ë””í„°ê°€ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\në¬¸ì„œ ë‚´ìš©ì— ëŒ€í•œ ì§ˆë¬¸ì´ë©´ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ ì‘ë‹µí•©ë‹ˆë‹¤.\n\nì‘ë‹µ í˜•ì‹:\n1. í¸ì§‘ ëª…ë ¹ì¸ ê²½ìš°: \n\\`\\`\\`json\n{\n  \"isSuggestion\": true,\n  \"suggestionId\": \"ê³ ìœ ID\",\n  \"suggestionType\": \"user_command_transform\",\n  \"displayText\": \"ì‚¬ìš©ìì—ê²Œ í‘œì‹œí•  ì œì•ˆ ë©”ì‹œì§€\",\n  \"actions\": [\n    {\n      \"actionType\": \"ì‘ì—…ìœ í˜•(replace_content, apply_style ë“±)\",\n      \"commandType\": \"ëª…ë ¹ìœ í˜•(bold, list_ul ë“±)\",\n      \"range\": \"selection\",\n      \"content\": \"ë‚´ìš©\"\n    }\n  ]\n}\n\\`\\`\\`\n\n2. ì¼ë°˜ ì§ˆë¬¸ì¸ ê²½ìš°: ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œ ì‘ë‹µ`;\n\n/**\n * Claude APIì— ë©”ì‹œì§€ë¥¼ ì „ì†¡í•˜ê³  ì‘ë‹µì„ ë°›ëŠ” í•¨ìˆ˜\n * @param {string} userPrompt - ì‚¬ìš©ì ì…ë ¥ ë©”ì‹œì§€\n * @param {Object} context - ì—ë””í„° ì»¨í…ìŠ¤íŠ¸ (í˜„ì¬ ë¬¸ì„œ ë‚´ìš©, ì„ íƒ ì˜ì—­ ë“±)\n * @returns {Promise<string>} - AI ì‘ë‹µ\n */\nexport const sendMessageToClaude = async (userPrompt, context = {}) => {\n  const { fullContent = '', selection = null } = context;\n  \n  try {\n    // API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ ì‚¬ìš©\n    if (!API_KEY) {\n      console.log('API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•„ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì‘ë‹µí•©ë‹ˆë‹¤.');\n      return simulateClaudeResponse(userPrompt, context);\n    }\n    \n    // ì»¨í…ìŠ¤íŠ¸ ì •ë³´ í¬í•¨í•œ í”„ë¡¬í”„íŠ¸ êµ¬ì„±\n    let contextInfo = `í˜„ì¬ ë¬¸ì„œ ë‚´ìš©:\\n\\`\\`\\`markdown\\n${fullContent}\\n\\`\\`\\`\\n\\n`;\n    \n    if (selection && selection.text) {\n      contextInfo += `ì„ íƒëœ í…ìŠ¤íŠ¸: \"${selection.text}\"\\n`;\n      if (selection.range) {\n        contextInfo += `ì„ íƒ ë²”ìœ„: ${JSON.stringify(selection.range)}\\n`;\n      }\n    }\n    \n    // Claude API ìš”ì²­ ì„¤ì •\n    const response = await fetch('https://api.anthropic.com/v1/messages', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-api-key': API_KEY,\n        'anthropic-version': '2023-06-01'\n      },\n      body: JSON.stringify({\n        model: 'claude-3-5-haiku-20241022',  // Claude 3.5 Haiku ëª¨ë¸ë¡œ ë³€ê²½\n        max_tokens: 4000,\n        messages: [\n          {\n            role: 'system',\n            content: SYSTEM_PROMPT\n          },\n          {\n            role: 'user',\n            content: `${contextInfo}\\n\\nì‚¬ìš©ì ëª…ë ¹/ì§ˆë¬¸: ${userPrompt}`\n          }\n        ]\n      })\n    });\n\n    // ì‘ë‹µ ì²˜ë¦¬\n    if (!response.ok) {\n      const errorData = await response.json();\n      throw new Error(`API ì˜¤ë¥˜: ${response.status} - ${errorData.error?.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);\n    }\n\n    const data = await response.json();\n    return data.content[0].text;\n    \n  } catch (error) {\n    console.error('Claude API í˜¸ì¶œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);\n    return `ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`;\n  }\n};\n\n/**\n * API í‚¤ê°€ ì—†ì„ ë•Œ ì‚¬ìš©í•  ì‹œë®¬ë ˆì´ì…˜ ì‘ë‹µ ìƒì„±ê¸°\n * @param {string} userPrompt - ì‚¬ìš©ì ì…ë ¥ ë©”ì‹œì§€\n * @param {Object} context - ì—ë””í„° ì»¨í…ìŠ¤íŠ¸\n * @returns {string} - ì‹œë®¬ë ˆì´ì…˜ëœ AI ì‘ë‹µ\n */\nfunction simulateClaudeResponse(userPrompt, context) {\n  const { selection } = context;\n  const prompt = userPrompt.toLowerCase();\n  \n  // êµµê²Œ ë§Œë“¤ê¸° ëª…ë ¹ ì‹œë®¬ë ˆì´ì…˜\n  if (prompt.includes('êµµê²Œ') && selection && selection.text) {\n    return `\\`\\`\\`json\n{\n  \"isSuggestion\": true,\n  \"suggestionId\": \"sim-bold-${Date.now()}\",\n  \"suggestionType\": \"user_command_transform\",\n  \"displayText\": \"ì„ íƒí•œ í…ìŠ¤íŠ¸ë¥¼ êµµê²Œ ë§Œë“¤ê¹Œìš”?\",\n  \"actions\": [\n    {\n      \"actionType\": \"apply_style\",\n      \"commandType\": \"bold\",\n      \"range\": \"selection\",\n      \"targetText\": \"${selection.text}\"\n    }\n  ]\n}\n\\`\\`\\``;\n  }\n  \n  // ëª©ë¡ ë§Œë“¤ê¸° ëª…ë ¹ ì‹œë®¬ë ˆì´ì…˜\n  if (prompt.includes('ëª©ë¡') || prompt.includes('ë¦¬ìŠ¤íŠ¸')) {\n    return `\\`\\`\\`json\n{\n  \"isSuggestion\": true,\n  \"suggestionId\": \"sim-list-${Date.now()}\",\n  \"suggestionType\": \"user_command_transform\",\n  \"displayText\": \"ìˆœì„œ ì—†ëŠ” ëª©ë¡ì„ ìƒì„±í• ê¹Œìš”?\",\n  \"actions\": [\n    {\n      \"actionType\": \"create_element\",\n      \"commandType\": \"list_ul\",\n      \"range\": \"cursor\",\n      \"content\": {\n        \"items\": [\"ì²« ë²ˆì§¸ í•­ëª©\", \"ë‘ ë²ˆì§¸ í•­ëª©\", \"ì„¸ ë²ˆì§¸ í•­ëª©\"]\n      }\n    }\n  ]\n}\n\\`\\`\\``;\n  }\n  \n  // í‘œ ë§Œë“¤ê¸° ëª…ë ¹ ì‹œë®¬ë ˆì´ì…˜\n  if (prompt.includes('í‘œ')) {\n    return `\\`\\`\\`json\n{\n  \"isSuggestion\": true,\n  \"suggestionId\": \"sim-table-${Date.now()}\",\n  \"suggestionType\": \"clarification_needed\",\n  \"displayText\": \"í‘œë¥¼ ë§Œë“¤ë ¤ë©´ í¬ê¸°ë¥¼ ì§€ì •í•´ ì£¼ì„¸ìš”.\",\n  \"clarificationDetails\": {\n    \"query\": \"ëª‡ í–‰ ëª‡ ì—´ì˜ í‘œë¥¼ ë§Œë“¤ê¹Œìš”?\",\n    \"options\": [\n      { \"label\": \"2x2 í‘œ\", \"value\": \"2x2\" },\n      { \"label\": \"3x3 í‘œ\", \"value\": \"3x3\" },\n      { \"label\": \"2x3 í‘œ\", \"value\": \"2x3\" }\n    ]\n  }\n}\n\\`\\`\\``;\n  }\n  \n  // ì¼ë°˜ ì§ˆë¬¸ì— ëŒ€í•œ ì‘ë‹µ\n  return `ì•ˆë…•í•˜ì„¸ìš”! \"${userPrompt}\"ì— ëŒ€í•œ ì‘ë‹µì…ë‹ˆë‹¤. í˜„ì¬ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì‘ë™ ì¤‘ì…ë‹ˆë‹¤. API í‚¤ë¥¼ ì„¤ì •í•˜ë©´ ì‹¤ì œ Claude AIë¡œ ë” ì •í™•í•œ ì‘ë‹µì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;\n}\n\n/**\n * AI ì‘ë‹µì—ì„œ JSON ë¶€ë¶„ì„ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜\n * @param {string} aiResponse - AIì˜ ì‘ë‹µ í…ìŠ¤íŠ¸\n * @returns {Object|null} - íŒŒì‹±ëœ JSON ê°ì²´ ë˜ëŠ” null\n */\nexport const extractJsonFromResponse = (aiResponse) => {\n  try {\n    // JSON ì½”ë“œ ë¸”ë¡ ì°¾ê¸°\n    const jsonRegex = /```json\\s*([\\s\\S]*?)\\s*```/;\n    const match = aiResponse.match(jsonRegex);\n    \n    if (match && match[1]) {\n      // JSON ë¬¸ìì—´ì—ì„œ ì‹¤ì œ JSON ê°ì²´ íŒŒì‹±\n      return JSON.parse(match[1]);\n    }\n    \n    // ì „ì²´ í…ìŠ¤íŠ¸ê°€ JSONì¸ì§€ í™•ì¸\n    const trimmedResponse = aiResponse.trim();\n    if (trimmedResponse.startsWith('{') && trimmedResponse.endsWith('}')) {\n      return JSON.parse(trimmedResponse);\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('JSON íŒŒì‹± ì˜¤ë¥˜:', error);\n    return null;\n  }\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\components\\ai\\AiPanelContainer.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport AiPanel from '../../AiPanel';\r\n\r\nconst AiPanelContainer = ({\r\n  isMobile,\r\n  activeMobilePanel,\r\n  setActiveMobilePanel,\r\n  aiPanelRef,\r\n  editorContext,\r\n  onStructuredCommand,\r\n  onDisplaySuggestion\r\n}) => {\r\n  return (\r\n    <div \r\n      className={`bg-white rounded shadow overflow-hidden flex flex-col ${\r\n        isMobile ? (activeMobilePanel === 'ai' ? 'block' : 'hidden') + ' flex-grow' : 'w-1/4 ml-2'\r\n      }`}\r\n      style={{ \r\n        display: isMobile && activeMobilePanel !== 'ai' ? 'none' : 'flex',\r\n        flexDirection: 'column', \r\n        height: '100%',\r\n        position: 'relative'\r\n      }}\r\n    >\r\n      {/* AI íŒ¨ë„ í—¤ë” */}\r\n      <div className=\"p-3 border-b flex justify-between items-center\" style={{ flexShrink: 0 }}>\r\n        <h2 className=\"text-lg font-bold\">AI íŒ¨ë„</h2>\r\n        {isMobile && (\r\n          <button \r\n            onClick={() => setActiveMobilePanel('editor')}\r\n            className=\"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 rounded flex items-center\"\r\n            title=\"ì—ë””í„°ë¡œ ì´ë™\"\r\n          >\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n            </svg>\r\n            ì—ë””í„°\r\n          </button>\r\n        )}\r\n      </div>\r\n      \r\n      {/* AI íŒ¨ë„ ë‚´ìš© */}\r\n      <div className=\"flex-grow relative\">\r\n        <AiPanel\r\n          ref={aiPanelRef}\r\n          key=\"ai-panel-fixed-key\" // ê³ ì • í‚¤ ê°’ì„ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ ì¬ìƒì„± ë°©ì§€\r\n          editorContext={editorContext}\r\n          onStructuredCommand={onStructuredCommand}\r\n          onDisplaySuggestion={onDisplaySuggestion}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AiPanelContainer; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\components\\common\\ErrorBoundary.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'error' is defined but never used. Allowed unused args must match /^_/u.","line":9,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":16,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":16,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[380,446],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false, error: null, errorInfo: null };\r\n  }\r\n\r\n  static getDerivedStateFromError(error) {\r\n    // ë‹¤ìŒ ë Œë”ë§ì—ì„œ í´ë°± UIê°€ ë³´ì´ë„ë¡ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error, errorInfo) {\r\n    // ì—ëŸ¬ ë¡œê¹…\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n    \r\n    this.setState({\r\n      error: error,\r\n      errorInfo: errorInfo\r\n    });\r\n\r\n    // í”„ë¡œë•ì…˜ì—ì„œëŠ” ì—ëŸ¬ ë¦¬í¬íŒ… ì„œë¹„ìŠ¤ë¡œ ì „ì†¡\r\n    if ((typeof process !== 'undefined' && process.env?.NODE_ENV === 'production') || false) {\r\n      // TODO: Sentry.captureException(error, { extra: errorInfo });\r\n    }\r\n  }\r\n\r\n  handleReload = () => {\r\n    // ì•± ìƒíƒœ ì´ˆê¸°í™” ë° ìƒˆë¡œê³ ì¹¨\r\n    window.location.reload();\r\n  };\r\n\r\n  handleReset = () => {\r\n    // ì—ëŸ¬ ìƒíƒœë§Œ ë¦¬ì…‹í•˜ì—¬ ì•± ë³µêµ¬ ì‹œë„\r\n    this.setState({ hasError: false, error: null, errorInfo: null });\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\r\n          <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-6\">\r\n            <div className=\"flex items-center mb-4\">\r\n              <svg className=\"w-8 h-8 text-red-500 mr-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 15.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n              </svg>\r\n              <h1 className=\"text-xl font-bold text-gray-900\">ì•± ì˜¤ë¥˜ ë°œìƒ</h1>\r\n            </div>\r\n            \r\n            <p className=\"text-gray-600 mb-6\">\r\n              ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì•±ì„ ë³µêµ¬í•´ë³´ì„¸ìš”.\r\n            </p>\r\n\r\n            <div className=\"space-y-3\">\r\n              <button\r\n                onClick={this.handleReset}\r\n                className=\"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\r\n              >\r\n                ì•± ë³µêµ¬ ì‹œë„\r\n              </button>\r\n              \r\n              <button\r\n                onClick={this.handleReload}\r\n                className=\"w-full px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors\"\r\n              >\r\n                í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨\r\n              </button>\r\n            </div>\r\n\r\n            {/* ê°œë°œ í™˜ê²½ì—ì„œë§Œ ìƒì„¸ ì—ëŸ¬ ì •ë³´ í‘œì‹œ */}\r\n            {((typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') || false) && this.state.error && (\r\n              <details className=\"mt-6 p-4 bg-gray-100 rounded\">\r\n                <summary className=\"cursor-pointer font-medium text-gray-700 mb-2\">\r\n                  ê°œë°œì ì •ë³´ (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)\r\n                </summary>\r\n                <div className=\"text-sm text-gray-600 space-y-2\">\r\n                  <div>\r\n                    <strong>ì—ëŸ¬:</strong>\r\n                    <pre className=\"mt-1 p-2 bg-red-50 text-red-700 rounded text-xs overflow-auto\">\r\n                      {this.state.error.toString()}\r\n                    </pre>\r\n                  </div>\r\n                  <div>\r\n                    <strong>ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤:</strong>\r\n                    <pre className=\"mt-1 p-2 bg-red-50 text-red-700 rounded text-xs overflow-auto\">\r\n                      {this.state.errorInfo.componentStack}\r\n                    </pre>\r\n                  </div>\r\n                </div>\r\n              </details>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\components\\common\\ErrorDisplay.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { getErrorMessage, isRetryableError } from '../../utils/errorHandler';\r\n\r\nconst ErrorDisplay = ({ \r\n  error, \r\n  context = '', \r\n  onRetry, \r\n  onDismiss,\r\n  className = '',\r\n  size = 'normal' // 'small', 'normal', 'large'\r\n}) => {\r\n  if (!error) return null;\r\n\r\n  const errorInfo = getErrorMessage(error, context);\r\n  const canRetry = isRetryableError(error);\r\n\r\n  const getSizeClasses = () => {\r\n    switch (size) {\r\n      case 'small':\r\n        return {\r\n          container: 'p-3',\r\n          icon: 'w-5 h-5',\r\n          title: 'text-sm font-medium',\r\n          message: 'text-xs',\r\n          button: 'px-2 py-1 text-xs',\r\n        };\r\n      case 'large':\r\n        return {\r\n          container: 'p-6',\r\n          icon: 'w-8 h-8',\r\n          title: 'text-xl font-bold',\r\n          message: 'text-base',\r\n          button: 'px-4 py-2 text-base',\r\n        };\r\n      default:\r\n        return {\r\n          container: 'p-4',\r\n          icon: 'w-6 h-6',\r\n          title: 'text-lg font-semibold',\r\n          message: 'text-sm',\r\n          button: 'px-3 py-2 text-sm',\r\n        };\r\n    }\r\n  };\r\n\r\n  const sizeClasses = getSizeClasses();\r\n\r\n  const getErrorIcon = () => {\r\n    return (\r\n      <svg \r\n        className={`${sizeClasses.icon} text-red-500 flex-shrink-0`} \r\n        fill=\"none\" \r\n        viewBox=\"0 0 24 24\" \r\n        stroke=\"currentColor\"\r\n      >\r\n        <path \r\n          strokeLinecap=\"round\" \r\n          strokeLinejoin=\"round\" \r\n          strokeWidth={2} \r\n          d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 15.5c-.77.833.192 2.5 1.732 2.5z\" \r\n        />\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  const getNetworkIcon = () => {\r\n    return (\r\n      <svg \r\n        className={`${sizeClasses.icon} text-orange-500 flex-shrink-0`} \r\n        fill=\"none\" \r\n        viewBox=\"0 0 24 24\" \r\n        stroke=\"currentColor\"\r\n      >\r\n        <path \r\n          strokeLinecap=\"round\" \r\n          strokeLinejoin=\"round\" \r\n          strokeWidth={2} \r\n          d=\"M8.111 16.404a5.5 5.5 0 017.778 0M12 20h.01m-7.08-7.071c3.904-3.905 10.236-3.905 14.141 0M1.394 9.393c5.857-5.857 15.355-5.857 21.213 0\" \r\n        />\r\n      </svg>\r\n    );\r\n  };\r\n\r\n  const isNetworkError = error.name === 'TypeError' && error.message.includes('fetch');\r\n\r\n  return (\r\n    <div className={`bg-red-50 border border-red-200 rounded-lg ${sizeClasses.container} ${className}`}>\r\n      <div className=\"flex items-start\">\r\n        <div className=\"mr-3\">\r\n          {isNetworkError ? getNetworkIcon() : getErrorIcon()}\r\n        </div>\r\n        \r\n        <div className=\"flex-1 min-w-0\">\r\n          <h3 className={`${sizeClasses.title} text-red-800 mb-1`}>\r\n            {errorInfo.title}\r\n          </h3>\r\n          \r\n          <p className={`${sizeClasses.message} text-red-700 mb-3`}>\r\n            {errorInfo.message}\r\n          </p>\r\n\r\n          {/* ê°œë°œ í™˜ê²½ì—ì„œë§Œ ìƒì„¸ ì—ëŸ¬ ì •ë³´ í‘œì‹œ */}\r\n          {process.env.NODE_ENV === 'development' && (\r\n            <details className=\"mb-3\">\r\n              <summary className=\"cursor-pointer text-xs text-red-600 hover:text-red-800\">\r\n                ê°œë°œì ì •ë³´ (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)\r\n              </summary>\r\n              <pre className=\"mt-2 p-2 bg-red-100 text-red-800 text-xs rounded overflow-auto\">\r\n                {error.stack || error.message}\r\n              </pre>\r\n            </details>\r\n          )}\r\n\r\n          <div className=\"flex items-center space-x-2\">\r\n            {/* ì¬ì‹œë„ ë²„íŠ¼ */}\r\n            {canRetry && onRetry && (\r\n              <button\r\n                onClick={onRetry}\r\n                className={`${sizeClasses.button} bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-colors`}\r\n              >\r\n                {errorInfo.action}\r\n              </button>\r\n            )}\r\n\r\n            {/* ë‹«ê¸° ë²„íŠ¼ */}\r\n            {onDismiss && (\r\n              <button\r\n                onClick={onDismiss}\r\n                className={`${sizeClasses.button} bg-gray-200 text-gray-800 rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors`}\r\n              >\r\n                ë‹«ê¸°\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* ìš°ìƒë‹¨ ë‹«ê¸° X ë²„íŠ¼ */}\r\n        {onDismiss && (\r\n          <button\r\n            onClick={onDismiss}\r\n            className=\"ml-2 text-red-400 hover:text-red-600 focus:outline-none\"\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorDisplay; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\components\\common\\LoadingSpinner.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\n// ê¸°ë³¸ ìŠ¤í”¼ë„ˆ ì»´í¬ë„ŒíŠ¸\r\nexport const LoadingSpinner = ({ \r\n  size = 'normal', \r\n  color = 'blue',\r\n  className = '',\r\n  text = ''\r\n}) => {\r\n  const getSizeClass = () => {\r\n    switch (size) {\r\n      case 'small': return 'w-4 h-4';\r\n      case 'large': return 'w-8 h-8';\r\n      default: return 'w-6 h-6';\r\n    }\r\n  };\r\n\r\n  const getColorClass = () => {\r\n    switch (color) {\r\n      case 'white': return 'text-white';\r\n      case 'gray': return 'text-gray-500';\r\n      case 'green': return 'text-green-500';\r\n      case 'red': return 'text-red-500';\r\n      default: return 'text-blue-500';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`flex items-center justify-center ${className}`}>\r\n      <svg \r\n        className={`animate-spin ${getSizeClass()} ${getColorClass()}`}\r\n        fill=\"none\" \r\n        viewBox=\"0 0 24 24\"\r\n      >\r\n        <circle \r\n          className=\"opacity-25\" \r\n          cx=\"12\" \r\n          cy=\"12\" \r\n          r=\"10\" \r\n          stroke=\"currentColor\" \r\n          strokeWidth=\"4\"\r\n        />\r\n        <path \r\n          className=\"opacity-75\" \r\n          fill=\"currentColor\" \r\n          d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n        />\r\n      </svg>\r\n      {text && <span className=\"ml-2 text-sm text-gray-600\">{text}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ë¬¸ì„œ ëª©ë¡ ìŠ¤ì¼ˆë ˆí†¤\r\nexport const DocumentListSkeleton = ({ count = 5 }) => {\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      {Array.from({ length: count }).map((_, index) => (\r\n        <div key={index} className=\"animate-pulse\">\r\n          <div className=\"p-3 bg-gray-50 rounded\">\r\n            {/* ì œëª© ìŠ¤ì¼ˆë ˆí†¤ */}\r\n            <div className=\"h-4 bg-gray-200 rounded w-3/4 mb-2\"></div>\r\n            \r\n            {/* ë‚´ìš© ë¯¸ë¦¬ë³´ê¸° ìŠ¤ì¼ˆë ˆí†¤ */}\r\n            <div className=\"space-y-1\">\r\n              <div className=\"h-3 bg-gray-200 rounded w-full\"></div>\r\n              <div className=\"h-3 bg-gray-200 rounded w-5/6\"></div>\r\n            </div>\r\n            \r\n            {/* ë©”íƒ€ ì •ë³´ ìŠ¤ì¼ˆë ˆí†¤ */}\r\n            <div className=\"flex justify-between items-center mt-2\">\r\n              <div className=\"h-3 bg-gray-200 rounded w-24\"></div>\r\n              <div className=\"h-3 bg-gray-200 rounded w-16\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n// ì—ë””í„° ìŠ¤ì¼ˆë ˆí†¤\r\nexport const EditorSkeleton = () => {\r\n  return (\r\n    <div className=\"animate-pulse h-full\">\r\n      {/* í—¤ë” ìŠ¤ì¼ˆë ˆí†¤ */}\r\n      <div className=\"mb-4 p-4 border-b\">\r\n        <div className=\"flex justify-between items-center mb-2\">\r\n          <div className=\"h-6 bg-gray-200 rounded w-20\"></div>\r\n          <div className=\"flex space-x-2\">\r\n            <div className=\"h-8 bg-gray-200 rounded w-16\"></div>\r\n            <div className=\"h-8 bg-gray-200 rounded w-16\"></div>\r\n            <div className=\"h-8 bg-gray-200 rounded w-8\"></div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* ì œëª© ì…ë ¥ ìŠ¤ì¼ˆë ˆí†¤ */}\r\n        <div className=\"h-10 bg-gray-200 rounded w-full\"></div>\r\n      </div>\r\n      \r\n      {/* ì—ë””í„° ì˜ì—­ ìŠ¤ì¼ˆë ˆí†¤ */}\r\n      <div className=\"flex-grow space-y-3 p-4\">\r\n        <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded w-5/6\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded w-4/5\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded w-full\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded w-5/6\"></div>\r\n        <div className=\"h-4 bg-gray-200 rounded w-2/3\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// AI íŒ¨ë„ ìŠ¤ì¼ˆë ˆí†¤\r\nexport const AiPanelSkeleton = () => {\r\n  return (\r\n    <div className=\"animate-pulse h-full\">\r\n      {/* í—¤ë” ìŠ¤ì¼ˆë ˆí†¤ */}\r\n      <div className=\"p-3 border-b\">\r\n        <div className=\"h-6 bg-gray-200 rounded w-20\"></div>\r\n      </div>\r\n      \r\n      {/* ëŒ€í™” ë‚´ìš© ìŠ¤ì¼ˆë ˆí†¤ */}\r\n      <div className=\"p-4 space-y-4\">\r\n        {/* ì‚¬ìš©ì ë©”ì‹œì§€ */}\r\n        <div className=\"flex justify-end\">\r\n          <div className=\"bg-gray-200 rounded-lg p-3 max-w-xs\">\r\n            <div className=\"h-3 bg-gray-300 rounded w-full mb-1\"></div>\r\n            <div className=\"h-3 bg-gray-300 rounded w-3/4\"></div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* AI ì‘ë‹µ */}\r\n        <div className=\"flex justify-start\">\r\n          <div className=\"bg-gray-100 rounded-lg p-3 max-w-xs\">\r\n            <div className=\"h-3 bg-gray-200 rounded w-full mb-1\"></div>\r\n            <div className=\"h-3 bg-gray-200 rounded w-5/6 mb-1\"></div>\r\n            <div className=\"h-3 bg-gray-200 rounded w-2/3\"></div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* ì‚¬ìš©ì ë©”ì‹œì§€ */}\r\n        <div className=\"flex justify-end\">\r\n          <div className=\"bg-gray-200 rounded-lg p-3 max-w-xs\">\r\n            <div className=\"h-3 bg-gray-300 rounded w-4/5\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* ì…ë ¥ ì˜ì—­ ìŠ¤ì¼ˆë ˆí†¤ */}\r\n      <div className=\"absolute bottom-0 left-0 right-0 p-4 border-t bg-white\">\r\n        <div className=\"h-10 bg-gray-200 rounded w-full\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ì „ì²´ í˜ì´ì§€ ë¡œë”©\r\nexport const PageLoadingSpinner = ({ text = 'ë¡œë”© ì¤‘...' }) => {\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\r\n      <div className=\"text-center\">\r\n        <LoadingSpinner size=\"large\" className=\"mb-4\" />\r\n        <p className=\"text-gray-600 text-lg\">{text}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ì¸ë¼ì¸ ë¡œë”© (ë²„íŠ¼ ë‚´ë¶€ ë“±)\r\nexport const InlineLoadingSpinner = ({ text = '' }) => {\r\n  return (\r\n    <div className=\"flex items-center\">\r\n      <LoadingSpinner size=\"small\" />\r\n      {text && <span className=\"ml-2\">{text}</span>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\components\\common\\MessageToast.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\r\n\r\nconst MessageToast = ({ message, onClose }) => {\r\n  useEffect(() => {\r\n    if (message) {\r\n      const timer = setTimeout(() => {\r\n        onClose();\r\n      }, 3000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [message, onClose]);\r\n\r\n  if (!message) return null;\r\n\r\n  const getMessageStyles = () => {\r\n    switch (message.type) {\r\n      case 'success':\r\n        return 'bg-green-100 border-green-400 text-green-700';\r\n      case 'error':\r\n        return 'bg-red-100 border-red-400 text-red-700';\r\n      case 'warning':\r\n        return 'bg-yellow-100 border-yellow-400 text-yellow-700';\r\n      case 'info':\r\n      default:\r\n        return 'bg-blue-100 border-blue-400 text-blue-700';\r\n    }\r\n  };\r\n\r\n  const getIcon = () => {\r\n    switch (message.type) {\r\n      case 'success':\r\n        return (\r\n          <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\r\n          </svg>\r\n        );\r\n      case 'error':\r\n        return (\r\n          <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n          </svg>\r\n        );\r\n      case 'warning':\r\n        return (\r\n          <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.314 15.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n          </svg>\r\n        );\r\n      case 'info':\r\n      default:\r\n        return (\r\n          <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n          </svg>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed top-4 right-4 z-50 animate-fade-in\">\r\n      <div className={`border px-4 py-3 rounded-lg shadow-lg max-w-sm ${getMessageStyles()}`}>\r\n        <div className=\"flex items-center\">\r\n          <div className=\"flex-shrink-0 mr-3\">\r\n            {getIcon()}\r\n          </div>\r\n          <div className=\"flex-1\">\r\n            <p className=\"text-sm font-medium\">{message.text}</p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"flex-shrink-0 ml-3 hover:opacity-70 transition-opacity\"\r\n          >\r\n            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageToast;","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\components\\editor\\EditorPanel.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport MikiEditor from '../../MikiEditor';\r\nimport { InlineLoadingSpinner } from '../common/LoadingSpinner';\r\n\r\nconst EditorPanel = ({\r\n  title,\r\n  saveStatus,\r\n  isFullscreen,\r\n  isMobile,\r\n  activeMobilePanel,\r\n  setActiveMobilePanel,\r\n  isLoadingDocuments,\r\n  editorRef,\r\n  onTitleChange,\r\n  onNewPost,\r\n  onSavePost,\r\n  onToggleFullscreen,\r\n  onEditorContextUpdate,\r\n  onEditorChange,\r\n  onSendToAi,\r\n  onNavigateRequest,\r\n  hasUnsavedChanges,\r\n  isAutoSaving,\r\n  isManualSaving\r\n}) => {\r\n  const getSaveStatusStyle = () => {\r\n    if (isAutoSaving || isManualSaving) {\r\n      return 'bg-blue-100 text-blue-700';\r\n    }\r\n    if (hasUnsavedChanges) {\r\n      return 'bg-yellow-100 text-yellow-700';\r\n    }\r\n    return 'bg-green-100 text-green-700';\r\n  };\r\n\r\n  const getSaveStatusContent = () => {\r\n    if (isAutoSaving) {\r\n      return (\r\n        <div className=\"flex items-center\">\r\n          <InlineLoadingSpinner />\r\n          <span className=\"ml-1\">ìë™ ì €ì¥ ì¤‘...</span>\r\n        </div>\r\n      );\r\n    }\r\n    if (isManualSaving) {\r\n      return (\r\n        <div className=\"flex items-center\">\r\n          <InlineLoadingSpinner />\r\n          <span className=\"ml-1\">ì €ì¥ ì¤‘...</span>\r\n        </div>\r\n      );\r\n    }\r\n    return saveStatus;\r\n  };\r\n\r\n  const getEditorKey = () => {\r\n    return isFullscreen ? \"editor-fixed-key-fullscreen\" : \"editor-fixed-key-normal\";\r\n  };\r\n\r\n  const getContainerClass = () => {\r\n    if (isFullscreen) {\r\n      return \"bg-white rounded shadow flex flex-col h-full\";\r\n    }\r\n    return `bg-white rounded shadow flex flex-col ${\r\n      isMobile ? (activeMobilePanel === 'editor' ? 'block' : 'hidden') + ' flex-grow' : 'flex-1 mx-2'\r\n    }`;\r\n  };\r\n\r\n  const getContainerStyle = () => {\r\n    if (isFullscreen) {\r\n      return {};\r\n    }\r\n    return { display: isMobile && activeMobilePanel !== 'editor' ? 'none' : 'flex' };\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className={getContainerClass()}\r\n      style={getContainerStyle()}\r\n    >\r\n      {/* ì—ë””í„° í—¤ë” */}\r\n      <div className=\"mb-4 flex flex-col p-4 border-b\">\r\n        <div className=\"flex justify-between items-center mb-2\">\r\n          <div className=\"flex items-center\">\r\n            <h2 className=\"text-lg font-bold\">ì—ë””í„°</h2>\r\n            <span className={`ml-4 text-xs px-2 py-1 rounded ${getSaveStatusStyle()}`}>\r\n              {getSaveStatusContent()}\r\n            </span>\r\n            {/* ë³€ê²½ì‚¬í•­ ì¸ë””ì¼€ì´í„° */}\r\n            {hasUnsavedChanges && !isAutoSaving && !isManualSaving && (\r\n              <span className=\"ml-2 w-2 h-2 bg-orange-400 rounded-full\" title=\"ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­\"></span>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-2\">\r\n            {/* ìƒˆ ê¸€ ë²„íŠ¼ */}\r\n            <button \r\n              onClick={onNewPost}\r\n              className=\"px-3 py-1 text-sm rounded flex items-center bg-green-500 text-white hover:bg-green-600\"\r\n              title=\"ìƒˆ ê¸€ ì‘ì„± (Ctrl+N)\"\r\n            >\r\n              <svg className=\"w-4 h-4 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\r\n              </svg>\r\n              ìƒˆ ê¸€\r\n            </button>\r\n            \r\n            {/* ì €ì¥ ë²„íŠ¼ */}\r\n            <button \r\n              onClick={onSavePost}\r\n              disabled={isLoadingDocuments || (!hasUnsavedChanges && !isManualSaving)} \r\n              className={`px-3 py-1 text-sm rounded flex items-center ${\r\n                isLoadingDocuments || (!hasUnsavedChanges && !isManualSaving)\r\n                  ? 'bg-gray-200 text-gray-500 cursor-not-allowed' \r\n                  : 'bg-blue-500 text-white hover:bg-blue-600'\r\n              }`}\r\n              title=\"ì €ì¥ (Ctrl+S)\"\r\n            >\r\n              {isManualSaving ? (\r\n                <InlineLoadingSpinner />\r\n              ) : (\r\n                <svg className=\"w-4 h-4 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4\" />\r\n                </svg>\r\n              )}\r\n              <span className=\"ml-1\">ì €ì¥</span>\r\n            </button>\r\n            \r\n            {/* ì „ì²´í™”ë©´ í† ê¸€ ë²„íŠ¼ */}\r\n            <button \r\n              onClick={onToggleFullscreen}\r\n              className=\"p-1 text-gray-600 hover:text-gray-900 rounded\"\r\n              title=\"ì „ì²´í™”ë©´ í† ê¸€ (Ctrl+Enter)\"\r\n            >\r\n              <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5\" />\r\n              </svg>\r\n            </button>\r\n            \r\n            {/* ëª¨ë°”ì¼ AI íŒ¨ë„ ì´ë™ ë²„íŠ¼ */}\r\n            {isMobile && (\r\n              <button \r\n                onClick={() => setActiveMobilePanel('ai')}\r\n                className=\"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 rounded flex items-center ml-1\"\r\n                title=\"AI íŒ¨ë„ë¡œ ì´ë™\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\r\n                </svg>\r\n                AI íŒ¨ë„\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n        \r\n        {/* ì œëª© ì…ë ¥ */}\r\n        <input\r\n          type=\"text\"\r\n          value={title}\r\n          onChange={onTitleChange}\r\n          placeholder=\"ë¬¸ì„œ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš” (í¸ì§‘ê¸° ì²« ì¤„ í…ìŠ¤íŠ¸ê°€ ìë™ìœ¼ë¡œ ì œëª©ì´ ë©ë‹ˆë‹¤)\"\r\n          className=\"w-full px-3 py-2 text-xl font-medium border-b border-gray-200 focus:outline-none focus:border-blue-500 mb-2 bg-transparent\"\r\n        />\r\n      </div>\r\n      \r\n      {/* ì—ë””í„° ì˜ì—­ */}\r\n      <div className=\"flex-grow border rounded relative\">\r\n        <MikiEditor\r\n          ref={editorRef}\r\n          key={getEditorKey()}\r\n          onContextUpdate={onEditorContextUpdate}\r\n          onContentChange={onEditorChange}\r\n          onSendToAi={onSendToAi}\r\n          onNavigateRequest={onNavigateRequest}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditorPanel; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\components\\layout\\AppLayout.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport DocumentSidebar from '../sidebar/DocumentSidebar';\r\nimport EditorPanel from '../editor/EditorPanel';\r\nimport AiPanelContainer from '../ai/AiPanelContainer';\r\n\r\nconst AppLayout = ({\r\n  isFullscreen,\r\n  isMobile,\r\n  activeMobilePanel,\r\n  setActiveMobilePanel,\r\n  editorPanelClass,\r\n  \r\n  // DocumentSidebar props\r\n  documentsData,\r\n  currentDocument,\r\n  searchQuery,\r\n  setSearchQuery,\r\n  onLoadPost,\r\n  onNewPost,\r\n  onDeletePost,\r\n  setMessage,\r\n  \r\n  // EditorPanel props\r\n  title,\r\n  saveStatus,\r\n  isLoadingDocuments,\r\n  editorRef,\r\n  onTitleChange,\r\n  onSavePost,\r\n  onToggleFullscreen,\r\n  onEditorContextUpdate,\r\n  onEditorChange,\r\n  onSendToAi,\r\n  onNavigateRequest,\r\n  \r\n  // AiPanelContainer props\r\n  aiPanelRef,\r\n  editorContext,\r\n  onStructuredCommand,\r\n  onDisplaySuggestion\r\n}) => {\r\n  if (isFullscreen) {\r\n    // ì „ì²´í™”ë©´ ëª¨ë“œ\r\n    return (\r\n      <div className={editorPanelClass}>\r\n        <EditorPanel\r\n          title={title}\r\n          saveStatus={saveStatus}\r\n          isFullscreen={isFullscreen}\r\n          isMobile={isMobile}\r\n          activeMobilePanel={activeMobilePanel}\r\n          setActiveMobilePanel={setActiveMobilePanel}\r\n          isLoadingDocuments={isLoadingDocuments}\r\n          editorRef={editorRef}\r\n          onTitleChange={onTitleChange}\r\n          onNewPost={onNewPost}\r\n          onSavePost={onSavePost}\r\n          onToggleFullscreen={onToggleFullscreen}\r\n          onEditorContextUpdate={onEditorContextUpdate}\r\n          onEditorChange={onEditorChange}\r\n          onSendToAi={onSendToAi}\r\n          onNavigateRequest={onNavigateRequest}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ì¼ë°˜ ëª¨ë“œ (3íŒ¨ë„ ë ˆì´ì•„ì›ƒ)\r\n  return (\r\n    <div className=\"flex h-full\" style={{ flexDirection: isMobile ? 'column' : 'row' }}>\r\n      {/* ë¬¸ì„œ ëª©ë¡ ì‚¬ì´ë“œë°” */}\r\n      <DocumentSidebar\r\n        documentsData={documentsData}\r\n        currentDocument={currentDocument}\r\n        searchQuery={searchQuery}\r\n        setSearchQuery={setSearchQuery}\r\n        onLoadPost={onLoadPost}\r\n        onNewPost={onNewPost}\r\n        onDeletePost={onDeletePost}\r\n        isMobile={isMobile}\r\n        activeMobilePanel={activeMobilePanel}\r\n        setActiveMobilePanel={setActiveMobilePanel}\r\n        setMessage={setMessage}\r\n      />\r\n      \r\n      {/* ì—ë””í„° íŒ¨ë„ */}\r\n      <EditorPanel\r\n        title={title}\r\n        saveStatus={saveStatus}\r\n        isFullscreen={isFullscreen}\r\n        isMobile={isMobile}\r\n        activeMobilePanel={activeMobilePanel}\r\n        setActiveMobilePanel={setActiveMobilePanel}\r\n        isLoadingDocuments={isLoadingDocuments}\r\n        editorRef={editorRef}\r\n        onTitleChange={onTitleChange}\r\n        onNewPost={onNewPost}\r\n        onSavePost={onSavePost}\r\n        onToggleFullscreen={onToggleFullscreen}\r\n        onEditorContextUpdate={onEditorContextUpdate}\r\n        onEditorChange={onEditorChange}\r\n        onSendToAi={onSendToAi}\r\n        onNavigateRequest={onNavigateRequest}\r\n      />\r\n      \r\n      {/* AI íŒ¨ë„ */}\r\n      <AiPanelContainer\r\n        isMobile={isMobile}\r\n        activeMobilePanel={activeMobilePanel}\r\n        setActiveMobilePanel={setActiveMobilePanel}\r\n        aiPanelRef={aiPanelRef}\r\n        editorContext={editorContext}\r\n        onStructuredCommand={onStructuredCommand}\r\n        onDisplaySuggestion={onDisplaySuggestion}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppLayout; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\components\\sidebar\\DocumentSidebar.jsx","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'React' is defined but never used.","line":1,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13},{"ruleId":"no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":25},{"ruleId":"no-unused-vars","severity":1,"message":"'currentDocument' is defined but never used. Allowed unused args must match /^_/u.","line":23,"column":3,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2064,2098],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2866,2904],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":103,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":103,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3137,3195],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3398,3475],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":117,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":117,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3890,3935],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":120,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":120,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3978,4035],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":122,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":122,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4083,4127],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":132,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":132,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4396,4434],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { useQueryClient } from '@tanstack/react-query';\r\n\r\nconst removeMarkdownFormatting = (text) => {\r\n  if (!text) return '';\r\n  return text\r\n    .replace(/#{1,6}\\s+/g, '') // í—¤ë” ì œê±°\r\n    .replace(/\\*\\*(.*?)\\*\\*/g, '$1') // ë³¼ë“œ ì œê±°\r\n    .replace(/\\*(.*?)\\*/g, '$1') // ì´íƒ¤ë¦­ ì œê±°\r\n    .replace(/`(.*?)`/g, '$1') // ì¸ë¼ì¸ ì½”ë“œ ì œê±°\r\n    .replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1') // ë§í¬ ì œê±°\r\n    .replace(/!\\[.*?\\]\\(.*?\\)/g, '') // ì´ë¯¸ì§€ ì œê±°\r\n    .replace(/^\\s*[-*+]\\s+/gm, '') // ë¦¬ìŠ¤íŠ¸ ë§ˆì»¤ ì œê±°\r\n    .replace(/^\\s*\\d+\\.\\s+/gm, '') // ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸ ë§ˆì»¤ ì œê±°\r\n    .replace(/^\\s*>\\s+/gm, '') // ì¸ìš©ë¬¸ ì œê±°\r\n    .replace(/```[\\s\\S]*?```/g, '') // ì½”ë“œ ë¸”ë¡ ì œê±°\r\n    .replace(/\\n{2,}/g, '\\n') // ì—°ì†ëœ ì¤„ë°”ê¿ˆ ì •ë¦¬\r\n    .trim();\r\n};\r\n\r\nconst DocumentSidebar = ({ \r\n  documentsData, \r\n  currentDocument, \r\n  searchQuery, \r\n  setSearchQuery,\r\n  searchInputRef,\r\n  onLoadPost, \r\n  onNewPost,\r\n  onDeletePost,\r\n  isMobile, \r\n  activeMobilePanel, \r\n  setActiveMobilePanel,\r\n  setMessage \r\n}) => {\r\n  const queryClient = useQueryClient();\r\n\r\n  // ê²€ìƒ‰ í•„í„°ë§ëœ ë¬¸ì„œ ëª©ë¡\r\n  const filteredPosts = useMemo(() => {\r\n    if (!documentsData) return [];\r\n    if (!searchQuery.trim()) return documentsData;\r\n    \r\n    const query = searchQuery.toLowerCase();\r\n    return documentsData.filter(post => \r\n      post.title.toLowerCase().includes(query) ||\r\n      (post.content && post.content.toLowerCase().includes(query)) ||\r\n      (post.preview && post.preview.toLowerCase().includes(query))\r\n    );\r\n  }, [documentsData, searchQuery]);\r\n\r\n  const handleRefresh = () => {\r\n    queryClient.invalidateQueries(['documents']);\r\n  };\r\n\r\n  const handleCleanup = async () => {\r\n    try {\r\n      const { default: DataSyncManager } = await import('../../utils/DataSyncManager.js');\r\n      const syncManager = new DataSyncManager();\r\n      const result = syncManager.immediateLocalCleanup(['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']);\r\n      \r\n      setMessage({\r\n        type: 'success',\r\n        text: `ë¡œì»¬ ì •ë¦¬ ì™„ë£Œ: ${result.preservedDocuments}ê°œ ë³´ì¡´, ${result.deletedDocuments}ê°œ ì‚­ì œ`\r\n      });\r\n    } catch (error) {\r\n      console.error('ìˆ˜ë™ ì •ë¦¬ ì˜¤ë¥˜:', error);\r\n      setMessage({\r\n        type: 'error',\r\n        text: 'ì •ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleDocumentClick = (post) => {\r\n    onLoadPost(post.id);\r\n    if (isMobile) setActiveMobilePanel('editor');\r\n  };\r\n\r\n  const handleNewPostClick = () => {\r\n    onNewPost();\r\n    if (isMobile) setActiveMobilePanel('editor');\r\n  };\r\n\r\n  const handleDeleteDocument = async (post) => {\r\n    if (window.confirm(`'${post.title}'ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\r\n      try {\r\n        const abortController = new AbortController();\r\n        const response = await fetch(`http://localhost:3003/api/posts/${post.id}`, {\r\n          method: 'DELETE',\r\n          signal: abortController.signal\r\n        }).catch(err => {\r\n          if (err.name === 'AbortError') {\r\n            console.log('Delete request aborted');\r\n            return null;\r\n          }\r\n          throw err;\r\n        });\r\n        \r\n        if (!response) return; // ìš”ì²­ì´ ì·¨ì†Œëœ ê²½ìš°\r\n        \r\n        if (response.ok) {\r\n          // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œë„ í•´ë‹¹ ë¬¸ì„œ ì‚­ì œ\r\n          try {\r\n            console.log(`ì‚­ì œ ëŒ€ìƒ: ID \"${post.id}\", ì œëª© \"${post.title}\"`);\r\n            \r\n            // 1. ë©”ì¸ ë¬¸ì„œ ë°ì´í„° ì‚­ì œ\r\n            localStorage.removeItem(`miki_document_${post.id}`);\r\n            localStorage.removeItem(`miki_title_${post.id}`);\r\n            \r\n            console.log(`ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚­ì œ: miki_document_${post.id}, miki_title_${post.id}`);\r\n            \r\n            // 2. ìµœê·¼ ë¬¸ì„œ ëª©ë¡ì—ì„œ ì •í™•í•œ IDë§Œ ì œê±°\r\n            const recentDocsJson = localStorage.getItem('miki_recent_docs');\r\n            if (recentDocsJson) {\r\n              const recentDocs = JSON.parse(recentDocsJson);\r\n              const filteredDocs = recentDocs.filter(doc => doc.id !== post.id);\r\n              localStorage.setItem('miki_recent_docs', JSON.stringify(filteredDocs));\r\n              console.log(`ìµœê·¼ ë¬¸ì„œ ëª©ë¡ì—ì„œ ID \"${post.id}\" ì œê±°`);\r\n            }\r\n            \r\n            console.log(`\"${post.title}\" ë¬¸ì„œ (ID: ${post.id}) ì‚­ì œ ì™„ë£Œ`);\r\n          } catch (localError) {\r\n            console.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì‚­ì œ ì˜¤ë¥˜:', localError);\r\n          }\r\n          \r\n          // ì‚­ì œí•œ ê¸€ì´ í˜„ì¬ ì—´ë ¤ìˆëŠ” ê¸€ì¸ì§€ í™•ì¸í•˜ê³  ì½œë°± í˜¸ì¶œ\r\n          onDeletePost(post);\r\n          \r\n          setMessage({ type: 'success', text: 'ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.' });\r\n        }\r\n      } catch (error) {\r\n        if (error.name === 'AbortError') {\r\n          console.log('Delete request aborted');\r\n          return;\r\n        }\r\n        setMessage({ type: 'error', text: 'ì‚­ì œ ì‹¤íŒ¨: ' + error.message });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div \r\n      className={`bg-white rounded shadow flex flex-col ${\r\n        isMobile ? (activeMobilePanel === 'list' ? 'block' : 'hidden') + ' flex-grow' : 'w-1/5 mr-2'\r\n      }`}\r\n      style={{ display: isMobile && activeMobilePanel !== 'list' ? 'none' : 'flex' }}\r\n    >\r\n      {/* í—¤ë” */}\r\n      <div className=\"flex justify-between items-center p-3 border-b\">\r\n        <h2 className=\"text-lg font-bold\">ë¬¸ì„œ ëª©ë¡</h2>\r\n        <div className=\"flex items-center\">\r\n          <span className=\"text-sm text-gray-500 mr-2\">{(documentsData || []).length}ê°œì˜ ë¬¸ì„œ</span>\r\n          \r\n          {/* ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ */}\r\n          <button \r\n            onClick={handleRefresh}\r\n            className=\"p-1 text-gray-600 hover:text-gray-900 rounded mr-1\"\r\n            title=\"ìƒˆë¡œê³ ì¹¨\"\r\n          >\r\n            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n            </svg>\r\n          </button>\r\n          \r\n          {/* ì •ë¦¬ ë²„íŠ¼ */}\r\n          <button \r\n            onClick={handleCleanup}\r\n            className=\"p-1 text-gray-600 hover:text-red-600 rounded mr-1\"\r\n            title=\"ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬\"\r\n          >\r\n            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n            </svg>\r\n          </button>\r\n          \r\n          {/* ëª¨ë°”ì¼ ì—ë””í„° ì´ë™ ë²„íŠ¼ */}\r\n          {isMobile && (\r\n            <button \r\n              onClick={() => setActiveMobilePanel('editor')}\r\n              className=\"px-3 py-1 text-sm bg-blue-600 hover:bg-blue-700 rounded flex items-center ml-1\"\r\n              title=\"ì—ë””í„°ë¡œ ì´ë™\"\r\n            >\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14 5l7 7-7 7\" />\r\n              </svg>\r\n              ì—ë””í„°\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* ê²€ìƒ‰ ì…ë ¥ */}\r\n      <div className=\"p-3 border-b\">\r\n        <div className=\"relative\">\r\n          <input \r\n            ref={searchInputRef}\r\n            type=\"text\" \r\n            placeholder=\"ë¬¸ì„œ ê²€ìƒ‰...\" \r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            className=\"w-full px-3 py-2 border rounded-md pr-10 focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n          />\r\n          <svg className=\"absolute right-3 top-2.5 h-5 w-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n          </svg>\r\n          {searchQuery && (\r\n            <button \r\n              onClick={() => setSearchQuery('')}\r\n              className=\"absolute right-9 top-2.5 h-5 w-5 text-gray-400 hover:text-gray-600\"\r\n            >\r\n              <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* ë¬¸ì„œ ëª©ë¡ */}\r\n      <div className=\"flex-grow overflow-auto p-3\">\r\n        {(documentsData || []).length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center h-40 text-gray-500\">\r\n            <svg className=\"w-12 h-12 mb-2 text-gray-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n            </svg>\r\n            <p>ì €ì¥ëœ ê¸€ì´ ì—†ìŠµë‹ˆë‹¤</p>\r\n            <button \r\n              onClick={handleNewPostClick}\r\n              className=\"mt-2 px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n            >\r\n              ìƒˆ ê¸€ ì‘ì„±í•˜ê¸°\r\n            </button>\r\n          </div>\r\n        ) : filteredPosts.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center h-40 text-gray-500\">\r\n            <svg className=\"w-12 h-12 mb-2 text-gray-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n            </svg>\r\n            <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>\r\n            <button \r\n              onClick={() => setSearchQuery('')}\r\n              className=\"mt-2 px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600\"\r\n            >\r\n              ê²€ìƒ‰ì–´ ì§€ìš°ê¸°\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <ul className=\"divide-y\">\r\n            {filteredPosts.map(post => (\r\n              <li key={post.id} className=\"py-3 px-2 hover:bg-gray-50 transition-colors rounded\">\r\n                <button \r\n                  onClick={() => handleDocumentClick(post)}\r\n                  className=\"text-left w-full\"\r\n                >\r\n                  <div className=\"font-medium text-blue-600 line-clamp-1\">\r\n                    {/* ë¹ˆ ë©”ëª¨ í‘œì‹œ ì•„ì´ì½˜ */}\r\n                    {post.isEmpty && (\r\n                      <span className=\"inline-flex items-center mr-2 text-gray-400\">\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\r\n                        </svg>\r\n                      </span>\r\n                    )}\r\n                    {post.title}\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-700 mt-1 line-clamp-2\">\r\n                    {post.isEmpty ? (\r\n                      <span className=\"text-gray-400 italic\">ìƒˆ ë©”ëª¨ë¥¼ ì‘ì„±í•˜ì„¸ìš”...</span>\r\n                    ) : (\r\n                      removeMarkdownFormatting(post.preview)\r\n                    )}\r\n                  </p>\r\n                  <div className=\"flex justify-between items-center mt-2 text-xs text-gray-500\">\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <svg className=\"w-3.5 h-3.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                      </svg>\r\n                      <span>{new Date(post.updatedAt).toLocaleDateString('ko-KR', {\r\n                        year: 'numeric',\r\n                        month: '2-digit',\r\n                        day: '2-digit',\r\n                        hour: '2-digit',\r\n                        minute: '2-digit'\r\n                      })}</span>\r\n                    </div>\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <svg className=\"w-3.5 h-3.5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z\" />\r\n                      </svg>\r\n                      <span>{(post.size / 1024).toFixed(1)}KB</span>\r\n                    </div>\r\n                  </div>\r\n                </button>\r\n                \r\n                {/* ì‚­ì œ ë²„íŠ¼ */}\r\n                <div className=\"mt-2 flex justify-end\">\r\n                  <button \r\n                    onClick={() => handleDeleteDocument(post)}\r\n                    className=\"px-2 py-1 text-xs text-gray-500 hover:text-red-500 hover:bg-red-50 rounded\"\r\n                  >\r\n                    ì‚­ì œ\r\n                  </button>\r\n                </div>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DocumentSidebar; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\config\\featureFlags.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":70,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":70,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2186,2241],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":96,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":96,"endColumn":14,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2916,2986],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ê¸°ëŠ¥ í”Œë˜ê·¸ ê´€ë¦¬\r\n * ì ì§„ì  ë°°í¬ì™€ A/B í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì¤‘ì•™í™”ëœ ì„¤ì •\r\n */\r\n\r\n// í™˜ê²½ ë³€ìˆ˜ì—ì„œ ê¸°ëŠ¥ í”Œë˜ê·¸ ì½ê¸°\r\nconst getFeatureFlag = (flagName, defaultValue = false) => {\r\n  // Jest í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ ì‚¬ìš©\r\n  return defaultValue;\r\n};\r\n\r\n// ì‚¬ìš©ìë³„ ê¸°ëŠ¥ í”Œë˜ê·¸ (localStorage ê¸°ë°˜)\r\nconst getUserFeatureFlag = (flagName, defaultValue = false) => {\r\n  try {\r\n    const userFlags = JSON.parse(localStorage.getItem('userFeatureFlags') || '{}');\r\n    return userFlags[flagName] !== undefined ? userFlags[flagName] : defaultValue;\r\n  } catch {\r\n    return defaultValue;\r\n  }\r\n};\r\n\r\n// ê¸°ëŠ¥ í”Œë˜ê·¸ ì„¤ì •\r\nexport const FEATURE_FLAGS = {\r\n  // AI ê¸°ëŠ¥ ê´€ë ¨\r\n  AI_PANEL: getFeatureFlag('AI_PANEL', true),\r\n  AI_SEARCH: getFeatureFlag('AI_SEARCH', true),\r\n  AI_SUMMARY: getFeatureFlag('AI_SUMMARY', true),\r\n  \r\n  // ì—ë””í„° ê¸°ëŠ¥ ê´€ë ¨\r\n  MARKDOWN_PREVIEW: getFeatureFlag('MARKDOWN_PREVIEW', true),\r\n  SYNTAX_HIGHLIGHTING: getFeatureFlag('SYNTAX_HIGHLIGHTING', true),\r\n  AUTO_SAVE: getFeatureFlag('AUTO_SAVE', true),\r\n  \r\n  // ë™ê¸°í™” ê¸°ëŠ¥ ê´€ë ¨\r\n  SERVER_SYNC: getFeatureFlag('SERVER_SYNC', true),\r\n  REAL_TIME_SYNC: getFeatureFlag('REAL_TIME_SYNC', false),\r\n  \r\n  // ì‹¤í—˜ì  ê¸°ëŠ¥ë“¤\r\n  EXPERIMENTAL_FEATURES: getFeatureFlag('EXPERIMENTAL_FEATURES', false),\r\n  BETA_UI: getFeatureFlag('BETA_UI', false),\r\n  \r\n  // ë””ë²„ê·¸ ë° ê°œë°œ ê´€ë ¨\r\n  DEBUG_MODE: getFeatureFlag('DEBUG_MODE', false),\r\n  PERFORMANCE_MONITORING: getFeatureFlag('PERFORMANCE_MONITORING', false),\r\n  \r\n  // í™˜ê²½ ì •ë³´\r\n  DEV_MODE: false, // Jest í™˜ê²½ì—ì„œëŠ” false\r\n  \r\n  // ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤\r\n  DOCUMENT_VERSIONING: getFeatureFlag('DOCUMENT_VERSIONING', false),\r\n  COLLABORATIVE_EDITING: getFeatureFlag('COLLABORATIVE_EDITING', false),\r\n  ADVANCED_SEARCH: getFeatureFlag('ADVANCED_SEARCH', true),\r\n  EXPORT_FEATURES: getFeatureFlag('EXPORT_FEATURES', true),\r\n};\r\n\r\n// ê¸°ëŠ¥ í”Œë˜ê·¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜\r\nexport const updateUserFeatureFlag = (flagName, value) => {\r\n  try {\r\n    const userFlags = JSON.parse(localStorage.getItem('userFeatureFlags') || '{}');\r\n    userFlags[flagName] = value;\r\n    localStorage.setItem('userFeatureFlags', JSON.stringify(userFlags));\r\n    \r\n    // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ì¦‰ì‹œ ì ìš©í•˜ë ¤ë©´ ì´ë²¤íŠ¸ ë°œìƒ\r\n    window.dispatchEvent(new CustomEvent('featureFlagChanged', {\r\n      detail: { flagName, value }\r\n    }));\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('Failed to update feature flag:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n// ê¸°ëŠ¥ í”Œë˜ê·¸ ìƒíƒœ í™•ì¸ í—¬í¼\r\nexport const isFeatureEnabled = (flagName) => {\r\n  return FEATURE_FLAGS[flagName] === true;\r\n};\r\n\r\n// ê°œë°œì ë„êµ¬ìš© ê¸°ëŠ¥ í”Œë˜ê·¸ ë””ë²„ê±°\r\nif (FEATURE_FLAGS.DEV_MODE) {\r\n  window.mikiFeatureFlags = {\r\n    flags: FEATURE_FLAGS,\r\n    enable: (flagName) => updateUserFeatureFlag(flagName, true),\r\n    disable: (flagName) => updateUserFeatureFlag(flagName, false),\r\n    toggle: (flagName) => {\r\n      const current = getUserFeatureFlag(flagName, false);\r\n      return updateUserFeatureFlag(flagName, !current);\r\n    },\r\n    reset: () => {\r\n      localStorage.removeItem('userFeatureFlags');\r\n      window.location.reload();\r\n    }\r\n  };\r\n  \r\n  console.log('ğŸš© Feature Flags Debug Tools:', window.mikiFeatureFlags);\r\n}\r\n\r\n// ê¸°ëŠ¥ í”Œë˜ê·¸ë³„ ì»´í¬ë„ŒíŠ¸ ë˜í¼\r\nexport const FeatureGate = ({ feature, children, fallback = null }) => {\r\n  return isFeatureEnabled(feature) ? children : fallback;\r\n};\r\n\r\n// ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìœ„í•œ ì»´í¬ë„ŒíŠ¸ ì„ íƒê¸°\r\nexport const ComponentSelector = ({ \r\n  feature, \r\n  newComponent: NewComponent, \r\n  legacyComponent: LegacyComponent,\r\n  ...props \r\n}) => {\r\n  const Component = isFeatureEnabled(feature) ? NewComponent : LegacyComponent;\r\n  return <Component {...props} />;\r\n};\r\n\r\nexport default FEATURE_FLAGS; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\config\\queryClient.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2566,2610],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2739,2778],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3123,3171],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { QueryClient } from '@tanstack/react-query';\r\n\r\n// QueryClient ì„¤ì • - Optimistic UIì™€ ì˜¤í”„ë¼ì¸ ì§€ì›\r\nexport const queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      // ìºì‹œ ì‹œê°„ ì„¤ì •\r\n      staleTime: 5 * 60 * 1000, // 5ë¶„ - ë°ì´í„°ê°€ ì‹ ì„ í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼ë˜ëŠ” ì‹œê°„\r\n      cacheTime: 10 * 60 * 1000, // 10ë¶„ - ìºì‹œì— ë³´ê´€ë˜ëŠ” ì‹œê°„\r\n      \r\n      // ë„¤íŠ¸ì›Œí¬ ì¬ì—°ê²° ì‹œ ìë™ ë¦¬íŒ¨ì¹˜\r\n      refetchOnWindowFocus: true,\r\n      refetchOnReconnect: true,\r\n      \r\n      // ì˜¤í”„ë¼ì¸ ì§€ì›\r\n      networkMode: 'offlineFirst',\r\n      \r\n      // ì¬ì‹œë„ ì„¤ì •\r\n      retry: (failureCount, error) => {\r\n        // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš° 3ë²ˆê¹Œì§€ ì¬ì‹œë„\r\n        if (error?.name === 'NetworkError' || error?.code === 'NETWORK_ERROR') {\r\n          return failureCount < 3;\r\n        }\r\n        // ì„œë²„ ì˜¤ë¥˜(5xx)ì¸ ê²½ìš° 2ë²ˆê¹Œì§€ ì¬ì‹œë„\r\n        if (error?.status >= 500) {\r\n          return failureCount < 2;\r\n        }\r\n        // í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜(4xx)ëŠ” ì¬ì‹œë„í•˜ì§€ ì•ŠìŒ\r\n        return false;\r\n      },\r\n      \r\n      // ì¬ì‹œë„ ì§€ì—° (ì§€ìˆ˜ ë°±ì˜¤í”„)\r\n      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),\r\n    },\r\n    \r\n    mutations: {\r\n      // ë®¤í…Œì´ì…˜ ë„¤íŠ¸ì›Œí¬ ëª¨ë“œ\r\n      networkMode: 'offlineFirst',\r\n      \r\n      // ë®¤í…Œì´ì…˜ ì¬ì‹œë„ ì„¤ì •\r\n      retry: (failureCount, error) => {\r\n        // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ì¸ ê²½ìš°ë§Œ ì¬ì‹œë„\r\n        if (error?.name === 'NetworkError' || error?.code === 'NETWORK_ERROR') {\r\n          return failureCount < 2;\r\n        }\r\n        return false;\r\n      },\r\n      \r\n      // ë®¤í…Œì´ì…˜ ì¬ì‹œë„ ì§€ì—°\r\n      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 10000),\r\n    },\r\n  },\r\n});\r\n\r\n// ì¿¼ë¦¬ í‚¤ íŒ©í† ë¦¬ - ì¼ê´€ëœ ì¿¼ë¦¬ í‚¤ ê´€ë¦¬\r\nexport const queryKeys = {\r\n  // ë¬¸ì„œ ê´€ë ¨ ì¿¼ë¦¬ í‚¤\r\n  documents: {\r\n    all: ['documents'],\r\n    lists: () => [...queryKeys.documents.all, 'list'],\r\n    list: (filters) => [...queryKeys.documents.lists(), { filters }],\r\n    details: () => [...queryKeys.documents.all, 'detail'],\r\n    detail: (id) => [...queryKeys.documents.details(), id],\r\n    search: (query) => [...queryKeys.documents.all, 'search', query],\r\n  },\r\n  \r\n  // ì„œë²„ ìƒíƒœ ê´€ë ¨\r\n  server: {\r\n    all: ['server'],\r\n    status: () => [...queryKeys.server.all, 'status'],\r\n    health: () => [...queryKeys.server.all, 'health'],\r\n  },\r\n  \r\n  // ë™ê¸°í™” ê´€ë ¨\r\n  sync: {\r\n    all: ['sync'],\r\n    queue: () => [...queryKeys.sync.all, 'queue'],\r\n    status: () => [...queryKeys.sync.all, 'status'],\r\n  },\r\n};\r\n\r\n// ì˜¤í”„ë¼ì¸ ìƒíƒœ ê°ì§€\r\nexport const isOnline = () => {\r\n  return typeof navigator !== 'undefined' ? navigator.onLine : true;\r\n};\r\n\r\n// ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ\r\nexport const setupNetworkListeners = (queryClient) => {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  const handleOnline = () => {\r\n    console.log('ğŸŒ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ë¨ - ëŒ€ê¸° ì¤‘ì¸ ë®¤í…Œì´ì…˜ ì¬ì‹œë„');\r\n    queryClient.resumePausedMutations();\r\n    queryClient.invalidateQueries();\r\n  };\r\n  \r\n  const handleOffline = () => {\r\n    console.log('ğŸ“´ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ëŠê¹€ - ì˜¤í”„ë¼ì¸ ëª¨ë“œ');\r\n  };\r\n  \r\n  window.addEventListener('online', handleOnline);\r\n  window.addEventListener('offline', handleOffline);\r\n  \r\n  return () => {\r\n    window.removeEventListener('online', handleOnline);\r\n    window.removeEventListener('offline', handleOffline);\r\n  };\r\n};\r\n\r\n// ì—ëŸ¬ ì²˜ë¦¬ ìœ í‹¸ë¦¬í‹°\r\nexport const handleQueryError = (error, context = '') => {\r\n  console.error(`Query Error ${context}:`, error);\r\n  \r\n  // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜\r\n  if (error?.name === 'NetworkError' || !isOnline()) {\r\n    return {\r\n      type: 'network',\r\n      message: 'ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”. ì˜¤í”„ë¼ì¸ ìƒíƒœì—ì„œë„ í¸ì§‘ì€ ê³„ì† ê°€ëŠ¥í•©ë‹ˆë‹¤.',\r\n      canRetry: true,\r\n    };\r\n  }\r\n  \r\n  // ì„œë²„ ì˜¤ë¥˜\r\n  if (error?.status >= 500) {\r\n    return {\r\n      type: 'server',\r\n      message: 'ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',\r\n      canRetry: true,\r\n    };\r\n  }\r\n  \r\n  // í´ë¼ì´ì–¸íŠ¸ ì˜¤ë¥˜\r\n  if (error?.status >= 400 && error?.status < 500) {\r\n    return {\r\n      type: 'client',\r\n      message: error?.message || 'ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',\r\n      canRetry: false,\r\n    };\r\n  }\r\n  \r\n  // ê¸°íƒ€ ì˜¤ë¥˜\r\n  return {\r\n    type: 'unknown',\r\n    message: 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',\r\n    canRetry: false,\r\n  };\r\n};\r\n\r\nexport default queryClient; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useAutoSave.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'performAutoSave'. Either include it or remove the dependency array.","line":49,"column":6,"nodeType":"ArrayExpression","endLine":49,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [content, title, enabled, interval, performAutoSave]","fix":{"range":[1435,1470],"text":"[content, title, enabled, interval, performAutoSave]"}}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":74,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":74,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2052,2086],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3028,3062],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef, useCallback, useState } from 'react';\r\nimport { useSaveDocument } from './useDocuments';\r\n\r\nconst useAutoSave = ({\r\n  document,\r\n  content,\r\n  title,\r\n  enabled = true,\r\n  interval = 3000, // 3ì´ˆ\r\n  onSaveStart,\r\n  onSaveSuccess,\r\n  onSaveError\r\n}) => {\r\n  const [lastSaved, setLastSaved] = useState(null);\r\n  const [saveStatus, setSaveStatus] = useState('saved'); // 'saved', 'saving', 'pending', 'error'\r\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\r\n  \r\n  const saveTimeoutRef = useRef(null);\r\n  const lastContentRef = useRef(content);\r\n  const lastTitleRef = useRef(title);\r\n  const isManualSaveRef = useRef(false);\r\n  \r\n  const saveMutation = useSaveDocument();\r\n\r\n  // ë³€ê²½ì‚¬í•­ ê°ì§€\r\n  useEffect(() => {\r\n    const contentChanged = content !== lastContentRef.current;\r\n    const titleChanged = title !== lastTitleRef.current;\r\n    \r\n    if (contentChanged || titleChanged) {\r\n      setHasUnsavedChanges(true);\r\n      setSaveStatus('pending');\r\n      \r\n      // ì´ì „ íƒ€ì´ë¨¸ ì·¨ì†Œ\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current);\r\n      }\r\n      \r\n      // ìë™ ì €ì¥ì´ í™œì„±í™”ë˜ì–´ ìˆê³  ìˆ˜ë™ ì €ì¥ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ íƒ€ì´ë¨¸ ì„¤ì •\r\n      if (enabled && !isManualSaveRef.current) {\r\n        saveTimeoutRef.current = setTimeout(() => {\r\n          performAutoSave();\r\n        }, interval);\r\n      }\r\n      \r\n      lastContentRef.current = content;\r\n      lastTitleRef.current = title;\r\n    }\r\n  }, [content, title, enabled, interval]);\r\n\r\n  // ìë™ ì €ì¥ ì‹¤í–‰\r\n  const performAutoSave = useCallback(async () => {\r\n    if (!document || !hasUnsavedChanges) return;\r\n    \r\n    try {\r\n      setSaveStatus('saving');\r\n      onSaveStart?.();\r\n      \r\n      const documentToSave = {\r\n        ...document,\r\n        content,\r\n        title,\r\n        updatedAt: new Date().toISOString()\r\n      };\r\n      \r\n      await saveMutation.mutateAsync(documentToSave);\r\n      \r\n      setHasUnsavedChanges(false);\r\n      setSaveStatus('saved');\r\n      setLastSaved(new Date());\r\n      onSaveSuccess?.();\r\n      \r\n    } catch (error) {\r\n      console.error('ìë™ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      setSaveStatus('error');\r\n      onSaveError?.(error);\r\n    }\r\n  }, [document, content, title, hasUnsavedChanges, saveMutation, onSaveStart, onSaveSuccess, onSaveError]);\r\n\r\n  // ìˆ˜ë™ ì €ì¥\r\n  const manualSave = useCallback(async () => {\r\n    if (!document) return;\r\n    \r\n    // ìˆ˜ë™ ì €ì¥ í”Œë˜ê·¸ ì„¤ì •\r\n    isManualSaveRef.current = true;\r\n    \r\n    // ìë™ ì €ì¥ íƒ€ì´ë¨¸ ì·¨ì†Œ\r\n    if (saveTimeoutRef.current) {\r\n      clearTimeout(saveTimeoutRef.current);\r\n      saveTimeoutRef.current = null;\r\n    }\r\n    \r\n    try {\r\n      setSaveStatus('saving');\r\n      onSaveStart?.();\r\n      \r\n      const documentToSave = {\r\n        ...document,\r\n        content,\r\n        title,\r\n        updatedAt: new Date().toISOString()\r\n      };\r\n      \r\n      await saveMutation.mutateAsync(documentToSave);\r\n      \r\n      setHasUnsavedChanges(false);\r\n      setSaveStatus('saved');\r\n      setLastSaved(new Date());\r\n      onSaveSuccess?.();\r\n      \r\n    } catch (error) {\r\n      console.error('ìˆ˜ë™ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      setSaveStatus('error');\r\n      onSaveError?.(error);\r\n    } finally {\r\n      // ìˆ˜ë™ ì €ì¥ í”Œë˜ê·¸ í•´ì œ\r\n      isManualSaveRef.current = false;\r\n    }\r\n  }, [document, content, title, saveMutation, onSaveStart, onSaveSuccess, onSaveError]);\r\n\r\n  // ì €ì¥ ìƒíƒœ ë©”ì‹œì§€ ìƒì„±\r\n  const getSaveStatusMessage = useCallback(() => {\r\n    switch (saveStatus) {\r\n      case 'saving':\r\n        return 'ì €ì¥ ì¤‘...';\r\n      case 'pending':\r\n        return 'ë³€ê²½ë¨';\r\n      case 'error':\r\n        return 'ì €ì¥ ì‹¤íŒ¨';\r\n      case 'saved':\r\n        if (lastSaved) {\r\n          const now = new Date();\r\n          const diffMs = now - lastSaved;\r\n          const diffMinutes = Math.floor(diffMs / 60000);\r\n          \r\n          if (diffMinutes < 1) {\r\n            return 'ë°©ê¸ˆ ì €ì¥ë¨';\r\n          } else if (diffMinutes < 60) {\r\n            return `${diffMinutes}ë¶„ ì „ ì €ì¥ë¨`;\r\n          } else {\r\n            return lastSaved.toLocaleTimeString('ko-KR', {\r\n              hour: '2-digit',\r\n              minute: '2-digit'\r\n            }) + ' ì €ì¥ë¨';\r\n          }\r\n        }\r\n        return 'ì €ì¥ë¨';\r\n      default:\r\n        return 'ì €ì¥ë¨';\r\n    }\r\n  }, [saveStatus, lastSaved]);\r\n\r\n  // ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ì •ë¦¬\r\n  useEffect(() => {\r\n    return () => {\r\n      if (saveTimeoutRef.current) {\r\n        clearTimeout(saveTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // í˜ì´ì§€ ì´íƒˆ ì‹œ ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ ê²½ê³ \r\n  useEffect(() => {\r\n    const handleBeforeUnload = (event) => {\r\n      if (hasUnsavedChanges) {\r\n        event.preventDefault();\r\n        event.returnValue = 'ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?';\r\n        return event.returnValue;\r\n      }\r\n    };\r\n\r\n    window.addEventListener('beforeunload', handleBeforeUnload);\r\n    \r\n    return () => {\r\n      window.removeEventListener('beforeunload', handleBeforeUnload);\r\n    };\r\n  }, [hasUnsavedChanges]);\r\n\r\n  return {\r\n    saveStatus,\r\n    hasUnsavedChanges,\r\n    lastSaved,\r\n    manualSave,\r\n    getSaveStatusMessage,\r\n    isAutoSaving: saveStatus === 'saving' && !isManualSaveRef.current,\r\n    isManualSaving: saveStatus === 'saving' && isManualSaveRef.current,\r\n  };\r\n};\r\n\r\nexport default useAutoSave; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useDocuments.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[586,630],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":34,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":34,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1062,1109],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":59,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":59,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1718,1756],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2130,2175],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'queryClient' is assigned a value but never used.","line":125,"column":9,"nodeType":"Identifier","messageId":"unusedVar","endLine":125,"endColumn":20},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":146,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":146,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3864,3914],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":179,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":179,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[4736,4793],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":215,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":215,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[5773,5816],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'variables' is defined but never used. Allowed unused args must match /^_/u.","line":282,"column":23,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":32},{"ruleId":"no-unused-vars","severity":1,"message":"'context' is defined but never used. Allowed unused args must match /^_/u.","line":282,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":282,"endColumn":41},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":286,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":286,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7886,7922],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":305,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":305,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[8442,8490],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":334,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":334,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[9232,9275],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":378,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":378,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10561,10592],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":393,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":393,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[11023,11071],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { queryKeys, handleQueryError, isOnline } from '../config/queryClient';\r\nimport { useDocumentStore } from '../stores';\r\nimport { MikiDatabase } from '../utils/database';\r\n\r\n// API í•¨ìˆ˜ë“¤\r\nconst documentAPI = {\r\n  // ì„œë²„ì—ì„œ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n  async fetchDocuments() {\r\n    try {\r\n      const response = await fetch('/api/posts');\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('ì„œë²„ì—ì„œ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ì„œë²„ì—ì„œ íŠ¹ì • ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°\r\n  async fetchDocument(id) {\r\n    try {\r\n      const response = await fetch(`/api/posts/${id}`);\r\n      if (!response.ok) {\r\n        if (response.status === 404) {\r\n          throw new Error('ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\r\n        }\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error(`ì„œë²„ì—ì„œ ë¬¸ì„œ ${id} ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ì„œë²„ì— ë¬¸ì„œ ì €ì¥\r\n  async saveDocument(document) {\r\n    try {\r\n      const method = document.id ? 'PUT' : 'POST';\r\n      const url = document.id ? `/api/posts/${document.id}` : '/api/posts';\r\n      \r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(document),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('ì„œë²„ì— ë¬¸ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ì„œë²„ì—ì„œ ë¬¸ì„œ ì‚­ì œ\r\n  async deleteDocument(id) {\r\n    try {\r\n      const response = await fetch(`/api/posts/${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n\r\n      return { success: true, id };\r\n    } catch (error) {\r\n      console.error(`ì„œë²„ì—ì„œ ë¬¸ì„œ ${id} ì‚­ì œ ì‹¤íŒ¨:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\n// IndexedDB í•¨ìˆ˜ë“¤\r\nconst localAPI = {\r\n  async getDocuments() {\r\n    const db = await MikiDatabase.getInstance();\r\n    return await db.documents.orderBy('updatedAt').reverse().toArray();\r\n  },\r\n\r\n  async getDocument(id) {\r\n    const db = await MikiDatabase.getInstance();\r\n    return await db.documents.get(id);\r\n  },\r\n\r\n  async saveDocument(document) {\r\n    const db = await MikiDatabase.getInstance();\r\n    const now = new Date().toISOString();\r\n    \r\n    const docToSave = {\r\n      ...document,\r\n      updatedAt: now,\r\n      syncStatus: 'pending', // ì„œë²„ ë™ê¸°í™” ëŒ€ê¸° ìƒíƒœ\r\n    };\r\n\r\n    if (document.id) {\r\n      await db.documents.put(docToSave);\r\n    } else {\r\n      const id = `doc-${Date.now()}`;\r\n      docToSave.id = id;\r\n      await db.documents.add(docToSave);\r\n    }\r\n\r\n    return docToSave;\r\n  },\r\n\r\n  async deleteDocument(id) {\r\n    const db = await MikiDatabase.getInstance();\r\n    await db.documents.delete(id);\r\n    return { success: true, id };\r\n  },\r\n};\r\n\r\n// 1. ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ í›…\r\nexport const useDocuments = () => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useQuery({\r\n    queryKey: queryKeys.documents.lists(),\r\n    queryFn: async () => {\r\n      // ì˜¨ë¼ì¸ ìƒíƒœì—ì„œëŠ” ì„œë²„ ë°ì´í„° ìš°ì„ \r\n      if (isOnline()) {\r\n        try {\r\n          const serverDocs = await documentAPI.fetchDocuments();\r\n          \r\n          // ì„œë²„ ë°ì´í„°ë¥¼ IndexedDBì— ìºì‹œ\r\n          const db = await MikiDatabase.getInstance();\r\n          for (const doc of serverDocs) {\r\n            await db.documents.put({\r\n              ...doc,\r\n              syncStatus: 'synced',\r\n            });\r\n          }\r\n          \r\n          return serverDocs;\r\n        } catch (error) {\r\n          console.warn('ì„œë²„ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨, ë¡œì»¬ ë°ì´í„° ì‚¬ìš©:', error);\r\n        }\r\n      }\r\n      \r\n      // ì˜¤í”„ë¼ì¸ì´ê±°ë‚˜ ì„œë²„ ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ë°ì´í„° ì‚¬ìš©\r\n      return await localAPI.getDocuments();\r\n    },\r\n    staleTime: 2 * 60 * 1000, // 2ë¶„\r\n    cacheTime: 10 * 60 * 1000, // 10ë¶„\r\n  });\r\n};\r\n\r\n// 2. íŠ¹ì • ë¬¸ì„œ ì¡°íšŒ í›…\r\nexport const useDocument = (id) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.documents.detail(id),\r\n    queryFn: async () => {\r\n      if (!id) return null;\r\n\r\n      // ì˜¨ë¼ì¸ ìƒíƒœì—ì„œëŠ” ì„œë²„ ë°ì´í„° ìš°ì„ \r\n      if (isOnline()) {\r\n        try {\r\n          const serverDoc = await documentAPI.fetchDocument(id);\r\n          \r\n          // ì„œë²„ ë°ì´í„°ë¥¼ IndexedDBì— ìºì‹œ\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.documents.put({\r\n            ...serverDoc,\r\n            syncStatus: 'synced',\r\n          });\r\n          \r\n          return serverDoc;\r\n        } catch (error) {\r\n          console.warn(`ì„œë²„ì—ì„œ ë¬¸ì„œ ${id} ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨, ë¡œì»¬ ë°ì´í„° ì‚¬ìš©:`, error);\r\n        }\r\n      }\r\n      \r\n      // ì˜¤í”„ë¼ì¸ì´ê±°ë‚˜ ì„œë²„ ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ë°ì´í„° ì‚¬ìš©\r\n      return await localAPI.getDocument(id);\r\n    },\r\n    enabled: !!id,\r\n    staleTime: 5 * 60 * 1000, // 5ë¶„\r\n  });\r\n};\r\n\r\n// 3. ë¬¸ì„œ ì €ì¥ ë®¤í…Œì´ì…˜ (Optimistic UI)\r\nexport const useSaveDocument = () => {\r\n  const queryClient = useQueryClient();\r\n  const { updateDocument, addDocument } = useDocumentStore();\r\n\r\n  return useMutation({\r\n    mutationFn: async (document) => {\r\n      // 1. ë¡œì»¬ì— ì¦‰ì‹œ ì €ì¥ (Optimistic)\r\n      const localDoc = await localAPI.saveDocument(document);\r\n      \r\n      // 2. ì˜¨ë¼ì¸ ìƒíƒœì—ì„œë§Œ ì„œë²„ ë™ê¸°í™” ì‹œë„\r\n      if (isOnline()) {\r\n        try {\r\n          const serverDoc = await documentAPI.saveDocument(localDoc);\r\n          \r\n          // ì„œë²„ ì €ì¥ ì„±ê³µ ì‹œ ë™ê¸°í™” ìƒíƒœ ì—…ë°ì´íŠ¸\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.documents.put({\r\n            ...serverDoc,\r\n            syncStatus: 'synced',\r\n          });\r\n          \r\n          return serverDoc;\r\n        } catch (error) {\r\n          console.warn('ì„œë²„ ì €ì¥ ì‹¤íŒ¨, ë¡œì»¬ì—ë§Œ ì €ì¥ë¨:', error);\r\n          \r\n          // ë™ê¸°í™” íì— ì¶”ê°€\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.syncQueue.add({\r\n            id: `sync-${Date.now()}`,\r\n            type: 'save',\r\n            documentId: localDoc.id,\r\n            data: localDoc,\r\n            status: 'pending',\r\n            createdAt: new Date().toISOString(),\r\n            retryCount: 0,\r\n          });\r\n          \r\n          throw error;\r\n        }\r\n      }\r\n      \r\n      return localDoc;\r\n    },\r\n\r\n    // Optimistic Update\r\n    onMutate: async (newDocument) => {\r\n      // ì§„í–‰ ì¤‘ì¸ ì¿¼ë¦¬ ì·¨ì†Œ\r\n      await queryClient.cancelQueries({ queryKey: queryKeys.documents.all });\r\n\r\n      // ì´ì „ ë°ì´í„° ë°±ì—…\r\n      const previousDocuments = queryClient.getQueryData(queryKeys.documents.lists());\r\n      const previousDocument = newDocument.id \r\n        ? queryClient.getQueryData(queryKeys.documents.detail(newDocument.id))\r\n        : null;\r\n\r\n      // Optimistic ì—…ë°ì´íŠ¸\r\n      if (newDocument.id) {\r\n        // ê¸°ì¡´ ë¬¸ì„œ ì—…ë°ì´íŠ¸\r\n        queryClient.setQueryData(\r\n          queryKeys.documents.detail(newDocument.id),\r\n          (old) => ({ ...old, ...newDocument })\r\n        );\r\n        \r\n        queryClient.setQueryData(\r\n          queryKeys.documents.lists(),\r\n          (old) => old?.map(doc => \r\n            doc.id === newDocument.id ? { ...doc, ...newDocument } : doc\r\n          ) || []\r\n        );\r\n        \r\n        // Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸\r\n        updateDocument(newDocument.id, newDocument);\r\n      } else {\r\n        // ìƒˆ ë¬¸ì„œ ì¶”ê°€\r\n        const tempId = `temp-${Date.now()}`;\r\n        const tempDoc = { ...newDocument, id: tempId };\r\n        \r\n        queryClient.setQueryData(\r\n          queryKeys.documents.lists(),\r\n          (old) => [tempDoc, ...(old || [])]\r\n        );\r\n        \r\n        // Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸\r\n        addDocument(tempDoc);\r\n      }\r\n\r\n      return { previousDocuments, previousDocument };\r\n    },\r\n\r\n    // ì„±ê³µ ì‹œ\r\n    onSuccess: (data, variables, context) => {\r\n      // ì¿¼ë¦¬ ë¬´íš¨í™”í•˜ì—¬ ìµœì‹  ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n      \r\n      console.log('âœ… ë¬¸ì„œ ì €ì¥ ì„±ê³µ:', data.id);\r\n    },\r\n\r\n    // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±\r\n    onError: (error, variables, context) => {\r\n      const errorInfo = handleQueryError(error, 'ë¬¸ì„œ ì €ì¥');\r\n      \r\n      // ì´ì „ ìƒíƒœë¡œ ë¡¤ë°±\r\n      if (context?.previousDocuments) {\r\n        queryClient.setQueryData(queryKeys.documents.lists(), context.previousDocuments);\r\n      }\r\n      \r\n      if (context?.previousDocument && variables.id) {\r\n        queryClient.setQueryData(\r\n          queryKeys.documents.detail(variables.id),\r\n          context.previousDocument\r\n        );\r\n      }\r\n\r\n      console.error('âŒ ë¬¸ì„œ ì €ì¥ ì‹¤íŒ¨:', errorInfo.message);\r\n      \r\n      // ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ (í† ìŠ¤íŠ¸ ë“±)\r\n      // ì´ ë¶€ë¶„ì€ ì‹¤ì œ ì•Œë¦¼ ì‹œìŠ¤í…œê³¼ ì—°ê²°\r\n    },\r\n\r\n    // ì™„ë£Œ ì‹œ (ì„±ê³µ/ì‹¤íŒ¨ ë¬´ê´€)\r\n    onSettled: () => {\r\n      // ê´€ë ¨ ì¿¼ë¦¬ ë¦¬íŒ¨ì¹˜\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n    },\r\n  });\r\n};\r\n\r\n// 4. ë¬¸ì„œ ì‚­ì œ ë®¤í…Œì´ì…˜ (Optimistic UI)\r\nexport const useDeleteDocument = () => {\r\n  const queryClient = useQueryClient();\r\n  const { deleteDocument } = useDocumentStore();\r\n\r\n  return useMutation({\r\n    mutationFn: async (id) => {\r\n      // 1. ë¡œì»¬ì—ì„œ ì¦‰ì‹œ ì‚­ì œ (Optimistic)\r\n      const localResult = await localAPI.deleteDocument(id);\r\n      \r\n      // 2. ì˜¨ë¼ì¸ ìƒíƒœì—ì„œë§Œ ì„œë²„ ë™ê¸°í™” ì‹œë„\r\n      if (isOnline()) {\r\n        try {\r\n          return await documentAPI.deleteDocument(id);\r\n        } catch (error) {\r\n          console.warn('ì„œë²„ ì‚­ì œ ì‹¤íŒ¨, ë¡œì»¬ì—ë§Œ ì‚­ì œë¨:', error);\r\n          \r\n          // ë™ê¸°í™” íì— ì¶”ê°€\r\n          const db = await MikiDatabase.getInstance();\r\n          await db.syncQueue.add({\r\n            id: `sync-${Date.now()}`,\r\n            type: 'delete',\r\n            documentId: id,\r\n            status: 'pending',\r\n            createdAt: new Date().toISOString(),\r\n            retryCount: 0,\r\n          });\r\n          \r\n          throw error;\r\n        }\r\n      }\r\n      \r\n      return localResult;\r\n    },\r\n\r\n    // Optimistic Update\r\n    onMutate: async (id) => {\r\n      await queryClient.cancelQueries({ queryKey: queryKeys.documents.all });\r\n\r\n      // ì´ì „ ë°ì´í„° ë°±ì—…\r\n      const previousDocuments = queryClient.getQueryData(queryKeys.documents.lists());\r\n      const previousDocument = queryClient.getQueryData(queryKeys.documents.detail(id));\r\n\r\n      // Optimistic ì‚­ì œ\r\n      queryClient.setQueryData(\r\n        queryKeys.documents.lists(),\r\n        (old) => old?.filter(doc => doc.id !== id) || []\r\n      );\r\n      \r\n      queryClient.removeQueries({ queryKey: queryKeys.documents.detail(id) });\r\n      \r\n      // Zustand ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸\r\n      deleteDocument(id);\r\n\r\n      return { previousDocuments, previousDocument };\r\n    },\r\n\r\n    onSuccess: (data, id) => {\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n      console.log('âœ… ë¬¸ì„œ ì‚­ì œ ì„±ê³µ:', id);\r\n    },\r\n\r\n    onError: (error, id, context) => {\r\n      const errorInfo = handleQueryError(error, 'ë¬¸ì„œ ì‚­ì œ');\r\n      \r\n      // ë¡¤ë°±\r\n      if (context?.previousDocuments) {\r\n        queryClient.setQueryData(queryKeys.documents.lists(), context.previousDocuments);\r\n      }\r\n      \r\n      if (context?.previousDocument) {\r\n        queryClient.setQueryData(queryKeys.documents.detail(id), context.previousDocument);\r\n      }\r\n\r\n      console.error('âŒ ë¬¸ì„œ ì‚­ì œ ì‹¤íŒ¨:', errorInfo.message);\r\n    },\r\n\r\n    onSettled: () => {\r\n      queryClient.invalidateQueries({ queryKey: queryKeys.documents.all });\r\n    },\r\n  });\r\n};\r\n\r\n// 5. ë¬¸ì„œ ê²€ìƒ‰ í›…\r\nexport const useSearchDocuments = (query) => {\r\n  return useQuery({\r\n    queryKey: queryKeys.documents.search(query),\r\n    queryFn: async () => {\r\n      if (!query || query.trim().length < 2) {\r\n        return [];\r\n      }\r\n\r\n      // ë¡œì»¬ ê²€ìƒ‰ (IndexedDB)\r\n      const db = await MikiDatabase.getInstance();\r\n      const allDocs = await db.documents.toArray();\r\n      \r\n      const searchTerm = query.toLowerCase();\r\n      return allDocs.filter(doc => \r\n        doc.title?.toLowerCase().includes(searchTerm) ||\r\n        doc.content?.toLowerCase().includes(searchTerm)\r\n      );\r\n    },\r\n    enabled: !!query && query.trim().length >= 2,\r\n    staleTime: 30 * 1000, // 30ì´ˆ\r\n  });\r\n};\r\n\r\n// 6. ë™ê¸°í™” ìƒíƒœ í›…\r\nexport const useSyncStatus = () => {\r\n  return useQuery({\r\n    queryKey: queryKeys.sync.status(),\r\n    queryFn: async () => {\r\n      const db = await MikiDatabase.getInstance();\r\n      const pendingItems = await db.syncQueue\r\n        .where('status')\r\n        .equals('pending')\r\n        .toArray();\r\n      \r\n      return {\r\n        hasPendingSync: pendingItems.length > 0,\r\n        pendingCount: pendingItems.length,\r\n        isOnline: isOnline(),\r\n      };\r\n    },\r\n    refetchInterval: 5000, // 5ì´ˆë§ˆë‹¤ ì²´í¬\r\n  });\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useKeyboardShortcuts.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\hooks\\useResponsiveLayout.js","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkScreenSize'. Either include it or remove the dependency array.","line":34,"column":6,"nodeType":"ArrayExpression","endLine":34,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [checkScreenSize, isMobile]","fix":{"range":[981,991],"text":"[checkScreenSize, isMobile]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\r\n\r\nconst useResponsiveLayout = () => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [isTablet, setIsTablet] = useState(false);\r\n  const [activeMobilePanel, setActiveMobilePanel] = useState('list');\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  // í™”ë©´ í¬ê¸° ê°ì§€ í•¨ìˆ˜\r\n  const checkScreenSize = () => {\r\n    const width = window.innerWidth;\r\n    const newIsMobile = width <= 768;\r\n    const newIsTablet = width > 768 && width <= 1024;\r\n    \r\n    setIsMobile(newIsMobile);\r\n    setIsTablet(newIsTablet);\r\n    \r\n    // ëª¨ë°”ì¼ì—ì„œ ë°ìŠ¤í¬í†±ìœ¼ë¡œ ì „í™˜ ì‹œ í™œì„± íŒ¨ë„ì„ ì—ë””í„°ë¡œ ì„¤ì •\r\n    if (!newIsMobile && isMobile) {\r\n      setActiveMobilePanel('editor');\r\n    }\r\n  };\r\n\r\n  // í™”ë©´ í¬ê¸° ë³€ê²½ ê°ì§€\r\n  useEffect(() => {\r\n    checkScreenSize();\r\n    \r\n    const handleResize = () => {\r\n      checkScreenSize();\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [isMobile]);\r\n\r\n  // ì „ì²´í™”ë©´ í† ê¸€\r\n  const toggleFullscreen = () => {\r\n    setIsFullscreen(prev => !prev);\r\n  };\r\n\r\n  // ëª¨ë°”ì¼ íŒ¨ë„ ì „í™˜\r\n  const switchMobilePanel = (panel) => {\r\n    if (isMobile) {\r\n      setActiveMobilePanel(panel);\r\n    }\r\n  };\r\n\r\n  // ì—ë””í„° íŒ¨ë„ í´ë˜ìŠ¤ ê³„ì‚°\r\n  const getEditorPanelClass = () => {\r\n    if (isFullscreen) {\r\n      return \"bg-white rounded shadow flex flex-col h-full\";\r\n    }\r\n    return `bg-white rounded shadow flex flex-col ${\r\n      isMobile ? (activeMobilePanel === 'editor' ? 'block' : 'hidden') + ' flex-grow' : 'flex-1 mx-2'\r\n    }`;\r\n  };\r\n\r\n  // ë ˆì´ì•„ì›ƒ ì •ë³´ ë°˜í™˜\r\n  return {\r\n    isMobile,\r\n    isTablet,\r\n    isFullscreen,\r\n    activeMobilePanel,\r\n    setActiveMobilePanel: switchMobilePanel,\r\n    toggleFullscreen,\r\n    editorPanelClass: getEditorPanelClass()\r\n  };\r\n};\r\n\r\nexport default useResponsiveLayout; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\index.jsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":6,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":6,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[109,147],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":7,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":7,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[148,188],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":8,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":8,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[189,248],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"react/no-deprecated","severity":2,"message":"ReactDOM.render is deprecated since React 18.0.0, use createRoot instead, see https://reactjs.org/link/switch-to-createroot","line":11,"column":1,"nodeType":"MemberExpression","messageId":"deprecated","endLine":11,"endColumn":16},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":18,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":18,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[382,422],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nconsole.log('Miki Editor v7 ì‹œì‘ ì¤‘...');\nconsole.log('React ë²„ì „:', React.version);\nconsole.log('DOM ìš”ì†Œ í™•ì¸:', document.getElementById('root'));\n\n// React 17 ë°©ì‹ìœ¼ë¡œ ë Œë”ë§\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nconsole.log('ë Œë”ë§ ì™„ë£Œ, React ë§ˆìš´íŠ¸ ë˜ì—ˆìŠµë‹ˆë‹¤.');\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\setupTests.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":183,"column":1,"nodeType":"MemberExpression","messageId":"unexpected","endLine":183,"endColumn":12,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4592,4653],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// jest-dom adds custom jest matchers for asserting on DOM nodes.\n// allows you to do things like:\n// expect(element).toHaveTextContent(/react/i)\n// learn more: https://github.com/testing-library/jest-dom\nimport '@testing-library/jest-dom';\n\n// Mock window.matchMedia\nObject.defineProperty(window, 'matchMedia', {\n  writable: true,\n  value: jest.fn().mockImplementation(query => ({\n    matches: false,\n    media: query,\n    onchange: null,\n    addListener: jest.fn(),\n    removeListener: jest.fn(),\n    addEventListener: jest.fn(),\n    removeEventListener: jest.fn(),\n    dispatchEvent: jest.fn(),\n  })),\n});\n\n// Mock localStorage\nconst localStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nglobal.localStorage = localStorageMock;\n\n// Mock sessionStorage\nconst sessionStorageMock = {\n  getItem: jest.fn(),\n  setItem: jest.fn(),\n  removeItem: jest.fn(),\n  clear: jest.fn(),\n};\nglobal.sessionStorage = sessionStorageMock;\n\n// Mock fetch\nglobal.fetch = jest.fn();\n\n// ğŸ”§ JSDOM ë¸Œë¼ìš°ì € API í´ë¦¬í•„ ì¶”ê°€ (2ë‹¨ê³„ - í…ŒìŠ¤íŠ¸ í™˜ê²½ ì•ˆì •í™”)\n\n// Mock scrollIntoView (AiPanel.jsx 669ì¤„ì—ì„œ ì‚¬ìš©)\nElement.prototype.scrollIntoView = jest.fn();\n\n// Mock ResizeObserver\nglobal.ResizeObserver = jest.fn().mockImplementation(() => ({\n  observe: jest.fn(),\n  unobserve: jest.fn(),\n  disconnect: jest.fn(),\n}));\n\n// Mock IntersectionObserver\nglobal.IntersectionObserver = jest.fn().mockImplementation(() => ({\n  observe: jest.fn(),\n  unobserve: jest.fn(),\n  disconnect: jest.fn(),\n}));\n\n// Mock MutationObserver\nglobal.MutationObserver = jest.fn().mockImplementation(() => ({\n  observe: jest.fn(),\n  disconnect: jest.fn(),\n  takeRecords: jest.fn(),\n}));\n\n// Mock window.getComputedStyle\nglobal.getComputedStyle = jest.fn().mockImplementation(() => ({\n  getPropertyValue: jest.fn(),\n  setProperty: jest.fn(),\n}));\n\n// Mock window.requestAnimationFrame\nglobal.requestAnimationFrame = jest.fn().mockImplementation(cb => setTimeout(cb, 0));\nglobal.cancelAnimationFrame = jest.fn().mockImplementation(id => clearTimeout(id));\n\n// Mock window.requestIdleCallback\nglobal.requestIdleCallback = jest.fn().mockImplementation(cb => setTimeout(cb, 0));\nglobal.cancelIdleCallback = jest.fn().mockImplementation(id => clearTimeout(id));\n\n// Mock HTMLElement.offsetHeight, offsetWidth ë“±\nObject.defineProperties(HTMLElement.prototype, {\n  offsetHeight: {\n    get() { return parseFloat(this.style.height) || 0; }\n  },\n  offsetWidth: {\n    get() { return parseFloat(this.style.width) || 0; }\n  },\n  offsetTop: {\n    get() { return parseFloat(this.style.top) || 0; }\n  },\n  offsetLeft: {\n    get() { return parseFloat(this.style.left) || 0; }\n  },\n});\n\n// Mock window.location\ndelete window.location;\nwindow.location = {\n  href: 'http://localhost:3000',\n  origin: 'http://localhost:3000',\n  protocol: 'http:',\n  host: 'localhost:3000',\n  hostname: 'localhost',\n  port: '3000',\n  pathname: '/',\n  search: '',\n  hash: '',\n  assign: jest.fn(),\n  replace: jest.fn(),\n  reload: jest.fn(),\n};\n\n// Mock console methods to reduce noise in tests\nglobal.console = {\n  ...console,\n  log: jest.fn(),\n  warn: jest.fn(),\n  error: jest.fn(),\n};\n\n// Mock import.meta.env for Vite compatibility\nglobal.importMeta = {\n  env: {\n    NODE_ENV: 'test',\n    VITE_API_BASE_URL: 'http://localhost:3000',\n    VITE_AI_API_URL: 'http://localhost:3000/api/ai',\n  }\n};\n\n// Mock URL.createObjectURL and revokeObjectURL\nglobal.URL.createObjectURL = jest.fn(() => 'mocked-url');\nglobal.URL.revokeObjectURL = jest.fn();\n\n// Mock File and FileReader\nglobal.File = jest.fn().mockImplementation((bits, name, options) => ({\n  name,\n  size: bits.length,\n  type: options?.type || '',\n  lastModified: Date.now(),\n}));\n\nglobal.FileReader = jest.fn().mockImplementation(() => ({\n  readAsText: jest.fn(),\n  readAsDataURL: jest.fn(),\n  addEventListener: jest.fn(),\n  removeEventListener: jest.fn(),\n  result: null,\n  error: null,\n}));\n\n// Mock Clipboard API\nObject.defineProperty(navigator, 'clipboard', {\n  value: {\n    writeText: jest.fn().mockResolvedValue(undefined),\n    readText: jest.fn().mockResolvedValue(''),\n  },\n  writable: true,\n});\n\n// Mock navigator.userAgent\nObject.defineProperty(navigator, 'userAgent', {\n  value: 'Mozilla/5.0 (Node.js) Jest/Test',\n  writable: true,\n});\n\n// Mock window.crypto\nObject.defineProperty(window, 'crypto', {\n  value: {\n    getRandomValues: jest.fn().mockImplementation(arr => {\n      for (let i = 0; i < arr.length; i++) {\n        arr[i] = Math.floor(Math.random() * 256);\n      }\n      return arr;\n    }),\n    randomUUID: jest.fn().mockReturnValue('mocked-uuid-1234'),\n  },\n  writable: true,\n});\n\nconsole.log('âœ… JSDOM ë¸Œë¼ìš°ì € API í´ë¦¬í•„ ë¡œë“œ ì™„ë£Œ (2ë‹¨ê³„ - í…ŒìŠ¤íŠ¸ í™˜ê²½ ì•ˆì •í™”)');\n","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\stores\\index.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2664,2698],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3099,3133],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'get' is defined but never used. Allowed unused args must match /^_/u.","line":119,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":119,"endColumn":32},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":150,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":150,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[4155,4187],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'get' is defined but never used. Allowed unused args must match /^_/u.","line":165,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":165,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\r\nimport { immer } from 'zustand/middleware/immer';\r\nimport { subscribeWithSelector } from 'zustand/middleware';\r\nimport { db } from '../utils/database';\r\n\r\n// Document slice\r\nconst createDocumentSlice = (set, get) => ({\r\n  // State\r\n  documents: {},\r\n  currentDocumentId: null,\r\n  isLoading: false,\r\n  saveStatus: 'ì €ì¥ë¨',\r\n  serverSaveStatus: 'ì €ì¥ë¨',\r\n  isSaving: false,\r\n  \r\n  // Document CRUD actions\r\n  setCurrentDocument: (id) => set((state) => {\r\n    state.currentDocumentId = id;\r\n  }),\r\n  \r\n  addDocument: (doc) => set((state) => {\r\n    state.documents[doc.id] = doc;\r\n  }),\r\n  \r\n  updateDocument: (id, updates) => set((state) => {\r\n    if (state.documents[id]) {\r\n      Object.assign(state.documents[id], updates, {\r\n        updatedAt: new Date().toISOString()\r\n      });\r\n    }\r\n  }),\r\n  \r\n  deleteDocument: (id) => set((state) => {\r\n    delete state.documents[id];\r\n    if (state.currentDocumentId === id) {\r\n      state.currentDocumentId = null;\r\n    }\r\n  }),\r\n  \r\n  // Title management with flags\r\n  setTitle: (id, title, isUserEdit = false) => set((state) => {\r\n    if (state.documents[id]) {\r\n      state.documents[id].title = title;\r\n      state.documents[id].isUserEditedTitle = isUserEdit;\r\n      state.documents[id].isAutoSyncedTitle = !isUserEdit;\r\n      state.documents[id].updatedAt = new Date().toISOString();\r\n    }\r\n  }),\r\n  \r\n  setContent: (id, content) => set((state) => {\r\n    if (state.documents[id]) {\r\n      state.documents[id].content = content;\r\n      state.documents[id].updatedAt = new Date().toISOString();\r\n      \r\n      // Auto-extract title if not user-edited\r\n      if (!state.documents[id].isUserEditedTitle) {\r\n        const extractedTitle = extractTitleFromContent(content);\r\n        if (extractedTitle && extractedTitle !== state.documents[id].title) {\r\n          state.documents[id].title = extractedTitle;\r\n          state.documents[id].isAutoSyncedTitle = true;\r\n        }\r\n      }\r\n    }\r\n  }),\r\n  \r\n  // Save status management\r\n  setSaveStatus: (status) => set((state) => {\r\n    state.saveStatus = status;\r\n  }),\r\n  \r\n  setServerSaveStatus: (status) => set((state) => {\r\n    state.serverSaveStatus = status;\r\n  }),\r\n  \r\n  setIsSaving: (saving) => set((state) => {\r\n    state.isSaving = saving;\r\n  }),\r\n  \r\n  // Async actions\r\n  loadDocuments: async () => {\r\n    set((state) => { state.isLoading = true; });\r\n    try {\r\n      const docs = await db.documents.toArray();\r\n      set((state) => {\r\n        state.documents = {};\r\n        docs.forEach(doc => {\r\n          state.documents[doc.id] = doc;\r\n        });\r\n        state.isLoading = false;\r\n      });\r\n    } catch (error) {\r\n      console.error('ë¬¸ì„œ ë¡œë“œ ì‹¤íŒ¨:', error);\r\n      set((state) => { state.isLoading = false; });\r\n    }\r\n  },\r\n  \r\n  saveDocument: async (id) => {\r\n    const doc = get().documents[id];\r\n    if (!doc) return;\r\n    \r\n    set((state) => { state.isSaving = true; });\r\n    try {\r\n      await db.documents.put(doc);\r\n      set((state) => { \r\n        state.saveStatus = 'ì €ì¥ë¨';\r\n        state.isSaving = false;\r\n      });\r\n    } catch (error) {\r\n      console.error('ë¬¸ì„œ ì €ì¥ ì‹¤íŒ¨:', error);\r\n      set((state) => { \r\n        state.saveStatus = 'ì €ì¥ ì‹¤íŒ¨';\r\n        state.isSaving = false;\r\n      });\r\n    }\r\n  }\r\n});\r\n\r\n// UI slice\r\nconst createUISlice = (set, get) => ({\r\n  // State\r\n  isFullscreen: false,\r\n  searchQuery: '',\r\n  windowWidth: typeof window !== 'undefined' ? window.innerWidth : 0,\r\n  isMobile: false,\r\n  isTablet: false,\r\n  activeMobilePanel: 'editor',\r\n  message: { type: '', text: '' },\r\n  messageVisible: false,\r\n  \r\n  // Actions\r\n  setFullscreen: (fullscreen) => set((state) => {\r\n    state.isFullscreen = fullscreen;\r\n  }),\r\n  \r\n  setSearchQuery: (query) => set((state) => {\r\n    state.searchQuery = query;\r\n  }),\r\n  \r\n  setWindowDimensions: (width) => set((state) => {\r\n    state.windowWidth = width;\r\n    state.isMobile = width < 768;\r\n    state.isTablet = width >= 768 && width < 1024;\r\n  }),\r\n  \r\n  setActiveMobilePanel: (panel) => set((state) => {\r\n    state.activeMobilePanel = panel;\r\n    try {\r\n      localStorage.setItem('miki_active_mobile_panel', panel);\r\n    } catch (e) {\r\n      console.warn('íŒ¨ë„ ìƒíƒœ ì €ì¥ ì‹¤íŒ¨:', e);\r\n    }\r\n  }),\r\n  \r\n  showMessage: (type, text) => set((state) => {\r\n    state.message = { type, text };\r\n    state.messageVisible = true;\r\n  }),\r\n  \r\n  hideMessage: () => set((state) => {\r\n    state.messageVisible = false;\r\n  })\r\n});\r\n\r\n// Editor context slice\r\nconst createEditorSlice = (set, get) => ({\r\n  // State\r\n  editorContext: {\r\n    fullContent: '',\r\n    selection: null\r\n  },\r\n  \r\n  // Actions\r\n  setEditorContext: (context) => set((state) => {\r\n    state.editorContext = context;\r\n  })\r\n});\r\n\r\n// Helper function for title extraction\r\nconst extractTitleFromContent = (content) => {\r\n  if (!content || typeof content !== 'string') return '';\r\n  \r\n  const lines = content.split('\\n');\r\n  for (const line of lines) {\r\n    const trimmed = line.trim();\r\n    if (trimmed && !trimmed.startsWith('#')) {\r\n      // Remove markdown formatting\r\n      return trimmed\r\n        .replace(/\\*\\*(.*?)\\*\\*/g, '$1')\r\n        .replace(/\\*(.*?)\\*/g, '$1')\r\n        .replace(/`(.*?)`/g, '$1')\r\n        .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, '$1')\r\n        .replace(/!\\[([^\\]]*)\\]\\([^)]+\\)/g, '$1')\r\n        .substring(0, 50);\r\n    }\r\n  }\r\n  return '';\r\n};\r\n\r\n// Create the main store\r\nexport const useStore = create(\r\n  subscribeWithSelector(\r\n    immer((...a) => ({\r\n      ...createDocumentSlice(...a),\r\n      ...createUISlice(...a),\r\n      ...createEditorSlice(...a),\r\n      \r\n      // Reset method for testing\r\n      reset: () => a[0]((state) => {\r\n        // Reset document slice\r\n        state.documents = {};\r\n        state.currentDocumentId = null;\r\n        state.isLoading = false;\r\n        state.saveStatus = 'ì €ì¥ë¨';\r\n        state.serverSaveStatus = 'ì €ì¥ë¨';\r\n        state.isSaving = false;\r\n        \r\n        // Reset UI slice\r\n        state.isFullscreen = false;\r\n        state.searchQuery = '';\r\n        state.windowWidth = typeof window !== 'undefined' ? window.innerWidth : 0;\r\n        state.isMobile = false;\r\n        state.isTablet = false;\r\n        state.activeMobilePanel = 'editor';\r\n        state.message = { type: '', text: '' };\r\n        state.messageVisible = false;\r\n        \r\n        // Reset editor slice\r\n        state.editorContext = {\r\n          fullContent: '',\r\n          selection: null\r\n        };\r\n      })\r\n    }))\r\n  )\r\n);\r\n\r\n// Selectors for better performance\r\nexport const useCurrentDocument = () => useStore((state) => {\r\n  const currentId = state.currentDocumentId;\r\n  return currentId ? state.documents[currentId] : null;\r\n});\r\n\r\nexport const useDocumentList = () => useStore((state) => \r\n  Object.values(state.documents).sort((a, b) => \r\n    new Date(b.updatedAt) - new Date(a.updatedAt)\r\n  )\r\n);\r\n\r\nexport const useUIState = () => useStore((state) => ({\r\n  isFullscreen: state.isFullscreen,\r\n  searchQuery: state.searchQuery,\r\n  windowWidth: state.windowWidth,\r\n  isMobile: state.isMobile,\r\n  isTablet: state.isTablet,\r\n  activeMobilePanel: state.activeMobilePanel,\r\n  message: state.message,\r\n  messageVisible: state.messageVisible\r\n}));\r\n\r\n// Individual store hooks for App.jsx compatibility\r\nexport const useDocumentStore = () => useStore((state) => ({\r\n  documents: Object.values(state.documents),\r\n  currentDocument: state.currentDocumentId ? state.documents[state.currentDocumentId] : null,\r\n  setCurrentDocument: (doc) => state.setCurrentDocument(doc?.id || doc),\r\n  updateDocument: state.updateDocument,\r\n  addDocument: state.addDocument,\r\n  deleteDocument: state.deleteDocument,\r\n  loadDocuments: state.loadDocuments,\r\n}));\r\n\r\nexport const useUIStore = () => useStore((state) => ({\r\n  sidebarOpen: false, // ê¸°ë³¸ê°’\r\n  theme: 'light', // ê¸°ë³¸ê°’\r\n  isFullscreen: state.isFullscreen,\r\n  toggleSidebar: () => {}, // ê¸°ë³¸ êµ¬í˜„\r\n  setTheme: () => {}, // ê¸°ë³¸ êµ¬í˜„\r\n  toggleFullscreen: () => state.setFullscreen(!state.isFullscreen),\r\n}));\r\n\r\nexport const useEditorStore = () => useStore((state) => ({\r\n  content: state.currentDocumentId ? state.documents[state.currentDocumentId]?.content || '' : '',\r\n  title: state.currentDocumentId ? state.documents[state.currentDocumentId]?.title || '' : '',\r\n  isEditing: false, // ê¸°ë³¸ê°’\r\n  saveStatus: state.saveStatus,\r\n  setContent: (content) => {\r\n    if (state.currentDocumentId) {\r\n      state.setContent(state.currentDocumentId, content);\r\n    }\r\n  },\r\n  setTitle: (title) => {\r\n    if (state.currentDocumentId) {\r\n      state.setTitle(state.currentDocumentId, title, true);\r\n    }\r\n  },\r\n  setEditing: () => {}, // ê¸°ë³¸ êµ¬í˜„\r\n  setSaveStatus: state.setSaveStatus,\r\n})); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\conflict.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[442,499],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":24,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":24,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[687,739],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[931,984],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1151,1208],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":43,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":43,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1289,1325],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'operation' is defined but never used. Allowed unused args must match /^_/u.","line":58,"column":33,"nodeType":"Identifier","messageId":"unusedVar","endLine":58,"endColumn":42},{"ruleId":"no-unused-vars","severity":1,"message":"'operation' is defined but never used. Allowed unused args must match /^_/u.","line":334,"column":40,"nodeType":"Identifier","messageId":"unusedVar","endLine":334,"endColumn":49},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":337,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":337,"endColumn":58},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":338,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":338,"endColumn":60}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ConflictResolver - ë¬¸ì„œ ì¶©ëŒ í•´ê²° ëª¨ë“ˆ\r\n */\r\nexport class ConflictResolver {\r\n  constructor(options = {}) {\r\n    this.strategy = options.strategy || 'last-write-wins';\r\n    this.autoResolve = options.autoResolve !== false;\r\n    this.userPromptTimeout = options.userPromptTimeout || 30000; // 30ì´ˆ\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ í•´ê²° ë©”ì¸ ë©”ì„œë“œ\r\n   */\r\n  async resolve(conflict) {\r\n    const { documentId, local, server, operation } = conflict;\r\n    \r\n    console.log(`ğŸ”„ ì¶©ëŒ í•´ê²° ì‹œì‘: ${documentId} (${operation})`);\r\n    \r\n    try {\r\n      // 1. ìë™ í•´ê²° ê°€ëŠ¥í•œì§€ í™•ì¸\r\n      const autoResolution = this.tryAutoResolve(local, server, operation);\r\n      \r\n      if (autoResolution && this.autoResolve) {\r\n        console.log(`âœ… ìë™ ì¶©ëŒ í•´ê²°: ${autoResolution.action}`);\r\n        return autoResolution;\r\n      }\r\n      \r\n      // 2. ì‚¬ìš©ì ê°œì… í•„ìš”\r\n      const userResolution = await this.promptUserResolution(conflict);\r\n      \r\n      if (userResolution) {\r\n        console.log(`âœ… ì‚¬ìš©ì ì¶©ëŒ í•´ê²°: ${userResolution.action}`);\r\n        return userResolution;\r\n      }\r\n      \r\n      // 3. ê¸°ë³¸ ì „ëµ ì ìš©\r\n      const fallbackResolution = this.applyFallbackStrategy(local, server, operation);\r\n      console.log(`âš ï¸ ê¸°ë³¸ ì „ëµ ì ìš©: ${fallbackResolution.action}`);\r\n      \r\n      return fallbackResolution;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ì¶©ëŒ í•´ê²° ì‹¤íŒ¨:', error);\r\n      \r\n      // ìµœí›„ì˜ ìˆ˜ë‹¨: ë¡œì»¬ ë°ì´í„° ìœ ì§€\r\n      return {\r\n        action: 'use_local',\r\n        data: local,\r\n        reason: 'ì¶©ëŒ í•´ê²° ì‹¤íŒ¨ë¡œ ì¸í•œ ë¡œì»¬ ë°ì´í„° ë³´ì¡´',\r\n        error: error.message\r\n      };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ìë™ í•´ê²° ì‹œë„\r\n   */\r\n  tryAutoResolve(local, server, operation) {\r\n    // 1. ë‚´ìš©ì´ ë™ì¼í•œ ê²½ìš°\r\n    if (this.isContentEqual(local, server)) {\r\n      return {\r\n        action: 'no_conflict',\r\n        data: local,\r\n        reason: 'ë‚´ìš©ì´ ë™ì¼í•¨'\r\n      };\r\n    }\r\n    \r\n    // 2. í•œìª½ì´ ë¹„ì–´ìˆëŠ” ê²½ìš°\r\n    if (this.isEmpty(local) && !this.isEmpty(server)) {\r\n      return {\r\n        action: 'use_server',\r\n        data: server,\r\n        reason: 'ë¡œì»¬ ë°ì´í„°ê°€ ë¹„ì–´ìˆìŒ'\r\n      };\r\n    }\r\n    \r\n    if (!this.isEmpty(local) && this.isEmpty(server)) {\r\n      return {\r\n        action: 'use_local',\r\n        data: local,\r\n        reason: 'ì„œë²„ ë°ì´í„°ê°€ ë¹„ì–´ìˆìŒ'\r\n      };\r\n    }\r\n    \r\n    // 3. ë‹¨ìˆœ ì¶”ê°€ë§Œ ìˆëŠ” ê²½ìš° (í…ìŠ¤íŠ¸ ëì— ë‚´ìš© ì¶”ê°€)\r\n    const mergeResult = this.trySimpleMerge(local, server);\r\n    if (mergeResult) {\r\n      return {\r\n        action: 'merge',\r\n        data: mergeResult,\r\n        reason: 'ë‹¨ìˆœ ë³‘í•© ê°€ëŠ¥'\r\n      };\r\n    }\r\n    \r\n    // 4. íƒ€ì„ìŠ¤íƒ¬í”„ ê¸°ë°˜ íŒë‹¨\r\n    if (local.updatedAt && server.updatedAt) {\r\n      const localTime = new Date(local.updatedAt);\r\n      const serverTime = new Date(server.updatedAt);\r\n      const timeDiff = Math.abs(localTime - serverTime);\r\n      \r\n      // ì‹œê°„ ì°¨ì´ê°€ 1ì´ˆ ë¯¸ë§Œì´ë©´ ë‚´ìš© ê¸¸ì´ë¡œ íŒë‹¨\r\n      if (timeDiff < 1000) {\r\n        const localLength = (local.content || '').length;\r\n        const serverLength = (server.content || '').length;\r\n        \r\n        if (localLength > serverLength) {\r\n          return {\r\n            action: 'use_local',\r\n            data: local,\r\n            reason: 'ë™ì‹œ í¸ì§‘ ì‹œ ë” ê¸´ ë‚´ìš© ì„ íƒ'\r\n          };\r\n        } else {\r\n          return {\r\n            action: 'use_server',\r\n            data: server,\r\n            reason: 'ë™ì‹œ í¸ì§‘ ì‹œ ë” ê¸´ ë‚´ìš© ì„ íƒ'\r\n          };\r\n        }\r\n      }\r\n    }\r\n    \r\n    return null; // ìë™ í•´ê²° ë¶ˆê°€\r\n  }\r\n  \r\n  /**\r\n   * ë‹¨ìˆœ ë³‘í•© ì‹œë„\r\n   */\r\n  trySimpleMerge(local, server) {\r\n    const localContent = local.content || '';\r\n    const serverContent = server.content || '';\r\n    \r\n    // í•œìª½ì´ ë‹¤ë¥¸ ìª½ì˜ ë¶€ë¶„ì§‘í•©ì¸ì§€ í™•ì¸\r\n    if (localContent.includes(serverContent)) {\r\n      return {\r\n        ...local,\r\n        content: localContent,\r\n        title: local.title || server.title\r\n      };\r\n    }\r\n    \r\n    if (serverContent.includes(localContent)) {\r\n      return {\r\n        ...server,\r\n        content: serverContent,\r\n        title: server.title || local.title\r\n      };\r\n    }\r\n    \r\n    // ê³µí†µ ì ‘ë‘ì‚¬/ì ‘ë¯¸ì‚¬ ì°¾ê¸°\r\n    const commonPrefix = this.findCommonPrefix(localContent, serverContent);\r\n    const commonSuffix = this.findCommonSuffix(localContent, serverContent);\r\n    \r\n    if (commonPrefix.length > 10 || commonSuffix.length > 10) {\r\n      // ê°„ë‹¨í•œ 3-way merge ì‹œë„\r\n      const localMiddle = localContent.slice(\r\n        commonPrefix.length, \r\n        localContent.length - commonSuffix.length\r\n      );\r\n      const serverMiddle = serverContent.slice(\r\n        commonPrefix.length, \r\n        serverContent.length - commonSuffix.length\r\n      );\r\n      \r\n      // ì¤‘ê°„ ë¶€ë¶„ì„ í•©ì¹˜ê¸°\r\n      const mergedContent = commonPrefix + localMiddle + '\\n' + serverMiddle + commonSuffix;\r\n      \r\n      return {\r\n        ...local,\r\n        content: mergedContent,\r\n        title: local.title || server.title,\r\n        mergedAt: new Date().toISOString()\r\n      };\r\n    }\r\n    \r\n    return null;\r\n  }\r\n  \r\n  /**\r\n   * ì‚¬ìš©ì í•´ê²° í”„ë¡¬í”„íŠ¸\r\n   */\r\n  async promptUserResolution(conflict) {\r\n    return new Promise((resolve) => {\r\n      const { documentId, local, server } = conflict;\r\n      \r\n      // ì¶©ëŒ í•´ê²° UI í‘œì‹œ\r\n      const modal = this.createConflictModal(documentId, local, server);\r\n      document.body.appendChild(modal);\r\n      \r\n      // íƒ€ì„ì•„ì›ƒ ì„¤ì •\r\n      const timeout = setTimeout(() => {\r\n        document.body.removeChild(modal);\r\n        resolve(null); // íƒ€ì„ì•„ì›ƒ ì‹œ null ë°˜í™˜\r\n      }, this.userPromptTimeout);\r\n      \r\n      // ì‚¬ìš©ì ì„ íƒ ì²˜ë¦¬\r\n      const handleChoice = (choice, data) => {\r\n        clearTimeout(timeout);\r\n        document.body.removeChild(modal);\r\n        resolve({\r\n          action: choice,\r\n          data: data,\r\n          reason: 'ì‚¬ìš©ì ì„ íƒ'\r\n        });\r\n      };\r\n      \r\n      // ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ\r\n      modal.querySelector('.use-local').onclick = () => \r\n        handleChoice('use_local', local);\r\n      \r\n      modal.querySelector('.use-server').onclick = () => \r\n        handleChoice('use_server', server);\r\n      \r\n      modal.querySelector('.merge-manual').onclick = () => {\r\n        const mergedData = this.showMergeEditor(local, server);\r\n        handleChoice('merge', mergedData);\r\n      };\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ í•´ê²° ëª¨ë‹¬ ìƒì„±\r\n   */\r\n  createConflictModal(documentId, local, server) {\r\n    const modal = document.createElement('div');\r\n    modal.className = 'conflict-resolution-modal';\r\n    modal.innerHTML = `\r\n      <div class=\"modal-overlay\">\r\n        <div class=\"modal-content\">\r\n          <h3>ğŸ“„ ë¬¸ì„œ ì¶©ëŒ ê°ì§€</h3>\r\n          <p>ë¬¸ì„œ \"${local.title || documentId}\"ì—ì„œ ì¶©ëŒì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>\r\n          \r\n          <div class=\"conflict-comparison\">\r\n            <div class=\"local-version\">\r\n              <h4>ğŸ–¥ï¸ ë¡œì»¬ ë²„ì „</h4>\r\n              <div class=\"content-preview\">${this.truncateContent(local.content)}</div>\r\n              <small>ìˆ˜ì •: ${new Date(local.updatedAt).toLocaleString()}</small>\r\n            </div>\r\n            \r\n            <div class=\"server-version\">\r\n              <h4>â˜ï¸ ì„œë²„ ë²„ì „</h4>\r\n              <div class=\"content-preview\">${this.truncateContent(server.content)}</div>\r\n              <small>ìˆ˜ì •: ${new Date(server.updatedAt).toLocaleString()}</small>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"resolution-buttons\">\r\n            <button class=\"use-local\">ë¡œì»¬ ë²„ì „ ì‚¬ìš©</button>\r\n            <button class=\"use-server\">ì„œë²„ ë²„ì „ ì‚¬ìš©</button>\r\n            <button class=\"merge-manual\">ìˆ˜ë™ ë³‘í•©</button>\r\n          </div>\r\n          \r\n          <p class=\"timeout-warning\">30ì´ˆ í›„ ìë™ìœ¼ë¡œ ë¡œì»¬ ë²„ì „ì´ ì„ íƒë©ë‹ˆë‹¤.</p>\r\n        </div>\r\n      </div>\r\n    `;\r\n    \r\n    // ìŠ¤íƒ€ì¼ ì¶”ê°€\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      .conflict-resolution-modal {\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        z-index: 10000;\r\n      }\r\n      .modal-overlay {\r\n        background: rgba(0,0,0,0.7);\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n      }\r\n      .modal-content {\r\n        background: white;\r\n        padding: 20px;\r\n        border-radius: 8px;\r\n        max-width: 600px;\r\n        max-height: 80vh;\r\n        overflow-y: auto;\r\n      }\r\n      .conflict-comparison {\r\n        display: flex;\r\n        gap: 20px;\r\n        margin: 20px 0;\r\n      }\r\n      .local-version, .server-version {\r\n        flex: 1;\r\n        border: 1px solid #ddd;\r\n        padding: 10px;\r\n        border-radius: 4px;\r\n      }\r\n      .content-preview {\r\n        background: #f5f5f5;\r\n        padding: 10px;\r\n        border-radius: 4px;\r\n        font-family: monospace;\r\n        font-size: 12px;\r\n        max-height: 150px;\r\n        overflow-y: auto;\r\n        white-space: pre-wrap;\r\n      }\r\n      .resolution-buttons {\r\n        display: flex;\r\n        gap: 10px;\r\n        justify-content: center;\r\n        margin: 20px 0;\r\n      }\r\n      .resolution-buttons button {\r\n        padding: 10px 20px;\r\n        border: none;\r\n        border-radius: 4px;\r\n        cursor: pointer;\r\n      }\r\n      .use-local { background: #4CAF50; color: white; }\r\n      .use-server { background: #2196F3; color: white; }\r\n      .merge-manual { background: #FF9800; color: white; }\r\n      .timeout-warning {\r\n        text-align: center;\r\n        color: #666;\r\n        font-size: 12px;\r\n      }\r\n    `;\r\n    modal.appendChild(style);\r\n    \r\n    return modal;\r\n  }\r\n  \r\n  /**\r\n   * ê¸°ë³¸ ì „ëµ ì ìš©\r\n   */\r\n  applyFallbackStrategy(local, server, operation) {\r\n    switch (this.strategy) {\r\n      case 'last-write-wins':\r\n        const localTime = new Date(local.updatedAt || 0);\r\n        const serverTime = new Date(server.updatedAt || 0);\r\n        \r\n        return localTime >= serverTime ? {\r\n          action: 'use_local',\r\n          data: local,\r\n          reason: 'Last-Write-Wins: ë¡œì»¬ì´ ë” ìµœì‹ '\r\n        } : {\r\n          action: 'use_server',\r\n          data: server,\r\n          reason: 'Last-Write-Wins: ì„œë²„ê°€ ë” ìµœì‹ '\r\n        };\r\n        \r\n      case 'prefer-local':\r\n        return {\r\n          action: 'use_local',\r\n          data: local,\r\n          reason: 'Prefer-Local ì „ëµ'\r\n        };\r\n        \r\n      case 'prefer-server':\r\n        return {\r\n          action: 'use_server',\r\n          data: server,\r\n          reason: 'Prefer-Server ì „ëµ'\r\n        };\r\n        \r\n      default:\r\n        return {\r\n          action: 'use_local',\r\n          data: local,\r\n          reason: 'ì•Œ ìˆ˜ ì—†ëŠ” ì „ëµìœ¼ë¡œ ì¸í•œ ë¡œì»¬ ì„ íƒ'\r\n        };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œë“¤\r\n   */\r\n  isContentEqual(local, server) {\r\n    return (local.content || '').trim() === (server.content || '').trim() &&\r\n           (local.title || '').trim() === (server.title || '').trim();\r\n  }\r\n  \r\n  isEmpty(data) {\r\n    return !data || \r\n           (!data.content || data.content.trim() === '') &&\r\n           (!data.title || data.title.trim() === '');\r\n  }\r\n  \r\n  findCommonPrefix(str1, str2) {\r\n    let i = 0;\r\n    while (i < str1.length && i < str2.length && str1[i] === str2[i]) {\r\n      i++;\r\n    }\r\n    return str1.slice(0, i);\r\n  }\r\n  \r\n  findCommonSuffix(str1, str2) {\r\n    let i = 0;\r\n    while (i < str1.length && i < str2.length && \r\n           str1[str1.length - 1 - i] === str2[str2.length - 1 - i]) {\r\n      i++;\r\n    }\r\n    return str1.slice(str1.length - i);\r\n  }\r\n  \r\n  truncateContent(content, maxLength = 200) {\r\n    if (!content) return '(ë‚´ìš© ì—†ìŒ)';\r\n    return content.length > maxLength ? \r\n           content.slice(0, maxLength) + '...' : \r\n           content;\r\n  }\r\n}\r\n\r\n/**\r\n * ì¶©ëŒ í•´ê²°ê¸° íŒ©í† ë¦¬\r\n */\r\nexport const createConflictResolver = (options = {}) => {\r\n  return new ConflictResolver(options);\r\n};\r\n\r\n/**\r\n * ê¸°ë³¸ ì¶©ëŒ í•´ê²°ê¸° ì¸ìŠ¤í„´ìŠ¤\r\n */\r\nexport const defaultConflictResolver = new ConflictResolver(); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\httpAdapter.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[801,858],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":58,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":58,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1616,1682],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1743,1798],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'options' is assigned a value but never used.","line":104,"column":34,"nodeType":"Identifier","messageId":"unusedVar","endLine":104,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * HttpAdapter - REST API í†µì‹  ì–´ëŒ‘í„°\r\n */\r\nexport class HttpAdapter {\r\n  constructor(options = {}) {\r\n    this.baseURL = options.baseURL || 'http://localhost:3003/api';\r\n    this.timeout = options.timeout || 10000;\r\n    this.headers = {\r\n      'Content-Type': 'application/json',\r\n      ...options.headers\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * HTTP ìš”ì²­ ê³µí†µ ì²˜ë¦¬\r\n   */\r\n  async request(method, endpoint, data = null, options = {}) {\r\n    const url = `${this.baseURL}${endpoint}`;\r\n    const config = {\r\n      method,\r\n      headers: { ...this.headers, ...options.headers },\r\n      signal: AbortSignal.timeout(this.timeout),\r\n      ...options\r\n    };\r\n    \r\n    if (data && (method === 'POST' || method === 'PUT' || method === 'PATCH')) {\r\n      config.body = JSON.stringify(data);\r\n    }\r\n    \r\n    try {\r\n      console.log(`ğŸŒ ${method} ${url}`, data ? { data } : '');\r\n      \r\n      const response = await fetch(url, config);\r\n      \r\n      // ETag í—¤ë” ì²˜ë¦¬ (ìºì‹œ ë¬´ê²°ì„±)\r\n      const etag = response.headers.get('ETag');\r\n      const lastModified = response.headers.get('Last-Modified');\r\n      \r\n      if (!response.ok) {\r\n        const errorData = await response.json().catch(() => ({}));\r\n        const error = new Error(errorData.message || `HTTP ${response.status}`);\r\n        error.status = response.status;\r\n        error.data = errorData;\r\n        throw error;\r\n      }\r\n      \r\n      const result = await response.json();\r\n      \r\n      // ë©”íƒ€ë°ì´í„° ì¶”ê°€\r\n      if (etag || lastModified) {\r\n        result._meta = {\r\n          etag,\r\n          lastModified,\r\n          status: response.status\r\n        };\r\n      }\r\n      \r\n      console.log(`âœ… ${method} ${url} ì„±ê³µ`, { status: response.status });\r\n      return result;\r\n      \r\n    } catch (error) {\r\n      console.error(`âŒ ${method} ${url} ì‹¤íŒ¨:`, error.message);\r\n      \r\n      // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ í‘œì¤€í™”\r\n      if (error.name === 'AbortError') {\r\n        const timeoutError = new Error('ìš”ì²­ ì‹œê°„ ì´ˆê³¼');\r\n        timeoutError.name = 'TimeoutError';\r\n        timeoutError.code = 'TIMEOUT';\r\n        throw timeoutError;\r\n      }\r\n      \r\n      if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n        const networkError = new Error('ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨');\r\n        networkError.name = 'NetworkError';\r\n        networkError.code = 'NETWORK_ERROR';\r\n        throw networkError;\r\n      }\r\n      \r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ìƒì„±\r\n   */\r\n  async createDocument(data) {\r\n    return await this.request('POST', '/posts', {\r\n      title: data.title || 'ì œëª© ì—†ìŒ',\r\n      content: data.content || '',\r\n      ...data\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ì¡°íšŒ\r\n   */\r\n  async getDocument(id) {\r\n    return await this.request('GET', `/posts/${id}`);\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ì—…ë°ì´íŠ¸ (ETag ê¸°ë°˜ ì¶©ëŒ ê°ì§€)\r\n   */\r\n  async updateDocument(id, data, options = {}) {\r\n    const headers = {};\r\n    \r\n    // ETag ê¸°ë°˜ ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸\r\n    if (data._meta?.etag) {\r\n      headers['If-Match'] = data._meta.etag;\r\n    }\r\n    \r\n    // Last-Modified ê¸°ë°˜ ì¡°ê±´ë¶€ ì—…ë°ì´íŠ¸\r\n    if (data._meta?.lastModified) {\r\n      headers['If-Unmodified-Since'] = data._meta.lastModified;\r\n    }\r\n    \r\n    return await this.request('PUT', `/posts/${id}`, {\r\n      title: data.title,\r\n      content: data.content,\r\n      updatedAt: data.updatedAt || new Date().toISOString(),\r\n      ...data\r\n    }, { headers });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ì‚­ì œ\r\n   */\r\n  async deleteDocument(id) {\r\n    return await this.request('DELETE', `/posts/${id}`);\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ëª©ë¡ ì¡°íšŒ\r\n   */\r\n  async getDocuments(options = {}) {\r\n    const params = new URLSearchParams();\r\n    \r\n    if (options.limit) params.append('limit', options.limit);\r\n    if (options.offset) params.append('offset', options.offset);\r\n    if (options.search) params.append('search', options.search);\r\n    if (options.since) params.append('since', options.since);\r\n    \r\n    const query = params.toString();\r\n    const endpoint = query ? `/posts?${query}` : '/posts';\r\n    \r\n    return await this.request('GET', endpoint);\r\n  }\r\n  \r\n  /**\r\n   * ì„œë²„ ìƒíƒœ í™•ì¸\r\n   */\r\n  async healthCheck() {\r\n    try {\r\n      const result = await this.request('GET', '/health', null, { \r\n        timeout: 5000 \r\n      });\r\n      return { status: 'ok', ...result };\r\n    } catch (error) {\r\n      return { \r\n        status: 'error', \r\n        error: error.message,\r\n        code: error.code \r\n      };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ\r\n   */\r\n  async getSyncStatus(documentIds = []) {\r\n    if (documentIds.length === 0) {\r\n      return await this.request('GET', '/sync/status');\r\n    }\r\n    \r\n    return await this.request('POST', '/sync/status', {\r\n      documentIds\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ë°°ì¹˜ ì—…ë°ì´íŠ¸ (ì—¬ëŸ¬ ë¬¸ì„œ í•œë²ˆì—)\r\n   */\r\n  async batchUpdate(documents) {\r\n    return await this.request('POST', '/posts/batch', {\r\n      documents: documents.map(doc => ({\r\n        id: doc.id,\r\n        title: doc.title,\r\n        content: doc.content,\r\n        updatedAt: doc.updatedAt\r\n      }))\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ í•´ê²°ì„ ìœ„í•œ ì„œë²„ ë°ì´í„° ì¡°íšŒ\r\n   */\r\n  async getDocumentRevision(id, revision) {\r\n    return await this.request('GET', `/posts/${id}/revisions/${revision}`);\r\n  }\r\n  \r\n  /**\r\n   * ê²€ìƒ‰\r\n   */\r\n  async searchDocuments(query, options = {}) {\r\n    const params = new URLSearchParams({\r\n      q: query,\r\n      limit: options.limit || 20,\r\n      offset: options.offset || 0\r\n    });\r\n    \r\n    if (options.fields) {\r\n      params.append('fields', options.fields.join(','));\r\n    }\r\n    \r\n    return await this.request('GET', `/search?${params.toString()}`);\r\n  }\r\n}\r\n\r\n/**\r\n * HTTP ì–´ëŒ‘í„° íŒ©í† ë¦¬\r\n */\r\nexport const createHttpAdapter = (options = {}) => {\r\n  return new HttpAdapter(options);\r\n};\r\n\r\n/**\r\n * ê¸°ë³¸ HTTP ì–´ëŒ‘í„° ì¸ìŠ¤í„´ìŠ¤\r\n */\r\nexport const defaultHttpAdapter = new HttpAdapter(); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\index.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[996,1023],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":44,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":44,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1158,1187],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":85,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":85,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2128,2165],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":128,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":128,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3313,3353],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":189,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":189,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5071,5115],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":206,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":206,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5458,5512],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":216,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":216,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5765,5800],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":299,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":299,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7434,7483],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { HttpAdapter } from './httpAdapter';\r\nimport { WebSocketAdapter } from './wsAdapter';\r\nimport { SyncQueue } from '../utils/database';\r\nimport { ConflictResolver } from './conflict';\r\n\r\n/**\r\n * SyncManager - ì¤‘ì•™í™”ëœ ë™ê¸°í™” ê´€ë¦¬ì\r\n * \r\n * ì—­í• :\r\n * - ë¡œì»¬ IndexedDBì™€ ì›ê²© ì„œë²„ ê°„ ë°ì´í„° ë™ê¸°í™”\r\n * - ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ê°ì§€ ë° ì˜¤í”„ë¼ì¸ í ê´€ë¦¬\r\n * - ì¶©ëŒ í•´ê²° ë° ì¬ì‹œë„ ë¡œì§\r\n */\r\nexport class SyncManager {\r\n  constructor(options = {}) {\r\n    this.httpAdapter = options.httpAdapter || new HttpAdapter();\r\n    this.wsAdapter = options.wsAdapter || new WebSocketAdapter();\r\n    this.conflictResolver = options.conflictResolver || new ConflictResolver();\r\n    \r\n    this.isOnline = navigator.onLine;\r\n    this.syncInProgress = false;\r\n    this.syncInterval = null;\r\n    this.retryTimeout = null;\r\n    \r\n    // Event listeners\r\n    this.listeners = {\r\n      sync: [],\r\n      conflict: [],\r\n      error: []\r\n    };\r\n    \r\n    this.init();\r\n  }\r\n  \r\n  init() {\r\n    // Network status monitoring\r\n    window.addEventListener('online', () => {\r\n      console.log('ğŸŒ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ë¨');\r\n      this.isOnline = true;\r\n      this.processPendingQueue();\r\n    });\r\n    \r\n    window.addEventListener('offline', () => {\r\n      console.log('ğŸ“´ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ëŠê¹€');\r\n      this.isOnline = false;\r\n    });\r\n    \r\n    // Start periodic sync\r\n    this.startPeriodicSync();\r\n    \r\n    // WebSocket connection for real-time sync\r\n    if (this.isOnline) {\r\n      this.wsAdapter.connect();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ë™ê¸°í™” (Optimistic UI íŒ¨í„´)\r\n   */\r\n  async syncDocument(documentId, operation = 'update', data = {}) {\r\n    try {\r\n      // 1. ë¡œì»¬ íì— ì¶”ê°€ (ì˜¤í”„ë¼ì¸ ëŒ€ë¹„)\r\n      await SyncQueue.enqueue(documentId, operation, data);\r\n      \r\n      // 2. ì˜¨ë¼ì¸ ìƒíƒœë©´ ì¦‰ì‹œ ë™ê¸°í™” ì‹œë„\r\n      if (this.isOnline) {\r\n        return await this.processSyncItem({\r\n          documentId,\r\n          operation,\r\n          data: JSON.stringify(data)\r\n        });\r\n      }\r\n      \r\n      // 3. ì˜¤í”„ë¼ì¸ì´ë©´ íì—ë§Œ ì €ì¥\r\n      this.emit('sync', {\r\n        status: 'queued',\r\n        documentId,\r\n        operation,\r\n        message: 'ì˜¤í”„ë¼ì¸ ìƒíƒœ - íì— ì €ì¥ë¨'\r\n      });\r\n      \r\n      return { success: true, queued: true };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë¬¸ì„œ ë™ê¸°í™” ì‹¤íŒ¨:', error);\r\n      this.emit('error', { documentId, operation, error: error.message });\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ê°œë³„ ë™ê¸°í™” í•­ëª© ì²˜ë¦¬\r\n   */\r\n  async processSyncItem(item) {\r\n    try {\r\n      const data = JSON.parse(item.data || '{}');\r\n      let result;\r\n      \r\n      switch (item.operation) {\r\n        case 'create':\r\n          result = await this.httpAdapter.createDocument(data);\r\n          break;\r\n        case 'update':\r\n          result = await this.httpAdapter.updateDocument(item.documentId, data);\r\n          break;\r\n        case 'delete':\r\n          result = await this.httpAdapter.deleteDocument(item.documentId);\r\n          break;\r\n        default:\r\n          throw new Error(`ì•Œ ìˆ˜ ì—†ëŠ” ì‘ì—…: ${item.operation}`);\r\n      }\r\n      \r\n      // ì„±ê³µ ì‹œ íì—ì„œ ì œê±°\r\n      if (item.queueId) {\r\n        await SyncQueue.markAsCompleted(item.queueId);\r\n      }\r\n      \r\n      this.emit('sync', {\r\n        status: 'completed',\r\n        documentId: item.documentId,\r\n        operation: item.operation,\r\n        result\r\n      });\r\n      \r\n      return { success: true, result };\r\n      \r\n    } catch (error) {\r\n      console.error(`âŒ ë™ê¸°í™” í•­ëª© ì²˜ë¦¬ ì‹¤íŒ¨:`, error);\r\n      \r\n      // ì¶©ëŒ ê°ì§€ (409 Conflict)\r\n      if (error.status === 409) {\r\n        return await this.handleConflict(item, error);\r\n      }\r\n      \r\n      // ì¬ì‹œë„ ê°€ëŠ¥í•œ ì˜¤ë¥˜ (5xx, ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜)\r\n      if (this.isRetryableError(error)) {\r\n        if (item.queueId) {\r\n          await SyncQueue.markAsFailed(item.queueId, error.message);\r\n        }\r\n        return { success: false, retry: true, error: error.message };\r\n      }\r\n      \r\n      // ì¬ì‹œë„ ë¶ˆê°€ëŠ¥í•œ ì˜¤ë¥˜ (4xx)\r\n      if (item.queueId) {\r\n        await SyncQueue.markAsFailed(item.queueId, error.message);\r\n      }\r\n      \r\n      this.emit('error', {\r\n        documentId: item.documentId,\r\n        operation: item.operation,\r\n        error: error.message\r\n      });\r\n      \r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì¶©ëŒ ì²˜ë¦¬\r\n   */\r\n  async handleConflict(item, error) {\r\n    try {\r\n      const serverData = error.data || {};\r\n      const localData = JSON.parse(item.data || '{}');\r\n      \r\n      const resolution = await this.conflictResolver.resolve({\r\n        documentId: item.documentId,\r\n        local: localData,\r\n        server: serverData,\r\n        operation: item.operation\r\n      });\r\n      \r\n      this.emit('conflict', {\r\n        documentId: item.documentId,\r\n        resolution,\r\n        local: localData,\r\n        server: serverData\r\n      });\r\n      \r\n      // í•´ê²°ëœ ë°ì´í„°ë¡œ ì¬ì‹œë„\r\n      if (resolution.action === 'merge' || resolution.action === 'use_local') {\r\n        const mergedData = resolution.data || localData;\r\n        return await this.httpAdapter.updateDocument(item.documentId, mergedData);\r\n      }\r\n      \r\n      return { success: true, conflict: true, resolution };\r\n      \r\n    } catch (conflictError) {\r\n      console.error('âŒ ì¶©ëŒ í•´ê²° ì‹¤íŒ¨:', conflictError);\r\n      return { success: false, error: conflictError.message };\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ëŒ€ê¸° ì¤‘ì¸ í ì²˜ë¦¬\r\n   */\r\n  async processPendingQueue() {\r\n    if (this.syncInProgress || !this.isOnline) {\r\n      return;\r\n    }\r\n    \r\n    this.syncInProgress = true;\r\n    \r\n    try {\r\n      const pendingItems = await SyncQueue.getPendingItems();\r\n      console.log(`ğŸ“¤ ì²˜ë¦¬í•  ë™ê¸°í™” í•­ëª©: ${pendingItems.length}ê°œ`);\r\n      \r\n      for (const item of pendingItems) {\r\n        await this.processSyncItem(item);\r\n        \r\n        // Rate limiting - 100ms ê°„ê²©\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ í ì²˜ë¦¬ ì‹¤íŒ¨:', error);\r\n    } finally {\r\n      this.syncInProgress = false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì£¼ê¸°ì  ë™ê¸°í™” ì‹œì‘\r\n   */\r\n  startPeriodicSync(interval = 30000) { // 30ì´ˆ\r\n    if (this.syncInterval) {\r\n      clearInterval(this.syncInterval);\r\n    }\r\n    \r\n    this.syncInterval = setInterval(() => {\r\n      if (this.isOnline && !this.syncInProgress) {\r\n        this.processPendingQueue();\r\n      }\r\n    }, interval);\r\n  }\r\n  \r\n  /**\r\n   * ì£¼ê¸°ì  ë™ê¸°í™” ì¤‘ì§€\r\n   */\r\n  stopPeriodicSync() {\r\n    if (this.syncInterval) {\r\n      clearInterval(this.syncInterval);\r\n      this.syncInterval = null;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì¬ì‹œë„ ê°€ëŠ¥í•œ ì˜¤ë¥˜ íŒë‹¨\r\n   */\r\n  isRetryableError(error) {\r\n    // 5xx ì„œë²„ ì˜¤ë¥˜\r\n    if (error.status >= 500 && error.status < 600) {\r\n      return true;\r\n    }\r\n    \r\n    // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜\r\n    if (error.name === 'NetworkError' || error.code === 'NETWORK_ERROR') {\r\n      return true;\r\n    }\r\n    \r\n    // íƒ€ì„ì•„ì›ƒ\r\n    if (error.name === 'TimeoutError' || error.code === 'TIMEOUT') {\r\n      return true;\r\n    }\r\n    \r\n    return false;\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡\r\n   */\r\n  on(event, callback) {\r\n    if (this.listeners[event]) {\r\n      this.listeners[event].push(callback);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°\r\n   */\r\n  off(event, callback) {\r\n    if (this.listeners[event]) {\r\n      const index = this.listeners[event].indexOf(callback);\r\n      if (index > -1) {\r\n        this.listeners[event].splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë°œìƒ\r\n   */\r\n  emit(event, data) {\r\n    if (this.listeners[event]) {\r\n      this.listeners[event].forEach(callback => {\r\n        try {\r\n          callback(data);\r\n        } catch (error) {\r\n          console.error(`âŒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜ (${event}):`, error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ\r\n   */\r\n  async getStatus() {\r\n    const pendingItems = await SyncQueue.getPendingItems();\r\n    const failedItems = await SyncQueue.getFailedItems?.() || [];\r\n    \r\n    return {\r\n      isOnline: this.isOnline,\r\n      syncInProgress: this.syncInProgress,\r\n      pendingCount: pendingItems.length,\r\n      failedCount: failedItems.length,\r\n      wsConnected: this.wsAdapter.isConnected()\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * ê°•ì œ ë™ê¸°í™”\r\n   */\r\n  async forcSync() {\r\n    if (!this.isOnline) {\r\n      throw new Error('ì˜¤í”„ë¼ì¸ ìƒíƒœì—ì„œëŠ” ë™ê¸°í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\r\n    }\r\n    \r\n    return await this.processPendingQueue();\r\n  }\r\n  \r\n  /**\r\n   * ì •ë¦¬\r\n   */\r\n  destroy() {\r\n    this.stopPeriodicSync();\r\n    \r\n    if (this.retryTimeout) {\r\n      clearTimeout(this.retryTimeout);\r\n    }\r\n    \r\n    this.wsAdapter.disconnect();\r\n    \r\n    window.removeEventListener('online', this.handleOnline);\r\n    window.removeEventListener('offline', this.handleOffline);\r\n    \r\n    this.listeners = { sync: [], conflict: [], error: [] };\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nlet syncManagerInstance = null;\r\n\r\n/**\r\n * SyncManager ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì˜¤ê¸°\r\n */\r\nexport const getSyncManager = (options = {}) => {\r\n  if (!syncManagerInstance) {\r\n    syncManagerInstance = new SyncManager(options);\r\n  }\r\n  return syncManagerInstance;\r\n};\r\n\r\n/**\r\n * SyncManager ì¸ìŠ¤í„´ìŠ¤ ì¬ì„¤ì • (í…ŒìŠ¤íŠ¸ìš©)\r\n */\r\nexport const resetSyncManager = () => {\r\n  if (syncManagerInstance) {\r\n    syncManagerInstance.destroy();\r\n    syncManagerInstance = null;\r\n  }\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\sync\\wsAdapter.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":33,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":33,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[854,889],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[936,983],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":47,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":47,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[1290,1333],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":56,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":56,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1442,1476],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":82,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":82,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[1999,2047],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2264,2314],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2373,2420],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":139,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":139,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3119,3152],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":154,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":154,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3424,3490],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4054,4103],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":181,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":181,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4151,4198],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":189,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":189,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4273,4340],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":210,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":210,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4728,4768],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":219,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":219,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4939,5004],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":229,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":229,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5208,5303],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":306,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":306,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[6861,6920],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * WebSocketAdapter - ì‹¤ì‹œê°„ ë™ê¸°í™”ë¥¼ ìœ„í•œ WebSocket ì–´ëŒ‘í„°\r\n */\r\nexport class WebSocketAdapter {\r\n  constructor(options = {}) {\r\n    this.url = options.url || 'ws://localhost:3003/ws';\r\n    this.reconnectInterval = options.reconnectInterval || 5000;\r\n    this.maxReconnectAttempts = options.maxReconnectAttempts || 10;\r\n    this.heartbeatInterval = options.heartbeatInterval || 30000;\r\n    \r\n    this.ws = null;\r\n    this.isConnected = false;\r\n    this.reconnectAttempts = 0;\r\n    this.reconnectTimer = null;\r\n    this.heartbeatTimer = null;\r\n    \r\n    this.listeners = {\r\n      connect: [],\r\n      disconnect: [],\r\n      message: [],\r\n      error: [],\r\n      documentUpdate: [],\r\n      documentDelete: [],\r\n      conflict: []\r\n    };\r\n  }\r\n  \r\n  /**\r\n   * WebSocket ì—°ê²°\r\n   */\r\n  connect() {\r\n    if (this.ws && this.ws.readyState === WebSocket.OPEN) {\r\n      console.log('ğŸ”Œ WebSocket ì´ë¯¸ ì—°ê²°ë¨');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log(`ğŸ”Œ WebSocket ì—°ê²° ì‹œë„: ${this.url}`);\r\n      this.ws = new WebSocket(this.url);\r\n      \r\n      this.ws.onopen = this.handleOpen.bind(this);\r\n      this.ws.onmessage = this.handleMessage.bind(this);\r\n      this.ws.onclose = this.handleClose.bind(this);\r\n      this.ws.onerror = this.handleError.bind(this);\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ WebSocket ì—°ê²° ì‹¤íŒ¨:', error);\r\n      this.scheduleReconnect();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * WebSocket ì—°ê²° í•´ì œ\r\n   */\r\n  disconnect() {\r\n    console.log('ğŸ”Œ WebSocket ì—°ê²° í•´ì œ');\r\n    \r\n    this.clearTimers();\r\n    \r\n    if (this.ws) {\r\n      this.ws.onopen = null;\r\n      this.ws.onmessage = null;\r\n      this.ws.onclose = null;\r\n      this.ws.onerror = null;\r\n      \r\n      if (this.ws.readyState === WebSocket.OPEN) {\r\n        this.ws.close(1000, 'Client disconnect');\r\n      }\r\n      \r\n      this.ws = null;\r\n    }\r\n    \r\n    this.isConnected = false;\r\n    this.reconnectAttempts = 0;\r\n  }\r\n  \r\n  /**\r\n   * ë©”ì‹œì§€ ì „ì†¡\r\n   */\r\n  send(type, data = {}) {\r\n    if (!this.isConnected || !this.ws) {\r\n      console.warn('âš ï¸ WebSocket ì—°ê²°ë˜ì§€ ì•ŠìŒ, ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨');\r\n      return false;\r\n    }\r\n    \r\n    try {\r\n      const message = {\r\n        type,\r\n        data,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n      this.ws.send(JSON.stringify(message));\r\n      console.log(`ğŸ“¤ WebSocket ë©”ì‹œì§€ ì „ì†¡: ${type}`, data);\r\n      return true;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ WebSocket ë©”ì‹œì§€ ì „ì†¡ ì‹¤íŒ¨:', error);\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ êµ¬ë…\r\n   */\r\n  subscribeToDocument(documentId) {\r\n    return this.send('subscribe', { documentId });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ êµ¬ë… í•´ì œ\r\n   */\r\n  unsubscribeFromDocument(documentId) {\r\n    return this.send('unsubscribe', { documentId });\r\n  }\r\n  \r\n  /**\r\n   * ë¬¸ì„œ ë³€ê²½ ì•Œë¦¼\r\n   */\r\n  notifyDocumentChange(documentId, changes) {\r\n    return this.send('document_change', {\r\n      documentId,\r\n      changes,\r\n      clientId: this.getClientId()\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ì—°ê²° ìƒíƒœ í™•ì¸\r\n   */\r\n  isConnected() {\r\n    return this.isConnected && this.ws && this.ws.readyState === WebSocket.OPEN;\r\n  }\r\n  \r\n  /**\r\n   * ì—°ê²° ì—´ë¦¼ ì²˜ë¦¬\r\n   */\r\n  handleOpen(event) {\r\n    console.log('âœ… WebSocket ì—°ê²° ì„±ê³µ');\r\n    \r\n    this.isConnected = true;\r\n    this.reconnectAttempts = 0;\r\n    \r\n    this.startHeartbeat();\r\n    this.emit('connect', { event });\r\n  }\r\n  \r\n  /**\r\n   * ë©”ì‹œì§€ ìˆ˜ì‹  ì²˜ë¦¬\r\n   */\r\n  handleMessage(event) {\r\n    try {\r\n      const message = JSON.parse(event.data);\r\n      console.log(`ğŸ“¥ WebSocket ë©”ì‹œì§€ ìˆ˜ì‹ : ${message.type}`, message.data);\r\n      \r\n      this.emit('message', message);\r\n      \r\n      // ë©”ì‹œì§€ íƒ€ì…ë³„ ì²˜ë¦¬\r\n      switch (message.type) {\r\n        case 'document_updated':\r\n          this.emit('documentUpdate', message.data);\r\n          break;\r\n          \r\n        case 'document_deleted':\r\n          this.emit('documentDelete', message.data);\r\n          break;\r\n          \r\n        case 'conflict_detected':\r\n          this.emit('conflict', message.data);\r\n          break;\r\n          \r\n        case 'pong':\r\n          // Heartbeat ì‘ë‹µ\r\n          break;\r\n          \r\n        default:\r\n          console.log(`ğŸ¤· ì•Œ ìˆ˜ ì—†ëŠ” ë©”ì‹œì§€ íƒ€ì…: ${message.type}`);\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ WebSocket ë©”ì‹œì§€ íŒŒì‹± ì‹¤íŒ¨:', error);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì—°ê²° ì¢…ë£Œ ì²˜ë¦¬\r\n   */\r\n  handleClose(event) {\r\n    console.log(`ğŸ”Œ WebSocket ì—°ê²° ì¢…ë£Œ: ${event.code} - ${event.reason}`);\r\n    \r\n    this.isConnected = false;\r\n    this.clearTimers();\r\n    \r\n    this.emit('disconnect', { \r\n      code: event.code, \r\n      reason: event.reason,\r\n      wasClean: event.wasClean\r\n    });\r\n    \r\n    // ë¹„ì •ìƒ ì¢…ë£Œì¸ ê²½ìš° ì¬ì—°ê²° ì‹œë„\r\n    if (event.code !== 1000 && event.code !== 1001) {\r\n      this.scheduleReconnect();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì˜¤ë¥˜ ì²˜ë¦¬\r\n   */\r\n  handleError(event) {\r\n    console.error('âŒ WebSocket ì˜¤ë¥˜:', event);\r\n    this.emit('error', { event });\r\n  }\r\n  \r\n  /**\r\n   * ì¬ì—°ê²° ìŠ¤ì¼€ì¤„ë§\r\n   */\r\n  scheduleReconnect() {\r\n    if (this.reconnectAttempts >= this.maxReconnectAttempts) {\r\n      console.error(`âŒ ìµœëŒ€ ì¬ì—°ê²° ì‹œë„ íšŸìˆ˜(${this.maxReconnectAttempts}) ì´ˆê³¼`);\r\n      return;\r\n    }\r\n    \r\n    this.reconnectAttempts++;\r\n    const delay = Math.min(\r\n      this.reconnectInterval * Math.pow(2, this.reconnectAttempts - 1),\r\n      30000 // ìµœëŒ€ 30ì´ˆ\r\n    );\r\n    \r\n    console.log(`ğŸ”„ ${delay}ms í›„ ì¬ì—°ê²° ì‹œë„ (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);\r\n    \r\n    this.reconnectTimer = setTimeout(() => {\r\n      this.connect();\r\n    }, delay);\r\n  }\r\n  \r\n  /**\r\n   * Heartbeat ì‹œì‘\r\n   */\r\n  startHeartbeat() {\r\n    this.heartbeatTimer = setInterval(() => {\r\n      if (this.isConnected) {\r\n        this.send('ping');\r\n      }\r\n    }, this.heartbeatInterval);\r\n  }\r\n  \r\n  /**\r\n   * íƒ€ì´ë¨¸ ì •ë¦¬\r\n   */\r\n  clearTimers() {\r\n    if (this.reconnectTimer) {\r\n      clearTimeout(this.reconnectTimer);\r\n      this.reconnectTimer = null;\r\n    }\r\n    \r\n    if (this.heartbeatTimer) {\r\n      clearInterval(this.heartbeatTimer);\r\n      this.heartbeatTimer = null;\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±/ì¡°íšŒ\r\n   */\r\n  getClientId() {\r\n    let clientId = localStorage.getItem('miki_client_id');\r\n    \r\n    if (!clientId) {\r\n      clientId = 'client_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\r\n      localStorage.setItem('miki_client_id', clientId);\r\n    }\r\n    \r\n    return clientId;\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡\r\n   */\r\n  on(event, callback) {\r\n    if (this.listeners[event]) {\r\n      this.listeners[event].push(callback);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°\r\n   */\r\n  off(event, callback) {\r\n    if (this.listeners[event]) {\r\n      const index = this.listeners[event].indexOf(callback);\r\n      if (index > -1) {\r\n        this.listeners[event].splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì´ë²¤íŠ¸ ë°œìƒ\r\n   */\r\n  emit(event, data) {\r\n    if (this.listeners[event]) {\r\n      this.listeners[event].forEach(callback => {\r\n        try {\r\n          callback(data);\r\n        } catch (error) {\r\n          console.error(`âŒ WebSocket ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜ (${event}):`, error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ì—°ê²° ìƒíƒœ ì •ë³´\r\n   */\r\n  getStatus() {\r\n    return {\r\n      isConnected: this.isConnected,\r\n      readyState: this.ws?.readyState,\r\n      reconnectAttempts: this.reconnectAttempts,\r\n      url: this.url\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * WebSocket ì–´ëŒ‘í„° íŒ©í† ë¦¬\r\n */\r\nexport const createWebSocketAdapter = (options = {}) => {\r\n  return new WebSocketAdapter(options);\r\n};\r\n\r\n/**\r\n * ê¸°ë³¸ WebSocket ì–´ëŒ‘í„° ì¸ìŠ¤í„´ìŠ¤\r\n */\r\nexport const defaultWebSocketAdapter = new WebSocketAdapter(); ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\DataSyncManager.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":18,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":18,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[440,472],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[575,612],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":28,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":28,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[721,765],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[860,903],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1246,1337],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2048,2085],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":63,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":63,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2093,2113],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":68,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":68,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2176,2208],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":104,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":104,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3220,3266],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":118,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":118,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3641,3678],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":154,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":154,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[4666,4707],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5237,5274],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":180,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":180,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5320,5369],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":201,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":201,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5892,5929],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":203,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":203,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5964,6013],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'titleKey' is assigned a value but never used.","line":227,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":227,"endColumn":25},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":238,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":238,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6898,6968],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":267,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":267,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7760,7802],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":284,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":284,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8320,8379],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":288,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":288,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8476,8526],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":300,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":300,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[8839,8888],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":322,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":322,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[9404,9453],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":341,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":341,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9893,9945],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":343,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":343,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[9976,10018],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":353,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":353,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10231,10271],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":354,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":354,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10277,10325],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":368,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":368,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10673,10723],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'title' is assigned a value but never used.","line":401,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":401,"endColumn":24},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":428,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":428,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12647,12698],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":430,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":430,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[12733,12772],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":438,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":438,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12919,12970],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":441,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":441,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12997,13037],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":442,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":442,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13045,13125],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":446,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":446,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[13185,13219],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":457,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":457,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13485,13534],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":464,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":464,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13701,13776],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-unused-vars","severity":1,"message":"'titleKey' is assigned a value but never used.","line":493,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":493,"endColumn":27},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":524,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":524,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15755,15793],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":525,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":525,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15801,15839],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":530,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":530,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[15912,15948],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":543,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":543,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16144,16180],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":584,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":584,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[17547,17583],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":588,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":588,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[17647,17678],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":43,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ì„œë²„ì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê°„ì˜ ë°ì´í„° ë™ê¸°í™”ë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤\r\n * ìˆ˜ì •: ì„œë²„ API êµ¬ì¡°ì— ë§ê²Œ ë™ê¸°í™” ë¡œì§ ê°œì„ \r\n */\r\nclass DataSyncManager {\r\n  constructor() {\r\n    this.serverUrl = 'http://localhost:3003/api/posts';\r\n    this.syncInProgress = false;\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì™„ì „ ë™ê¸°í™”\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\r\n   * @returns {Object} - ë™ê¸°í™” ê²°ê³¼\r\n   */\r\n  async fullSync(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    if (this.syncInProgress) {\r\n      console.log('ë™ê¸°í™”ê°€ ì´ë¯¸ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.');\r\n      return { success: false, message: 'ë™ê¸°í™” ì§„í–‰ ì¤‘' };\r\n    }\r\n\r\n    this.syncInProgress = true;\r\n    console.log('=== ì „ì²´ ë°ì´í„° ë™ê¸°í™” ì‹œì‘ ===');\r\n\r\n    try {\r\n      // 1ë‹¨ê³„: ì„œë²„ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const serverDocs = await this.getServerDocuments();\r\n      console.log(`ì„œë²„ ë¬¸ì„œ: ${serverDocs.length}ê°œ`);\r\n\r\n      // 2ë‹¨ê³„: ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const localDocs = this.getLocalDocuments();\r\n      console.log(`ë¡œì»¬ ë¬¸ì„œ: ${localDocs.length}ê°œ`);\r\n\r\n      // 3ë‹¨ê³„: ë³´ì¡´í•  ë¬¸ì„œë§Œ í•„í„°ë§\r\n      const filteredServerDocs = serverDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      const filteredLocalDocs = localDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n\r\n      console.log(`í•„í„°ë§ í›„ - ì„œë²„: ${filteredServerDocs.length}ê°œ, ë¡œì»¬: ${filteredLocalDocs.length}ê°œ`);\r\n\r\n      // 4ë‹¨ê³„: ë¶ˆí•„ìš”í•œ ì„œë²„ ë¬¸ì„œ ì‚­ì œ\r\n      const serverDeleteResults = await this.cleanupServerDocuments(serverDocs, keepTitles);\r\n      \r\n      // 5ë‹¨ê³„: ë¶ˆí•„ìš”í•œ ë¡œì»¬ ë¬¸ì„œ ì‚­ì œ\r\n      const localDeleteResults = this.cleanupLocalDocuments(localDocs, keepTitles);\r\n\r\n      // 6ë‹¨ê³„: ìµœì‹  ë²„ì „ìœ¼ë¡œ í†µí•©\r\n      const mergeResults = await this.mergeDocuments(filteredServerDocs, filteredLocalDocs);\r\n\r\n      const result = {\r\n        success: true,\r\n        serverDeleted: serverDeleteResults.deleted,\r\n        localDeleted: localDeleteResults.deleted,\r\n        merged: mergeResults.merged,\r\n        finalCount: mergeResults.finalDocuments.length,\r\n        message: `ë™ê¸°í™” ì™„ë£Œ: ${mergeResults.finalDocuments.length}ê°œ ë¬¸ì„œ ìœ ì§€`\r\n      };\r\n\r\n      console.log('=== ì „ì²´ ë°ì´í„° ë™ê¸°í™” ì™„ë£Œ ===');\r\n      console.log(result);\r\n      \r\n      return result;\r\n\r\n    } catch (error) {\r\n      console.error('ë™ê¸°í™” ì˜¤ë¥˜:', error);\r\n      return { \r\n        success: false, \r\n        error: error.message,\r\n        message: 'ë™ê¸°í™” ì‹¤íŒ¨' \r\n      };\r\n    } finally {\r\n      this.syncInProgress = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì—ì„œ ëª¨ë“  ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸° (ìˆ˜ì •: title ì¶”ì¶œ ë¡œì§ ê°œì„ )\r\n   */\r\n  async getServerDocuments() {\r\n    try {\r\n      const response = await fetch(this.serverUrl);\r\n      if (!response.ok) {\r\n        throw new Error(`ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.status}`);\r\n      }\r\n      \r\n      const serverPosts = await response.json();\r\n      \r\n      // ê° ë¬¸ì„œì˜ ì „ì²´ ë‚´ìš©ì„ ê°œë³„ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°\r\n      const fullDocuments = [];\r\n      for (const post of serverPosts) {\r\n        try {\r\n          const fullContent = await this.getServerDocument(post.id);\r\n          fullDocuments.push({\r\n            id: post.id,\r\n            title: post.title || post.id,\r\n            content: fullContent.content || '',\r\n            updatedAt: fullContent.updatedAt || post.updatedAt || new Date().toISOString(),\r\n            source: 'server'\r\n          });\r\n        } catch (error) {\r\n          console.warn(`ë¬¸ì„œ ${post.id} ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:`, error);\r\n          // ì‹¤íŒ¨í•œ ê²½ìš° ê¸°ë³¸ ì •ë³´ë§Œ ì‚¬ìš©\r\n          fullDocuments.push({\r\n            id: post.id,\r\n            title: post.title || post.id,\r\n            content: post.preview || '',\r\n            updatedAt: post.updatedAt || new Date().toISOString(),\r\n            source: 'server'\r\n          });\r\n        }\r\n      }\r\n      \r\n      return fullDocuments;\r\n    } catch (error) {\r\n      console.error('ì„œë²„ ë¬¸ì„œ ì¡°íšŒ ì˜¤ë¥˜:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì—ì„œ íŠ¹ì • ë¬¸ì„œì˜ ì „ì²´ ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  async getServerDocument(id) {\r\n    const response = await fetch(`${this.serverUrl}/${id}`);\r\n    if (!response.ok) {\r\n      throw new Error(`ë¬¸ì„œ ì¡°íšŒ ì‹¤íŒ¨: ${response.status}`);\r\n    }\r\n    return await response.json();\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ëª¨ë“  ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  getLocalDocuments() {\r\n    const documents = [];\r\n    const documentKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n    \r\n    for (const key of documentKeys) {\r\n      try {\r\n        const docData = JSON.parse(localStorage.getItem(key));\r\n        if (docData && docData.title) {\r\n          documents.push({\r\n            id: docData.id || key.replace('miki_document_', ''),\r\n            title: docData.title,\r\n            content: docData.content || '',\r\n            updatedAt: docData.updatedAt || new Date().toISOString(),\r\n            source: 'local'\r\n          });\r\n        }\r\n      } catch (e) {\r\n        console.warn(`ë¡œì»¬ ë¬¸ì„œ íŒŒì‹± ì˜¤ë¥˜ (${key}):`, e);\r\n      }\r\n    }\r\n    \r\n    return documents;\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì—ì„œ ë¶ˆí•„ìš”í•œ ë¬¸ì„œ ì‚­ì œ\r\n   */\r\n  async cleanupServerDocuments(serverDocs, keepTitles) {\r\n    const toDelete = serverDocs.filter(doc => \r\n      !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n    );\r\n\r\n    let deleted = 0;\r\n    for (const doc of toDelete) {\r\n      try {\r\n        const response = await fetch(`${this.serverUrl}/${doc.id}`, {\r\n          method: 'DELETE'\r\n        });\r\n        if (response.ok) {\r\n          deleted++;\r\n          console.log(`ì„œë²„ì—ì„œ ì‚­ì œ: ${doc.title}`);\r\n        }\r\n      } catch (error) {\r\n        console.error(`ì„œë²„ ì‚­ì œ ì‹¤íŒ¨ (${doc.title}):`, error);\r\n      }\r\n    }\r\n\r\n    return { deleted, total: toDelete.length };\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¶ˆí•„ìš”í•œ ë¬¸ì„œ ì‚­ì œ\r\n   */\r\n  cleanupLocalDocuments(localDocs, keepTitles) {\r\n    const toDelete = localDocs.filter(doc => \r\n      !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n    );\r\n\r\n    let deleted = 0;\r\n    for (const doc of toDelete) {\r\n      try {\r\n        localStorage.removeItem(`miki_document_${doc.id}`);\r\n        localStorage.removeItem(`miki_title_${doc.id}`);\r\n        deleted++;\r\n        console.log(`ë¡œì»¬ì—ì„œ ì‚­ì œ: ${doc.title}`);\r\n      } catch (error) {\r\n        console.error(`ë¡œì»¬ ì‚­ì œ ì‹¤íŒ¨ (${doc.title}):`, error);\r\n      }\r\n    }\r\n\r\n    return { deleted, total: toDelete.length };\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì™€ ë¡œì»¬ ë¬¸ì„œë¥¼ ìµœì‹  ë²„ì „ìœ¼ë¡œ í†µí•©\r\n   */\r\n  async mergeDocuments(serverDocs, localDocs) {\r\n    const finalDocuments = [];\r\n    const titleGroups = {};\r\n\r\n    // ì œëª©ë³„ë¡œ ê·¸ë£¹í™”\r\n    [...serverDocs, ...localDocs].forEach(doc => {\r\n      const titleKey = doc.title.toLowerCase();\r\n      if (!titleGroups[titleKey]) {\r\n        titleGroups[titleKey] = [];\r\n      }\r\n      titleGroups[titleKey].push(doc);\r\n    });\r\n\r\n    // ê° ì œëª©ë³„ë¡œ ìµœì‹  ë²„ì „ ì„ íƒ ë° ë™ê¸°í™”\r\n    for (const [titleKey, docs] of Object.entries(titleGroups)) {\r\n      // ìµœì‹  ë¬¸ì„œ ì„ íƒ (updatedAt ê¸°ì¤€)\r\n      const latestDoc = docs.sort((a, b) => \r\n        new Date(b.updatedAt) - new Date(a.updatedAt)\r\n      )[0];\r\n\r\n      // ì„œë²„ì™€ ë¡œì»¬ ëª¨ë‘ì— ìµœì‹  ë²„ì „ ì €ì¥\r\n      await this.saveToServer(latestDoc);\r\n      this.saveToLocal(latestDoc);\r\n\r\n      finalDocuments.push(latestDoc);\r\n      console.log(`í†µí•© ì™„ë£Œ: ${latestDoc.title} (ìµœì‹ : ${latestDoc.updatedAt})`);\r\n    }\r\n\r\n    return { merged: finalDocuments.length, finalDocuments };\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì— ë¬¸ì„œ ì €ì¥ (ìˆ˜ì •: ì„œë²„ API êµ¬ì¡°ì— ë§ê²Œ ê°œì„ )\r\n   */\r\n  async saveToServer(doc) {\r\n    try {\r\n      // ë¨¼ì € í•´ë‹¹ IDì˜ ë¬¸ì„œê°€ ì„œë²„ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸\r\n      const existingResponse = await fetch(`${this.serverUrl}/${doc.id}`);\r\n      \r\n      if (existingResponse.ok) {\r\n        // ë¬¸ì„œê°€ ì¡´ì¬í•˜ë©´ PUTìœ¼ë¡œ ì—…ë°ì´íŠ¸\r\n        const updateResponse = await fetch(`${this.serverUrl}/${doc.id}`, {\r\n          method: 'PUT',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            content: doc.content,\r\n            title: doc.title\r\n          })\r\n        });\r\n        \r\n        if (!updateResponse.ok) {\r\n          throw new Error(`ì„œë²„ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${updateResponse.status}`);\r\n        }\r\n        \r\n        console.log(`âœ… ì„œë²„ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${doc.title}`);\r\n      } else {\r\n        // ë¬¸ì„œê°€ ì—†ìœ¼ë©´ POSTë¡œ ìƒˆë¡œ ìƒì„±\r\n        const createResponse = await fetch(this.serverUrl, {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({\r\n            title: doc.title,\r\n            content: doc.content\r\n          })\r\n        });\r\n        \r\n        if (!createResponse.ok) {\r\n          throw new Error(`ì„œë²„ ìƒì„± ì‹¤íŒ¨: ${createResponse.status}`);\r\n        }\r\n        \r\n        const result = await createResponse.json();\r\n        console.log(`âœ… ì„œë²„ ìƒì„± ì™„ë£Œ: ${doc.title} (ID: ${result.id})`);\r\n        \r\n        // ìƒˆë¡œ ìƒì„±ëœ IDê°€ ë‹¤ë¥´ë©´ ë¡œì»¬ì—ì„œë„ ì—…ë°ì´íŠ¸\r\n        if (result.id !== doc.id) {\r\n          console.log(`ğŸ”„ ID ë³€ê²½: ${doc.id} â†’ ${result.id}`);\r\n          \r\n          // ê¸°ì¡´ ë¡œì»¬ ë°ì´í„° ì‚­ì œ\r\n          localStorage.removeItem(`miki_document_${doc.id}`);\r\n          localStorage.removeItem(`miki_title_${doc.id}`);\r\n          \r\n          // ìƒˆ IDë¡œ ì €ì¥\r\n          doc.id = result.id;\r\n          this.saveToLocal(doc);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(`ì„œë²„ ì €ì¥ ì˜¤ë¥˜ (${doc.title}):`, error);\r\n      throw error; // ì—ëŸ¬ë¥¼ ìƒìœ„ë¡œ ì „íŒŒ\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë¬¸ì„œ ì €ì¥\r\n   */\r\n  saveToLocal(doc) {\r\n    try {\r\n      const docKey = `miki_document_${doc.id}`;\r\n      const titleKey = `miki_title_${doc.id}`;\r\n      \r\n      localStorage.setItem(docKey, JSON.stringify({\r\n        id: doc.id,\r\n        title: doc.title,\r\n        content: doc.content,\r\n        updatedAt: doc.updatedAt || new Date().toISOString()\r\n      }));\r\n      \r\n      localStorage.setItem(titleKey, doc.title);\r\n    } catch (error) {\r\n      console.error(`ë¡œì»¬ ì €ì¥ ì˜¤ë¥˜ (${doc.title}):`, error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\r\n   */\r\n  updateRecentDocuments(documents) {\r\n    try {\r\n      const recentDocs = documents\r\n        .sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt))\r\n        .slice(0, 20)\r\n        .map(doc => ({\r\n          id: doc.id,\r\n          title: doc.title,\r\n          updatedAt: doc.updatedAt\r\n        }));\r\n\r\n      localStorage.setItem('miki_recent_docs', JSON.stringify(recentDocs));\r\n      console.log(`ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì—…ë°ì´íŠ¸: ${recentDocs.length}ê°œ`);\r\n    } catch (error) {\r\n      console.error('ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì—…ë°ì´íŠ¸ ì˜¤ë¥˜:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì¦‰ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ (UIì—ì„œ í˜¸ì¶œìš©)\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\r\n   * @returns {Object} - ì •ë¦¬ ê²°ê³¼\r\n   */\r\n  immediateLocalCleanup(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    console.log('=== ì¦‰ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì‹œì‘ ===');\r\n    console.log(`ë³´ì¡´í•  ë¬¸ì„œ: ${keepTitles.join(', ')}`);\r\n    \r\n    const stats = {\r\n      totalDocuments: 0,\r\n      preservedDocuments: 0,\r\n      deletedDocuments: 0,\r\n      spaceSaved: 0\r\n    };\r\n    \r\n    try {\r\n      // ëª¨ë“  ë¬¸ì„œ í‚¤ ìˆ˜ì§‘\r\n      const documentKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n      stats.totalDocuments = documentKeys.length;\r\n      \r\n      console.log(`ğŸ“Š ì´ ${documentKeys.length}ê°œ ë¬¸ì„œ ë°œê²¬`);\r\n      \r\n      const toDelete = [];\r\n      const toKeep = [];\r\n      \r\n      // ì œëª©ë³„ ê·¸ë£¹í™” ë° ë¶„ë¥˜\r\n      const titleGroups = {};\r\n      \r\n      for (const key of documentKeys) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          if (!docData || !docData.title) continue;\r\n          \r\n          const title = docData.title.toLowerCase();\r\n          const shouldKeep = keepTitles.some(keepTitle => \r\n            title === keepTitle.toLowerCase()\r\n          );\r\n          \r\n          if (shouldKeep) {\r\n            if (!titleGroups[title]) {\r\n              titleGroups[title] = [];\r\n            }\r\n            titleGroups[title].push({ key, data: docData });\r\n          } else {\r\n            toDelete.push({ key, title: docData.title });\r\n          }\r\n        } catch (e) {\r\n          // íŒŒì‹± ì˜¤ë¥˜ê°€ ìˆëŠ” ë¬¸ì„œëŠ” ì‚­ì œ\r\n          toDelete.push({ key, title: 'íŒŒì‹± ì˜¤ë¥˜' });\r\n        }\r\n      }\r\n      \r\n      // ê° ì œëª©ë³„ë¡œ ìµœì‹  ë²„ì „ë§Œ ë³´ì¡´\r\n      for (const [title, docs] of Object.entries(titleGroups)) {\r\n        if (docs.length > 1) {\r\n          // ìµœì‹  ë¬¸ì„œ ì„ íƒ\r\n          const latest = docs.sort((a, b) => \r\n            new Date(b.data.updatedAt || 0) - new Date(a.data.updatedAt || 0)\r\n          )[0];\r\n          \r\n          // ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œ ëª©ë¡ì— ì¶”ê°€\r\n          docs.forEach(doc => {\r\n            if (doc.key !== latest.key) {\r\n              toDelete.push({ key: doc.key, title: doc.data.title });\r\n            } else {\r\n              toKeep.push({ key: doc.key, title: doc.data.title });\r\n            }\r\n          });\r\n        } else {\r\n          toKeep.push({ key: docs[0].key, title: docs[0].data.title });\r\n        }\r\n      }\r\n      \r\n      // ì‚­ì œ ì‹¤í–‰\r\n      for (const item of toDelete) {\r\n        try {\r\n          const docId = item.key.replace('miki_document_', '');\r\n          localStorage.removeItem(item.key);\r\n          localStorage.removeItem(`miki_title_${docId}`);\r\n          stats.deletedDocuments++;\r\n          console.log(`âŒ ì‚­ì œ: ${item.key} - \"${item.title}\"`);\r\n        } catch (e) {\r\n          console.error(`ì‚­ì œ ì‹¤íŒ¨: ${item.key}`, e);\r\n        }\r\n      }\r\n      \r\n      stats.preservedDocuments = toKeep.length;\r\n      \r\n      // ë³´ì¡´ëœ ë¬¸ì„œ ë¡œê·¸\r\n      toKeep.forEach(item => {\r\n        console.log(`âœ… ë³´ì¡´: ${item.key} - \"${item.title}\"`);\r\n      });\r\n      \r\n      console.log('=== ì¦‰ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì™„ë£Œ ===');\r\n      console.log(`ë³´ì¡´: ${stats.preservedDocuments}ê°œ, ì‚­ì œ: ${stats.deletedDocuments}ê°œ`);\r\n      \r\n      return stats;\r\n    } catch (error) {\r\n      console.error('ì¦‰ì‹œ ì •ë¦¬ ì˜¤ë¥˜:', error);\r\n      return { ...stats, error: error.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì•ˆì „í•œ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ (ì‹¤ì œ ë³€ê²½ ì—†ì´ ì‹œë®¬ë ˆì´ì…˜ë§Œ)\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\r\n   * @returns {Object} - í…ŒìŠ¤íŠ¸ ê²°ê³¼\r\n   */\r\n  async safeTestSync(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    console.log('=== ì•ˆì „í•œ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì‹œì‘ (ì‹¤ì œ ë³€ê²½ ì—†ìŒ) ===');\r\n    \r\n    try {\r\n      // 1ë‹¨ê³„: í˜„ì¬ ìƒíƒœ ë¶„ì„\r\n      const serverDocs = await this.getServerDocuments();\r\n      const localDocs = this.getLocalDocuments();\r\n      \r\n      console.log(`ğŸ“Š í˜„ì¬ ìƒíƒœ: ì„œë²„ ${serverDocs.length}ê°œ, ë¡œì»¬ ${localDocs.length}ê°œ`);\r\n      \r\n      // 2ë‹¨ê³„: í•„í„°ë§ ì‹œë®¬ë ˆì´ì…˜\r\n      const serverFiltered = serverDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      const localFiltered = localDocs.filter(doc => \r\n        keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      \r\n      // 3ë‹¨ê³„: ì‚­ì œ ëŒ€ìƒ ë¶„ì„\r\n      const serverToDelete = serverDocs.filter(doc => \r\n        !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      const localToDelete = localDocs.filter(doc => \r\n        !keepTitles.some(title => title.toLowerCase() === doc.title.toLowerCase())\r\n      );\r\n      \r\n      // 4ë‹¨ê³„: í†µí•© ì‹œë®¬ë ˆì´ì…˜\r\n      const titleGroups = {};\r\n      [...serverFiltered, ...localFiltered].forEach(doc => {\r\n        const titleKey = doc.title.toLowerCase();\r\n        if (!titleGroups[titleKey]) {\r\n          titleGroups[titleKey] = [];\r\n        }\r\n        titleGroups[titleKey].push(doc);\r\n      });\r\n      \r\n      const mergeResults = [];\r\n      for (const [titleKey, docs] of Object.entries(titleGroups)) {\r\n        const latest = docs.sort((a, b) => \r\n          new Date(b.updatedAt) - new Date(a.updatedAt)\r\n        )[0];\r\n        mergeResults.push({\r\n          title: latest.title,\r\n          selectedSource: latest.source,\r\n          versions: docs.length,\r\n          latestUpdate: latest.updatedAt\r\n        });\r\n      }\r\n      \r\n      const testResult = {\r\n        success: true,\r\n        currentState: {\r\n          server: serverDocs.length,\r\n          local: localDocs.length\r\n        },\r\n        afterFiltering: {\r\n          server: serverFiltered.length,\r\n          local: localFiltered.length\r\n        },\r\n        toDelete: {\r\n          server: serverToDelete.length,\r\n          local: localToDelete.length\r\n        },\r\n        finalMerged: mergeResults.length,\r\n        mergeDetails: mergeResults,\r\n        message: `í…ŒìŠ¤íŠ¸ ì™„ë£Œ: ${mergeResults.length}ê°œ ë¬¸ì„œê°€ ìµœì¢… ë³´ì¡´ë©ë‹ˆë‹¤`\r\n      };\r\n      \r\n      console.log('=== ì•ˆì „í•œ ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');\r\n      console.log('ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼:', testResult);\r\n      \r\n      return testResult;\r\n      \r\n    } catch (error) {\r\n      console.error('ë™ê¸°í™” í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);\r\n      return {\r\n        success: false,\r\n        error: error.message,\r\n        message: 'í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨'\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * í˜„ì¬ ë™ê¸°í™” ìƒíƒœ ì§„ë‹¨\r\n   */\r\n  async diagnoseCurrentState() {\r\n    console.log('=== ë™ê¸°í™” ìƒíƒœ ì§„ë‹¨ ì‹œì‘ ===');\r\n    \r\n    try {\r\n      const serverDocs = await this.getServerDocuments();\r\n      const localDocs = this.getLocalDocuments();\r\n      \r\n      // ì œëª©ë³„ ê·¸ë£¹í™”\r\n      const serverTitles = new Set(serverDocs.map(doc => doc.title.toLowerCase()));\r\n      const localTitles = new Set(localDocs.map(doc => doc.title.toLowerCase()));\r\n      \r\n      const onlyServer = serverDocs.filter(doc => \r\n        !localTitles.has(doc.title.toLowerCase())\r\n      );\r\n      const onlyLocal = localDocs.filter(doc => \r\n        !serverTitles.has(doc.title.toLowerCase())\r\n      );\r\n      const both = serverDocs.filter(doc => \r\n        localTitles.has(doc.title.toLowerCase())\r\n      );\r\n      \r\n      const diagnosis = {\r\n        server: {\r\n          total: serverDocs.length,\r\n          titles: Array.from(serverTitles)\r\n        },\r\n        local: {\r\n          total: localDocs.length,\r\n          titles: Array.from(localTitles)\r\n        },\r\n        discrepancies: {\r\n          onlyServer: onlyServer.length,\r\n          onlyLocal: onlyLocal.length,\r\n          both: both.length\r\n        },\r\n        details: {\r\n          onlyServerDocs: onlyServer.map(doc => ({ id: doc.id, title: doc.title })),\r\n          onlyLocalDocs: onlyLocal.map(doc => ({ id: doc.id, title: doc.title })),\r\n          sharedDocs: both.map(doc => ({ id: doc.id, title: doc.title }))\r\n        }\r\n      };\r\n      \r\n      console.log('ğŸ“Š ì§„ë‹¨ ì™„ë£Œ:', diagnosis);\r\n      return diagnosis;\r\n      \r\n    } catch (error) {\r\n      console.error('ì§„ë‹¨ ì˜¤ë¥˜:', error);\r\n      return { error: error.message };\r\n    }\r\n  }\r\n}\r\n\r\nexport default DataSyncManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\DocumentSearchManager.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'API_TYPE' is assigned a value but never used.","line":7,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'API_KEY' is assigned a value but never used.","line":8,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":14},{"ruleId":"no-unused-vars","severity":1,"message":"'SERVER_URL' is assigned a value but never used.","line":9,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":9,"endColumn":17},{"ruleId":"no-unused-vars","severity":1,"message":"'CLAUDE_API_URL' is assigned a value but never used.","line":11,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":35,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":35,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[929,970],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1033,1093],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":58,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":58,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1782,1832],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":64,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":64,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2072,2113],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":67,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":67,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2167,2208],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":73,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":73,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2358,2425],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":78,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":78,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2638,2683],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":83,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":83,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2824,2864],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":86,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":86,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2888,2929],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":88,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":88,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2958,2997],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3129,3161],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":137,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":137,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4333,4398],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":157,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":157,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5149,5222],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":160,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":160,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5297,5348],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":174,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":174,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5835,5899],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5951,5999],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":187,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":187,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6274,6321],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":212,"column":19,"nodeType":"MemberExpression","messageId":"unexpected","endLine":212,"endColumn":30,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7208,7268],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":229,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":229,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[7663,7698],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":233,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":233,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7737,7798],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":237,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":237,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7877,7914],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":248,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":248,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8053,8085],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":255,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":255,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8254,8293],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":285,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":285,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9222,9277],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":288,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":288,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[9333,9370],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":301,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":301,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9605,9638],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":307,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":307,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9793,9832],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":313,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":313,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10014,10063],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":326,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":326,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10528,10591],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":334,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":334,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10844,10927],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":335,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":335,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10936,10969],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":336,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":336,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[10978,11024],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":337,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":337,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11033,11121],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":342,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":342,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11197,11271],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":345,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":345,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11325,11378],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":368,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":368,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12258,12298],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":379,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":379,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[12591,12626],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":400,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":400,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13072,13107],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":405,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":405,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13205,13260],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":408,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":408,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13315,13345],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":418,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":418,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13622,13657],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":433,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":433,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14189,14252],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":439,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":439,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14391,14481],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":440,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":440,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14492,14538],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":448,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":448,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14743,14790],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":454,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":454,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14964,15010],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":462,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":462,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15226,15267],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":468,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":468,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15441,15482],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":480,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":480,"endColumn":28,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15957,16082],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":483,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":483,"endColumn":27,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[16148,16194],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":492,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":492,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16415,16476],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":497,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":497,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16590,16651],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":500,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":500,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16745,16806],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":503,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":503,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[16840,16894],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":507,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":507,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[16993,17048],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":518,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":518,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[17307,17357],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":531,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":531,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[17747,17797],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":543,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":543,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[18192,18234],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":553,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":553,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[18524,18561],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":614,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":614,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[20249,20284],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":620,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":620,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[20424,20476],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":694,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":694,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[22322,22361],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":708,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":708,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[22784,22824],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":741,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":741,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[23816,23859],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":744,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":744,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[23916,23950],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":746,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":746,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[23989,24026],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":757,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":757,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24249,24284],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":763,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":763,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24431,24464],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":769,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":769,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24636,24664],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":773,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":773,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24776,24822],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":780,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":780,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[24959,24984],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":785,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":785,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25209,25261],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":790,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":790,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25371,25400],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":795,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":795,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25622,25677],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":801,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":801,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25822,25866],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":805,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":805,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[25919,25965],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":808,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":808,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[26024,26061],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":839,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":839,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[26830,26900],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":840,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":840,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[26905,26953],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":856,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":856,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[27336,27393],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":897,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":897,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[28718,28755],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":899,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":899,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[28783,28820],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":933,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":933,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[29817,29856],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":951,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":951,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[30417,30486],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":961,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":961,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[30830,30899],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":972,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":972,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[31219,31283],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":981,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":981,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[31461,31513],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":998,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":998,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[32039,32077],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1000,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1000,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[32118,32165],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1005,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1005,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[32277,32339],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1020,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1020,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[32898,32955],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1022,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1022,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[32992,33033],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1027,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1027,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33085,33123],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1028,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1028,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33130,33176],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1029,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1029,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33183,33235],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1030,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1030,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33242,33292],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1031,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1031,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33299,33364],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1034,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1034,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33413,33441],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1035,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1035,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33450,33492],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1036,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1036,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33501,33549],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1040,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1040,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[33610,33658],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1041,"column":39,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1041,"endColumn":50},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":1045,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":1045,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[33770,33812],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":107,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// DocumentSearchManager.js\n// AI íŒ¨ë„ê³¼ ë§í¬ ìƒì„± ì‚¬ì´ì— ê³µìœ ë˜ëŠ” ë¬¸ì„œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤\n\nimport DocumentSummaryManager from './DocumentSummaryManager.js';\n\n// í™˜ê²½ ë³€ìˆ˜ ì²˜ë¦¬ - Jest í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ ì‚¬ìš©\nconst API_TYPE = 'claude';\nconst API_KEY = '';\nconst SERVER_URL = 'http://localhost:3001';\n\nconst CLAUDE_API_URL = 'https://api.anthropic.com/v1/messages';\nconst CLAUDE_MODEL = 'claude-3-5-haiku-20241022';\n\n/**\n * ë¬¸ì„œ ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” í´ë˜ìŠ¤\n * í‚¤ì›Œë“œ ê²€ìƒ‰ê³¼ ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ì„ ê²°í•©í•˜ì—¬ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì œê³µ\n */\nclass DocumentSearchManager {\n  constructor() {\n    this.summaryManager = new DocumentSummaryManager();\n    this.documentCache = new Map(); // ë¬¸ì„œ IDë¥¼ í‚¤ë¡œ, ë¬¸ì„œ ë‚´ìš© ë° ë©”íƒ€ë°ì´í„°ë¥¼ ê°’ìœ¼ë¡œ ì €ì¥\n    this.documentEmbeddings = new Map(); // ë¬¸ì„œ IDë¥¼ í‚¤ë¡œ, ë¬¸ì„œ ì„ë² ë”©ì„ ê°’ìœ¼ë¡œ ì €ì¥\n    this.maxResults = 10; // ê²€ìƒ‰ ê²°ê³¼ ìµœëŒ€ ê°œìˆ˜\n    this.useAiSearch = true; // AI ê²€ìƒ‰ ì‚¬ìš© ì—¬ë¶€\n    \n    // ì´ˆê¸°í™” ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì§„ë‹¨ ì‹¤í–‰\n    this.analyzeLocalStorage();\n  }\n\n  /**\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì „ì²´ ë¶„ì„ - ë””ë²„ê¹…ìš©\n   */\n  analyzeLocalStorage() {\n    try {\n      console.log(\"===== ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„ ì‹œì‘ =====\");\n      const allKeys = Object.keys(localStorage);\n      \n      console.log(`ì´ ${allKeys.length}ê°œ í•­ëª©ì´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`);\n      \n      // í‚¤ íŒ¨í„´ë³„ ë¶„ë¥˜\n      const patterns = {\n        document: allKeys.filter(key => key.includes('document')),\n        title: allKeys.filter(key => key.includes('title')),\n        content: allKeys.filter(key => key.includes('content')),\n        ai: allKeys.filter(key => key.includes('ai')),\n        temp: allKeys.filter(key => key.includes('temp')),\n        other: allKeys.filter(key => \n          !key.includes('document') && \n          !key.includes('title') && \n          !key.includes('content') && \n          !key.includes('ai') &&\n          !key.includes('temp')\n        )\n      };\n      \n      // íŒ¨í„´ë³„ ì¶œë ¥\n      Object.entries(patterns).forEach(([pattern, keys]) => {\n        console.log(`\\n[${pattern}] íŒ¨í„´: ${keys.length}ê°œ`);\n        keys.slice(0, 5).forEach(key => {\n          const value = localStorage.getItem(key);\n          const valuePreview = value ? \n            (value.length > 50 ? value.substring(0, 50) + '...' : value) : \n            '(ì—†ìŒ)';\n          console.log(`- ${key}: ${valuePreview}`);\n        });\n        if (keys.length > 5) {\n          console.log(`... ì™¸ ${keys.length - 5}ê°œ`);\n        }\n      });\n      \n      // miki_document íŒ¨í„´ ìƒì„¸ ë¶„ì„\n      const documentKeys = allKeys.filter(key => key.startsWith('miki_document_'));\n      console.log(`\\në¬¸ì„œ ë‚´ìš© í‚¤(miki_document_*): ${documentKeys.length}ê°œ`);\n      documentKeys.forEach(key => {\n        const docId = key.replace('miki_document_', '');\n        const content = localStorage.getItem(key);\n        const contentLength = content ? content.length : 0;\n        console.log(`- ${docId}: ${contentLength}ì`);\n        \n        // ê´€ë ¨ íƒ€ì´í‹€ í™•ì¸\n        const titleKey = `miki_title_${docId}`;\n        const title = localStorage.getItem(titleKey);\n        console.log(`  ì œëª©: ${title || '(ì—†ìŒ)'}`);\n      });\n      \n      console.log(\"===== ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„ ì™„ë£Œ =====\");\n    } catch (error) {\n      console.error(\"ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„ ì˜¤ë¥˜:\", error);\n    }\n  }\n\n  /**\n   * ëª¨ë“  ê°€ëŠ¥í•œ ë¬¸ì„œ í‚¤ íŒ¨í„´ ìŠ¤ìº” ë° ìˆ˜ì§‘\n   * @returns {Object} - í‚¤ íŒ¨í„´ë³„ ë¬¸ì„œ ì •ë³´\n   */\n  scanDocumentPatterns() {\n    try {\n      console.log(\"ë¬¸ì„œ ì €ì¥ íŒ¨í„´ ìŠ¤ìº” ì¤‘...\");\n      const allStorageKeys = Object.keys(localStorage);\n      \n      // í‚¤ íŒ¨í„´ ì •ì˜\n      const patterns = {\n        // í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ì„ì‹œ ë¬¸ì„œ\n        temp: {\n          title: 'miki_editor_title_temp',\n          content: 'miki_editor_content_temp',\n          savedAt: 'miki_editor_saved_at'\n        },\n        // ì €ì¥ëœ ë¬¸ì„œ íŒ¨í„´ë“¤\n        document: {\n          prefix: 'miki_document_',\n          titlePrefix: 'miki_title_'\n        },\n        // ê¸°íƒ€ íŒ¨í„´\n        recentDocs: 'miki_recent_docs',\n        conversations: 'miki_ai_conversations_'\n      };\n      \n      // íŒ¨í„´ë³„ ë¬¸ì„œ ìˆ˜ì§‘\n      const collectedDocs = {};\n      \n      // 1. í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ì„ì‹œ ë¬¸ì„œ\n      const tempTitle = localStorage.getItem(patterns.temp.title);\n      const tempContent = localStorage.getItem(patterns.temp.content);\n      const tempSavedAt = localStorage.getItem(patterns.temp.savedAt);\n      \n      if (tempTitle && tempContent) {\n        const tempDoc = {\n          id: this.slugify(tempTitle),\n          title: tempTitle,\n          content: tempContent,\n          savedAt: tempSavedAt,\n          path: `/doc/${this.slugify(tempTitle)}`,\n          isTemp: true\n        };\n        collectedDocs[tempDoc.id] = tempDoc;\n        console.log(`ì„ì‹œ ë¬¸ì„œ ë°œê²¬: \"${tempTitle}\" (${tempContent.length}ì)`);\n      }\n      \n      // 2. ì €ì¥ëœ ë¬¸ì„œ (miki_document_* íŒ¨í„´)\n      const documentKeys = allStorageKeys.filter(key => key.startsWith(patterns.document.prefix));\n      for (const key of documentKeys) {\n        try {\n          const docId = key.replace(patterns.document.prefix, '');\n          const titleKey = `${patterns.document.titlePrefix}${docId}`;\n          const rawDocContent = localStorage.getItem(key);\n          \n          // JSON í˜•ì‹ìœ¼ë¡œ ì €ì¥ëœ ë¬¸ì„œ íŒŒì‹± ì‹œë„\n          let docContent, docTitle;\n          \n          try {\n            // JSON íŒŒì‹± ì‹œë„\n            const docJson = JSON.parse(rawDocContent);\n            docTitle = docJson.title || localStorage.getItem(titleKey) || docId;\n            docContent = docJson.content || '';\n            \n            console.log(`JSON íŒŒì‹± ì„±ê³µ: ë¬¸ì„œ \"${docTitle}\" ë‚´ìš© ê¸¸ì´: ${docContent.length}ì`);\n          } catch (e) {\n            // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©\n            console.log(`JSON íŒŒì‹± ì‹¤íŒ¨, ì›ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©: ${e.message}`);\n            docTitle = localStorage.getItem(titleKey) || docId.replace(/-/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase());\n            docContent = rawDocContent;\n          }\n          \n          if (docId && docContent) {\n            const docObject = {\n              id: docId,\n              title: docTitle,\n              content: docContent,\n              path: `/doc/${docId}`,\n              isDocument: true\n            };\n            collectedDocs[docId] = docObject;\n            console.log(`ì €ì¥ëœ ë¬¸ì„œ ë°œê²¬: \"${docTitle}\" (${docContent.length}ì)`);\n          }\n        } catch (docError) {\n          console.error(`ë¬¸ì„œ í‚¤ ${key} ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:`, docError);\n        }\n      }\n      \n      // 3. ìµœê·¼ ë¬¸ì„œ ëª©ë¡\n      try {\n        const recentDocsJson = localStorage.getItem(patterns.recentDocs);\n        if (recentDocsJson) {\n          const recentDocs = JSON.parse(recentDocsJson);\n          if (Array.isArray(recentDocs)) {\n            console.log(`ìµœê·¼ ë¬¸ì„œ ëª©ë¡: ${recentDocs.length}ê°œ`);\n            \n            for (const doc of recentDocs) {\n              if (!doc.id && !doc.title) continue;\n              \n              const docId = doc.id || this.slugify(doc.title);\n              \n              // ì´ë¯¸ ìˆ˜ì§‘ëœ ë¬¸ì„œì¸ì§€ í™•ì¸\n              if (collectedDocs[docId]) {\n                // ì´ë¯¸ ìˆëŠ” ë¬¸ì„œë¼ë©´ ìµœê·¼ ë¬¸ì„œ í”Œë˜ê·¸ ì¶”ê°€\n                collectedDocs[docId].isRecent = true;\n                continue;\n              }\n              \n              // ë¬¸ì„œ ë‚´ìš© ê²€ìƒ‰ì„ ìœ„í•œ ì—¬ëŸ¬ í‚¤ íŒ¨í„´ ì‹œë„\n              const contentPatterns = [\n                `${patterns.document.prefix}${docId}`,\n                `miki_content_${docId}`,\n                `miki_doc_content_${docId}`\n              ];\n              \n              let docContent = null;\n              for (const pattern of contentPatterns) {\n                docContent = localStorage.getItem(pattern);\n                if (docContent) {\n                  console.log(`\"${doc.title}\" ë¬¸ì„œì˜ ë‚´ìš©ì„ ${pattern} í‚¤ì—ì„œ ì°¾ì•˜ìŠµë‹ˆë‹¤.`);\n                  break;\n                }\n              }\n              \n              // ìµœê·¼ ë¬¸ì„œ ì¶”ê°€\n              collectedDocs[docId] = {\n                id: docId,\n                title: doc.title,\n                content: docContent || '',\n                path: `/doc/${docId}`,\n                isRecent: true\n              };\n            }\n          }\n        }\n      } catch (e) {\n        console.warn(\"ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì²˜ë¦¬ ì˜¤ë¥˜:\", e);\n      }\n      \n      // ë¬¸ì„œ ìˆ˜ ì¶œë ¥\n      console.log(`ì´ ${Object.keys(collectedDocs).length}ê°œ ë¬¸ì„œ ë°œê²¬`);\n      \n      return Object.values(collectedDocs);\n    } catch (error) {\n      console.error(\"ë¬¸ì„œ íŒ¨í„´ ìŠ¤ìº” ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ëª¨ë“  ë¬¸ì„œ ì •ë³´ ë¡œë“œ\n   * @returns {Array} - ë¬¸ì„œ ê°ì²´ ë°°ì—´\n   */\n  getAllDocuments() {\n    try {\n      console.log(\"ëª¨ë“  ë¬¸ì„œ ì •ë³´ ë¡œë“œ ì¤‘...\");\n      \n      // ê°œì„ ëœ ë¬¸ì„œ íŒ¨í„´ ìŠ¤ìº” ì‚¬ìš©\n      const allDocuments = this.scanDocumentPatterns();\n      \n      // ë¬¸ì„œê°€ ì—†ìœ¼ë©´ ìƒ˜í”Œ ë¬¸ì„œ ì¶”ê°€\n      if (allDocuments.length === 0) {\n        console.log(\"ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤. ìƒ˜í”Œ ë¬¸ì„œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.\");\n        \n        // ìƒ˜í”Œ ë¬¸ì„œ ì¶”ê°€\n        const sampleDocs = [\n          {\n            id: 'welcome',\n            title: 'Miki ì‚¬ìš©ë²•',\n            content: '# Miki ì‚¬ìš©ë²•\\n\\nMikiëŠ” ë§ˆí¬ë‹¤ìš´ ê¸°ë°˜ ìœ„í‚¤ ì—ë””í„°ì…ë‹ˆë‹¤. ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\n\\n## ì£¼ìš” ê¸°ëŠ¥\\n\\n- ë§ˆí¬ë‹¤ìš´ í¸ì§‘\\n- AI ì—°ë™\\n- ë¬¸ì„œ ê²€ìƒ‰\\n- ë‚´ìš© ê¸°ë°˜ ë§í¬',\n            path: '/doc/welcome',\n            isCommon: true\n          },\n          {\n            id: 'markdown-guide',\n            title: 'ë§ˆí¬ë‹¤ìš´ ê°€ì´ë“œ',\n            content: '# ë§ˆí¬ë‹¤ìš´ ê°€ì´ë“œ\\n\\në§ˆí¬ë‹¤ìš´ì€ í…ìŠ¤íŠ¸ ê¸°ë°˜ì˜ ë§ˆí¬ì—… ì–¸ì–´ë¡œ, ì‰½ê²Œ ì½ê³  ì“¸ ìˆ˜ ìˆìœ¼ë©° HTMLë¡œ ë³€í™˜ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\\n\\n## ë¬¸ë²•\\n\\n### ì œëª©\\n# ì œëª© 1\\n## ì œëª© 2\\n\\n### ê°•ì¡°\\n**êµµê²Œ** ë˜ëŠ” *ê¸°ìš¸ì„*\\n\\n### ë§í¬\\n[ë§í¬ í…ìŠ¤íŠ¸](URL)',\n            path: '/doc/markdown-guide',\n            isCommon: true\n          }\n        ];\n        \n        sampleDocs.forEach(doc => {\n          allDocuments.push(doc);\n        });\n      }\n      \n      // ë¬¸ì„œ ìºì‹œ ì—…ë°ì´íŠ¸\n      allDocuments.forEach(doc => {\n        this.documentCache.set(doc.id, doc);\n      });\n      \n      console.log(\"ê²€ìƒ‰ ê°€ëŠ¥í•œ ëª¨ë“  ë¬¸ì„œ:\", allDocuments.length, \"ê±´\");\n      return allDocuments;\n    } catch (error) {\n      console.error(\"ë¬¸ì„œ ì •ë³´ ë¡œë“œ ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }\n\n  /**\n   * í‚¤ì›Œë“œ ê¸°ë°˜ ë¡œì»¬ ë¬¸ì„œ ê²€ìƒ‰\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchByKeyword(query) {\n    if (!query || query.trim().length === 0) return [];\n    \n    console.log(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ì‹œì‘:\", query);\n    const searchQuery = query.toLowerCase().trim();\n    \n    try {\n      // URL í˜•ì‹ì´ë©´ ê²€ìƒ‰í•˜ì§€ ì•Šê³  ë°”ë¡œ ë°˜í™˜\n      if (/^https?:\\/\\//i.test(searchQuery)) {\n        console.log(\"URL í˜•ì‹ ê°ì§€:\", searchQuery);\n        return [{ id: 'url', title: `URL: ${searchQuery}`, path: searchQuery, isUrl: true }];\n      }\n      \n      // ë¬¸ì„œ ë¡œë“œ\n      const allDocuments = this.getAllDocuments();\n      console.log(`ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œ: ${allDocuments.length}ê°œ`);\n      \n      // ê²€ìƒ‰ì–´ë¡œ í•„í„°ë§ (ê°œì„ ëœ ë¡œê·¸ ì¶”ê°€)\n      const searchResults = allDocuments.filter(doc => {\n        const docTitle = (doc.title || '').toLowerCase();\n        \n        // ë‚´ìš© í™•ì¸ - content ì†ì„±ì´ ìˆëŠ”ì§€ í™•ì¸\n        let docContent = '';\n        if (doc.content) {\n          if (typeof doc.content === 'string') {\n            docContent = doc.content.toLowerCase();\n          } else if (typeof doc.content === 'object') {\n            // contentê°€ ê°ì²´ì¸ ê²½ìš° (ë‚´ìš© ë””ë²„ê¹…)\n            console.log(`ë¬¸ì„œ \"${doc.title}\"ì˜ contentê°€ ê°ì²´ì…ë‹ˆë‹¤:`, doc.content);\n            docContent = JSON.stringify(doc.content).toLowerCase();\n          }\n        }\n        \n        const titleMatch = docTitle.includes(searchQuery);\n        const contentMatch = docContent && docContent.includes(searchQuery);\n        \n        console.log(`ë¬¸ì„œ \"${doc.title}\" ê²€ìƒ‰ ê²°ê³¼: ì œëª© ì¼ì¹˜=${titleMatch}, ë‚´ìš© ì¼ì¹˜=${contentMatch}`);\n        console.log(`- ì œëª©: ${docTitle}`);\n        console.log(`- ë‚´ìš© íƒ€ì…: ${typeof doc.content}`);\n        console.log(`- ë‚´ìš© ì¼ë¶€: ${docContent ? docContent.substring(0, 50) + '...' : '(ë‚´ìš© ì—†ìŒ)'}`);\n        \n        return titleMatch || contentMatch;\n      });\n      \n      console.log(`í‚¤ì›Œë“œ \"${searchQuery}\" ê²€ìƒ‰ ê²°ê³¼: ${searchResults.length}ê°œ ë¬¸ì„œ ì¼ì¹˜`);\n      \n      if (searchResults.length > 0) {\n        console.log(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼:\", searchResults.length, \"ê±´\");\n        \n        // í˜„ì¬ ë¬¸ì„œ > ì œëª© ì¼ì¹˜ > ë‚´ìš© ì¼ì¹˜ ìˆœìœ¼ë¡œ ì •ë ¬\n        return searchResults.sort((a, b) => {\n          if (a.isCurrent && !b.isCurrent) return -1;\n          if (!a.isCurrent && b.isCurrent) return 1;\n          \n          const aTitleMatch = a.title.toLowerCase().includes(searchQuery);\n          const bTitleMatch = b.title.toLowerCase().includes(searchQuery);\n          \n          if (aTitleMatch && !bTitleMatch) return -1;\n          if (!aTitleMatch && bTitleMatch) return 1;\n          \n          return a.title.localeCompare(b.title);\n        }).slice(0, this.maxResults).map(doc => ({\n          id: doc.id,\n          title: doc.title + (doc.isCurrent ? ' (í˜„ì¬ ë¬¸ì„œ)' : doc.isRecent ? ' (ìµœê·¼ ë¬¸ì„œ)' : ''),\n          path: doc.path,\n          preview: doc.content ? doc.content.substring(0, 100) + '...' : null\n        }));\n      }\n      \n      // ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ìƒˆ ë¬¸ì„œ ë§Œë“¤ê¸° ì˜µì…˜ ì œê³µ\n      console.log(\"ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ, ìƒˆ ë¬¸ì„œ ë§Œë“¤ê¸° ì˜µì…˜ ì œê³µ\");\n      return [\n        { \n          id: 'new_' + searchQuery, \n          title: `\"${searchQuery}\" ìƒˆ ë¬¸ì„œ ìƒì„±`, \n          path: `/doc/${this.slugify(searchQuery)}`,\n          preview: `\"${searchQuery}\" ë¬¸ì„œë¥¼ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.`, \n          isCreateNew: true \n        }\n      ];\n    } catch (error) {\n      console.error(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [\n        { \n          id: 'error', \n          title: 'ì˜¤ë¥˜ ë°œìƒ - URL ì§ì ‘ ì…ë ¥', \n          path: '#',\n          preview: 'URLì„ ì§ì ‘ ì…ë ¥í•˜ì—¬ ì™¸ë¶€ ë§í¬ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', \n          isError: true \n        }\n      ];\n    }\n  }\n\n  /**\n   * ì˜ë¯¸ ê¸°ë°˜ ë¬¸ì„œ ê²€ìƒ‰ - í† í° ìµœì í™”ëœ ê²€ìƒ‰ êµ¬í˜„\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchBySemantic(query) {\n    if (!query || query.trim().length === 0) return [];\n    \n    console.log(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ì‹œì‘:\", query);\n    \n    try {\n      // 1ë‹¨ê³„: ë¡œì»¬ ë¬¸ì„œ ê°€ì ¸ì˜¤ê¸°\n      const allDocuments = this.getAllDocuments();\n      console.log(`ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œ: ${allDocuments.length}ê°œ`);\n      \n      if (allDocuments.length === 0) {\n        console.log(\"ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤\");\n        return [];\n      }\n      \n      // 2ë‹¨ê³„: í† í° ìµœì í™”ë¥¼ ìœ„í•œ ë¡œì»¬ í•„í„°ë§\n      // ì¿¼ë¦¬ë¥¼ ì˜ë¯¸ ìˆëŠ” í‚¤ì›Œë“œë¡œ ë¶„ë¦¬\n      const queryText = query.toLowerCase().trim();\n      // ë‹¨ì–´ ìµœì†Œ ê¸¸ì´ë¥¼ 0ìœ¼ë¡œ ë‚®ì¶¤ (ëª¨ë“  ë‹¨ì–´ í—ˆìš©)\n      const queryWords = queryText.split(/\\s+/).filter(word => word.length > 0);\n      \n      console.log(\"ê²€ìƒ‰ í‚¤ì›Œë“œ:\", queryWords);\n      \n      // ê° ë¬¸ì„œë³„ ê´€ë ¨ë„ ì ìˆ˜ ê³„ì‚° (ê°„ë‹¨í•œ TF-IDF ìœ ì‚¬)\n      const scoredDocuments = allDocuments.map(doc => {\n        try {\n          // ë¬¸ì„œ í…ìŠ¤íŠ¸ ì¤€ë¹„\n          const docTitle = (doc.title || '').toLowerCase();\n          \n          // ë‚´ìš© í™•ì¸ - content ì†ì„±ì´ ìˆëŠ”ì§€ í™•ì¸\n          let docContent = '';\n          if (doc.content) {\n            if (typeof doc.content === 'string') {\n              docContent = doc.content.toLowerCase();\n            } else if (typeof doc.content === 'object') {\n              // contentê°€ ê°ì²´ì¸ ê²½ìš° (ë‚´ìš© ë””ë²„ê¹…)\n              console.log(`ë¬¸ì„œ \"${doc.title}\"ì˜ contentê°€ ê°ì²´ì…ë‹ˆë‹¤:`, doc.content);\n              docContent = JSON.stringify(doc.content).toLowerCase();\n            }\n          }\n          \n          // ë””ë²„ê¹…ìš© ë¡œê·¸\n          console.log(`ë¬¸ì„œ \"${doc.title}\" ë‚´ìš© ê²€ìƒ‰ ì‹œì‘ (ë‚´ìš© ê¸¸ì´: ${docContent ? docContent.length : 0}ì)`);\n          console.log(`- ë‚´ìš© íƒ€ì…: ${typeof doc.content}`);\n          \n          // ê¸°ë³¸ ì ìˆ˜ ê³„ì‚°\n          let score = 0;\n          \n          // ì œëª©ì— ì¿¼ë¦¬ ì „ì²´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ë†’ì€ ì ìˆ˜\n          if (docTitle.includes(queryText)) {\n            score += 15;  // ì ìˆ˜ ìƒí–¥ ì¡°ì •\n            console.log(`- ì œëª© ì „ì²´ ì¼ì¹˜ (${queryText}): +15ì `);\n          }\n          \n          // ë‚´ìš©ì— ì¿¼ë¦¬ ì „ì²´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì ìˆ˜ ì¶”ê°€\n          if (docContent && docContent.includes(queryText)) {\n            score += 8;  // ì ìˆ˜ ìƒí–¥ ì¡°ì •\n            console.log(`- ë‚´ìš© ì „ì²´ ì¼ì¹˜ (${queryText}): +8ì `);\n          }\n          \n          // ê° ì¿¼ë¦¬ ë‹¨ì–´ë³„ ì ìˆ˜ ê³„ì‚°\n          for (const word of queryWords) {\n            // ì œëª©ì— ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì ìˆ˜ ì¶”ê°€\n            if (docTitle.includes(word)) {\n              score += 3;\n              console.log(`- ì œëª© ë‹¨ì–´ ì¼ì¹˜ (${word}): +3ì `);\n            }\n            \n            // ë‚´ìš©ì— ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì ìˆ˜ ì¶”ê°€ (ê°€ì¤‘ì¹˜ ì¦ê°€)\n            if (docContent && docContent.includes(word)) {\n              score += 2;\n              console.log(`- ë‚´ìš© ë‹¨ì–´ ì¼ì¹˜ (${word}): +2ì `);\n            }\n            \n            // ë‹¨ì–´ ë°œìƒ ë¹ˆë„ì— ë”°ë¼ ì¶”ê°€ ì ìˆ˜\n            try {\n              const titleMatches = (docTitle.match(new RegExp(word, 'gi')) || []).length;\n              const contentMatches = docContent ? (docContent.match(new RegExp(word, 'gi')) || []).length : 0;\n              \n              score += titleMatches * 0.5;\n              score += contentMatches * 0.3;\n              \n              if (titleMatches > 0 || contentMatches > 0) {\n                console.log(`- ë‹¨ì–´ ë¹ˆë„ (${word}): ì œëª©=${titleMatches}íšŒ, ë‚´ìš©=${contentMatches}íšŒ, +${titleMatches * 0.5 + contentMatches * 0.3}ì `);\n              }\n            } catch (regexError) {\n              console.warn(`ì •ê·œì‹ ì˜¤ë¥˜ (${word}):`, regexError);\n            }\n          }\n          \n          // ë¬¸ì„œ ì¶”ê°€ ê°€ì¤‘ì¹˜\n          let finalScore = score;\n          \n          if (doc.content && doc.content.length > 0) {\n            finalScore *= 1.2;  // ë‚´ìš©ì´ ìˆëŠ” ë¬¸ì„œ ìš°ëŒ€\n            console.log(`- ë‚´ìš© ì¡´ì¬ ê°€ì¤‘ì¹˜: x1.2 (${score} -> ${finalScore})`);\n          }\n          \n          if (doc.isTemp) {\n            finalScore *= 1.5;  // í˜„ì¬ í¸ì§‘ ì¤‘ì¸ ë¬¸ì„œ ìš°ëŒ€\n            console.log(`- í˜„ì¬ ë¬¸ì„œ ê°€ì¤‘ì¹˜: x1.5 (${score} -> ${finalScore})`);\n          } else if (doc.isRecent) {\n            finalScore *= 1.3;  // ìµœê·¼ ë¬¸ì„œ ìš°ëŒ€\n            console.log(`- ìµœê·¼ ë¬¸ì„œ ê°€ì¤‘ì¹˜: x1.3 (${score} -> ${finalScore})`);\n          }\n          \n          console.log(`ë¬¸ì„œ \"${doc.title}\" ìµœì¢… ì ìˆ˜: ${finalScore}`);\n          \n          return { ...doc, score: finalScore };\n        } catch (docError) {\n          console.error(`ë¬¸ì„œ \"${doc.title}\" ì ìˆ˜ ê³„ì‚° ì˜¤ë¥˜:`, docError);\n          return { ...doc, score: 0 };\n        }\n      });\n      \n      // ë””ë²„ê¹…ìš©: ê° ë¬¸ì„œì˜ ì ìˆ˜ í™•ì¸ (ìƒìœ„ 5ê°œë§Œ)\n      const top5Docs = [...scoredDocuments]\n        .sort((a, b) => b.score - a.score)\n        .slice(0, 5);\n      \n      top5Docs.forEach(doc => {\n        console.log(`ë¬¸ì„œ \"${doc.title}\" ì ìˆ˜: ${doc.score}`);\n      });\n      \n      // ì ìˆ˜ ê¸°ì¤€ ì •ë ¬ ë° í•„í„°ë§\n      const sortedDocuments = scoredDocuments\n        .filter(doc => doc.score > 0.5)  // ë‚®ì€ ì ìˆ˜ ë¬¸ì„œ ì œì™¸ (ì„ê³„ê°’ ë‚®ì¶¤)\n        .sort((a, b) => b.score - a.score);  // ì ìˆ˜ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬\n      \n      // 3ë‹¨ê³„: ìµœì¢… ê²°ê³¼ êµ¬ì„±\n      // ìƒìœ„ ê²°ê³¼ë§Œ ë°˜í™˜ (í† í° ìµœì í™”)\n      const topResults = sortedDocuments.slice(0, this.maxResults);\n      \n      if (topResults.length > 0) {\n        console.log(`ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼: ${topResults.length}ê±´`);\n        return topResults.map(doc => ({\n          id: doc.id,\n          title: doc.title + (doc.isTemp ? ' (í˜„ì¬ ë¬¸ì„œ)' : doc.isRecent ? ' (ìµœê·¼ ë¬¸ì„œ)' : ''),\n          path: doc.path || `/doc/${doc.id}`,\n          preview: this.generatePreview(doc.content, queryText),\n          score: doc.score,\n          isSemanticMatch: true\n        }));\n      }\n      \n      // 4ë‹¨ê³„: ê²°ê³¼ê°€ ì—†ëŠ” ê²½ìš° ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ ì œê³µ\n      console.log(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ, ìƒˆ ë¬¸ì„œ ì˜µì…˜ ì œê³µ\");\n      return [{ \n        id: 'new_' + queryText, \n        title: `\"${queryText}\" ìƒˆ ë¬¸ì„œ ìƒì„±`, \n        path: `/doc/${this.slugify(queryText)}`,\n        preview: `\"${queryText}\"ì— ê´€í•œ ìƒˆ ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.`, \n        isCreateNew: true,\n        isSemanticMatch: true\n      }];\n    } catch (error) {\n      console.error(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [];\n    }\n  }\n  \n  /**\n   * ê²€ìƒ‰ì–´ ì£¼ë³€ ë¬¸ë§¥ì„ ì¶”ì¶œí•˜ì—¬ ë¯¸ë¦¬ë³´ê¸° ìƒì„±\n   * @param {string|object} content - ë¬¸ì„œ ë‚´ìš© (ë¬¸ìì—´ ë˜ëŠ” ê°ì²´)\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {string} - ë¯¸ë¦¬ë³´ê¸° í…ìŠ¤íŠ¸\n   */\n  generatePreview(content, query) {\n    if (!content || !query) return '';\n    \n    // contentê°€ ê°ì²´ì¸ ê²½ìš° ë¬¸ìì—´ë¡œ ë³€í™˜\n    let contentStr = '';\n    if (typeof content === 'string') {\n      contentStr = content;\n    } else if (typeof content === 'object') {\n      // contentê°€ ê°ì²´ì´ê³  content.contentê°€ ìˆìœ¼ë©´ í•´ë‹¹ ê°’ ì‚¬ìš©\n      if (content.content && typeof content.content === 'string') {\n        contentStr = content.content;\n      } else {\n        // ê·¸ ì™¸ì˜ ê²½ìš° JSON ë¬¸ìì—´ë¡œ ë³€í™˜\n        contentStr = JSON.stringify(content);\n      }\n    }\n    \n    // ë§ˆí¬ë‹¤ìš´ íƒœê·¸ ì œê±°\n    const cleanContent = contentStr.replace(/\\[(.*?)\\]\\(.*?\\)/g, '$1')\n                               .replace(/[*#_~`>]/g, '');\n    \n    // ê²€ìƒ‰ì–´ ìœ„ì¹˜ ì°¾ê¸°\n    const queryPosition = cleanContent.toLowerCase().indexOf(query.toLowerCase());\n    \n    if (queryPosition === -1) {\n      // ê²€ìƒ‰ì–´ê°€ ì •í™•íˆ ì—†ìœ¼ë©´ ë¬¸ì„œ ì•ë¶€ë¶„ ë°˜í™˜\n      return cleanContent.slice(0, 100) + '...';\n    }\n    \n    // ê²€ìƒ‰ì–´ ì£¼ë³€ ë¬¸ë§¥ ì¶”ì¶œ (ì•ë’¤ 50ì)\n    const start = Math.max(0, queryPosition - 50);\n    const end = Math.min(cleanContent.length, queryPosition + query.length + 50);\n    \n    let preview = cleanContent.slice(start, end);\n    \n    // ì‹œì‘/ë ë¶€ë¶„ ì²˜ë¦¬\n    if (start > 0) preview = '...' + preview;\n    if (end < cleanContent.length) preview = preview + '...';\n    \n    return preview;\n  }\n\n  /**\n   * AIë¥¼ í™œìš©í•œ ë¬¸ì„œ ê²€ìƒ‰ (Claude API ì‚¬ìš©)\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchByAi(query) {\n    if (!query || query.trim().length === 0) return [];\n    \n    console.log(\"AI ê¸°ë°˜ ê²€ìƒ‰ ì‹œì‘:\", query);\n    const searchQuery = query.toLowerCase().trim();\n    \n    try {\n      // ë¬¸ì„œ ë¡œë“œ\n      const allDocuments = this.getAllDocuments();\n      console.log(`AI ê²€ìƒ‰ ëŒ€ìƒ ë¬¸ì„œ: ${allDocuments.length}ê°œ`);\n      \n      if (allDocuments.length === 0) {\n        return [];\n      }\n      \n      // ëª¨ë“  ë¬¸ì„œ ë‚´ìš© í†µí•© (AIì— ì „ì†¡í•  ì»¨í…ìŠ¤íŠ¸)\n      let documentsContext = \"ê²€ìƒ‰ ê°€ëŠ¥í•œ ë¬¸ì„œ ëª©ë¡:\\n\\n\";\n      allDocuments.forEach((doc, index) => {\n        let docContent = '';\n        if (typeof doc.content === 'string') {\n          docContent = doc.content.substring(0, 200); // ë‚´ìš©ì€ ì¼ë¶€ë§Œ í¬í•¨\n        } else if (typeof doc.content === 'object') {\n          docContent = doc.content.content || JSON.stringify(doc.content).substring(0, 200);\n        }\n        \n        documentsContext += `${index + 1}. ì œëª©: ${doc.title}\\n`;\n        documentsContext += `   ë‚´ìš© ì¼ë¶€: ${docContent}...\\n\\n`;\n      });\n      \n      // Claude API ìš”ì²­ êµ¬ì„±\n      const prompt = `\në‹¹ì‹ ì€ ë¬¸ì„œ ê²€ìƒ‰ ë„ìš°ë¯¸ì…ë‹ˆë‹¤. ì•„ë˜ ë¬¸ì„œ ëª©ë¡ì—ì„œ ë‹¤ìŒ ê²€ìƒ‰ì–´ì™€ ê°€ì¥ ê´€ë ¨ì„±ì´ ë†’ì€ ë¬¸ì„œë¥¼ ì°¾ì•„ ë¬¸ì„œ ì œëª©, ê´€ë ¨ì„± ì ìˆ˜, ê°„ë‹¨í•œ ì´ìœ ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•´ì£¼ì„¸ìš”.\n\nê²€ìƒ‰ì–´: \"${searchQuery}\"\n\n${documentsContext}\n\nê²€ìƒ‰ ê²°ê³¼ëŠ” ë‹¤ìŒ JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜í•´ì£¼ì„¸ìš”:\n\\`\\`\\`json\n{\n  \"results\": [\n    {\n      \"title\": \"ë¬¸ì„œ ì œëª©\",\n      \"score\": 0.95,\n      \"reason\": \"ì´ ë¬¸ì„œê°€ ê²€ìƒ‰ì–´ì™€ ê´€ë ¨ì´ ìˆëŠ” ì´ìœ ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…\"\n    },\n    ...\n  ]\n}\n\\`\\`\\`\n\nìµœëŒ€ ${this.maxResults}ê°œì˜ ê´€ë ¨ ë¬¸ì„œë§Œ í¬í•¨í•´ ì£¼ì„¸ìš”. ê´€ë ¨ì„±ì´ ë†’ì€ ìˆœì„œë¡œ ì •ë ¬í•´ ì£¼ì„¸ìš”.\n`;\n\n      // ë°±ì—”ë“œ í”„ë¡ì‹œ ì„œë²„ë¥¼ í†µí•´ API í˜¸ì¶œ\n      const response = await fetch('http://localhost:3003/api/claude', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          model: CLAUDE_MODEL,\n          messages: [\n            {\n              role: \"user\",\n              content: [\n                {\n                  type: \"text\",\n                  text: prompt\n                }\n              ]\n            }\n          ],\n          max_tokens: 2000,\n          temperature: 0.1,\n        }),\n      });\n      \n      if (!response.ok) {\n        throw new Error(`AI ê²€ìƒ‰ API ì˜¤ë¥˜: ${response.status}`);\n      }\n      \n      const responseData = await response.json();\n      console.log(\"AI ê²€ìƒ‰ ì‘ë‹µ:\", responseData);\n      \n      // ì‘ë‹µì—ì„œ JSON íŒŒì‹±\n      const textContent = responseData.content\n        .filter(item => item.type === 'text')\n        .map(item => item.text)\n        .join('\\n');\n      \n      const jsonMatch = textContent.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n      if (!jsonMatch || !jsonMatch[1]) {\n        throw new Error(\"AI ì‘ë‹µì—ì„œ JSON í˜•ì‹ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\");\n      }\n      \n      const aiResults = JSON.parse(jsonMatch[1]);\n      console.log(\"íŒŒì‹±ëœ AI ê²€ìƒ‰ ê²°ê³¼:\", aiResults);\n      \n      // AI ê²°ê³¼ë¥¼ ì‹¤ì œ ë¬¸ì„œì™€ ë§¤í•‘\n      const mappedResults = aiResults.results.map(result => {\n        const matchedDoc = allDocuments.find(doc => \n          doc.title.toLowerCase() === result.title.toLowerCase() ||\n          doc.title.toLowerCase().includes(result.title.toLowerCase()) ||\n          result.title.toLowerCase().includes(doc.title.toLowerCase())\n        );\n        \n        if (matchedDoc) {\n          return {\n            id: matchedDoc.id,\n            title: matchedDoc.title,\n            path: matchedDoc.path,\n            preview: result.reason,\n            score: result.score,\n            isAiMatch: true\n          };\n        }\n        \n        // ë§¤ì¹­ë˜ëŠ” ë¬¸ì„œê°€ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ê²°ê³¼ ë°˜í™˜\n        return {\n          id: this.slugify(result.title),\n          title: result.title,\n          path: `/doc/${this.slugify(result.title)}`,\n          preview: result.reason,\n          score: result.score,\n          isAiMatch: true,\n          isCreateNew: true\n        };\n      });\n      \n      console.log(\"ìµœì¢… AI ê²€ìƒ‰ ê²°ê³¼:\", mappedResults);\n      return mappedResults;\n    } catch (error) {\n      console.error(\"AI ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ë³¸ í‚¤ì›Œë“œ ê²€ìƒ‰ìœ¼ë¡œ í´ë°±\n      console.log(\"AI ê²€ìƒ‰ ì‹¤íŒ¨, í‚¤ì›Œë“œ ê²€ìƒ‰ìœ¼ë¡œ ëŒ€ì²´\");\n      return await this.searchByKeyword(query);\n    }\n  }\n\n  /**\n   * í†µí•© ê²€ìƒ‰ - AI ê²€ìƒ‰ ë˜ëŠ” í‚¤ì›Œë“œ ê²€ìƒ‰ì„ ì„ íƒì ìœ¼ë¡œ ì‚¬ìš©\n   * @param {string} query - ê²€ìƒ‰ì–´\n   * @returns {Promise<Array>} - ê²€ìƒ‰ ê²°ê³¼ ë°°ì—´\n   */\n  async searchDocuments(query) {\n    console.log(\"í†µí•© ë¬¸ì„œ ê²€ìƒ‰ ì‹œì‘:\", query);\n    if (!query || query.trim().length === 0) return [];\n    \n    try {\n      // URL í˜•ì‹ í™•ì¸\n      if (/^https?:\\/\\//i.test(query.trim())) {\n        console.log(\"URL í˜•ì‹ ê°ì§€:\", query);\n        return [{ id: 'url', title: `URL: ${query.trim()}`, path: query.trim(), isUrl: true }];\n      }\n      \n      if (this.useAiSearch) {\n        // AI ê²€ìƒ‰ ì‚¬ìš© ì‹œ\n        console.log(\"AI ê²€ìƒ‰ ëª¨ë“œë¡œ ì‹¤í–‰\");\n        const aiResults = await this.searchByAi(query);\n        \n        if (aiResults.length > 0) {\n          console.log(\"AI ê²€ìƒ‰ ê²°ê³¼ ì°¾ìŒ:\", aiResults.length);\n          return aiResults;\n        }\n      }\n      \n      // AI ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ê±°ë‚˜ AI ê²€ìƒ‰ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ê¸°ì¡´ ë¡œì§ ì‹¤í–‰\n      // 1ë‹¨ê³„: í‚¤ì›Œë“œ ê²€ìƒ‰ ë¨¼ì € ì‹œë„\n      console.log(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ì‹œì‘\");\n      const keywordResults = await this.searchByKeyword(query);\n      \n      // í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ê°€ ìˆê³ , ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë©´ ê²°ê³¼ ë°˜í™˜\n      if (keywordResults.length > 0 && !keywordResults.some(result => result.isCreateNew)) {\n        console.log(\"í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ ì°¾ìŒ:\", keywordResults.length);\n        return keywordResults;\n      }\n      \n      // 2ë‹¨ê³„: í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ê±°ë‚˜ ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆìœ¼ë©´ ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ì‹¤í–‰\n      console.log(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ìœ¼ë¡œ ì „í™˜\");\n      const semanticResults = await this.searchBySemantic(query);\n      \n      // ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ì—ì„œ ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ì´ ì•„ë‹Œ ê²°ê³¼ê°€ ìˆëŠ” ê²½ìš°\n      if (semanticResults.length > 0 && semanticResults.some(result => !result.isCreateNew)) {\n        console.log(\"ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜:\", semanticResults.length);\n        return semanticResults;\n      }\n      \n      // 3ë‹¨ê³„: ë‘ ê²€ìƒ‰ ëª¨ë‘ ì‹¤ì œ ê²°ê³¼ê°€ ì—†ê³  ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆëŠ” ê²½ìš°\n      if (keywordResults.length > 0) {\n        console.log(\"ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆìŒ, í‚¤ì›Œë“œ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜\");\n        return keywordResults;\n      }\n      \n      console.log(\"ìƒˆ ë¬¸ì„œ ìƒì„± ì˜µì…˜ë§Œ ìˆìŒ, ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ ê²°ê³¼ ë°˜í™˜\");\n      return semanticResults;\n    } catch (error) {\n      console.error(\"í†µí•© ë¬¸ì„œ ê²€ìƒ‰ ì˜¤ë¥˜:\", error);\n      return [{ \n        id: 'error', \n        title: 'ì˜¤ë¥˜ ë°œìƒ - ê²€ìƒ‰ ì‹¤íŒ¨', \n        path: '#',\n        preview: 'ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•˜ê±°ë‚˜ URLì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”.', \n        isError: true \n      }];\n    }\n  }\n\n  /**\n   * ë¬¸ìì—´ì„ ìŠ¬ëŸ¬ê·¸ í˜•ì‹ìœ¼ë¡œ ë³€í™˜ (URL ì¹œí™”ì ì¸ í˜•ì‹)\n   * @param {string} str - ë³€í™˜í•  ë¬¸ìì—´\n   * @returns {string} - ìŠ¬ëŸ¬ê·¸ í˜•ì‹ì˜ ë¬¸ìì—´\n   */\n  slugify(str) {\n    return str\n      .toLowerCase()\n      .trim()\n      .replace(/[\\s\\W-]+/g, '-') // ê³µë°±, íŠ¹ìˆ˜ë¬¸ìë¥¼ í•˜ì´í”ˆìœ¼ë¡œ ë³€í™˜\n      .replace(/^-+|-+$/g, '');  // ì‹œì‘/ë í•˜ì´í”ˆ ì œê±°\n  }\n\n  /**\n   * ì‚¬ìš©ì ì§€ì • ë¬¸ì„œë§Œ ë³´ì¡´í•˜ëŠ” ê°•ë ¥í•œ ì •ë¦¬ í•¨ìˆ˜\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª© ë°°ì—´\n   * @param {boolean} dryRun - trueë©´ ì‹¤ì œ ì‚­ì œí•˜ì§€ ì•Šê³  ë¡œê·¸ë§Œ ì¶œë ¥\n   * @returns {Object} - ì •ë¦¬ ê²°ê³¼ í†µê³„\n   */\n  cleanupKeepOnlySpecified(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ì•„íŒŒíŠ¸', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬'], dryRun = false) {\n    console.log(`=== ì§€ì • ë¬¸ì„œë§Œ ë³´ì¡´ ì •ë¦¬ ${dryRun ? '(ì‹œë®¬ë ˆì´ì…˜)' : '(ì‹¤ì œ ì‹¤í–‰)'} ===`);\n    console.log(`ë³´ì¡´í•  ë¬¸ì„œ: ${keepTitles.join(', ')}`);\n    \n    const stats = {\n      totalDocuments: 0,\n      preservedDocuments: 0,\n      deletedDocuments: 0,\n      spaceSaved: 0,\n      backupCreated: false,\n      errors: []\n    };\n    \n    try {\n      // 1ë‹¨ê³„: ëª¨ë“  ë¬¸ì„œ ìˆ˜ì§‘\n      const documentKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\n      stats.totalDocuments = documentKeys.length;\n      \n      console.log(`ğŸ“Š ë¶„ì„ ì‹œì‘: ì´ ${documentKeys.length}ê°œ ë¬¸ì„œ ë°œê²¬`);\n      \n      // 2ë‹¨ê³„: ë°±ì—… ìƒì„± (ì‚­ì œí•  ë¬¸ì„œê°€ ìˆì„ ë•Œë§Œ)\n      if (!dryRun) {\n        // ë¨¼ì € ì‚­ì œí•  ë¬¸ì„œê°€ ìˆëŠ”ì§€ ë¯¸ë¦¬ í™•ì¸\n        let hasDocumentsToDelete = false;\n        for (const key of documentKeys) {\n          try {\n            const docData = JSON.parse(localStorage.getItem(key));\n            if (!docData || !docData.title) {\n              hasDocumentsToDelete = true;\n              break;\n            }\n            const title = docData.title.trim().toLowerCase();\n            const shouldKeep = keepTitles.some(keepTitle => \n              title === keepTitle.toLowerCase()\n            );\n            if (!shouldKeep) {\n              hasDocumentsToDelete = true;\n              break;\n            }\n          } catch (e) {\n            hasDocumentsToDelete = true;\n            break;\n          }\n        }\n        \n        // ì‚­ì œí•  ë¬¸ì„œê°€ ìˆì„ ë•Œë§Œ ë°±ì—… ìƒì„±\n        if (hasDocumentsToDelete) {\n          const backupData = {};\n          documentKeys.forEach(key => {\n            backupData[key] = localStorage.getItem(key);\n          });\n          \n          const backupKey = `miki_backup_manual_${Date.now()}`;\n          localStorage.setItem(backupKey, JSON.stringify({\n            timestamp: new Date().toISOString(),\n            documents: backupData,\n            type: 'manual_cleanup'\n          }));\n          stats.backupCreated = true;\n          console.log(`âœ… ë°±ì—… ì™„ë£Œ: ${backupKey}`);\n        } else {\n          console.log(`â­ï¸ ë°±ì—… ê±´ë„ˆëœ€: ì‚­ì œí•  ë¬¸ì„œê°€ ì—†ìŒ`);\n        }\n      }\n      \n      // 3ë‹¨ê³„: ë¬¸ì„œ ë¶„ë¥˜ ë° ì¤‘ë³µ ì œê±°\n      const preserveList = [];\n      const deleteList = [];\n      const titleGroups = {}; // ì œëª©ë³„ ê·¸ë£¹í™”\n      \n      // ë¨¼ì € ì œëª©ë³„ë¡œ ê·¸ë£¹í™”\n      for (const key of documentKeys) {\n        try {\n          const docData = JSON.parse(localStorage.getItem(key));\n          \n          if (!docData || !docData.title) {\n            deleteList.push({ key, reason: 'ì œëª© ì—†ìŒ', size: localStorage.getItem(key)?.length || 0 });\n            continue;\n          }\n          \n          const title = docData.title.trim().toLowerCase();\n          \n          if (!titleGroups[title]) {\n            titleGroups[title] = [];\n          }\n          \n          titleGroups[title].push({\n            key,\n            title: docData.title,\n            data: docData,\n            updatedAt: new Date(docData.updatedAt || 0)\n          });\n          \n        } catch (e) {\n          deleteList.push({ key, reason: 'íŒŒì‹± ì˜¤ë¥˜', size: localStorage.getItem(key)?.length || 0 });\n          console.log(`âŒ ì‚­ì œ ì˜ˆì •: ${key} - íŒŒì‹± ì˜¤ë¥˜`);\n        }\n      }\n      \n      // ê° ì œëª© ê·¸ë£¹ì—ì„œ ì²˜ë¦¬\n      for (const [titleLower, docs] of Object.entries(titleGroups)) {\n        const shouldKeep = keepTitles.some(keepTitle => \n          titleLower === keepTitle.toLowerCase()\n        );\n        \n        if (shouldKeep) {\n          // ë³´ì¡´í•  ì œëª©ì¸ ê²½ìš°: ìµœì‹  ë¬¸ì„œë§Œ ë³´ì¡´, ë‚˜ë¨¸ì§€ëŠ” ì‚­ì œ\n          docs.sort((a, b) => b.updatedAt - a.updatedAt); // ìµœì‹ ìˆœ ì •ë ¬\n          \n          const latestDoc = docs[0]; // ê°€ì¥ ìµœì‹  ë¬¸ì„œ\n          const duplicates = docs.slice(1); // ë‚˜ë¨¸ì§€ ì¤‘ë³µ ë¬¸ì„œë“¤\n          \n          preserveList.push(latestDoc);\n          console.log(`âœ… ë³´ì¡´: ${latestDoc.key} - \"${latestDoc.title}\" (ìµœì‹  ë²„ì „)`);\n          \n          // ì¤‘ë³µ ë¬¸ì„œë“¤ì€ ì‚­ì œ ëª©ë¡ì— ì¶”ê°€\n          for (const duplicate of duplicates) {\n            deleteList.push({\n              key: duplicate.key,\n              title: duplicate.title,\n              reason: `ì¤‘ë³µ ë¬¸ì„œ (${latestDoc.key}ê°€ ìµœì‹ )`,\n              size: localStorage.getItem(duplicate.key)?.length || 0\n            });\n            console.log(`âŒ ì‚­ì œ ì˜ˆì •: ${duplicate.key} - \"${duplicate.title}\" (ì¤‘ë³µ)`);\n          }\n        } else {\n          // ë³´ì¡´í•˜ì§€ ì•Šì„ ì œëª©ì¸ ê²½ìš°: ëª¨ë“  ë¬¸ì„œ ì‚­ì œ\n          for (const doc of docs) {\n            deleteList.push({\n              key: doc.key,\n              title: doc.title,\n              reason: 'ì§€ì • ëª©ë¡ì— ì—†ìŒ',\n              size: localStorage.getItem(doc.key)?.length || 0\n            });\n            console.log(`âŒ ì‚­ì œ ì˜ˆì •: ${doc.key} - \"${doc.title}\" (ë³´ì¡´ ëª©ë¡ì— ì—†ìŒ)`);\n          }\n        }\n      }\n      \n      stats.preservedDocuments = preserveList.length;\n      stats.deletedDocuments = deleteList.length;\n      \n      // 4ë‹¨ê³„: ì‹¤ì œ ì‚­ì œ ì‹¤í–‰\n      console.log(`\\nğŸ”¥ ì‚­ì œ ì‹¤í–‰: ${deleteList.length}ê°œ ë¬¸ì„œ`);\n      \n      if (!dryRun && deleteList.length > 0) {\n        let successCount = 0;\n        \n        for (const item of deleteList) {\n          try {\n            localStorage.removeItem(item.key);\n            \n            // ê´€ë ¨ ì œëª© í‚¤ë„ ì‚­ì œ\n            const titleKey = item.key.replace('miki_document_', 'miki_title_');\n            if (localStorage.getItem(titleKey)) {\n              localStorage.removeItem(titleKey);\n            }\n            \n            stats.spaceSaved += item.size;\n            successCount++;\n            console.log(`  âœ… ì‚­ì œ ì™„ë£Œ: ${item.key}`);\n          } catch (error) {\n            console.error(`  âŒ ì‚­ì œ ì‹¤íŒ¨: ${item.key}`, error);\n            stats.errors.push(`ì‚­ì œ ì‹¤íŒ¨: ${item.key} - ${error.message}`);\n          }\n        }\n        \n        console.log(`âœ… ì‚­ì œ ì™„ë£Œ: ${successCount}/${deleteList.length}ê°œ`);\n      }\n      \n      // 5ë‹¨ê³„: ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\n      if (!dryRun && deleteList.length > 0) {\n        try {\n          const remainingDocs = preserveList.map(item => ({\n            id: item.data.id || item.key.replace('miki_document_', ''),\n            title: item.data.title,\n            updatedAt: item.data.updatedAt || new Date().toISOString()\n          }));\n          \n          remainingDocs.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\n          localStorage.setItem('miki_recent_docs', JSON.stringify(remainingDocs));\n          \n          console.log(`ğŸ“ ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±: ${remainingDocs.length}ê°œ`);\n        } catch (error) {\n          console.error('ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„± ì˜¤ë¥˜:', error);\n        }\n      }\n      \n      // 6ë‹¨ê³„: ê²°ê³¼ ë³´ê³ \n      console.log(`\\nğŸ“Š === ì •ë¦¬ ì™„ë£Œ ë³´ê³ ì„œ ===`);\n      console.log(`ì´ ë¬¸ì„œ: ${stats.totalDocuments}ê°œ`);\n      console.log(`ë³´ì¡´ëœ ë¬¸ì„œ: ${stats.preservedDocuments}ê°œ`);\n      console.log(`ì‚­ì œëœ ë¬¸ì„œ: ${stats.deletedDocuments}ê°œ`);\n      console.log(`ì ˆì•½ëœ ê³µê°„: ${(stats.spaceSaved / 1024).toFixed(1)}KB`);\n      \n      if (stats.backupCreated) {\n        console.log(`\\nğŸ›¡ï¸ ë°±ì—… ì •ë³´:`);\n        console.log(`ë°±ì—… í‚¤: miki_backup_manual_*`);\n        console.log(`ë³µêµ¬ ë°©ë²•: ê°œë°œì ë„êµ¬ì—ì„œ ë°±ì—… í‚¤ë¡œ ê²€ìƒ‰í•˜ì—¬ ë³µêµ¬ ê°€ëŠ¥`);\n      }\n      \n      if (stats.errors.length > 0) {\n        console.log(`\\nâš ï¸ ì˜¤ë¥˜ ${stats.errors.length}ê°œ:`);\n        stats.errors.forEach(error => console.log(`  - ${error}`));\n      }\n      \n    } catch (error) {\n      console.error('ì§€ì • ë¬¸ì„œ ë³´ì¡´ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\n      stats.errors.push(`ì •ë¦¬ ì˜¤ë¥˜: ${error.message}`);\n    }\n    \n    return stats;\n  }\n}\n\nexport default DocumentSearchManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\DocumentSummaryManager.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'API_TYPE' is assigned a value but never used.","line":10,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":10,"endColumn":15},{"ruleId":"no-unused-vars","severity":1,"message":"'headingPattern' is assigned a value but never used.","line":66,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":66,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// DocumentSummaryManager.js\n// ë¬¸ì„œë¥¼ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜í•˜ê³  ì„¹ì…˜ë³„ë¡œ ìš”ì•½í•˜ëŠ” í´ë˜ìŠ¤\n\n/**\n * ë¬¸ì„œ ìš”ì•½ ê´€ë¦¬ í´ë˜ìŠ¤\n * Claude APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¬¸ì„œ ìš”ì•½ ìƒì„± ë° ê´€ë¦¬\n */\n\n// API íƒ€ì… ì„¤ì • - ë¸Œë¼ìš°ì € í˜¸í™˜ì„±ì„ ìœ„í•´ ê¸°ë³¸ê°’ ì‚¬ìš©\nconst API_TYPE = (typeof process !== 'undefined' && process.env?.VITE_AI_API_TYPE) || 'claude';\n\n/**\n * ë¬¸ì„œ ìš”ì•½ ë° ë³€í™˜ì„ ì²˜ë¦¬í•˜ëŠ” í´ë˜ìŠ¤\n * AI ì²˜ë¦¬ë¥¼ ìœ„í•œ í† í° ìµœì í™”ì™€ ë¬¸ë§¥ ê´€ë¦¬ë¥¼ ë‹´ë‹¹\n */\nclass DocumentSummaryManager {\n  constructor() {\n    this.summaries = new Map(); // ë¬¸ì„œ ID ë˜ëŠ” ê²½ë¡œë¥¼ í‚¤ë¡œ, ìš”ì•½ ì •ë³´ë¥¼ ê°’ìœ¼ë¡œ ì €ì¥\n    this.maxSectionLength = 1000; // ì„¹ì…˜ë‹¹ ìµœëŒ€ ë¬¸ì ìˆ˜ (ì•½ 250 í† í°)\n    this.maxSummaryLength = 150; // ìš”ì•½ë‹¹ ìµœëŒ€ ë¬¸ì ìˆ˜ (ì•½ 40 í† í°)\n  }\n\n  /**\n   * ë¬¸ì„œë¥¼ ì„¹ì…˜ìœ¼ë¡œ ë¶„í• í•˜ê³  ìš”ì•½ ìƒì„±\n   * @param {string} documentId - ë¬¸ì„œ ì‹ë³„ì\n   * @param {string} content - ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¬¸ì„œ ë‚´ìš©\n   * @returns {Object} - ì„¹ì…˜ ë° ìš”ì•½ ì •ë³´ë¥¼ í¬í•¨í•œ ê°ì²´\n   */\n  processDocument(documentId, content) {\n    if (!content) return null;\n\n    // ë¬¸ì„œë¥¼ í—¤ë”©ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¹ì…˜ìœ¼ë¡œ ë¶„í• \n    const sections = this._splitIntoSections(content);\n    \n    // ê° ì„¹ì…˜ì— ëŒ€í•œ ìš”ì•½ ìƒì„±\n    const processedSections = sections.map(section => {\n      const summary = this._generateSummary(section.content);\n      return {\n        ...section,\n        summary: summary\n      };\n    });\n\n    // ë¬¸ì„œ ì „ì²´ ìš”ì•½ ìƒì„±\n    const documentSummary = this._generateDocumentSummary(processedSections);\n    \n    // ê²°ê³¼ ê°ì²´ ìƒì„± ë° ìºì‹œ ì €ì¥\n    const result = {\n      id: documentId,\n      summary: documentSummary,\n      sections: processedSections,\n      lastUpdated: new Date().toISOString()\n    };\n    \n    this.summaries.set(documentId, result);\n    return result;\n  }\n\n  /**\n   * ë¬¸ì„œë¥¼ í—¤ë”©ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¹ì…˜ìœ¼ë¡œ ë¶„í• \n   * @param {string} content - ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ë¬¸ì„œ ë‚´ìš©\n   * @returns {Array} - ì„¹ì…˜ ê°ì²´ ë°°ì—´\n   */\n  _splitIntoSections(content) {\n    // í—¤ë”© íŒ¨í„´ (# ì œëª©, ## ì œëª© ë“±)\n    const headingPattern = /^(#{1,6})\\s+(.+)$/gm;\n    const lines = content.split('\\n');\n    const sections = [];\n    \n    let currentHeading = \"ë¬¸ì„œ\";\n    let currentLevel = 0;\n    let currentContent = \"\";\n    let sectionStart = 0;\n    \n    // í—¤ë”©ì´ ì—†ëŠ” ì‹œì‘ ë¶€ë¶„ì„ ì²« ë²ˆì§¸ ì„¹ì…˜ìœ¼ë¡œ ì²˜ë¦¬\n    for (let i = 0; i < lines.length; i++) {\n      const line = lines[i];\n      const headingMatch = line.match(/^(#{1,6})\\s+(.+)$/);\n      \n      if (headingMatch) {\n        // ì²« ë²ˆì§¸ í—¤ë”©ì„ ë§Œë‚¬ì„ ë•Œ ì´ì „ ë‚´ìš©ì´ ìˆìœ¼ë©´ ì„¹ì…˜ìœ¼ë¡œ ì¶”ê°€\n        if (currentContent.trim()) {\n          sections.push({\n            title: \"ì†Œê°œ\",\n            level: 0,\n            content: currentContent.trim(),\n            startLine: sectionStart,\n            endLine: i - 1\n          });\n        }\n        \n        // í˜„ì¬ í—¤ë”© ì •ë³´ ì—…ë°ì´íŠ¸\n        currentHeading = headingMatch[2];\n        currentLevel = headingMatch[1].length;\n        currentContent = line;\n        sectionStart = i;\n      } else {\n        // í—¤ë”©ì´ ì•„ë‹Œ ì¼ë°˜ í…ìŠ¤íŠ¸ ì¤„ ì¶”ê°€\n        currentContent += \"\\n\" + line;\n      }\n      \n      // ë‹¤ìŒ í—¤ë”©ì„ ë§Œë‚˜ê±°ë‚˜ ë¬¸ì„œ ëì— ë„ë‹¬í•˜ë©´ ì„¹ì…˜ ì¶”ê°€\n      const nextLine = i + 1 < lines.length ? lines[i + 1] : null;\n      const isNextHeading = nextLine && nextLine.match(/^(#{1,6})\\s+(.+)$/);\n      \n      if (isNextHeading || i === lines.length - 1) {\n        if (currentContent.trim()) {\n          sections.push({\n            title: currentHeading,\n            level: currentLevel,\n            content: currentContent.trim(),\n            startLine: sectionStart,\n            endLine: i\n          });\n        }\n        \n        if (isNextHeading) {\n          const nextHeadingMatch = nextLine.match(/^(#{1,6})\\s+(.+)$/);\n          currentHeading = nextHeadingMatch[2];\n          currentLevel = nextHeadingMatch[1].length;\n          currentContent = \"\";\n          sectionStart = i + 1;\n        }\n      }\n    }\n    \n    // ì„¹ì…˜ì´ ì—†ìœ¼ë©´ ì „ì²´ ë¬¸ì„œë¥¼ í•˜ë‚˜ì˜ ì„¹ì…˜ìœ¼ë¡œ ì²˜ë¦¬\n    if (sections.length === 0 && content.trim()) {\n      sections.push({\n        title: \"ë¬¸ì„œ\",\n        level: 0,\n        content: content.trim(),\n        startLine: 0,\n        endLine: lines.length - 1\n      });\n    }\n    \n    return sections;\n  }\n  \n  /**\n   * ì„¹ì…˜ ë‚´ìš©ì— ëŒ€í•œ ê°„ë‹¨í•œ ìš”ì•½ ìƒì„± (ì‹¤ì œë¡œëŠ” AIë¥¼ í†µí•´ ìš”ì•½í•  ìˆ˜ ìˆìŒ)\n   * @param {string} sectionContent - ì„¹ì…˜ ë‚´ìš©\n   * @returns {string} - ì„¹ì…˜ ìš”ì•½\n   */\n  _generateSummary(sectionContent) {\n    // ê°„ë‹¨í•œ ìš”ì•½ ë°©ì‹: ì²« ë²ˆì§¸ ë¬¸ì¥ ë˜ëŠ” ì¼ì • ê¸¸ì´ ì¶”ì¶œ\n    if (!sectionContent) return \"\";\n    \n    // ë„ˆë¬´ ê¸´ ì„¹ì…˜ì€ ì¼ì • ê¸¸ì´ë§Œ ì‚¬ìš©\n    if (sectionContent.length > this.maxSectionLength) {\n      sectionContent = sectionContent.substring(0, this.maxSectionLength) + \"...\";\n    }\n    \n    // ì²« ë²ˆì§¸ ë¬¸ì¥ ë˜ëŠ” ì²« ë²ˆì§¸ ì¤„ì„ ìš”ì•½ìœ¼ë¡œ ì‚¬ìš©\n    let summary = \"\";\n    const firstSentenceMatch = sectionContent.match(/^.+?[.!?](?:\\s|$)/);\n    \n    if (firstSentenceMatch) {\n      summary = firstSentenceMatch[0].trim();\n    } else {\n      // ë¬¸ì¥ì´ ëª…í™•í•˜ì§€ ì•Šìœ¼ë©´ ì²« ë²ˆì§¸ ì¤„ ì‚¬ìš©\n      const firstLine = sectionContent.split('\\n')[0].trim();\n      summary = firstLine;\n    }\n    \n    // ìš”ì•½ì´ ë„ˆë¬´ ê¸¸ë©´ ìë¥´ê¸°\n    if (summary.length > this.maxSummaryLength) {\n      summary = summary.substring(0, this.maxSummaryLength) + \"...\";\n    }\n    \n    return summary;\n  }\n  \n  /**\n   * ë¬¸ì„œ ì „ì²´ ìš”ì•½ ìƒì„±\n   * @param {Array} sections - ì„¹ì…˜ ê°ì²´ ë°°ì—´\n   * @returns {string} - ë¬¸ì„œ ì „ì²´ ìš”ì•½\n   */\n  _generateDocumentSummary(sections) {\n    // ê° ì„¹ì…˜ì˜ ì œëª©ì„ ëª¨ì•„ì„œ ë¬¸ì„œ êµ¬ì¡° ìš”ì•½ ìƒì„±\n    const titles = sections.map(section => {\n      const indent = \"  \".repeat(Math.max(0, section.level - 1));\n      return `${indent}- ${section.title}`;\n    });\n    \n    return \"ë¬¸ì„œ êµ¬ì¡°:\\n\" + titles.join('\\n');\n  }\n  \n  /**\n   * ì €ì¥ëœ ë¬¸ì„œ ìš”ì•½ ê°€ì ¸ì˜¤ê¸°\n   * @param {string} documentId - ë¬¸ì„œ ì‹ë³„ì\n   * @returns {Object|null} - ì €ì¥ëœ ìš”ì•½ ê°ì²´ ë˜ëŠ” null\n   */\n  getSummary(documentId) {\n    return this.summaries.get(documentId) || null;\n  }\n  \n  /**\n   * ë¬¸ì„œì˜ íŠ¹ì • ë¶€ë¶„ ì£¼ë³€ ì»¨í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°\n   * @param {string} documentId - ë¬¸ì„œ ì‹ë³„ì\n   * @param {number} lineNumber - ì¤„ ë²ˆí˜¸\n   * @param {number} contextLines - ì•ë’¤ë¡œ í¬í•¨í•  ì¤„ ìˆ˜\n   * @returns {Object|null} - ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ê°ì²´ ë˜ëŠ” null\n   */\n  getContextAroundLine(documentId, lineNumber, contextLines = 5) {\n    const summary = this.summaries.get(documentId);\n    if (!summary) return null;\n    \n    // í•´ë‹¹ ë¼ì¸ì´ í¬í•¨ëœ ì„¹ì…˜ ì°¾ê¸°\n    const section = summary.sections.find(\n      s => lineNumber >= s.startLine && lineNumber <= s.endLine\n    );\n    \n    if (!section) return null;\n    \n    // ì„¹ì…˜ ë‚´ìš©ì—ì„œ ì£¼ë³€ ì»¨í…ìŠ¤íŠ¸ ì¶”ì¶œ\n    const lines = section.content.split('\\n');\n    const lineIndex = lineNumber - section.startLine;\n    \n    const start = Math.max(0, lineIndex - contextLines);\n    const end = Math.min(lines.length - 1, lineIndex + contextLines);\n    \n    const contextLines_code = lines.slice(start, end + 1);\n    \n    return {\n      section: section.title,\n      context: contextLines_code.join('\\n'),\n      startLine: section.startLine + start,\n      endLine: section.startLine + end\n    };\n  }\n  \n  /**\n   * ìºì‹œëœ ëª¨ë“  ìš”ì•½ ì •ë³´ ì§€ìš°ê¸°\n   */\n  clearCache() {\n    this.summaries.clear();\n  }\n}\n\nexport default DocumentSummaryManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\ServerDiagnostic.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":13,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":13,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[233,275],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[535,605],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":26,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":26,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[646,683],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[821,922],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1050,1087],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1222,1323],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":48,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":48,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1444,1478],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":58,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":58,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1892,1950],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":59,"column":41,"nodeType":"MemberExpression","messageId":"unexpected","endLine":59,"endColumn":52},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":61,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":61,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2039,2094],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":36,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":64,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":64,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2204,2261],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":40,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":51},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":67,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":67,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2349,2403],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":68,"column":35,"nodeType":"MemberExpression","messageId":"unexpected","endLine":68,"endColumn":46},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":71,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":71,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2547,2594],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":89,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":89,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3102,3144],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":90,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":90,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3154,3205],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3260,3301],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":97,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":97,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3361,3396],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":100,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":100,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3453,3513],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":102,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":102,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3565,3615],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3693,3753],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3804,3854],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3934,3993],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":116,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":116,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4051,4090],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":139,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":139,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4590,4623],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":161,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":161,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[5149,5195],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":173,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":173,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5327,5367],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":177,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":177,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5460,5493],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":187,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":187,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5709,5759],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":193,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":193,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5938,5977],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":198,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":198,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6100,6145],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":204,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":204,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6338,6375],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":210,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":210,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6569,6604],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":215,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":215,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6661,6707],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":219,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":219,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[6766,6800],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":37,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ì„œë²„ì™€ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì˜ ìƒì„¸í•œ ì°¨ì´ì ì„ ë¶„ì„í•˜ëŠ” ì§„ë‹¨ ë„êµ¬\r\n */\r\nclass ServerDiagnostic {\r\n  constructor() {\r\n    this.serverUrl = 'http://localhost:3003/api/posts';\r\n  }\r\n\r\n  /**\r\n   * ì„œë²„ì™€ ë¡œì»¬ì˜ ìƒì„¸í•œ ì°¨ì´ì  ë¶„ì„\r\n   */\r\n  async analyzeDiscrepancies() {\r\n    console.log('ğŸ” === ì„œë²„-ë¡œì»¬ ë¶ˆì¼ì¹˜ ë¶„ì„ ì‹œì‘ ===');\r\n    \r\n    try {\r\n      // 1. ì„œë²„ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const serverResponse = await fetch(this.serverUrl);\r\n      const serverDocs = await serverResponse.json();\r\n      \r\n      // 2. ë¡œì»¬ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n      const localDocs = this.getLocalDocuments();\r\n      \r\n      console.log(`ğŸ“Š ì„œë²„: ${serverDocs.length}ê°œ, ë¡œì»¬: ${localDocs.length}ê°œ`);\r\n      \r\n      // 3. ì„œë²„ ë¬¸ì„œ ìƒì„¸ ë¶„ì„\r\n      console.log('\\nğŸŒ === ì„œë²„ ë¬¸ì„œ ëª©ë¡ ===');\r\n      const serverTitles = new Set();\r\n      const serverById = new Map();\r\n      \r\n      serverDocs.forEach((doc, index) => {\r\n        console.log(`${index + 1}. ID: \"${doc.id}\" | ì œëª©: \"${doc.title}\" | í¬ê¸°: ${doc.content?.length || 0}ì`);\r\n        serverTitles.add(doc.title);\r\n        serverById.set(doc.id, doc);\r\n      });\r\n      \r\n      // 4. ë¡œì»¬ ë¬¸ì„œ ìƒì„¸ ë¶„ì„\r\n      console.log('\\nğŸ“± === ë¡œì»¬ ë¬¸ì„œ ëª©ë¡ ===');\r\n      const localTitles = new Set();\r\n      const localById = new Map();\r\n      \r\n      localDocs.forEach((doc, index) => {\r\n        console.log(`${index + 1}. ID: \"${doc.id}\" | ì œëª©: \"${doc.title}\" | í¬ê¸°: ${doc.content?.length || 0}ì`);\r\n        localTitles.add(doc.title);\r\n        localById.set(doc.id, doc);\r\n      });\r\n      \r\n      // 5. ì°¨ì´ì  ë¶„ì„\r\n      console.log('\\nâŒ === ì°¨ì´ì  ë¶„ì„ ===');\r\n      \r\n      // ì„œë²„ì—ë§Œ ìˆëŠ” ë¬¸ì„œ\r\n      const serverOnlyTitles = [...serverTitles].filter(title => !localTitles.has(title));\r\n      const serverOnlyIds = serverDocs.filter(doc => !localById.has(doc.id));\r\n      \r\n      // ë¡œì»¬ì—ë§Œ ìˆëŠ” ë¬¸ì„œ\r\n      const localOnlyTitles = [...localTitles].filter(title => !serverTitles.has(title));\r\n      const localOnlyIds = localDocs.filter(doc => !serverById.has(doc.id));\r\n      \r\n      console.log(`ğŸŒ ì„œë²„ì—ë§Œ ìˆëŠ” ì œëª©: ${serverOnlyTitles.length}ê°œ`);\r\n      serverOnlyTitles.forEach(title => console.log(`  - \"${title}\"`));\r\n      \r\n      console.log(`ğŸŒ ì„œë²„ì—ë§Œ ìˆëŠ” ID: ${serverOnlyIds.length}ê°œ`);\r\n      serverOnlyIds.forEach(doc => console.log(`  - ID: \"${doc.id}\" | ì œëª©: \"${doc.title}\"`));\r\n      \r\n      console.log(`ğŸ“± ë¡œì»¬ì—ë§Œ ìˆëŠ” ì œëª©: ${localOnlyTitles.length}ê°œ`);\r\n      localOnlyTitles.forEach(title => console.log(`  - \"${title}\"`));\r\n      \r\n      console.log(`ğŸ“± ë¡œì»¬ì—ë§Œ ìˆëŠ” ID: ${localOnlyIds.length}ê°œ`);\r\n      localOnlyIds.forEach(doc => console.log(`  - ID: \"${doc.id}\" | ì œëª©: \"${doc.title}\"`));\r\n      \r\n      // 6. ì œëª©ì€ ê°™ì§€ë§Œ IDê°€ ë‹¤ë¥¸ ë¬¸ì„œë“¤ ì°¾ê¸°\r\n      console.log('\\nğŸ”„ === ì œëª©ì€ ê°™ì§€ë§Œ IDê°€ ë‹¤ë¥¸ ë¬¸ì„œë“¤ ===');\r\n      const titleConflicts = [];\r\n      \r\n      serverDocs.forEach(serverDoc => {\r\n        const sameTitle = localDocs.filter(localDoc => \r\n          localDoc.title === serverDoc.title && localDoc.id !== serverDoc.id\r\n        );\r\n        \r\n        if (sameTitle.length > 0) {\r\n          titleConflicts.push({\r\n            title: serverDoc.title,\r\n            server: serverDoc,\r\n            local: sameTitle\r\n          });\r\n        }\r\n      });\r\n      \r\n      titleConflicts.forEach(conflict => {\r\n        console.log(`ğŸ“ ì œëª©: \"${conflict.title}\"`);\r\n        console.log(`  ğŸŒ ì„œë²„ ID: \"${conflict.server.id}\"`);\r\n        conflict.local.forEach(local => {\r\n          console.log(`  ğŸ“± ë¡œì»¬ ID: \"${local.id}\"`);\r\n        });\r\n      });\r\n      \r\n      // 7. ë™ê¸°í™” ì œì•ˆ\r\n      console.log('\\nğŸ’¡ === ë™ê¸°í™” ì œì•ˆ ===');\r\n      \r\n      if (serverOnlyIds.length > 0) {\r\n        console.log(`ğŸ”½ ì„œë²„ì—ì„œ ë¡œì»¬ë¡œ ê°€ì ¸ì˜¬ ë¬¸ì„œ: ${serverOnlyIds.length}ê°œ`);\r\n        serverOnlyIds.forEach(doc => {\r\n          console.log(`  - \"${doc.title}\" (ID: ${doc.id})`);\r\n        });\r\n      }\r\n      \r\n      if (localOnlyIds.length > 0) {\r\n        console.log(`ğŸ”¼ ë¡œì»¬ì—ì„œ ì„œë²„ë¡œ ì—…ë¡œë“œí•  ë¬¸ì„œ: ${localOnlyIds.length}ê°œ`);\r\n        localOnlyIds.forEach(doc => {\r\n          console.log(`  - \"${doc.title}\" (ID: ${doc.id})`);\r\n        });\r\n      }\r\n      \r\n      if (titleConflicts.length > 0) {\r\n        console.log(`ğŸ”§ ì¶©ëŒ í•´ê²°ì´ í•„ìš”í•œ ë¬¸ì„œ: ${titleConflicts.length}ê°œ`);\r\n        titleConflicts.forEach(conflict => {\r\n          console.log(`  - \"${conflict.title}\"`);\r\n        });\r\n      }\r\n      \r\n      return {\r\n        server: {\r\n          docs: serverDocs,\r\n          titles: serverTitles,\r\n          count: serverDocs.length\r\n        },\r\n        local: {\r\n          docs: localDocs,\r\n          titles: localTitles,\r\n          count: localDocs.length\r\n        },\r\n        differences: {\r\n          serverOnly: serverOnlyIds,\r\n          localOnly: localOnlyIds,\r\n          titleConflicts: titleConflicts\r\n        }\r\n      };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë¶„ì„ ì‹¤íŒ¨:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ë¬¸ì„œ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n   */\r\n  getLocalDocuments() {\r\n    const docs = [];\r\n    \r\n    Object.keys(localStorage).forEach(key => {\r\n      if (key.startsWith('miki_document_')) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          docs.push({\r\n            id: docData.id,\r\n            title: docData.title,\r\n            content: docData.content,\r\n            updatedAt: docData.updatedAt\r\n          });\r\n        } catch (error) {\r\n          console.warn(`âš ï¸ ë¡œì»¬ ë¬¸ì„œ íŒŒì‹± ì‹¤íŒ¨: ${key}`, error);\r\n        }\r\n      }\r\n    });\r\n    \r\n    return docs;\r\n  }\r\n\r\n  /**\r\n   * ìë™ ë™ê¸°í™” ì‹¤í–‰ (ì•ˆì „í•˜ê²Œ)\r\n   */\r\n  async performSafeSync() {\r\n    console.log('ğŸ”„ === ì•ˆì „í•œ ìë™ ë™ê¸°í™” ì‹œì‘ ===');\r\n    \r\n    const analysis = await this.analyzeDiscrepancies();\r\n    if (!analysis) {\r\n      console.error('âŒ ë¶„ì„ ì‹¤íŒ¨ë¡œ ë™ê¸°í™” ì¤‘ë‹¨');\r\n      return false;\r\n    }\r\n    \r\n    const { differences } = analysis;\r\n    let syncCount = 0;\r\n    \r\n    try {\r\n      // 1. ì„œë²„ì—ë§Œ ìˆëŠ” ë¬¸ì„œë“¤ì„ ë¡œì»¬ë¡œ ê°€ì ¸ì˜¤ê¸°\r\n      for (const serverDoc of differences.serverOnly) {\r\n        console.log(`ğŸ”½ ì„œë²„ì—ì„œ ê°€ì ¸ì˜¤ê¸°: \"${serverDoc.title}\"`);\r\n        \r\n        const localKey = `miki_document_${serverDoc.id}`;\r\n        localStorage.setItem(localKey, JSON.stringify(serverDoc));\r\n        \r\n        syncCount++;\r\n        console.log(`âœ… ë¡œì»¬ ì €ì¥ ì™„ë£Œ: ${localKey}`);\r\n      }\r\n      \r\n      // 2. ì œëª© ì¶©ëŒ í•´ê²° (ì„œë²„ ë²„ì „ì„ ìš°ì„ ìœ¼ë¡œ)\r\n      for (const conflict of differences.titleConflicts) {\r\n        console.log(`ğŸ”§ ì¶©ëŒ í•´ê²°: \"${conflict.title}\"`);\r\n        \r\n        // ë¡œì»¬ì˜ êµ¬ë²„ì „ ì œê±°\r\n        conflict.local.forEach(localDoc => {\r\n          const oldKey = `miki_document_${localDoc.id}`;\r\n          localStorage.removeItem(oldKey);\r\n          console.log(`ğŸ—‘ï¸ êµ¬ë²„ì „ ì œê±°: ${oldKey}`);\r\n        });\r\n        \r\n        // ì„œë²„ ë²„ì „ì„ ë¡œì»¬ì— ì €ì¥\r\n        const newKey = `miki_document_${conflict.server.id}`;\r\n        localStorage.setItem(newKey, JSON.stringify(conflict.server));\r\n        console.log(`âœ… ì‹ ë²„ì „ ì €ì¥: ${newKey}`);\r\n        \r\n        syncCount++;\r\n      }\r\n      \r\n      console.log(`ğŸ‰ ë™ê¸°í™” ì™„ë£Œ: ${syncCount}ê°œ ë¬¸ì„œ ì²˜ë¦¬`);\r\n      return true;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë™ê¸°í™” ì‹¤íŒ¨:', error);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\n// ì „ì—­ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ export\r\nexport default ServerDiagnostic; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\SyncManager.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[397,432],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[968,1022],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":90,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":90,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[2485,2612],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3172,3225],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":110,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":110,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3303,3337],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3429,3473],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":139,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":139,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4317,4346],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":143,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":143,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4410,4443],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":155,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":155,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4637,4669],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":171,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":171,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5111,5153],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":172,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":172,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5161,5233],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":176,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":176,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5292,5328],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":188,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":188,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[5604,5642],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":219,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":219,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6549,6595],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":231,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":231,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7031,7076],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":238,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":238,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7351,7399],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":246,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":246,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7642,7680],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":250,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":250,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[7716,7810],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":254,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":254,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7871,7907],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":267,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":267,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8203,8247],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":271,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":271,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8333,8371],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":301,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":301,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9184,9240],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":314,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":314,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[9673,9755],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":341,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":341,"endColumn":28,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11002,11047],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":344,"column":15,"nodeType":"MemberExpression","messageId":"unexpected","endLine":344,"endColumn":26,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11102,11148],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":352,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":352,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11369,11419],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":357,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":357,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[11528,11582],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":362,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":362,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[11688,11749],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":366,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":366,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[11810,11846],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":376,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":376,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12013,12052],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":405,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":405,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[12956,13012],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":409,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":409,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[13077,13118],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":425,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":425,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[13473,13501],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":462,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":462,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14564,14593],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":463,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":463,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[14601,14734],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":468,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":468,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[14808,14842],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":494,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":494,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15442,15474],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":508,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":508,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[15858,15884],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":512,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":512,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[15956,15992],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":39,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì™€ ì„œë²„ ê°„ì˜ ë™ê¸°í™” ë° ë§¤í•‘ ì˜¤ë¥˜ í•´ê²°ì„ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤\r\n * ê¸°ì¡´ DataSyncManagerì™€ ë‹¬ë¦¬ ì•ˆì „í•˜ê³  ì ì§„ì ì¸ ë™ê¸°í™”ë¥¼ ìˆ˜í–‰\r\n */\r\nclass SyncManager {\r\n  constructor() {\r\n    this.serverUrl = 'http://localhost:3003/api/posts';\r\n    this.syncInProgress = false;\r\n    this.backupKey = `miki_sync_backup_${Date.now()}`;\r\n  }\r\n\r\n  /**\r\n   * 1ë‹¨ê³„: í˜„ì¬ ìƒí™© ì§„ë‹¨\r\n   * @returns {Object} - ì§„ë‹¨ ê²°ê³¼\r\n   */\r\n  async diagnoseCurrentState() {\r\n    console.log('=== í˜„ì¬ ìƒí™© ì§„ë‹¨ ì‹œì‘ ===');\r\n    \r\n    const diagnosis = {\r\n      local: {\r\n        documents: [],\r\n        totalCount: 0,\r\n        duplicates: {},\r\n        issues: []\r\n      },\r\n      server: {\r\n        documents: [],\r\n        totalCount: 0,\r\n        accessible: false\r\n      },\r\n      mapping: {\r\n        conflicts: [],\r\n        orphans: []\r\n      }\r\n    };\r\n\r\n    try {\r\n      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë¶„ì„\r\n      const localKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n      diagnosis.local.totalCount = localKeys.length;\r\n      \r\n      console.log(`ğŸ“± ë¡œì»¬ ìŠ¤í† ë¦¬ì§€: ${localKeys.length}ê°œ ë¬¸ì„œ ë°œê²¬`);\r\n      \r\n      const titleGroups = {};\r\n      \r\n      for (const key of localKeys) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          const docId = key.replace('miki_document_', '');\r\n          \r\n          if (!docData || !docData.title) {\r\n            diagnosis.local.issues.push(`${key}: ì œëª© ì—†ìŒ`);\r\n            continue;\r\n          }\r\n          \r\n          const doc = {\r\n            id: docId,\r\n            title: docData.title,\r\n            content: docData.content || '',\r\n            updatedAt: docData.updatedAt || new Date().toISOString(),\r\n            storageKey: key,\r\n            contentLength: (docData.content || '').length\r\n          };\r\n          \r\n          diagnosis.local.documents.push(doc);\r\n          \r\n          // ì œëª©ë³„ ê·¸ë£¹í™” (ì¤‘ë³µ ê²€ì‚¬)\r\n          const titleKey = docData.title.toLowerCase();\r\n          if (!titleGroups[titleKey]) {\r\n            titleGroups[titleKey] = [];\r\n          }\r\n          titleGroups[titleKey].push(doc);\r\n          \r\n        } catch (e) {\r\n          diagnosis.local.issues.push(`${key}: íŒŒì‹± ì˜¤ë¥˜ - ${e.message}`);\r\n        }\r\n      }\r\n      \r\n      // ì¤‘ë³µ ë¬¸ì„œ ì°¾ê¸°\r\n      for (const [title, docs] of Object.entries(titleGroups)) {\r\n        if (docs.length > 1) {\r\n          diagnosis.local.duplicates[title] = docs.map(d => ({\r\n            id: d.id,\r\n            updatedAt: d.updatedAt,\r\n            contentLength: d.contentLength\r\n          }));\r\n        }\r\n      }\r\n      \r\n      console.log(`ğŸ“Š ë¡œì»¬ ë¶„ì„ ì™„ë£Œ: ${diagnosis.local.documents.length}ê°œ ìœ íš¨, ${Object.keys(diagnosis.local.duplicates).length}ê°œ ì œëª©ì— ì¤‘ë³µ`);\r\n      \r\n      // ì„œë²„ ìƒíƒœ í™•ì¸\r\n      try {\r\n        const response = await fetch(this.serverUrl);\r\n        if (response.ok) {\r\n          const serverDocs = await response.json();\r\n          diagnosis.server.accessible = true;\r\n          diagnosis.server.totalCount = serverDocs.length;\r\n          diagnosis.server.documents = serverDocs.map(doc => ({\r\n            id: doc.id,\r\n            title: doc.title,\r\n            preview: doc.preview || '',\r\n            updatedAt: doc.updatedAt,\r\n            filename: doc.filename\r\n          }));\r\n          \r\n          console.log(`ğŸŒ ì„œë²„ ë¶„ì„ ì™„ë£Œ: ${serverDocs.length}ê°œ ë¬¸ì„œ`);\r\n        } else {\r\n          diagnosis.server.accessible = false;\r\n          console.warn('âš ï¸ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤');\r\n        }\r\n      } catch (error) {\r\n        diagnosis.server.accessible = false;\r\n        console.error('âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨:', error.message);\r\n      }\r\n      \r\n      // ë§¤í•‘ ì¶©ëŒ ë¶„ì„\r\n      if (diagnosis.server.accessible) {\r\n        for (const localDoc of diagnosis.local.documents) {\r\n          const serverDoc = diagnosis.server.documents.find(s => s.id === localDoc.id);\r\n          const serverDocByTitle = diagnosis.server.documents.find(s => \r\n            s.title.toLowerCase() === localDoc.title.toLowerCase()\r\n          );\r\n          \r\n          if (serverDoc && serverDocByTitle && serverDoc.id !== serverDocByTitle.id) {\r\n            diagnosis.mapping.conflicts.push({\r\n              localDoc,\r\n              serverDocById: serverDoc,\r\n              serverDocByTitle: serverDocByTitle\r\n            });\r\n          }\r\n          \r\n          if (!serverDoc && !serverDocByTitle) {\r\n            diagnosis.mapping.orphans.push(localDoc);\r\n          }\r\n        }\r\n      }\r\n      \r\n      console.log('=== ì§„ë‹¨ ì™„ë£Œ ===');\r\n      return diagnosis;\r\n      \r\n    } catch (error) {\r\n      console.error('ì§„ë‹¨ ì¤‘ ì˜¤ë¥˜:', error);\r\n      return diagnosis;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 2ë‹¨ê³„: ë°±ì—… ìƒì„±\r\n   * @param {Object} diagnosis - ì§„ë‹¨ ê²°ê³¼\r\n   * @returns {boolean} - ë°±ì—… ì„±ê³µ ì—¬ë¶€\r\n   */\r\n  createBackup(diagnosis) {\r\n    try {\r\n      console.log('=== ë°±ì—… ìƒì„± ì‹œì‘ ===');\r\n      \r\n      const backup = {\r\n        timestamp: new Date().toISOString(),\r\n        diagnosis,\r\n        localStorage: {}\r\n      };\r\n      \r\n      // ëª¨ë“  miki ê´€ë ¨ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ë°ì´í„° ë°±ì—…\r\n      for (const key of Object.keys(localStorage)) {\r\n        if (key.startsWith('miki_')) {\r\n          backup.localStorage[key] = localStorage.getItem(key);\r\n        }\r\n      }\r\n      \r\n      localStorage.setItem(this.backupKey, JSON.stringify(backup));\r\n      console.log(`âœ… ë°±ì—… ì™„ë£Œ: ${this.backupKey}`);\r\n      console.log(`ğŸ“¦ ë°±ì—… í¬ê¸°: ${Object.keys(backup.localStorage).length}ê°œ í•­ëª©`);\r\n      \r\n      return true;\r\n    } catch (error) {\r\n      console.error('âŒ ë°±ì—… ìƒì„± ì‹¤íŒ¨:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 3ë‹¨ê³„: ë¡œì»¬ ì¤‘ë³µ ë¬¸ì„œ ì •ë¦¬\r\n   * @param {Object} diagnosis - ì§„ë‹¨ ê²°ê³¼\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª©ë“¤\r\n   * @returns {Object} - ì •ë¦¬ ê²°ê³¼\r\n   */\r\n  cleanupLocalDuplicates(diagnosis, keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    console.log('=== ë¡œì»¬ ì¤‘ë³µ ë¬¸ì„œ ì •ë¦¬ ì‹œì‘ ===');\r\n    \r\n    const result = {\r\n      preserved: [],\r\n      removed: [],\r\n      errors: []\r\n    };\r\n    \r\n    try {\r\n      // ì œëª©ë³„ë¡œ ê·¸ë£¹í™”\r\n      const titleGroups = {};\r\n      for (const doc of diagnosis.local.documents) {\r\n        const titleKey = doc.title.toLowerCase();\r\n        if (!titleGroups[titleKey]) {\r\n          titleGroups[titleKey] = [];\r\n        }\r\n        titleGroups[titleKey].push(doc);\r\n      }\r\n      \r\n      for (const [titleKey, docs] of Object.entries(titleGroups)) {\r\n        const shouldKeep = keepTitles.some(keepTitle => \r\n          titleKey === keepTitle.toLowerCase()\r\n        );\r\n        \r\n        if (!shouldKeep) {\r\n          // ë³´ì¡´í•˜ì§€ ì•Šì„ ë¬¸ì„œë“¤ì€ ëª¨ë‘ ì‚­ì œ\r\n          for (const doc of docs) {\r\n            try {\r\n              localStorage.removeItem(doc.storageKey);\r\n              localStorage.removeItem(`miki_title_${doc.id}`);\r\n              result.removed.push(doc);\r\n              console.log(`âŒ ì‚­ì œ: ${doc.title} (ë³´ì¡´ ëª©ë¡ì— ì—†ìŒ)`);\r\n            } catch (e) {\r\n              result.errors.push(`ì‚­ì œ ì‹¤íŒ¨: ${doc.title} - ${e.message}`);\r\n            }\r\n          }\r\n        } else if (docs.length > 1) {\r\n          // ë³´ì¡´í•  ë¬¸ì„œ ì¤‘ ì¤‘ë³µì´ ìˆëŠ” ê²½ìš°: ìµœì‹  ë²„ì „ë§Œ ìœ ì§€\r\n          docs.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\r\n          const latest = docs[0];\r\n          const duplicates = docs.slice(1);\r\n          \r\n          result.preserved.push(latest);\r\n          console.log(`âœ… ë³´ì¡´: ${latest.title} (ìµœì‹  ë²„ì „)`);\r\n          \r\n          for (const duplicate of duplicates) {\r\n            try {\r\n              localStorage.removeItem(duplicate.storageKey);\r\n              localStorage.removeItem(`miki_title_${duplicate.id}`);\r\n              result.removed.push(duplicate);\r\n              console.log(`âŒ ì‚­ì œ: ${duplicate.title} (ì¤‘ë³µ ë²„ì „)`);\r\n            } catch (e) {\r\n              result.errors.push(`ì¤‘ë³µ ì‚­ì œ ì‹¤íŒ¨: ${duplicate.title} - ${e.message}`);\r\n            }\r\n          }\r\n        } else {\r\n          // ë³´ì¡´í•  ë¬¸ì„œ ì¤‘ ì¤‘ë³µì´ ì—†ëŠ” ê²½ìš°\r\n          result.preserved.push(docs[0]);\r\n          console.log(`âœ… ë³´ì¡´: ${docs[0].title}`);\r\n        }\r\n      }\r\n      \r\n      console.log(`=== ë¡œì»¬ ì •ë¦¬ ì™„ë£Œ: ë³´ì¡´ ${result.preserved.length}ê°œ, ì‚­ì œ ${result.removed.length}ê°œ ===`);\r\n      return result;\r\n      \r\n    } catch (error) {\r\n      console.error('ë¡œì»¬ ì •ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);\r\n      result.errors.push(`ì •ë¦¬ ì˜¤ë¥˜: ${error.message}`);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 4ë‹¨ê³„: ì„œë²„ì™€ ë¡œì»¬ ë§¤í•‘ ìˆ˜ì •\r\n   * @param {Object} diagnosis - ì§„ë‹¨ ê²°ê³¼\r\n   * @returns {Object} - ë§¤í•‘ ìˆ˜ì • ê²°ê³¼\r\n   */\r\n  async fixServerLocalMapping(diagnosis) {\r\n    if (!diagnosis.server.accessible) {\r\n      console.log('âš ï¸ ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ì–´ ë§¤í•‘ ìˆ˜ì •ì„ ê±´ë„ˆëœë‹ˆë‹¤');\r\n      return { success: false, reason: 'Server not accessible' };\r\n    }\r\n    \r\n    console.log('=== ì„œë²„-ë¡œì»¬ ë§¤í•‘ ìˆ˜ì • ì‹œì‘ ===');\r\n    \r\n    const result = {\r\n      synced: [],\r\n      conflicts: [],\r\n      errors: []\r\n    };\r\n    \r\n    try {\r\n      // í˜„ì¬ ë¡œì»¬ì— ë‚¨ì•„ìˆëŠ” ë¬¸ì„œë“¤ ë‹¤ì‹œ í™•ì¸\r\n      const currentLocalDocs = [];\r\n      const localKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n      \r\n      for (const key of localKeys) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          if (docData && docData.title) {\r\n            currentLocalDocs.push({\r\n              id: key.replace('miki_document_', ''),\r\n              title: docData.title,\r\n              content: docData.content || '',\r\n              updatedAt: docData.updatedAt,\r\n              storageKey: key\r\n            });\r\n          }\r\n        } catch (e) {\r\n          // íŒŒì‹± ì˜¤ë¥˜ ë¬´ì‹œ\r\n        }\r\n      }\r\n      \r\n      console.log(`ğŸ“± í˜„ì¬ ë¡œì»¬ ë¬¸ì„œ: ${currentLocalDocs.length}ê°œ`);\r\n      \r\n      // ê° ë¡œì»¬ ë¬¸ì„œì— ëŒ€í•´ ì„œë²„ì™€ ë§¤í•‘ í™•ì¸ ë° ìˆ˜ì •\r\n      for (const localDoc of currentLocalDocs) {\r\n        try {\r\n          // ì„œë²„ì—ì„œ ê°™ì€ ì œëª©ì˜ ë¬¸ì„œ ì°¾ê¸°\r\n          const serverDoc = diagnosis.server.documents.find(s => \r\n            s.title.toLowerCase() === localDoc.title.toLowerCase()\r\n          );\r\n          \r\n          if (serverDoc) {\r\n            // ì„œë²„ì— ê°™ì€ ì œëª©ì˜ ë¬¸ì„œê°€ ìˆëŠ” ê²½ìš°\r\n            if (serverDoc.id !== localDoc.id) {\r\n              console.log(`ğŸ”„ ID ë¶ˆì¼ì¹˜ ìˆ˜ì •: \"${localDoc.title}\" ${localDoc.id} â†’ ${serverDoc.id}`);\r\n              \r\n              // ì„œë²„ì˜ ìµœì‹  ë‚´ìš© ê°€ì ¸ì˜¤ê¸°\r\n              const serverContentResponse = await fetch(`${this.serverUrl}/${serverDoc.id}`);\r\n              if (serverContentResponse.ok) {\r\n                const serverContent = await serverContentResponse.json();\r\n                \r\n                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ê¸°ì¡´ í‚¤ ì‚­ì œ\r\n                localStorage.removeItem(localDoc.storageKey);\r\n                localStorage.removeItem(`miki_title_${localDoc.id}`);\r\n                \r\n                // ì„œë²„ IDë¡œ ìƒˆë¡œ ì €ì¥\r\n                const newKey = `miki_document_${serverDoc.id}`;\r\n                localStorage.setItem(newKey, JSON.stringify({\r\n                  id: serverDoc.id,\r\n                  title: serverContent.title || localDoc.title,\r\n                  content: serverContent.content || localDoc.content,\r\n                  updatedAt: serverContent.updatedAt || localDoc.updatedAt\r\n                }));\r\n                localStorage.setItem(`miki_title_${serverDoc.id}`, serverContent.title || localDoc.title);\r\n                \r\n                result.synced.push({\r\n                  title: localDoc.title,\r\n                  oldId: localDoc.id,\r\n                  newId: serverDoc.id\r\n                });\r\n                \r\n                console.log(`âœ… ë§¤í•‘ ìˆ˜ì • ì™„ë£Œ: ${localDoc.title}`);\r\n              }\r\n            } else {\r\n              console.log(`âœ… ì´ë¯¸ ì˜¬ë°”ë¥¸ ë§¤í•‘: ${localDoc.title}`);\r\n              result.synced.push({\r\n                title: localDoc.title,\r\n                id: localDoc.id,\r\n                status: 'already_correct'\r\n              });\r\n            }\r\n          } else {\r\n            console.log(`âš ï¸ ì„œë²„ì— ì—†ëŠ” ë¡œì»¬ ë¬¸ì„œ: ${localDoc.title}`);\r\n            // í•„ìš”ì‹œ ì„œë²„ì— ì—…ë¡œë“œí•˜ê±°ë‚˜ ë¡œì»¬ì—ì„œ ì œê±°í•  ìˆ˜ ìˆìŒ\r\n          }\r\n          \r\n        } catch (error) {\r\n          console.error(`âŒ ë§¤í•‘ ìˆ˜ì • ì‹¤íŒ¨: ${localDoc.title}`, error);\r\n          result.errors.push(`${localDoc.title}: ${error.message}`);\r\n        }\r\n      }\r\n      \r\n      console.log(`=== ë§¤í•‘ ìˆ˜ì • ì™„ë£Œ: ${result.synced.length}ê°œ ì²˜ë¦¬ ===`);\r\n      return result;\r\n      \r\n    } catch (error) {\r\n      console.error('ë§¤í•‘ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜:', error);\r\n      result.errors.push(`ë§¤í•‘ ìˆ˜ì • ì˜¤ë¥˜: ${error.message}`);\r\n      return result;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 5ë‹¨ê³„: ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\r\n   */\r\n  rebuildRecentDocuments() {\r\n    console.log('=== ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„± ì‹œì‘ ===');\r\n    \r\n    try {\r\n      const documents = [];\r\n      const localKeys = Object.keys(localStorage).filter(key => key.startsWith('miki_document_'));\r\n      \r\n      for (const key of localKeys) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          if (docData && docData.title) {\r\n            documents.push({\r\n              id: docData.id || key.replace('miki_document_', ''),\r\n              title: docData.title,\r\n              updatedAt: docData.updatedAt || new Date().toISOString()\r\n            });\r\n          }\r\n        } catch (e) {\r\n          // íŒŒì‹± ì˜¤ë¥˜ ë¬´ì‹œ\r\n        }\r\n      }\r\n      \r\n      // ìµœì‹ ìˆœ ì •ë ¬\r\n      documents.sort((a, b) => new Date(b.updatedAt) - new Date(a.updatedAt));\r\n      \r\n      // ìµœëŒ€ 20ê°œë§Œ ìœ ì§€\r\n      const recentDocs = documents.slice(0, 20);\r\n      \r\n      localStorage.setItem('miki_recent_docs', JSON.stringify(recentDocs));\r\n      \r\n      console.log(`âœ… ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„± ì™„ë£Œ: ${recentDocs.length}ê°œ`);\r\n      return recentDocs;\r\n      \r\n    } catch (error) {\r\n      console.error('ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„± ì˜¤ë¥˜:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ì „ì²´ ë™ê¸°í™” ì‹¤í–‰\r\n   * @param {Array} keepTitles - ë³´ì¡´í•  ë¬¸ì„œ ì œëª©ë“¤\r\n   * @returns {Object} - ë™ê¸°í™” ê²°ê³¼\r\n   */\r\n  async performFullSync(keepTitles = ['ì œë‹ˆ', 'ë¡œì œ', 'ë¨ì‹œë¦¬', 'ë¸”ë™í•‘í¬']) {\r\n    if (this.syncInProgress) {\r\n      return { success: false, message: 'ë™ê¸°í™”ê°€ ì´ë¯¸ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤' };\r\n    }\r\n    \r\n    this.syncInProgress = true;\r\n    console.log('ğŸš€ ì „ì²´ ë™ê¸°í™” ì‹œì‘');\r\n    \r\n    try {\r\n      // 1ë‹¨ê³„: ì§„ë‹¨\r\n      const diagnosis = await this.diagnoseCurrentState();\r\n      \r\n      // 2ë‹¨ê³„: ë°±ì—…\r\n      const backupSuccess = this.createBackup(diagnosis);\r\n      if (!backupSuccess) {\r\n        throw new Error('ë°±ì—… ìƒì„± ì‹¤íŒ¨');\r\n      }\r\n      \r\n      // 3ë‹¨ê³„: ë¡œì»¬ ì •ë¦¬\r\n      const cleanupResult = this.cleanupLocalDuplicates(diagnosis, keepTitles);\r\n      \r\n      // 4ë‹¨ê³„: ë§¤í•‘ ìˆ˜ì •\r\n      const mappingResult = await this.fixServerLocalMapping(diagnosis);\r\n      \r\n      // 5ë‹¨ê³„: ìµœê·¼ ë¬¸ì„œ ëª©ë¡ ì¬êµ¬ì„±\r\n      const recentDocs = this.rebuildRecentDocuments();\r\n      \r\n      const finalResult = {\r\n        success: true,\r\n        diagnosis,\r\n        backup: this.backupKey,\r\n        cleanup: {\r\n          preserved: cleanupResult.preserved.length,\r\n          removed: cleanupResult.removed.length,\r\n          errors: cleanupResult.errors.length\r\n        },\r\n        mapping: {\r\n          synced: mappingResult.synced?.length || 0,\r\n          errors: mappingResult.errors?.length || 0\r\n        },\r\n        recentDocs: recentDocs.length\r\n      };\r\n      \r\n      console.log('ğŸ‰ ì „ì²´ ë™ê¸°í™” ì™„ë£Œ!');\r\n      console.log(`ğŸ“Š ê²°ê³¼: ë³´ì¡´ ${finalResult.cleanup.preserved}ê°œ, ì‚­ì œ ${finalResult.cleanup.removed}ê°œ, ë§¤í•‘ ìˆ˜ì • ${finalResult.mapping.synced}ê°œ`);\r\n      \r\n      return finalResult;\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë™ê¸°í™” ì‹¤íŒ¨:', error);\r\n      return {\r\n        success: false,\r\n        message: error.message,\r\n        backup: this.backupKey\r\n      };\r\n    } finally {\r\n      this.syncInProgress = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ë°±ì—…ì—ì„œ ë³µì›\r\n   * @param {string} backupKey - ë°±ì—… í‚¤ (ì„ íƒì‚¬í•­, ê¸°ë³¸ê°’ì€ ìµœì‹  ë°±ì—…)\r\n   */\r\n  restoreFromBackup(backupKey = null) {\r\n    try {\r\n      const useBackupKey = backupKey || this.backupKey;\r\n      const backupData = localStorage.getItem(useBackupKey);\r\n      \r\n      if (!backupData) {\r\n        throw new Error('ë°±ì—… ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');\r\n      }\r\n      \r\n      const backup = JSON.parse(backupData);\r\n      \r\n      console.log('ğŸ”„ ë°±ì—…ì—ì„œ ë³µì› ì‹œì‘...');\r\n      \r\n      // í˜„ì¬ miki ë°ì´í„° ëª¨ë‘ ì‚­ì œ\r\n      for (const key of Object.keys(localStorage)) {\r\n        if (key.startsWith('miki_') && key !== useBackupKey) {\r\n          localStorage.removeItem(key);\r\n        }\r\n      }\r\n      \r\n      // ë°±ì—… ë°ì´í„° ë³µì›\r\n      for (const [key, value] of Object.entries(backup.localStorage)) {\r\n        localStorage.setItem(key, value);\r\n      }\r\n      \r\n      console.log('âœ… ë°±ì—… ë³µì› ì™„ë£Œ');\r\n      return { success: true };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë°±ì—… ë³µì› ì‹¤íŒ¨:', error);\r\n      return { success: false, message: error.message };\r\n    }\r\n  }\r\n}\r\n\r\nexport default SyncManager; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\database.js","messages":[{"ruleId":"no-unused-vars","severity":1,"message":"'trans' is defined but never used. Allowed unused args must match /^_/u.","line":15,"column":61,"nodeType":"Identifier","messageId":"unusedVar","endLine":15,"endColumn":66},{"ruleId":"no-unused-vars","severity":1,"message":"'primKey' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":62,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":69},{"ruleId":"no-unused-vars","severity":1,"message":"'obj' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":71,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":74},{"ruleId":"no-unused-vars","severity":1,"message":"'trans' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":76,"nodeType":"Identifier","messageId":"unusedVar","endLine":20,"endColumn":81},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":32,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":32,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[958,1011],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":36,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":36,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1094,1144],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":39,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":39,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1199,1234],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1838,1889],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":65,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":65,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2108,2145],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":89,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":89,"endColumn":23,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3006,3049],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":98,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":98,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3160,3197],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":112,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":112,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[3583,3635],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":130,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":130,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[4078,4136],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":132,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":132,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[4167,4206],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":205,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":205,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[6136,6175],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":234,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":234,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[6917,6946],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":238,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":238,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7018,7057],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":261,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":261,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[7757,7797],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":280,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":280,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8273,8306],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":291,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":291,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[8742,8798],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":301,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":301,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[8959,9000],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":21,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Dexie from 'dexie';\r\n\r\n// Database schema\r\nexport class MikiDatabase extends Dexie {\r\n  constructor() {\r\n    super('MikiEditorDB');\r\n    \r\n    // Define schemas\r\n    this.version(1).stores({\r\n      documents: '++id, title, content, updatedAt, isUserEditedTitle, isAutoSyncedTitle',\r\n      syncQueue: '++queueId, documentId, operation, status, retryAt, retryCount, data'\r\n    });\r\n    \r\n    // Add hooks for automatic timestamps\r\n    this.documents.hook('creating', function (primKey, obj, trans) {\r\n      obj.createdAt = new Date().toISOString();\r\n      obj.updatedAt = new Date().toISOString();\r\n    });\r\n    \r\n    this.documents.hook('updating', function (modifications, primKey, obj, trans) {\r\n      modifications.updatedAt = new Date().toISOString();\r\n    });\r\n  }\r\n}\r\n\r\n// Create database instance\r\nexport const db = new MikiDatabase();\r\n\r\n// Migration utilities\r\nexport class DatabaseMigration {\r\n  static async migrateFromLocalStorage() {\r\n    console.log('ğŸ”„ localStorage â†’ IndexedDB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œì‘');\r\n    \r\n    try {\r\n      const localDocs = this.getLocalStorageDocuments();\r\n      console.log(`ğŸ“„ ë°œê²¬ëœ ë¡œì»¬ ë¬¸ì„œ: ${localDocs.length}ê°œ`);\r\n      \r\n      if (localDocs.length === 0) {\r\n        console.log('âœ… ë§ˆì´ê·¸ë ˆì´ì…˜í•  ë¬¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤.');\r\n        return { success: true, migrated: 0 };\r\n      }\r\n      \r\n      // Batch insert for better performance\r\n      await db.transaction('rw', db.documents, async () => {\r\n        for (const doc of localDocs) {\r\n          await db.documents.put({\r\n            id: doc.id,\r\n            title: doc.title || 'ì œëª© ì—†ìŒ',\r\n            content: doc.content || '',\r\n            updatedAt: doc.updatedAt || new Date().toISOString(),\r\n            isUserEditedTitle: doc.isUserEditedTitle || false,\r\n            isAutoSyncedTitle: doc.isAutoSyncedTitle || false\r\n          });\r\n        }\r\n      });\r\n      \r\n      console.log(`âœ… ${localDocs.length}ê°œ ë¬¸ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ`);\r\n      \r\n      // Mark migration as completed\r\n      localStorage.setItem('miki_migration_completed', 'true');\r\n      \r\n      return { success: true, migrated: localDocs.length };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤íŒ¨:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  static getLocalStorageDocuments() {\r\n    const documents = [];\r\n    const keys = Object.keys(localStorage);\r\n    \r\n    for (const key of keys) {\r\n      if (key.startsWith('miki_document_')) {\r\n        try {\r\n          const docData = JSON.parse(localStorage.getItem(key));\r\n          const id = key.replace('miki_document_', '');\r\n          \r\n          documents.push({\r\n            id: id,\r\n            title: docData.title || localStorage.getItem(`miki_title_${id}`) || 'ì œëª© ì—†ìŒ',\r\n            content: docData.content || '',\r\n            updatedAt: docData.updatedAt || new Date().toISOString(),\r\n            isUserEditedTitle: docData.isUserEditedTitle || false,\r\n            isAutoSyncedTitle: docData.isAutoSyncedTitle || false\r\n          });\r\n        } catch (error) {\r\n          console.warn(`âš ï¸ ë¬¸ì„œ íŒŒì‹± ì‹¤íŒ¨: ${key}`, error);\r\n        }\r\n      }\r\n    }\r\n    \r\n    return documents;\r\n  }\r\n  \r\n  static async cleanupLocalStorage() {\r\n    console.log('ğŸ§¹ localStorage ì •ë¦¬ ì‹œì‘');\r\n    \r\n    const keysToRemove = [];\r\n    const keys = Object.keys(localStorage);\r\n    \r\n    for (const key of keys) {\r\n      if (key.startsWith('miki_document_') || \r\n          key.startsWith('miki_title_') ||\r\n          key.startsWith('miki_search_cache_')) {\r\n        keysToRemove.push(key);\r\n      }\r\n    }\r\n    \r\n    keysToRemove.forEach(key => localStorage.removeItem(key));\r\n    console.log(`ğŸ—‘ï¸ ${keysToRemove.length}ê°œ í•­ëª© ì •ë¦¬ ì™„ë£Œ`);\r\n  }\r\n}\r\n\r\n// Sync queue management\r\nexport class SyncQueue {\r\n  static async enqueue(documentId, operation, data = {}) {\r\n    try {\r\n      await db.syncQueue.add({\r\n        documentId,\r\n        operation, // 'create', 'update', 'delete'\r\n        status: 'pending',\r\n        retryAt: new Date().toISOString(),\r\n        retryCount: 0,\r\n        data: JSON.stringify(data),\r\n        createdAt: new Date().toISOString()\r\n      });\r\n      \r\n      console.log(`ğŸ“¤ ë™ê¸°í™” íì— ì¶”ê°€: ${operation} - ${documentId}`);\r\n    } catch (error) {\r\n      console.error('âŒ ë™ê¸°í™” í ì¶”ê°€ ì‹¤íŒ¨:', error);\r\n    }\r\n  }\r\n  \r\n  static async getPendingItems() {\r\n    return await db.syncQueue\r\n      .where('status')\r\n      .equals('pending')\r\n      .and(item => new Date(item.retryAt) <= new Date())\r\n      .toArray();\r\n  }\r\n  \r\n  static async markAsCompleted(queueId) {\r\n    await db.syncQueue.update(queueId, { \r\n      status: 'completed',\r\n      completedAt: new Date().toISOString()\r\n    });\r\n  }\r\n  \r\n  static async markAsFailed(queueId, error) {\r\n    const item = await db.syncQueue.get(queueId);\r\n    const retryCount = (item?.retryCount || 0) + 1;\r\n    const maxRetries = 5;\r\n    \r\n    if (retryCount >= maxRetries) {\r\n      await db.syncQueue.update(queueId, {\r\n        status: 'failed',\r\n        retryCount,\r\n        lastError: error,\r\n        failedAt: new Date().toISOString()\r\n      });\r\n    } else {\r\n      // Exponential backoff: 2^retryCount minutes\r\n      const retryDelay = Math.pow(2, retryCount) * 60 * 1000;\r\n      const retryAt = new Date(Date.now() + retryDelay).toISOString();\r\n      \r\n      await db.syncQueue.update(queueId, {\r\n        status: 'pending',\r\n        retryCount,\r\n        retryAt,\r\n        lastError: error\r\n      });\r\n    }\r\n  }\r\n  \r\n  static async cleanup() {\r\n    // Remove completed items older than 7 days\r\n    const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString();\r\n    \r\n    await db.syncQueue\r\n      .where('status')\r\n      .equals('completed')\r\n      .and(item => item.completedAt < weekAgo)\r\n      .delete();\r\n  }\r\n}\r\n\r\n// Database utilities\r\nexport class DatabaseUtils {\r\n  static async exportData() {\r\n    try {\r\n      const documents = await db.documents.toArray();\r\n      const syncQueue = await db.syncQueue.toArray();\r\n      \r\n      const exportData = {\r\n        version: 1,\r\n        exportedAt: new Date().toISOString(),\r\n        documents,\r\n        syncQueue\r\n      };\r\n      \r\n      return JSON.stringify(exportData, null, 2);\r\n    } catch (error) {\r\n      console.error('âŒ ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨:', error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  static async importData(jsonData) {\r\n    try {\r\n      const data = JSON.parse(jsonData);\r\n      \r\n      if (data.version !== 1) {\r\n        throw new Error('ì§€ì›í•˜ì§€ ì•ŠëŠ” ë°ì´í„° ë²„ì „ì…ë‹ˆë‹¤.');\r\n      }\r\n      \r\n      await db.transaction('rw', [db.documents, db.syncQueue], async () => {\r\n        // Clear existing data\r\n        await db.documents.clear();\r\n        await db.syncQueue.clear();\r\n        \r\n        // Import documents\r\n        if (data.documents?.length > 0) {\r\n          await db.documents.bulkAdd(data.documents);\r\n        }\r\n        \r\n        // Import sync queue\r\n        if (data.syncQueue?.length > 0) {\r\n          await db.syncQueue.bulkAdd(data.syncQueue);\r\n        }\r\n      });\r\n      \r\n      console.log('âœ… ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ');\r\n      return { success: true };\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n  \r\n  static async getStorageInfo() {\r\n    try {\r\n      const docCount = await db.documents.count();\r\n      const queueCount = await db.syncQueue.count();\r\n      \r\n      // Estimate storage usage (rough calculation)\r\n      const docs = await db.documents.toArray();\r\n      const totalSize = docs.reduce((size, doc) => {\r\n        return size + (doc.content?.length || 0) + (doc.title?.length || 0);\r\n      }, 0);\r\n      \r\n      return {\r\n        documentCount: docCount,\r\n        queueCount: queueCount,\r\n        estimatedSize: totalSize,\r\n        formattedSize: this.formatBytes(totalSize)\r\n      };\r\n    } catch (error) {\r\n      console.error('âŒ ì €ì¥ì†Œ ì •ë³´ ì¡°íšŒ ì‹¤íŒ¨:', error);\r\n      return null;\r\n    }\r\n  }\r\n  \r\n  static formatBytes(bytes) {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  }\r\n}\r\n\r\n// Initialize database and handle migrations\r\nexport const initializeDatabase = async () => {\r\n  try {\r\n    // Open database\r\n    await db.open();\r\n    console.log('âœ… IndexedDB ì—°ê²° ì„±ê³µ');\r\n    \r\n    // Check if migration is needed\r\n    const migrationCompleted = localStorage.getItem('miki_migration_completed');\r\n    \r\n    if (!migrationCompleted) {\r\n      const result = await DatabaseMigration.migrateFromLocalStorage();\r\n      \r\n      if (result.success && result.migrated > 0) {\r\n        // Optional: Clean up localStorage after successful migration\r\n        // await DatabaseMigration.cleanupLocalStorage();\r\n        console.log('ğŸ“¦ ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ, localStorageëŠ” ë°±ì—…ìš©ìœ¼ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.');\r\n      }\r\n    }\r\n    \r\n    // Cleanup old sync queue items\r\n    await SyncQueue.cleanup();\r\n    \r\n    return { success: true };\r\n    \r\n  } catch (error) {\r\n    console.error('âŒ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\errorHandler.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[3010,3172],"text":""},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ì—ëŸ¬ íƒ€ì… ì •ì˜\r\nexport const ErrorTypes = {\r\n  NETWORK_ERROR: 'NETWORK_ERROR',\r\n  SERVER_ERROR: 'SERVER_ERROR',\r\n  NOT_FOUND: 'NOT_FOUND',\r\n  VALIDATION_ERROR: 'VALIDATION_ERROR',\r\n  UNKNOWN_ERROR: 'UNKNOWN_ERROR',\r\n};\r\n\r\n// ì—ëŸ¬ ë¶„ë¥˜ í•¨ìˆ˜\r\nexport const classifyError = (error) => {\r\n  if (!error) return ErrorTypes.UNKNOWN_ERROR;\r\n\r\n  // ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜\r\n  if (error.name === 'TypeError' && error.message.includes('fetch')) {\r\n    return ErrorTypes.NETWORK_ERROR;\r\n  }\r\n\r\n  // HTTP ìƒíƒœ ì½”ë“œ ê¸°ë°˜ ë¶„ë¥˜\r\n  if (error.message.includes('HTTP')) {\r\n    const statusMatch = error.message.match(/HTTP (\\d+)/);\r\n    if (statusMatch) {\r\n      const status = parseInt(statusMatch[1]);\r\n      if (status === 404) return ErrorTypes.NOT_FOUND;\r\n      if (status >= 400 && status < 500) return ErrorTypes.VALIDATION_ERROR;\r\n      if (status >= 500) return ErrorTypes.SERVER_ERROR;\r\n    }\r\n  }\r\n\r\n  // íŠ¹ì • ì—ëŸ¬ ë©”ì‹œì§€ íŒ¨í„´\r\n  if (error.message.includes('ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤')) {\r\n    return ErrorTypes.NOT_FOUND;\r\n  }\r\n\r\n  return ErrorTypes.UNKNOWN_ERROR;\r\n};\r\n\r\n// ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€ ìƒì„±\r\nexport const getErrorMessage = (error, context = '') => {\r\n  const errorType = classifyError(error);\r\n  \r\n  const messages = {\r\n    [ErrorTypes.NETWORK_ERROR]: {\r\n      title: 'ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜',\r\n      message: 'ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',\r\n      action: 'ë‹¤ì‹œ ì‹œë„',\r\n      canRetry: true,\r\n    },\r\n    [ErrorTypes.SERVER_ERROR]: {\r\n      title: 'ì„œë²„ ì˜¤ë¥˜',\r\n      message: 'ì„œë²„ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',\r\n      action: 'ë‹¤ì‹œ ì‹œë„',\r\n      canRetry: true,\r\n    },\r\n    [ErrorTypes.NOT_FOUND]: {\r\n      title: 'ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ',\r\n      message: 'ìš”ì²­í•œ ë¬¸ì„œê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.',\r\n      action: 'ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°',\r\n      canRetry: false,\r\n    },\r\n    [ErrorTypes.VALIDATION_ERROR]: {\r\n      title: 'ì…ë ¥ ì˜¤ë¥˜',\r\n      message: 'ì…ë ¥í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.',\r\n      action: 'ìˆ˜ì •í•˜ê¸°',\r\n      canRetry: false,\r\n    },\r\n    [ErrorTypes.UNKNOWN_ERROR]: {\r\n      title: 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜',\r\n      message: 'ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',\r\n      action: 'ë‹¤ì‹œ ì‹œë„',\r\n      canRetry: true,\r\n    },\r\n  };\r\n\r\n  const errorInfo = messages[errorType];\r\n  \r\n  // ì»¨í…ìŠ¤íŠ¸ë³„ ë©”ì‹œì§€ ì»¤ìŠ¤í„°ë§ˆì´ì§•\r\n  if (context) {\r\n    switch (context) {\r\n      case 'save':\r\n        errorInfo.message = `ë¬¸ì„œ ì €ì¥ ì¤‘ ${errorInfo.message.toLowerCase()}`;\r\n        break;\r\n      case 'load':\r\n        errorInfo.message = `ë¬¸ì„œ ë¶ˆëŸ¬ì˜¤ê¸° ì¤‘ ${errorInfo.message.toLowerCase()}`;\r\n        break;\r\n      case 'delete':\r\n        errorInfo.message = `ë¬¸ì„œ ì‚­ì œ ì¤‘ ${errorInfo.message.toLowerCase()}`;\r\n        break;\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...errorInfo,\r\n    originalError: error,\r\n    timestamp: new Date().toISOString(),\r\n  };\r\n};\r\n\r\n// ì—ëŸ¬ ë¡œê¹… í•¨ìˆ˜\r\nexport const logError = (error, context = '', additionalInfo = {}) => {\r\n  const errorInfo = getErrorMessage(error, context);\r\n  \r\n  const logData = {\r\n    ...errorInfo,\r\n    context,\r\n    additionalInfo,\r\n    userAgent: navigator.userAgent,\r\n    url: window.location.href,\r\n    timestamp: new Date().toISOString(),\r\n  };\r\n\r\n  // ê°œë°œ í™˜ê²½ì—ì„œë§Œ ìƒì„¸ ë¡œê·¸ ì¶œë ¥\r\n  if ((typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') || false) {\r\n    console.error('ğŸ” Error Details:', {\r\n      message: error.message,\r\n      stack: error.stack,\r\n      context,\r\n      timestamp: new Date().toISOString()\r\n    });\r\n  }\r\n\r\n  // í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” ì—ëŸ¬ ë¦¬í¬íŒ… ì„œë¹„ìŠ¤ë¡œ ì „ì†¡\r\n  if ((typeof process !== 'undefined' && process.env?.NODE_ENV === 'production') || false) {\r\n    // TODO: Sentry.captureException(error, { extra: logData });\r\n  }\r\n\r\n  return logData;\r\n};\r\n\r\n// ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬ì¸ì§€ í™•ì¸\r\nexport const isRetryableError = (error) => {\r\n  const errorType = classifyError(error);\r\n  return [ErrorTypes.NETWORK_ERROR, ErrorTypes.SERVER_ERROR, ErrorTypes.UNKNOWN_ERROR].includes(errorType);\r\n};\r\n\r\n// ì˜¤í”„ë¼ì¸ ìƒíƒœ ê°ì§€\r\nexport const isOfflineError = (error) => {\r\n  return classifyError(error) === ErrorTypes.NETWORK_ERROR;\r\n}; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\index.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\keywordExtractor.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\logger.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[590,633],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[721,763],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":37,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":37,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"info"},"fix":{"range":[851,893],"text":""},"desc":"Remove the console.info()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":43,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":43,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[994,1035],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":50,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":50,"endColumn":19,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"time"},"fix":{"range":[1146,1188],"text":""},"desc":"Remove the console.time()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":56,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":56,"endColumn":22,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"timeEnd"},"fix":{"range":[1289,1334],"text":""},"desc":"Remove the console.timeEnd()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":70,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":70,"endColumn":16,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1603,1635],"text":""},"desc":"Remove the console.log()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// í™˜ê²½ë³„ ë¡œê¹… ì œì–´ ìœ í‹¸ë¦¬í‹°\r\nconst isDevelopment = (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') || false;\r\nconst isTest = (typeof process !== 'undefined' && process.env?.NODE_ENV === 'test') || false;\r\n\r\n// ë¡œê·¸ ë ˆë²¨ ì •ì˜\r\nconst LOG_LEVELS = {\r\n  ERROR: 0,\r\n  WARN: 1,\r\n  INFO: 2,\r\n  DEBUG: 3\r\n};\r\n\r\n// í˜„ì¬ ë¡œê·¸ ë ˆë²¨ ì„¤ì • (í™˜ê²½ë³€ìˆ˜ë¡œ ì œì–´ ê°€ëŠ¥)\r\nconst currentLogLevel = isDevelopment \r\n  ? LOG_LEVELS.DEBUG \r\n  : LOG_LEVELS.ERROR;\r\n\r\nclass Logger {\r\n  constructor(module = 'App') {\r\n    this.module = module;\r\n  }\r\n\r\n  error(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.ERROR) {\r\n      console.error(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  warn(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.WARN) {\r\n      console.warn(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  info(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.INFO) {\r\n      console.info(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  debug(...args) {\r\n    if (currentLogLevel >= LOG_LEVELS.DEBUG && !isTest) {\r\n      console.log(`[${this.module}]`, ...args);\r\n    }\r\n  }\r\n\r\n  // ì„±ëŠ¥ ì¸¡ì •ìš©\r\n  time(label) {\r\n    if (currentLogLevel >= LOG_LEVELS.DEBUG && !isTest) {\r\n      console.time(`[${this.module}] ${label}`);\r\n    }\r\n  }\r\n\r\n  timeEnd(label) {\r\n    if (currentLogLevel >= LOG_LEVELS.DEBUG && !isTest) {\r\n      console.timeEnd(`[${this.module}] ${label}`);\r\n    }\r\n  }\r\n}\r\n\r\n// ëª¨ë“ˆë³„ ë¡œê±° ìƒì„± í•¨ìˆ˜\r\nexport const createLogger = (module) => new Logger(module);\r\n\r\n// ê¸°ë³¸ ë¡œê±°\r\nexport const logger = new Logger('App');\r\n\r\n// ë ˆê±°ì‹œ console.log ëŒ€ì²´ìš© (ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜)\r\nexport const debugLog = (...args) => {\r\n  if (isDevelopment && !isTest) {\r\n    console.log('[DEBUG]', ...args);\r\n  }\r\n};\r\n\r\nexport default logger; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]},{"filePath":"C:\\Users\\halim\\Desktop\\miki_v4\\v7\\home\\ubuntu\\miki-editor\\src\\utils\\searchCache.js","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":27,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":27,"endColumn":18,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[801,848],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"log"},"fix":{"range":[1275,1326],"text":""},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[1692,1741],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[2522,2570],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":106,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":106,"endColumn":24,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[2922,2984],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":126,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":126,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3370,3418],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":145,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":145,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[3804,3853],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":180,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":180,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[4687,4735],"text":""},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":226,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":226,"endColumn":20,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"error"},"fix":{"range":[5934,5983],"text":""},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":279,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":279,"endColumn":21,"suggestions":[{"messageId":"removeConsole","data":{"propertyName":"warn"},"fix":{"range":[7315,7365],"text":""},"desc":"Remove the console.warn()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * ê²€ìƒ‰ ê²°ê³¼ ìºì‹± ë° ê´€ë¦¬ë¥¼ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤\r\n * ë©”ëª¨ë¦¬ ë° ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ í™œìš©í•˜ì—¬ ê²€ìƒ‰ ê²°ê³¼ ìºì‹±\r\n */\r\n\r\nclass SearchCache {\r\n  constructor(options = {}) {\r\n    this.memoryCache = new Map(); // ë©”ëª¨ë¦¬ ë‚´ ìºì‹œ\r\n    this.localStoragePrefix = options.localStoragePrefix || 'miki_search_cache_';\r\n    this.defaultTtl = options.defaultTtl || 1000 * 60 * 30; // ê¸°ë³¸ TTL: 30ë¶„\r\n    this.maxCacheSize = options.maxCacheSize || 100; // ìµœëŒ€ ìºì‹œ í•­ëª© ìˆ˜\r\n    this.useLocalStorage = options.useLocalStorage !== false; // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ ì‚¬ìš© ì—¬ë¶€\r\n    \r\n    // ì´ˆê¸°í™” ì‹œ ìºì‹œ ì •ë¦¬\r\n    this.cleanup();\r\n  }\r\n  \r\n  /**\r\n   * ìºì‹œì—ì„œ ê²€ìƒ‰ ê²°ê³¼ ê°€ì ¸ì˜¤ê¸°\r\n   * @param {string} key - ìºì‹œ í‚¤\r\n   * @returns {Object|null} - ìºì‹œëœ ê²°ê³¼ ë˜ëŠ” null\r\n   */\r\n  get(key) {\r\n    // 1. ë©”ëª¨ë¦¬ ìºì‹œ í™•ì¸\r\n    const memoryItem = this.memoryCache.get(key);\r\n    if (memoryItem && memoryItem.expiry > Date.now()) {\r\n      console.log(`[SearchCache] ë©”ëª¨ë¦¬ ìºì‹œ íˆíŠ¸: ${key}`);\r\n      return memoryItem.value;\r\n    }\r\n    \r\n    // 2. ë©”ëª¨ë¦¬ ìºì‹œì— ì—†ê±°ë‚˜ ë§Œë£Œëœ ê²½ìš° ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í™•ì¸\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        const storageKey = this.localStoragePrefix + key;\r\n        const storedItem = localStorage.getItem(storageKey);\r\n        \r\n        if (storedItem) {\r\n          const item = JSON.parse(storedItem);\r\n          \r\n          // ë§Œë£Œ í™•ì¸\r\n          if (item.expiry > Date.now()) {\r\n            console.log(`[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ íˆíŠ¸: ${key}`);\r\n            \r\n            // ë©”ëª¨ë¦¬ ìºì‹œì—ë„ ì¶”ê°€\r\n            this.memoryCache.set(key, {\r\n              value: item.value,\r\n              expiry: item.expiry\r\n            });\r\n            \r\n            return item.value;\r\n          } else {\r\n            // ë§Œë£Œëœ í•­ëª© ì œê±°\r\n            localStorage.removeItem(storageKey);\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì•¡ì„¸ìŠ¤ ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n    \r\n    // ìºì‹œ ë¯¸ìŠ¤\r\n    return null;\r\n  }\r\n  \r\n  /**\r\n   * ê²€ìƒ‰ ê²°ê³¼ë¥¼ ìºì‹œì— ì €ì¥\r\n   * @param {string} key - ìºì‹œ í‚¤\r\n   * @param {Object} value - ì €ì¥í•  ê°’\r\n   * @param {number} ttl - ìºì‹œ ìœ íš¨ ì‹œê°„(ms)\r\n   */\r\n  set(key, value, ttl = this.defaultTtl) {\r\n    const expiry = Date.now() + ttl;\r\n    \r\n    // 1. ë©”ëª¨ë¦¬ ìºì‹œì— ì €ì¥\r\n    this.memoryCache.set(key, {\r\n      value,\r\n      expiry\r\n    });\r\n    \r\n    // ë©”ëª¨ë¦¬ ìºì‹œ í¬ê¸° ì œí•œ\r\n    if (this.memoryCache.size > this.maxCacheSize) {\r\n      this.pruneMemoryCache();\r\n    }\r\n    \r\n    // 2. ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        const storageKey = this.localStoragePrefix + key;\r\n        localStorage.setItem(storageKey, JSON.stringify({\r\n          value,\r\n          expiry\r\n        }));\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥ ì˜¤ë¥˜:', e);\r\n        // ì €ì¥ ì‹¤íŒ¨ ì‹œ ê°€ì¥ ì˜¤ë˜ëœ í•­ëª© ì œê±° í›„ ì¬ì‹œë„\r\n        this.pruneLocalStorageCache();\r\n        \r\n        try {\r\n          const storageKey = this.localStoragePrefix + key;\r\n          localStorage.setItem(storageKey, JSON.stringify({\r\n            value,\r\n            expiry\r\n          }));\r\n        } catch (retryError) {\r\n          // ì¬ì‹œë„ ì‹¤íŒ¨ ì‹œ ë¬´ì‹œ\r\n          console.error('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì €ì¥ ì¬ì‹œë„ ì‹¤íŒ¨:', retryError);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * íŠ¹ì • í‚¤ì˜ ìºì‹œ ì‚­ì œ\r\n   * @param {string} key - ì‚­ì œí•  ìºì‹œ í‚¤\r\n   */\r\n  delete(key) {\r\n    // ë©”ëª¨ë¦¬ ìºì‹œì—ì„œ ì‚­ì œ\r\n    this.memoryCache.delete(key);\r\n    \r\n    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ ì‚­ì œ\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        const storageKey = this.localStoragePrefix + key;\r\n        localStorage.removeItem(storageKey);\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì‚­ì œ ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ëª¨ë“  ìºì‹œ í•­ëª© ì œê±°\r\n   */\r\n  clear() {\r\n    // ë©”ëª¨ë¦¬ ìºì‹œ ì´ˆê¸°í™”\r\n    this.memoryCache.clear();\r\n    \r\n    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ ì´ˆê¸°í™”\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        Object.keys(localStorage)\r\n          .filter(key => key.startsWith(this.localStoragePrefix))\r\n          .forEach(key => localStorage.removeItem(key));\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì´ˆê¸°í™” ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë§Œë£Œëœ ìºì‹œ í•­ëª© ì œê±°\r\n   */\r\n  cleanup() {\r\n    const now = Date.now();\r\n    \r\n    // ë©”ëª¨ë¦¬ ìºì‹œ ì •ë¦¬\r\n    for (const [key, item] of this.memoryCache.entries()) {\r\n      if (item.expiry < now) {\r\n        this.memoryCache.delete(key);\r\n      }\r\n    }\r\n    \r\n    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ ì •ë¦¬\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        Object.keys(localStorage)\r\n          .filter(key => key.startsWith(this.localStoragePrefix))\r\n          .forEach(key => {\r\n            try {\r\n              const item = JSON.parse(localStorage.getItem(key));\r\n              if (item.expiry < now) {\r\n                localStorage.removeItem(key);\r\n              }\r\n            } catch (e) {\r\n              // íŒŒì‹± ì˜¤ë¥˜ ì‹œ í•­ëª© ì œê±°\r\n              localStorage.removeItem(key);\r\n            }\r\n          });\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ë©”ëª¨ë¦¬ ìºì‹œ ì •ë¦¬ (ê°€ì¥ ì˜¤ë˜ëœ í•­ëª©ë¶€í„° ì œê±°)\r\n   */\r\n  pruneMemoryCache() {\r\n    // ë§Œë£Œ ì‹œê°„ ê¸°ì¤€ ì •ë ¬\r\n    const entries = Array.from(this.memoryCache.entries())\r\n      .sort((a, b) => a[1].expiry - b[1].expiry);\r\n    \r\n    // ì ˆë°˜ ì œê±°\r\n    const removeCount = Math.floor(this.memoryCache.size / 2);\r\n    entries.slice(0, removeCount).forEach(([key]) => {\r\n      this.memoryCache.delete(key);\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ ì •ë¦¬ (ê°€ì¥ ì˜¤ë˜ëœ í•­ëª©ë¶€í„° ì œê±°)\r\n   */\r\n  pruneLocalStorageCache() {\r\n    try {\r\n      // ìºì‹œ í•­ëª© ì¶”ì¶œ ë° ì •ë ¬\r\n      const cacheItems = Object.keys(localStorage)\r\n        .filter(key => key.startsWith(this.localStoragePrefix))\r\n        .map(key => {\r\n          try {\r\n            return {\r\n              key,\r\n              value: JSON.parse(localStorage.getItem(key))\r\n            };\r\n          } catch (e) {\r\n            return { key, value: { expiry: 0 } };\r\n          }\r\n        })\r\n        .sort((a, b) => a.value.expiry - b.value.expiry);\r\n      \r\n      // ì ˆë°˜ ì œê±°\r\n      const removeCount = Math.floor(cacheItems.length / 2);\r\n      cacheItems.slice(0, removeCount).forEach(item => {\r\n        localStorage.removeItem(item.key);\r\n      });\r\n    } catch (e) {\r\n      console.error('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬ ì˜¤ë¥˜:', e);\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * ê²€ìƒ‰ ì¿¼ë¦¬ì— ëŒ€í•œ ìºì‹œ í‚¤ ìƒì„±\r\n   * @param {string} type - ê²€ìƒ‰ ìœ í˜• (keyword, ai ë“±)\r\n   * @param {string} query - ê²€ìƒ‰ ì¿¼ë¦¬\r\n   * @param {Object} options - ì¶”ê°€ ì˜µì…˜\r\n   * @returns {string} - ìºì‹œ í‚¤\r\n   */\r\n  static generateKey(type, query, options = {}) {\r\n    // ê¸°ë³¸ í‚¤ ìƒì„±\r\n    let key = `${type}_${query.toLowerCase().trim()}`;\r\n    \r\n    // ì˜µì…˜ì— ë”°ë¥¸ í‚¤ ë³€í˜•\r\n    if (options) {\r\n      const optionsStr = Object.entries(options)\r\n        .filter(([_, value]) => value !== undefined)\r\n        .sort(([keyA], [keyB]) => keyA.localeCompare(keyB))\r\n        .map(([key, value]) => `${key}:${JSON.stringify(value)}`)\r\n        .join('_');\r\n      \r\n      if (optionsStr) {\r\n        key += `_${optionsStr}`;\r\n      }\r\n    }\r\n    \r\n    return key;\r\n  }\r\n  \r\n  /**\r\n   * ëª¨ë“  ìºì‹œ í‚¤ ë°˜í™˜\r\n   * @returns {Array<string>} - ëª¨ë“  ìºì‹œ í‚¤ ë°°ì—´\r\n   */\r\n  getAllKeys() {\r\n    const keys = new Set();\r\n    \r\n    // ë©”ëª¨ë¦¬ ìºì‹œ í‚¤ ì¶”ê°€\r\n    for (const key of this.memoryCache.keys()) {\r\n      keys.add(key);\r\n    }\r\n    \r\n    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ìºì‹œ í‚¤ ì¶”ê°€\r\n    if (this.useLocalStorage) {\r\n      try {\r\n        Object.keys(localStorage)\r\n          .filter(key => key.startsWith(this.localStoragePrefix))\r\n          .forEach(key => {\r\n            const cacheKey = key.replace(this.localStoragePrefix, '');\r\n            keys.add(cacheKey);\r\n          });\r\n      } catch (e) {\r\n        console.warn('[SearchCache] ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤ ì¡°íšŒ ì˜¤ë¥˜:', e);\r\n      }\r\n    }\r\n    \r\n    return Array.from(keys);\r\n  }\r\n}\r\n\r\nexport default SearchCache; ","usedDeprecatedRules":[{"ruleId":"no-extra-semi","replacedBy":[]},{"ruleId":"no-mixed-spaces-and-tabs","replacedBy":[]}]}]
