í•µì‹¬ ë¬¸ì œ: useDocuments.jsì˜ useSaveDocumentê°€ document.idë¥¼ ì „ë‹¬í•˜ì§€ ì•Šê³  ìžˆìŠµë‹ˆë‹¤!â€‹

í˜„ìž¬ ì½”ë“œë¥¼ ë³´ë©´:

javascript
if (isNew) {
  saved = await storage.savePost({
    content: document.content ?? '',
    title: document.title ?? '',
    titleMode: document.titleMode || 'auto',
    // âŒ idê°€ ëˆ„ë½ë¨!
  });
}
ì´ ë•Œë¬¸ì— storage-client.jsì—ì„œ:

javascript
let id = post.id; // undefined!
if (!id || id.startsWith('memo_')) {
  // í•­ìƒ ì—¬ê¸°ë¡œ ë“¤ì–´ì™€ì„œ ìƒˆ íŒŒì¼ ìƒì„±
  filename = generateUniqueFilename(slug, existingFilenames);
}
ë§¤ë²ˆ ìƒˆ íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.â€‹

ðŸ”§ ìˆ˜ì •ì•ˆ: useDocuments.js
íŒŒì¼: src/hooks/useDocuments.js (ì „ì²´ useSaveDocument êµì²´)

javascript
export function useSaveDocument() {
  const qc = useQueryClient();
  return useMutation({
    mutationFn: async (document) => {
      if (!document || !document.id) throw new Error('ë¬¸ì„œ IDê°€ í•„ìš”í•©ë‹ˆë‹¤.');
      
      const isNew = document.isEmpty || !document.sha;
      let saved;
      
      if (isNew) {
        // âœ… CRITICAL FIX: document.idë¥¼ ë°˜ë“œì‹œ ì „ë‹¬
        saved = await storage.savePost({
          id: document.id, // ðŸ”¥ ì´ ì¤„ì´ ëˆ„ë½ë˜ì–´ ìžˆì—ˆìŒ!
          content: document.content ?? '',
          title: document.title ?? '',
          titleMode: document.titleMode || 'auto',
          sha: document.sha, // ê¸°ì¡´ íŒŒì¼ì´ë©´ SHAë„ ì „ë‹¬
        });
      } else {
        saved = await storage.updatePost(document.id, {
          content: document.content ?? '',
          title: document.title ?? '',
          titleMode: document.titleMode || 'auto',
        });
      }
      
      // [ë¶„ì„ ê²°ê³¼ ë°˜ì˜] ì„œë²„ ì‘ë‹µê³¼ ì›ëž˜ document ê°ì²´ë¥¼ í•©ì³ì„œ ë°˜í™˜
      return { ...document, ...saved };
    },
    onSuccess: (saved) => {
      try {
        qc.setQueryData(queryKeys.documents.lists(), (old) => {
          const prev = Array.isArray(old) ? old : [];
          const filtered = prev.filter((d) => d && d.id !== saved.id);
          const preview = (saved.content || '').substring(0, 150);
          const entry = {
            id: saved.id,
            title: saved.title,
            titleMode: saved.titleMode || 'auto',
            preview,
            updatedAt: new Date().toISOString(),
            createdAt: saved.createdAt || new Date().toISOString(),
            size: (saved.content || '').length,
          };
          return [entry, ...filtered];
        });
      } catch {}
    },
  });
}
ðŸ”§ ì¶”ê°€ ìˆ˜ì •: storage-client.js (ì•ˆì „ì„± ê°•í™”)
íŒŒì¼: src/utils/storage-client.js (savePost ë©”ì„œë“œ ìˆ˜ì •)

javascript
async savePost(post) {
  const github = await getGithub();
  
  // âœ… Slugify ì ìš©: ì œëª© â†’ íŒŒì¼ëª…
  const title = post.title || extractTitle(post.content);
  const slug = slugify(title);
  
  // ê¸°ì¡´ íŒŒì¼ ëª©ë¡ ì¡°íšŒ (ì¤‘ë³µ ë°©ì§€ ë° ê¸°ì¡´ íŒŒì¼ ì°¾ê¸°)
  const existingFiles = await this.getPostList();
  const existingFilenames = existingFiles.map(f => `${f.id}.md`);
  
  // ê¸°ì¡´ IDê°€ ìžˆëŠ”ì§€ í™•ì¸
  let id = post.id;
  let filename;
  let oldFilename = null;
  
  // ðŸ”¥ CRITICAL FIX: memo_ IDë¥¼ ê°€ì§„ ìƒˆ ë¬¸ì„œ ì²˜ë¦¬
  if (!id || id.startsWith('memo_')) {
    // 1. ìƒˆ ê¸€ì¸ ê²½ìš°: Slug ê¸°ë°˜ ìƒˆ íŒŒì¼ëª… ìƒì„±
    filename = generateUniqueFilename(slug, existingFilenames);
    id = filename.replace('.md', '');
    console.log(`ðŸ“ [SAVE] ìƒˆ ë¬¸ì„œ ìƒì„±: memo_ â†’ ${id}`);
  } else {
    // 2. ê¸°ì¡´ ê¸€ì¸ ê²½ìš°: ì œëª©ì´ ë°”ë€Œì—ˆëŠ”ì§€ í™•ì¸
    const currentSlug = slugify(title);
    
    // í˜„ìž¬ IDì™€ ì˜ˆìƒë˜ëŠ” íŒŒì¼ëª…ì´ ë‹¤ë¥´ë©´ (ì œëª©ì´ ë°”ë€Œì–´ì„œ ìŠ¬ëŸ¬ê·¸ê°€ ë‹¬ë¼ì§)
    if (id !== currentSlug && existingFiles.find(f => f.id === id)) {
      // ì´ë¦„ ë³€ê²½ ë¡œì§: ìƒˆ íŒŒì¼ëª… ìƒì„±
      filename = generateUniqueFilename(currentSlug, existingFilenames);
      oldFilename = `${id}.md`; // ì‚­ì œí•  êµ¬ íŒŒì¼ëª…
      console.log(`ðŸ”„ [SAVE] íŒŒì¼ëª… ë³€ê²½: ${id}.md â†’ ${filename}`);
      id = filename.replace('.md', ''); // ìƒˆ ID í• ë‹¹
    } else {
      // ì œëª©ì´ ê°™ê±°ë‚˜ ë³€ê²½ ë¶ˆí•„ìš”
      filename = `${id}.md`;
      console.log(`ðŸ’¾ [SAVE] ê¸°ì¡´ ë¬¸ì„œ ì—…ë°ì´íŠ¸: ${id}`);
    }
  }
  
  // íŒŒì¼ ìƒì„±/ì—…ë°ì´íŠ¸
  const sha = await github.createOrUpdateFile(
    'miki-data',
    `miki-editor/posts/${filename}`,
    post.content || '',
    `Create/Update ${title}`,
    post.sha
  );
  
  // ì´ë¦„ì´ ë°”ë€Œì—ˆìœ¼ë©´ ê¸°ì¡´ íŒŒì¼ ì‚­ì œ (Renaming íš¨ê³¼)
  if (oldFilename) {
    try {
      const oldFile = existingFiles.find(f => f.id === oldFilename.replace('.md', ''));
      if (oldFile) {
        await github.deleteFile(
          'miki-data',
          `miki-editor/posts/${oldFilename}`,
          `Rename: ${oldFilename} -> ${filename}`,
          oldFile.sha
        );
      }
    } catch (e) {
      console.error('Failed to delete old file during rename:', e);
    }
  }
  
  return {
    ...post,
    id,
    title,
    sha,
    metadata: extractMetadata(post.content || '')
  };
},